(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],u=0,f=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(n[r]=c[r]);for(p&&p(e);f.length;)f.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var n,e=0;e<o.length;e++){for(var t=o[e],r=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),n=i(i.s=t[0]))}return n}var r={},a={1:0},o=[];function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(n){var e=[],t=a[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=a[n]=[e,r]}));e.push(t[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(n){return i.p+"assets/js/"+({}[n]||n)+"."+{2:"5d5e6ca1",3:"c173c7f3",4:"72779179",5:"825c88e0",6:"d93ced19",7:"2ecb8dde",8:"51c238de",9:"93b5e4aa",10:"42dc92f5",11:"c8e502f6"}[n]+".js"}(n);var c=new Error;o=function(e){s.onerror=s.onload=null,clearTimeout(l);var t=a[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,t[1](c)}a[n]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},i.m=n,i.c=r,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)i.d(t,r,function(e){return n[e]}.bind(null,r));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="/ccc-docs/",i.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;o.push([232,0]),t()}([function(n,e){var t=function(n){return n&&n.Math==Math&&n};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,e,t){var r=t(60),a=Function.prototype,o=a.bind,i=a.call,s=r&&o.bind(i,i);n.exports=r?function(n){return n&&s(n)}:function(n){return n&&function(){return i.apply(n,arguments)}}},function(n,e,t){var r=t(0),a=t(39).f,o=t(23),i=t(14),s=t(108),c=t(114),l=t(100);n.exports=function(n,e){var t,p,u,f,d,m=n.target,h=n.global,b=n.stat;if(t=h?r:b?r[m]||s(m,{}):(r[m]||{}).prototype)for(p in e){if(f=e[p],u=n.noTargetGet?(d=a(t,p))&&d.value:t[p],!l(h?p:m+(b?".":"#")+p,n.forced)&&void 0!==u){if(typeof f==typeof u)continue;c(f,u)}(n.sham||u&&u.sham)&&o(f,"sham",!0),i(t,p,f,n)}}},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e){n.exports=function(n){return"function"==typeof n}},function(n,e,t){var r=t(0),a=t(76),o=t(10),i=t(77),s=t(109),c=t(151),l=a("wks"),p=r.Symbol,u=p&&p.for,f=c?p:p&&p.withoutSetter||i;n.exports=function(n){if(!o(l,n)||!s&&"string"!=typeof l[n]){var e="Symbol."+n;s&&o(p,n)?l[n]=p[n]:l[n]=c&&u?u(e):f(e)}return l[n]}},function(n,e,t){var r=t(117),a=t(14),o=t(248);r||a(Object.prototype,"toString",o,{unsafe:!0})},function(n,e,t){var r=t(0),a=t(8),o=r.String,i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not an object")}},function(n,e,t){var r=t(4);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(3);n.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e,t){var r=t(1),a=t(15),o=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return o(a(n),e)}},function(n,e,t){var r=t(60),a=Function.prototype.call;n.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},function(n,e,t){var r=t(0),a=t(73),o=r.String;n.exports=function(n){if("Symbol"===a(n))throw TypeError("Cannot convert a Symbol value to a string");return o(n)}},function(n,e,t){var r=t(0),a=t(9),o=t(153),i=t(152),s=t(7),c=t(79),l=r.TypeError,p=Object.defineProperty,u=Object.getOwnPropertyDescriptor;e.f=a?i?function(n,e,t){if(s(n),e=c(e),s(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=u(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return p(n,e,t)}:p:function(n,e,t){if(s(n),e=c(e),s(t),o)try{return p(n,e,t)}catch(n){}if("get"in t||"set"in t)throw l("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var r=t(0),a=t(4),o=t(10),i=t(23),s=t(108),c=t(84),l=t(36),p=t(63).CONFIGURABLE,u=l.get,f=l.enforce,d=String(String).split("String");(n.exports=function(n,e,t,c){var l,u=!!c&&!!c.unsafe,m=!!c&&!!c.enumerable,h=!!c&&!!c.noTargetGet,b=c&&void 0!==c.name?c.name:e;a(t)&&("Symbol("===String(b).slice(0,7)&&(b="["+String(b).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(t,"name")||p&&t.name!==b)&&i(t,"name",b),(l=f(t)).source||(l.source=d.join("string"==typeof b?b:""))),n!==r?(u?!h&&n[e]&&(m=!0):delete n[e],m?n[e]=t:i(n,e,t)):m?n[e]=t:s(e,t)})(Function.prototype,"toString",(function(){return a(this)&&u(this).source||c(this)}))},function(n,e,t){var r=t(0),a=t(17),o=r.Object;n.exports=function(n){return o(a(n))}},function(n,e,t){var r=t(0),a=t(4),o=function(n){return a(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?o(r[n]):r[n]&&r[n][e]}},function(n,e,t){var r=t(0).TypeError;n.exports=function(n){if(null==n)throw r("Can't call method on "+n);return n}},function(n,e,t){"use strict";var r=t(2),a=t(90);r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},function(n,e,t){var r=t(59),a=t(17);n.exports=function(n){return r(a(n))}},function(n,e,t){var r=t(50);n.exports=function(n){return r(n.length)}},function(n,e,t){var r=t(1),a=r({}.toString),o=r("".slice);n.exports=function(n){return o(a(n),8,-1)}},function(n,e){n.exports=!1},function(n,e,t){var r=t(9),a=t(13),o=t(47);n.exports=r?function(n,e,t){return a.f(n,e,o(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){"use strict";var r=t(170).charAt,a=t(12),o=t(36),i=t(157),s=o.set,c=o.getterFor("String Iterator");i(String,"String",(function(n){s(this,{type:"String Iterator",string:a(n),index:0})}),(function(){var n,e=c(this),t=e.string,a=e.index;return a>=t.length?{value:void 0,done:!0}:(n=r(t,a),e.index+=n.length,{value:n,done:!1})}))},function(n,e,t){var r=t(14),a=t(264),o=Error.prototype;o.toString!==a&&r(o,"toString",a)},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){var r=t(16);n.exports=r("navigator","userAgent")||""},function(n,e,t){var r=t(186),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();n.exports=o},function(n,e,t){"use strict";function r(n,e,t,r,a,o,i,s){var c,l="function"==typeof n?n.options:n;if(e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),i?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),a&&a.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(i)},l._ssrRegister=c):a&&(c=s?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(n,e){return c.call(e),p(n,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:n,options:l}}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(2),a=t(54).filter;r({target:"Array",proto:!0,forced:!t(88)("filter")},{filter:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(0),a=t(171),o=t(172),i=t(139),s=t(23),c=t(5),l=c("iterator"),p=c("toStringTag"),u=i.values,f=function(n,e){if(n){if(n[l]!==u)try{s(n,l,u)}catch(e){n[l]=u}if(n[p]||s(n,p,e),a[e])for(var t in i)if(n[t]!==i[t])try{s(n,t,i[t])}catch(e){n[t]=i[t]}}};for(var d in a)f(r[d]&&r[d].prototype,d);f(o,"DOMTokenList")},function(n,e,t){var r,a=t(7),o=t(140),i=t(112),s=t(61),c=t(156),l=t(78),p=t(83),u=p("IE_PROTO"),f=function(){},d=function(n){return"<script>"+n+"<\/script>"},m=function(n){n.write(d("")),n.close();var e=n.parentWindow.Object;return n=null,e},h=function(){try{r=new ActiveXObject("htmlfile")}catch(n){}var n,e;h="undefined"!=typeof document?document.domain&&r?m(r):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(n=e.contentWindow.document).open(),n.write(d("document.F=Object")),n.close(),n.F):m(r);for(var t=i.length;t--;)delete h.prototype[i[t]];return h()};s[u]=!0,n.exports=Object.create||function(n,e){var t;return null!==n?(f.prototype=a(n),t=new f,f.prototype=null,t[u]=n):t=h(),void 0===e?t:o.f(t,e)}},function(n,e,t){var r=t(1);n.exports=r({}.isPrototypeOf)},function(n,e,t){var r=t(60),a=Function.prototype,o=a.apply,i=a.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(o):function(){return i.apply(o,arguments)})},function(n,e,t){var r=t(0),a=t(4),o=t(81),i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not a function")}},function(n,e,t){var r,a,o,i=t(234),s=t(0),c=t(1),l=t(8),p=t(23),u=t(10),f=t(107),d=t(83),m=t(61),h=s.TypeError,b=s.WeakMap;if(i||f.state){var g=f.state||(f.state=new b),v=c(g.get),y=c(g.has),x=c(g.set);r=function(n,e){if(y(g,n))throw new h("Object already initialized");return e.facade=n,x(g,n,e),e},a=function(n){return v(g,n)||{}},o=function(n){return y(g,n)}}else{var w=d("state");m[w]=!0,r=function(n,e){if(u(n,w))throw new h("Object already initialized");return e.facade=n,p(n,w,e),e},a=function(n){return u(n,w)?n[w]:{}},o=function(n){return u(n,w)}}n.exports={set:r,get:a,has:o,enforce:function(n){return o(n)?a(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=a(e)).type!==n)throw h("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){"use strict";var r=t(2),a=t(176);r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},function(n,e,t){var r=t(0),a=t(171),o=t(172),i=t(176),s=t(23),c=function(n){if(n&&n.forEach!==i)try{s(n,"forEach",i)}catch(e){n.forEach=i}};for(var l in a)a[l]&&c(r[l]&&r[l].prototype);c(o)},function(n,e,t){var r=t(9),a=t(11),o=t(113),i=t(47),s=t(19),c=t(79),l=t(10),p=t(153),u=Object.getOwnPropertyDescriptor;e.f=r?u:function(n,e){if(n=s(n),e=c(e),p)try{return u(n,e)}catch(n){}if(l(n,e))return i(!a(o.f,n,e),n[e])}},function(n,e,t){var r=t(2),a=t(0),o=t(34),i=t(260),s=a.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(n,e){var t={};t[n]=i(n,e,c),r({global:!0,forced:c},t)},p=function(n,e){if(s&&s[n]){var t={};t[n]=i("WebAssembly."+n,e,c),r({target:"WebAssembly",stat:!0,forced:c},t)}};l("Error",(function(n){return function(e){return o(n,this,arguments)}})),l("EvalError",(function(n){return function(e){return o(n,this,arguments)}})),l("RangeError",(function(n){return function(e){return o(n,this,arguments)}})),l("ReferenceError",(function(n){return function(e){return o(n,this,arguments)}})),l("SyntaxError",(function(n){return function(e){return o(n,this,arguments)}})),l("TypeError",(function(n){return function(e){return o(n,this,arguments)}})),l("URIError",(function(n){return function(e){return o(n,this,arguments)}})),p("CompileError",(function(n){return function(e){return o(n,this,arguments)}})),p("LinkError",(function(n){return function(e){return o(n,this,arguments)}})),p("RuntimeError",(function(n){return function(e){return o(n,this,arguments)}}))},function(n,e,t){var r=t(284),a=t(287);n.exports=function(n,e){var t=a(n,e);return r(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"e",(function(){return r})),t.d(e,"b",(function(){return o})),t.d(e,"j",(function(){return i})),t.d(e,"g",(function(){return c})),t.d(e,"h",(function(){return l})),t.d(e,"i",(function(){return p})),t.d(e,"c",(function(){return u})),t.d(e,"f",(function(){return f})),t.d(e,"l",(function(){return d})),t.d(e,"m",(function(){return m})),t.d(e,"d",(function(){return b})),t.d(e,"k",(function(){return g})),t.d(e,"n",(function(){return v})),t.d(e,"a",(function(){return x}));t(18),t(44),t(134),t(72),t(132),t(106),t(43),t(37),t(6),t(38),t(30),t(75),t(98),t(150),t(70),t(206),t(25),t(138);var r=/#.*$/,a=/\.(md|html)$/,o=/\/$/,i=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(r,"").replace(a,"")}function c(n){return i.test(n)}function l(n){return/^mailto:/.test(n)}function p(n){return/^tel:/.test(n)}function u(n){if(c(n))return n;var e=n.match(r),t=e?e[0]:"",a=s(n);return o.test(a)?n:a+".html"+t}function f(n,e){var t=n.hash,a=function(n){var e=n.match(r);if(e)return e[0]}(e);return(!a||t===a)&&s(n.path)===s(e)}function d(n,e,t){if(c(e))return{type:"external",path:e};t&&(e=function(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var o=n.replace(/^\//,"").split("/"),i=0;i<o.length;i++){var s=o[i];".."===s?a.pop():"."!==s&&a.push(s)}""!==a[0]&&a.unshift("");return a.join("/")}(e,t));for(var r=s(e),a=0;a<n.length;a++)if(s(n[a].regularPath)===r)return Object.assign({},n[a],{type:"page",path:u(n[a].path)});return console.error('[vuepress] No matching page found for sidebar item "'.concat(e,'"')),{}}function m(n,e,t,r){var a=t.pages,o=t.themeConfig,i=r&&o.locales&&o.locales[r]||o;if("auto"===(n.frontmatter.sidebar||i.sidebar||o.sidebar))return h(n);var s=i.sidebar||o.sidebar;if(s){var c=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(var t in e)if(0===(r=n,/(\.html|\/)$/.test(r)?r:r+"/").indexOf(encodeURI(t)))return{base:t,config:e[t]};var r;return{}}(e,s),l=c.base,p=c.config;return"auto"===p?h(n):p?p.map((function(n){return function n(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if("string"==typeof e)return d(t,e,r);if(Array.isArray(e))return Object.assign(d(t,e[0],r),{title:e[1]});a>3&&console.error("[vuepress] detected a too deep nested sidebar group.");var o=e.children||[];return 0===o.length&&e.path?Object.assign(d(t,e.path,r),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:o.map((function(e){return n(e,t,r,a+1)})),collapsable:!1!==e.collapsable}}(n,a,l)})):[]}return[]}function h(n){var e=b(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map((function(e){return{type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}}))}]}function b(n){var e;return(n=n.map((function(n){return Object.assign({},n)}))).forEach((function(n){2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)})),n.filter((function(n){return 2===n.level}))}function g(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function v(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function y(n){var e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function x(n,e){return y(e)-y(n)}},function(n,e,t){"use strict";var r=t(2),a=t(54).map;r({target:"Array",proto:!0,forced:!t(88)("map")},{map:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r=t(34),a=t(11),o=t(1),i=t(104),s=t(3),c=t(7),l=t(4),p=t(52),u=t(50),f=t(12),d=t(17),m=t(121),h=t(46),b=t(265),g=t(105),v=t(5)("replace"),y=Math.max,x=Math.min,w=o([].concat),S=o([].push),_=o("".indexOf),k=o("".slice),C="$0"==="a".replace(/./,"$0"),A=!!/./[v]&&""===/./[v]("a","$0");i("replace",(function(n,e,t){var o=A?"$":"$0";return[function(n,t){var r=d(this),o=null==n?void 0:h(n,v);return o?a(o,n,r,t):a(e,f(r),n,t)},function(n,a){var i=c(this),s=f(n);if("string"==typeof a&&-1===_(a,o)&&-1===_(a,"$<")){var d=t(e,i,s,a);if(d.done)return d.value}var h=l(a);h||(a=f(a));var v=i.global;if(v){var C=i.unicode;i.lastIndex=0}for(var A=[];;){var j=g(i,s);if(null===j)break;if(S(A,j),!v)break;""===f(j[0])&&(i.lastIndex=m(s,u(i.lastIndex),C))}for(var P,T="",O=0,E=0;E<A.length;E++){for(var B=f((j=A[E])[0]),I=y(x(p(j.index),s.length),0),L=[],M=1;M<j.length;M++)S(L,void 0===(P=j[M])?P:String(P));var D=j.groups;if(h){var R=w([B],L,I,s);void 0!==D&&S(R,D);var $=f(r(a,void 0,R))}else $=b(B,s,I,L,D,a);I>=O&&(T+=k(s,O,I)+$,O=I+B.length)}return T+k(s,O)}]}),!!s((function(){var n=/./;return n.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(n,"$<a>")}))||!C||A)},function(n,e,t){"use strict";var r=t(3);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){throw 1},1)}))}},function(n,e,t){var r=t(35);n.exports=function(n,e){var t=n[e];return null==t?void 0:r(t)}},function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r,a,o=t(0),i=t(27),s=o.process,c=o.Deno,l=s&&s.versions||c&&c.version,p=l&&l.v8;p&&(a=(r=p.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(a=+r[1]),n.exports=a},function(n,e,t){var r=t(52),a=Math.min;n.exports=function(n){return n>0?a(r(n),9007199254740991):0}},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(57),i=t(85),s=t(8),c=t(111),l=t(20),p=t(19),u=t(66),f=t(5),d=t(88),m=t(65),h=d("slice"),b=f("species"),g=a.Array,v=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(n,e){var t,r,a,f=p(this),d=l(f),h=c(n,d),y=c(void 0===e?d:e,d);if(o(f)&&(t=f.constructor,(i(t)&&(t===g||o(t.prototype))||s(t)&&null===(t=t[b]))&&(t=void 0),t===g||void 0===t))return m(f,h,y);for(r=new(void 0===t?g:t)(v(y-h,0)),a=0;h<y;h++,a++)h in f&&u(r,a,f[h]);return r.length=a,r}})},function(n,e){var t=Math.ceil,r=Math.floor;n.exports=function(n){var e=+n;return e!=e||0===e?0:(e>0?r:t)(e)}},function(n,e,t){var r=t(1),a=t(35),o=t(60),i=r(r.bind);n.exports=function(n,e){return a(n),void 0===e?n:o?i(n,e):function(){return n.apply(e,arguments)}}},function(n,e,t){var r=t(53),a=t(1),o=t(59),i=t(15),s=t(20),c=t(142),l=a([].push),p=function(n){var e=1==n,t=2==n,a=3==n,p=4==n,u=6==n,f=7==n,d=5==n||u;return function(m,h,b,g){for(var v,y,x=i(m),w=o(x),S=r(h,b),_=s(w),k=0,C=g||c,A=e?C(m,_):t||f?C(m,0):void 0;_>k;k++)if((d||k in w)&&(y=S(v=w[k],k,x),n))if(e)A[k]=y;else if(y)switch(n){case 3:return!0;case 5:return v;case 6:return k;case 2:l(A,v)}else switch(n){case 4:return!1;case 7:l(A,v)}return u?-1:a||p?p:A}};n.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)}},function(n,e,t){var r=t(155),a=t(112).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,a)}},function(n,e,t){var r=t(13).f,a=t(10),o=t(5)("toStringTag");n.exports=function(n,e,t){n&&!t&&(n=n.prototype),n&&!a(n,o)&&r(n,o,{configurable:!0,value:e})}},function(n,e,t){var r=t(21);n.exports=Array.isArray||function(n){return"Array"==r(n)}},function(n,e,t){var r=t(67),a=t(269),o=t(270),i=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":i&&i in Object(n)?a(n):o(n)}},function(n,e,t){var r=t(0),a=t(1),o=t(3),i=t(21),s=r.Object,c=a("".split);n.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(n){return"String"==i(n)?c(n,""):s(n)}:s},function(n,e,t){var r=t(3);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e){n.exports={}},function(n,e){n.exports={}},function(n,e,t){var r=t(9),a=t(10),o=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,s=a(o,"name"),c=s&&"something"===function(){}.name,l=s&&(!r||r&&i(o,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,e,t){var r=t(1),a=t(7),o=t(235);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return a(t),o(r),e?n(t,r):t.__proto__=r,t}}():void 0)},function(n,e,t){var r=t(1);n.exports=r([].slice)},function(n,e,t){"use strict";var r=t(79),a=t(13),o=t(47);n.exports=function(n,e,t){var i=r(e);i in n?a.f(n,i,o(0,t)):n[i]=t}},function(n,e,t){var r=t(28).Symbol;n.exports=r},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(75);var r=t(69);t(74),t(89),t(6),t(120),t(24),t(31),t(181);var a=t(96);t(40),t(25);function o(n){return function(n){if(Array.isArray(n))return Object(r.a)(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Object(a.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(3),i=t(57),s=t(8),c=t(15),l=t(20),p=t(66),u=t(142),f=t(88),d=t(5),m=t(49),h=d("isConcatSpreadable"),b=a.TypeError,g=m>=51||!o((function(){var n=[];return n[h]=!1,n.concat()[0]!==n})),v=f("concat"),y=function(n){if(!s(n))return!1;var e=n[h];return void 0!==e?!!e:i(n)};r({target:"Array",proto:!0,forced:!g||!v},{concat:function(n){var e,t,r,a,o,i=c(this),s=u(i,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(y(o=-1===e?i:arguments[e])){if(f+(a=l(o))>9007199254740991)throw b("Maximum allowed index exceeded");for(t=0;t<a;t++,f++)t in o&&p(s,f,o[t])}else{if(f>=9007199254740991)throw b("Maximum allowed index exceeded");p(s,f++,o)}return s.length=f,s}})},function(n,e,t){var r=t(2),a=t(0),o=t(34),i=t(4),s=t(27),c=t(65),l=/MSIE .\./.test(s),p=a.Function,u=function(n){return function(e,t){var r=arguments.length>2,a=r?c(arguments,2):void 0;return n(r?function(){o(i(e)?e:p(e),this,a)}:e,t)}};r({global:!0,bind:!0,forced:l},{setTimeout:u(a.setTimeout),setInterval:u(a.setInterval)})},function(n,e,t){"use strict";t(18);var r,a,o=t(2),i=t(0),s=t(11),c=t(1),l=t(4),p=t(8),u=(r=!1,(a=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===a.test("abc")&&r),f=i.Error,d=c(/./.test);o({target:"RegExp",proto:!0,forced:!u},{test:function(n){var e=this.exec;if(!l(e))return d(this,n);var t=s(e,this,n);if(null!==t&&!p(t))throw new f("RegExp exec method returned something other than an Object or null");return!!t}})},function(n,e,t){var r=t(0),a=t(117),o=t(4),i=t(21),s=t(5)("toStringTag"),c=r.Object,l="Arguments"==i(function(){return arguments}());n.exports=a?i:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=c(n),s))?t:l?i(e):"Object"==(r=i(e))&&o(e.callee)?"Arguments":r}},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(16),i=t(34),s=t(11),c=t(1),l=t(22),p=t(9),u=t(109),f=t(3),d=t(10),m=t(57),h=t(4),b=t(8),g=t(33),v=t(80),y=t(7),x=t(15),w=t(19),S=t(79),_=t(12),k=t(47),C=t(32),A=t(82),j=t(55),P=t(178),T=t(115),O=t(39),E=t(13),B=t(140),I=t(113),L=t(65),M=t(14),D=t(76),R=t(83),$=t(61),F=t(77),q=t(5),z=t(179),N=t(180),U=t(56),J=t(36),X=t(54).forEach,V=R("hidden"),H=q("toPrimitive"),Q=J.set,W=J.getterFor("Symbol"),G=Object.prototype,Y=a.Symbol,K=Y&&Y.prototype,Z=a.TypeError,nn=a.QObject,en=o("JSON","stringify"),tn=O.f,rn=E.f,an=P.f,on=I.f,sn=c([].push),cn=D("symbols"),ln=D("op-symbols"),pn=D("string-to-symbol-registry"),un=D("symbol-to-string-registry"),fn=D("wks"),dn=!nn||!nn.prototype||!nn.prototype.findChild,mn=p&&f((function(){return 7!=C(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a}))?function(n,e,t){var r=tn(G,e);r&&delete G[e],rn(n,e,t),r&&n!==G&&rn(G,e,r)}:rn,hn=function(n,e){var t=cn[n]=C(K);return Q(t,{type:"Symbol",tag:n,description:e}),p||(t.description=e),t},bn=function(n,e,t){n===G&&bn(ln,e,t),y(n);var r=S(e);return y(t),d(cn,r)?(t.enumerable?(d(n,V)&&n[V][r]&&(n[V][r]=!1),t=C(t,{enumerable:k(0,!1)})):(d(n,V)||rn(n,V,k(1,{})),n[V][r]=!0),mn(n,r,t)):rn(n,r,t)},gn=function(n,e){y(n);var t=w(e),r=A(t).concat(wn(t));return X(r,(function(e){p&&!s(vn,t,e)||bn(n,e,t[e])})),n},vn=function(n){var e=S(n),t=s(on,this,e);return!(this===G&&d(cn,e)&&!d(ln,e))&&(!(t||!d(this,e)||!d(cn,e)||d(this,V)&&this[V][e])||t)},yn=function(n,e){var t=w(n),r=S(e);if(t!==G||!d(cn,r)||d(ln,r)){var a=tn(t,r);return!a||!d(cn,r)||d(t,V)&&t[V][r]||(a.enumerable=!0),a}},xn=function(n){var e=an(w(n)),t=[];return X(e,(function(n){d(cn,n)||d($,n)||sn(t,n)})),t},wn=function(n){var e=n===G,t=an(e?ln:w(n)),r=[];return X(t,(function(n){!d(cn,n)||e&&!d(G,n)||sn(r,cn[n])})),r};(u||(M(K=(Y=function(){if(g(K,this))throw Z("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?_(arguments[0]):void 0,e=F(n),t=function(n){this===G&&s(t,ln,n),d(this,V)&&d(this[V],e)&&(this[V][e]=!1),mn(this,e,k(1,n))};return p&&dn&&mn(G,e,{configurable:!0,set:t}),hn(e,n)}).prototype,"toString",(function(){return W(this).tag})),M(Y,"withoutSetter",(function(n){return hn(F(n),n)})),I.f=vn,E.f=bn,B.f=gn,O.f=yn,j.f=P.f=xn,T.f=wn,z.f=function(n){return hn(q(n),n)},p&&(rn(K,"description",{configurable:!0,get:function(){return W(this).description}}),l||M(G,"propertyIsEnumerable",vn,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Y}),X(A(fn),(function(n){N(n)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(n){var e=_(n);if(d(pn,e))return pn[e];var t=Y(e);return pn[e]=t,un[t]=e,t},keyFor:function(n){if(!v(n))throw Z(n+" is not a symbol");if(d(un,n))return un[n]},useSetter:function(){dn=!0},useSimple:function(){dn=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!p},{create:function(n,e){return void 0===e?C(n):gn(C(n),e)},defineProperty:bn,defineProperties:gn,getOwnPropertyDescriptor:yn}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:xn,getOwnPropertySymbols:wn}),r({target:"Object",stat:!0,forced:f((function(){T.f(1)}))},{getOwnPropertySymbols:function(n){return T.f(x(n))}}),en)&&r({target:"JSON",stat:!0,forced:!u||f((function(){var n=Y();return"[null]"!=en([n])||"{}"!=en({a:n})||"{}"!=en(Object(n))}))},{stringify:function(n,e,t){var r=L(arguments),a=e;if((b(e)||void 0!==n)&&!v(n))return m(e)||(e=function(n,e){if(h(a)&&(e=s(a,this,n,e)),!v(e))return e}),r[1]=e,i(en,null,r)}});if(!K[H]){var Sn=K.valueOf;M(K,H,(function(n){return s(Sn,this)}))}U(Y,"Symbol"),$[V]=!0},function(n,e,t){t(2)({target:"Array",stat:!0},{isArray:t(57)})},function(n,e,t){var r=t(22),a=t(107);(n.exports=function(n,e){return a[n]||(a[n]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.3",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e,t){var r=t(1),a=0,o=Math.random(),i=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+i(++a+o,36)}},function(n,e,t){var r=t(0),a=t(8),o=r.document,i=a(o)&&a(o.createElement);n.exports=function(n){return i?o.createElement(n):{}}},function(n,e,t){var r=t(154),a=t(80);n.exports=function(n){var e=r(n,"string");return a(e)?e:e+""}},function(n,e,t){var r=t(0),a=t(16),o=t(4),i=t(33),s=t(151),c=r.Object;n.exports=s?function(n){return"symbol"==typeof n}:function(n){var e=a("Symbol");return o(e)&&i(e.prototype,c(n))}},function(n,e,t){var r=t(0).String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,e,t){var r=t(155),a=t(112);n.exports=Object.keys||function(n){return r(n,a)}},function(n,e,t){var r=t(76),a=t(77),o=r("keys");n.exports=function(n){return o[n]||(o[n]=a(n))}},function(n,e,t){var r=t(1),a=t(4),o=t(107),i=r(Function.toString);a(o.inspectSource)||(o.inspectSource=function(n){return i(n)}),n.exports=o.inspectSource},function(n,e,t){var r=t(1),a=t(3),o=t(4),i=t(73),s=t(16),c=t(84),l=function(){},p=[],u=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=r(f.exec),m=!f.exec(l),h=function(n){if(!o(n))return!1;try{return u(l,p,n),!0}catch(n){return!1}},b=function(n){if(!o(n))return!1;switch(i(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!d(f,c(n))}catch(n){return!0}};b.sham=!0,n.exports=!u||a((function(){var n;return h(h.call)||!h(Object)||!h((function(){n=!0}))||n}))?b:h},function(n,e,t){var r=t(21),a=t(0);n.exports="process"==r(a.process)},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(6);function r(n,e,t,r,a,o,i){try{var s=n[o](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,a)}function a(n){return function(){var e=this,t=arguments;return new Promise((function(a,o){var i=n.apply(e,t);function s(n){r(i,a,o,s,c,"next",n)}function c(n){r(i,a,o,s,c,"throw",n)}s(void 0)}))}}},function(n,e,t){var r=t(3),a=t(5),o=t(49),i=a("species");n.exports=function(n){return o>=51||!r((function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[n](Boolean).foo}))}},function(n,e,t){"use strict";var r=t(2),a=t(9),o=t(0),i=t(1),s=t(10),c=t(4),l=t(33),p=t(12),u=t(13).f,f=t(114),d=o.Symbol,m=d&&d.prototype;if(a&&c(d)&&(!("description"in m)||void 0!==d().description)){var h={},b=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:p(arguments[0]),e=l(m,this)?new d(n):void 0===n?d():d(n);return""===n&&(h[e]=!0),e};f(b,d),b.prototype=m,m.constructor=b;var g="Symbol(test)"==String(d("test")),v=i(m.toString),y=i(m.valueOf),x=/^Symbol\((.*)\)[^)]+$/,w=i("".replace),S=i("".slice);u(m,"description",{configurable:!0,get:function(){var n=y(this),e=v(n);if(s(h,n))return"";var t=g?S(e,7,-1):w(e,x,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:b})}},function(n,e,t){"use strict";var r,a,o=t(11),i=t(1),s=t(12),c=t(144),l=t(103),p=t(76),u=t(32),f=t(36).get,d=t(219),m=t(225),h=p("native-string-replace",String.prototype.replace),b=RegExp.prototype.exec,g=b,v=i("".charAt),y=i("".indexOf),x=i("".replace),w=i("".slice),S=(a=/b*/g,o(b,r=/a/,"a"),o(b,a,"a"),0!==r.lastIndex||0!==a.lastIndex),_=l.BROKEN_CARET,k=void 0!==/()??/.exec("")[1];(S||k||_||d||m)&&(g=function(n){var e,t,r,a,i,l,p,d=this,m=f(d),C=s(n),A=m.raw;if(A)return A.lastIndex=d.lastIndex,e=o(g,A,C),d.lastIndex=A.lastIndex,e;var j=m.groups,P=_&&d.sticky,T=o(c,d),O=d.source,E=0,B=C;if(P&&(T=x(T,"y",""),-1===y(T,"g")&&(T+="g"),B=w(C,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==v(C,d.lastIndex-1))&&(O="(?: "+O+")",B=" "+B,E++),t=new RegExp("^(?:"+O+")",T)),k&&(t=new RegExp("^"+O+"$(?!\\s)",T)),S&&(r=d.lastIndex),a=o(b,P?t:d,B),P?a?(a.input=w(a.input,E),a[0]=w(a[0],E),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:S&&a&&(d.lastIndex=d.global?a.index+a[0].length:r),k&&a&&a.length>1&&o(h,a[0],t,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(a[i]=void 0)})),a&&j)for(a.groups=l=u(null),i=0;i<j.length;i++)l[(p=j[i])[0]]=a[p[1]];return a}),n.exports=g},function(n,e,t){var r=t(274),a=t(275),o=t(276),i=t(277),s=t(278);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(188);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(41)(Object,"create");n.exports=r},function(n,e,t){var r=t(296);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(129);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(51),t(6),t(102),t(181),t(24),t(18),t(72);var r=t(69);function a(n,e){if(n){if("string"==typeof n)return Object(r.a)(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(r.a)(n,e):void 0}}},function(n,e,t){var r,a;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(a="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function a(n,e,t){return n<e?e:n>t?t:n}function o(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=a(n,r.minimum,1),t.status=1===n?null:n;var c=t.render(!e),l=c.querySelector(r.barSelector),p=r.speed,u=r.easing;return c.offsetWidth,i((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(l,function(n,e,t){var a;return(a="translate3d"===r.positionUsing?{transform:"translate3d("+o(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+o(n)+"%,0)"}:{"margin-left":o(n)+"%"}).transition="all "+e+"ms "+t,a}(n,p,u)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+p+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),p)}),p)):setTimeout(e,p)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*a(Math.random()*e,.1,.95)),e=a(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var a,i=e.querySelector(r.barSelector),c=n?"-100":o(t.status||0),p=document.querySelector(r.parent);return s(i,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(a=e.querySelector(r.spinnerSelector))&&f(a),p!=document.body&&l(p,"nprogress-custom-parent"),p.appendChild(e),e},t.remove=function(){p(document.documentElement,"nprogress-busy"),p(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&f(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var i=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,a=n.length,o=e.charAt(0).toUpperCase()+e.slice(1);a--;)if((r=n[a]+o)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,a,o=arguments;if(2==o.length)for(t in e)void 0!==(a=e[t])&&e.hasOwnProperty(t)&&r(n,t,a);else r(n,o[1],o[2])}}();function c(n,e){return("string"==typeof n?n:u(n)).indexOf(" "+e+" ")>=0}function l(n,e){var t=u(n),r=t+e;c(t,e)||(n.className=r.substring(1))}function p(n,e){var t,r=u(n);c(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function u(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function f(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=a)},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(110).indexOf,i=t(45),s=a([].indexOf),c=!!s&&1/s([1],1,-0)<0,l=i("indexOf");r({target:"Array",proto:!0,forced:c||!l},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return c?s(this,n,e)||0:o(this,n,e)}})},function(n,e,t){var r=t(2),a=t(15),o=t(82);r({target:"Object",stat:!0,forced:t(3)((function(){o(1)}))},{keys:function(n){return o(a(n))}})},function(n,e,t){var r=t(3),a=t(4),o=/#|\.prototype\./,i=function(n,e){var t=c[s(n)];return t==p||t!=l&&(a(e)?r(e):!!e)},s=i.normalize=function(n){return String(n).replace(o,".").toLowerCase()},c=i.data={},l=i.NATIVE="N",p=i.POLYFILL="P";n.exports=i},function(n,e,t){var r=t(73),a=t(46),o=t(62),i=t(5)("iterator");n.exports=function(n){if(null!=n)return a(n,i)||a(n,"@@iterator")||o[r(n)]}},function(n,e,t){var r=t(9),a=t(63).EXISTS,o=t(1),i=t(13).f,s=Function.prototype,c=o(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,p=o(l.exec);r&&!a&&i(s,"name",{configurable:!0,get:function(){try{return p(l,c(this))[1]}catch(n){return""}}})},function(n,e,t){var r=t(3),a=t(0).RegExp,o=r((function(){var n=a("a","y");return n.lastIndex=2,null!=n.exec("abcd")})),i=o||r((function(){return!a("a","y").sticky})),s=o||r((function(){var n=a("^r","gy");return n.lastIndex=2,null!=n.exec("str")}));n.exports={BROKEN_CARET:s,MISSED_STICKY:i,UNSUPPORTED_Y:o}},function(n,e,t){"use strict";t(18);var r=t(1),a=t(14),o=t(90),i=t(3),s=t(5),c=t(23),l=s("species"),p=RegExp.prototype;n.exports=function(n,e,t,u){var f=s(n),d=!i((function(){var e={};return e[f]=function(){return 7},7!=""[n](e)})),m=d&&!i((function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[l]=function(){return t},t.flags="",t[f]=/./[f]),t.exec=function(){return e=!0,null},t[f](""),!e}));if(!d||!m||t){var h=r(/./[f]),b=e(f,""[n],(function(n,e,t,a,i){var s=r(n),c=e.exec;return c===o||c===p.exec?d&&!i?{done:!0,value:h(e,t,a)}:{done:!0,value:s(t,e,a)}:{done:!1}}));a(String.prototype,n,b[0]),a(p,f,b[1])}u&&c(p[f],"sham",!0)}},function(n,e,t){var r=t(0),a=t(11),o=t(7),i=t(4),s=t(21),c=t(90),l=r.TypeError;n.exports=function(n,e){var t=n.exec;if(i(t)){var r=a(t,n,e);return null!==r&&o(r),r}if("RegExp"===s(n))return a(c,n,e);throw l("RegExp#exec called on incompatible receiver")}},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(59),i=t(19),s=t(45),c=a([].join),l=o!=Object,p=s("join",",");r({target:"Array",proto:!0,forced:l||!p},{join:function(n){return c(i(this),void 0===n?",":n)}})},function(n,e,t){var r=t(0),a=t(108),o=r["__core-js_shared__"]||a("__core-js_shared__",{});n.exports=o},function(n,e,t){var r=t(0),a=Object.defineProperty;n.exports=function(n,e){try{a(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(49),a=t(3);n.exports=!!Object.getOwnPropertySymbols&&!a((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){var r=t(19),a=t(111),o=t(20),i=function(n){return function(e,t,i){var s,c=r(e),l=o(c),p=a(i,l);if(n&&t!=t){for(;l>p;)if((s=c[p++])!=s)return!0}else for(;l>p;p++)if((n||p in c)&&c[p]===t)return n||p||0;return!n&&-1}};n.exports={includes:i(!0),indexOf:i(!1)}},function(n,e,t){var r=t(52),a=Math.max,o=Math.min;n.exports=function(n,e){var t=r(n);return t<0?a(t+e,0):o(t,e)}},function(n,e){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!r.call({1:2},1);e.f=o?function(n){var e=a(this,n);return!!e&&e.enumerable}:r},function(n,e,t){var r=t(10),a=t(158),o=t(39),i=t(13);n.exports=function(n,e,t){for(var s=a(e),c=i.f,l=o.f,p=0;p<s.length;p++){var u=s[p];r(n,u)||t&&r(t,u)||c(n,u,l(e,u))}}},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e,t){var r=t(0),a=t(10),o=t(4),i=t(15),s=t(83),c=t(160),l=s("IE_PROTO"),p=r.Object,u=p.prototype;n.exports=c?p.getPrototypeOf:function(n){var e=i(n);if(a(e,l))return e[l];var t=e.constructor;return o(t)&&e instanceof t?t.prototype:e instanceof p?u:null}},function(n,e,t){var r={};r[t(5)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){var r=t(7),a=t(165),o=t(5)("species");n.exports=function(n,e){var t,i=r(n).constructor;return void 0===i||null==(t=r(i)[o])?e:a(t)}},function(n,e,t){var r=t(0),a=t(111),o=t(20),i=t(66),s=r.Array,c=Math.max;n.exports=function(n,e,t){for(var r=o(n),l=a(e,r),p=a(void 0===t?r:t,r),u=s(c(p-l,0)),f=0;l<p;l++,f++)i(u,f,n[l]);return u.length=f,u}},function(n,e,t){t(180)("iterator")},function(n,e,t){"use strict";var r=t(170).charAt;n.exports=function(n,e,t){return e+(t?r(n,e).length:1)}},function(n,e,t){var r=t(268),a=t(48),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(n){return a(n)&&i.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,e,t){var r=t(41)(t(28),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(288),a=t(295),o=t(297),i=t(298),s=t(299);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(26),a=t(129),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!a(n))||(i.test(n)||!o.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(58),a=t(48);n.exports=function(n){return"symbol"==typeof n||a(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(75);t(74),t(89),t(6),t(120),t(24),t(31);var r=t(96);t(40),t(25);function a(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o=[],i=!0,s=!1;try{for(t=t.call(n);!(i=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(n){s=!0,a=n}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}}(n,e)||Object(r.a)(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";var r=t(34),a=t(11),o=t(1),i=t(104),s=t(143),c=t(7),l=t(17),p=t(118),u=t(121),f=t(50),d=t(12),m=t(46),h=t(119),b=t(105),g=t(90),v=t(103),y=t(3),x=v.UNSUPPORTED_Y,w=Math.min,S=[].push,_=o(/./.exec),k=o(S),C=o("".slice);i("split",(function(n,e,t){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(n,t){var o=d(l(this)),i=void 0===t?4294967295:t>>>0;if(0===i)return[];if(void 0===n)return[o];if(!s(n))return a(e,o,n,i);for(var c,p,u,f=[],m=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),b=0,v=new RegExp(n.source,m+"g");(c=a(g,v,o))&&!((p=v.lastIndex)>b&&(k(f,C(o,b,c.index)),c.length>1&&c.index<o.length&&r(S,f,h(c,1)),u=c[0].length,b=p,f.length>=i));)v.lastIndex===c.index&&v.lastIndex++;return b===o.length?!u&&_(v,"")||k(f,""):k(f,C(o,b)),f.length>i?h(f,0,i):f}:"0".split(void 0,0).length?function(n,t){return void 0===n&&0===t?[]:a(e,this,n,t)}:e,[function(e,t){var r=l(this),i=null==e?void 0:m(e,n);return i?a(i,e,r,t):a(o,d(r),e,t)},function(n,r){var a=c(this),i=d(n),s=t(o,a,i,r,o!==e);if(s.done)return s.value;var l=p(a,RegExp),m=a.unicode,h=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(x?"g":"y"),g=new l(x?"^(?:"+a.source+")":a,h),v=void 0===r?4294967295:r>>>0;if(0===v)return[];if(0===i.length)return null===b(g,i)?[i]:[];for(var y=0,S=0,_=[];S<i.length;){g.lastIndex=x?0:S;var A,j=b(g,x?C(i,S):i);if(null===j||(A=w(f(g.lastIndex+(x?S:0)),i.length))===y)S=u(i,S,m);else{if(k(_,C(i,y,S)),_.length===v)return _;for(var P=1;P<=j.length-1;P++)if(k(_,j[P]),_.length===v)return _;S=y=A}}return k(_,C(i,y)),_}]}),!!y((function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var t="ab".split(n);return 2!==t.length||"a"!==t[0]||"b"!==t[1]})),x)},function(n,e,t){"use strict";var r=t(2),a=t(54).some;r({target:"Array",proto:!0,forced:!t(45)("some")},{some:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r=t(11),a=t(104),o=t(7),i=t(50),s=t(12),c=t(17),l=t(46),p=t(121),u=t(105);a("match",(function(n,e,t){return[function(e){var t=c(this),a=null==e?void 0:l(e,n);return a?r(a,e,t):new RegExp(e)[n](s(t))},function(n){var r=o(this),a=s(n),c=t(e,r,a);if(c.done)return c.value;if(!r.global)return u(r,a);var l=r.unicode;r.lastIndex=0;for(var f,d=[],m=0;null!==(f=u(r,a));){var h=s(f[0]);d[m]=h,""===h&&(r.lastIndex=p(a,i(r.lastIndex),l)),m++}return 0===m?null:d}]}))},function(n,e,t){var r=t(5),a=t(32),o=t(13),i=r("unscopables"),s=Array.prototype;null==s[i]&&o.f(s,i,{configurable:!0,value:a(null)}),n.exports=function(n){s[i][n]=!0}},function(n,e,t){var r=function(n){"use strict";var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{s({},"")}catch(n){s=function(n,e,t){return n[e]=t}}function c(n,e,t,r){var a=e&&e.prototype instanceof u?e:u,o=Object.create(a.prototype),i=new _(r||[]);return o._invoke=function(n,e,t){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(t.method=a,t.arg=o;;){var i=t.delegate;if(i){var s=x(i,t);if(s){if(s===p)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=l(n,e,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}(n,t,i),o}function l(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=c;var p={};function u(){}function f(){}function d(){}var m={};s(m,a,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(k([])));b&&b!==e&&t.call(b,a)&&(m=b);var g=d.prototype=u.prototype=Object.create(m);function v(n){["next","throw","return"].forEach((function(e){s(n,e,(function(n){return this._invoke(e,n)}))}))}function y(n,e){var r;this._invoke=function(a,o){function i(){return new e((function(r,i){!function r(a,o,i,s){var c=l(n[a],n,o);if("throw"!==c.type){var p=c.arg,u=p.value;return u&&"object"==typeof u&&t.call(u,"__await")?e.resolve(u.__await).then((function(n){r("next",n,i,s)}),(function(n){r("throw",n,i,s)})):e.resolve(u).then((function(n){p.value=n,i(p)}),(function(n){return r("throw",n,i,s)}))}s(c.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function x(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,x(n,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=l(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var a=r.arg;return a?a.done?(e[n.resultName]=a.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function w(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function S(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function _(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function k(n){if(n){var e=n[a];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,i,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,d):(n.__proto__=d,s(n,i,"GeneratorFunction")),n.prototype=Object.create(g),n},n.awrap=function(n){return{__await:n}},v(y.prototype),s(y.prototype,o,(function(){return this})),n.AsyncIterator=y,n.async=function(e,t,r,a,o){void 0===o&&(o=Promise);var i=new y(c(e,t,r,a),o);return n.isGeneratorFunction(t)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},v(g),s(g,i,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=k,_.prototype={constructor:_,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return i.type="throw",i.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=t.call(o,"catchLoc"),c=t.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&t.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===n||"continue"===n)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=n,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),p},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),S(t),p}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var a=r.arg;S(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:k(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),p}},n}(n.exports);try{regeneratorRuntime=r}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(n,e,t){var r=t(2),a=t(9),o=t(13).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!a},{defineProperty:o})},function(n,e,t){"use strict";var r=t(1),a=t(63).PROPER,o=t(14),i=t(7),s=t(33),c=t(12),l=t(3),p=t(144),u=RegExp.prototype,f=u.toString,d=r(p),m=l((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),h=a&&"toString"!=f.name;(m||h)&&o(RegExp.prototype,"toString",(function(){var n=i(this),e=c(n.source),t=n.flags;return"/"+e+"/"+c(void 0===t&&s(u,n)&&!("flags"in u)?d(n):t)}),{unsafe:!0})},function(n,e,t){"use strict";var r=t(19),a=t(135),o=t(62),i=t(36),s=t(13).f,c=t(157),l=t(22),p=t(9),u=i.set,f=i.getterFor("Array Iterator");n.exports=c(Array,"Array",(function(n,e){u(this,{type:"Array Iterator",target:r(n),index:0,kind:e})}),(function(){var n=f(this),e=n.target,t=n.kind,r=n.index++;return!e||r>=e.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:r,done:!1}:"values"==t?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var d=o.Arguments=o.Array;if(a("keys"),a("values"),a("entries"),!l&&p&&"values"!==d.name)try{s(d,"name",{value:"values"})}catch(n){}},function(n,e,t){var r=t(9),a=t(152),o=t(13),i=t(7),s=t(19),c=t(82);e.f=r&&!a?Object.defineProperties:function(n,e){i(n);for(var t,r=s(e),a=c(e),l=a.length,p=0;l>p;)o.f(n,t=a[p++],r[t]);return n}},function(n,e,t){var r=t(0),a=t(11),o=t(35),i=t(7),s=t(81),c=t(101),l=r.TypeError;n.exports=function(n,e){var t=arguments.length<2?c(n):e;if(o(t))return i(a(t,n));throw l(s(n)+" is not iterable")}},function(n,e,t){var r=t(249);n.exports=function(n,e){return new(r(n))(0===e?0:e)}},function(n,e,t){var r=t(8),a=t(21),o=t(5)("match");n.exports=function(n){var e;return r(n)&&(void 0!==(e=n[o])?!!e:"RegExp"==a(n))}},function(n,e,t){"use strict";var r=t(7);n.exports=function(){var n=r(this),e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}},function(n,e,t){var r=t(4),a=t(8),o=t(64);n.exports=function(n,e,t){var i,s;return o&&r(i=e.constructor)&&i!==t&&a(s=i.prototype)&&s!==t.prototype&&o(n,s),n}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),p=Object.prototype.toString,u=Math.max,f=Math.min,d=function(){return l.Date.now()};function m(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function h(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==p.call(n)}(n))return NaN;if(m(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=m(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=a.test(n);return s||o.test(n)?i(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,a,o,i,s,c,l=0,p=!1,b=!1,g=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function v(e){var t=r,o=a;return r=a=void 0,l=e,i=n.apply(o,t)}function y(n){return l=n,s=setTimeout(w,e),p?v(n):i}function x(n){var t=n-c;return void 0===c||t>=e||t<0||b&&n-l>=o}function w(){var n=d();if(x(n))return S(n);s=setTimeout(w,function(n){var t=e-(n-c);return b?f(t,o-(n-l)):t}(n))}function S(n){return s=void 0,g&&r?v(n):(r=a=void 0,i)}function _(){var n=d(),t=x(n);if(r=arguments,a=this,c=n,t){if(void 0===s)return y(c);if(b)return s=setTimeout(w,e),v(c)}return void 0===s&&(s=setTimeout(w,e)),i}return e=h(e)||0,m(t)&&(p=!!t.leading,o=(b="maxWait"in t)?u(h(t.maxWait)||0,e):o,g="trailing"in t?!!t.trailing:g),_.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},_.flush=function(){return void 0===s?i:S(d())},_}},function(n,e,t){var r=t(1),a=t(17),o=t(12),i=t(149),s=r("".replace),c="["+i+"]",l=RegExp("^"+c+c+"*"),p=RegExp(c+c+"*$"),u=function(n){return function(e){var t=o(a(e));return 1&n&&(t=s(t,l,"")),2&n&&(t=s(t,p,"")),t}};n.exports={start:u(1),end:u(2),trim:u(3)}},function(n,e){n.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(n,e,t){var r=t(1),a=t(14),o=Date.prototype,i=r(o.toString),s=r(o.getTime);"Invalid Date"!=String(new Date(NaN))&&a(o,"toString",(function(){var n=s(this);return n==n?i(this):"Invalid Date"}))},function(n,e,t){var r=t(109);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){var r=t(9),a=t(3);n.exports=r&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){var r=t(9),a=t(3),o=t(78);n.exports=!r&&!a((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){var r=t(0),a=t(11),o=t(8),i=t(80),s=t(46),c=t(233),l=t(5),p=r.TypeError,u=l("toPrimitive");n.exports=function(n,e){if(!o(n)||i(n))return n;var t,r=s(n,u);if(r){if(void 0===e&&(e="default"),t=a(r,n,e),!o(t)||i(t))return t;throw p("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(n,e)}},function(n,e,t){var r=t(1),a=t(10),o=t(19),i=t(110).indexOf,s=t(61),c=r([].push);n.exports=function(n,e){var t,r=o(n),l=0,p=[];for(t in r)!a(s,t)&&a(r,t)&&c(p,t);for(;e.length>l;)a(r,t=e[l++])&&(~i(p,t)||c(p,t));return p}},function(n,e,t){var r=t(16);n.exports=r("document","documentElement")},function(n,e,t){"use strict";var r=t(2),a=t(11),o=t(22),i=t(63),s=t(4),c=t(220),l=t(116),p=t(64),u=t(56),f=t(23),d=t(14),m=t(5),h=t(62),b=t(159),g=i.PROPER,v=i.CONFIGURABLE,y=b.IteratorPrototype,x=b.BUGGY_SAFARI_ITERATORS,w=m("iterator"),S=function(){return this};n.exports=function(n,e,t,i,m,b,_){c(t,e,i);var k,C,A,j=function(n){if(n===m&&B)return B;if(!x&&n in O)return O[n];switch(n){case"keys":case"values":case"entries":return function(){return new t(this,n)}}return function(){return new t(this)}},P=e+" Iterator",T=!1,O=n.prototype,E=O[w]||O["@@iterator"]||m&&O[m],B=!x&&E||j(m),I="Array"==e&&O.entries||E;if(I&&(k=l(I.call(new n)))!==Object.prototype&&k.next&&(o||l(k)===y||(p?p(k,y):s(k[w])||d(k,w,S)),u(k,P,!0,!0),o&&(h[P]=S)),g&&"values"==m&&E&&"values"!==E.name&&(!o&&v?f(O,"name","values"):(T=!0,B=function(){return a(E,this)})),m)if(C={values:j("values"),keys:b?B:j("keys"),entries:j("entries")},_)for(A in C)(x||T||!(A in O))&&d(O,A,C[A]);else r({target:e,proto:!0,forced:x||T},C);return o&&!_||O[w]===B||d(O,w,B,{name:m}),h[e]=B,C}},function(n,e,t){var r=t(16),a=t(1),o=t(55),i=t(115),s=t(7),c=a([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=o.f(s(n)),t=i.f;return t?c(e,t(n)):e}},function(n,e,t){"use strict";var r,a,o,i=t(3),s=t(4),c=t(32),l=t(116),p=t(14),u=t(5),f=t(22),d=u("iterator"),m=!1;[].keys&&("next"in(o=[].keys())?(a=l(l(o)))!==Object.prototype&&(r=a):m=!0),null==r||i((function(){var n={};return r[d].call(n)!==n}))?r={}:f&&(r=c(r)),s(r[d])||p(r,d,(function(){return this})),n.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},function(n,e,t){var r=t(3);n.exports=!r((function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}))},function(n,e,t){var r=t(0);n.exports=r.Promise},function(n,e,t){var r=t(5),a=t(62),o=r("iterator"),i=Array.prototype;n.exports=function(n){return void 0!==n&&(a.Array===n||i[o]===n)}},function(n,e,t){var r=t(11),a=t(7),o=t(46);n.exports=function(n,e,t){var i,s;a(n);try{if(!(i=o(n,"return"))){if("throw"===e)throw t;return t}i=r(i,n)}catch(n){s=!0,i=n}if("throw"===e)throw t;if(s)throw i;return a(i),t}},function(n,e,t){var r=t(5)("iterator"),a=!1;try{var o=0,i={next:function(){return{done:!!o++}},return:function(){a=!0}};i[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(n){}n.exports=function(n,e){if(!e&&!a)return!1;var t=!1;try{var o={};o[r]=function(){return{next:function(){return{done:t=!0}}}},n(o)}catch(n){}return t}},function(n,e,t){var r=t(0),a=t(85),o=t(81),i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not a constructor")}},function(n,e,t){var r,a,o,i,s=t(0),c=t(34),l=t(53),p=t(4),u=t(10),f=t(3),d=t(156),m=t(65),h=t(78),b=t(167),g=t(86),v=s.setImmediate,y=s.clearImmediate,x=s.process,w=s.Dispatch,S=s.Function,_=s.MessageChannel,k=s.String,C=0,A={};try{r=s.location}catch(n){}var j=function(n){if(u(A,n)){var e=A[n];delete A[n],e()}},P=function(n){return function(){j(n)}},T=function(n){j(n.data)},O=function(n){s.postMessage(k(n),r.protocol+"//"+r.host)};v&&y||(v=function(n){var e=m(arguments,1);return A[++C]=function(){c(p(n)?n:S(n),void 0,e)},a(C),C},y=function(n){delete A[n]},g?a=function(n){x.nextTick(P(n))}:w&&w.now?a=function(n){w.now(P(n))}:_&&!b?(i=(o=new _).port2,o.port1.onmessage=T,a=l(i.postMessage,i)):s.addEventListener&&p(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!f(O)?(a=O,s.addEventListener("message",T,!1)):a="onreadystatechange"in h("script")?function(n){d.appendChild(h("script")).onreadystatechange=function(){d.removeChild(this),j(n)}}:function(n){setTimeout(P(n),0)}),n.exports={set:v,clear:y}},function(n,e,t){var r=t(27);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(n,e,t){var r=t(7),a=t(8),o=t(169);n.exports=function(n,e){if(r(n),a(e)&&e.constructor===n)return e;var t=o.f(n);return(0,t.resolve)(e),t.promise}},function(n,e,t){"use strict";var r=t(35),a=function(n){var e,t;this.promise=new n((function(n,r){if(void 0!==e||void 0!==t)throw TypeError("Bad Promise constructor");e=n,t=r})),this.resolve=r(e),this.reject=r(t)};n.exports.f=function(n){return new a(n)}},function(n,e,t){var r=t(1),a=t(52),o=t(12),i=t(17),s=r("".charAt),c=r("".charCodeAt),l=r("".slice),p=function(n){return function(e,t){var r,p,u=o(i(e)),f=a(t),d=u.length;return f<0||f>=d?n?"":void 0:(r=c(u,f))<55296||r>56319||f+1===d||(p=c(u,f+1))<56320||p>57343?n?s(u,f):r:n?l(u,f,f+2):p-56320+(r-55296<<10)+65536}};n.exports={codeAt:p(!1),charAt:p(!0)}},function(n,e){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,e,t){var r=t(78)("span").classList,a=r&&r.constructor&&r.constructor.prototype;n.exports=a===Object.prototype?void 0:a},function(n,e,t){var r=t(2),a=t(3),o=t(15),i=t(116),s=t(160);r({target:"Object",stat:!0,forced:a((function(){i(1)})),sham:!s},{getPrototypeOf:function(n){return i(o(n))}})},function(n,e,t){var r=t(0),a=t(143),o=r.TypeError;n.exports=function(n){if(a(n))throw o("The method doesn't accept regular expressions");return n}},function(n,e,t){var r=t(5)("match");n.exports=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[r]=!1,"/./"[n](e)}catch(n){}}return!1}},function(n,e,t){"use strict";var r=t(54).forEach,a=t(45)("forEach");n.exports=a?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}},function(n,e,t){var r=t(3);n.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(n,e,t){var r=t(21),a=t(19),o=t(55).f,i=t(119),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(n){return s&&"Window"==r(n)?function(n){try{return o(n)}catch(n){return i(s)}}(n):o(a(n))}},function(n,e,t){var r=t(5);e.f=r},function(n,e,t){var r=t(257),a=t(10),o=t(179),i=t(13).f;n.exports=function(n){var e=r.Symbol||(r.Symbol={});a(e,n)||i(e,n,{value:o.f(n)})}},function(n,e,t){var r=t(2),a=t(258);r({target:"Array",stat:!0,forced:!t(164)((function(n){Array.from(n)}))},{from:a})},function(n,e,t){var r=t(12);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){t(2)({target:"Object",stat:!0,sham:!t(9)},{create:t(32)})},function(n,e,t){var r=t(2),a=t(0),o=t(16),i=t(34),s=t(1),c=t(3),l=a.Array,p=o("JSON","stringify"),u=s(/./.exec),f=s("".charAt),d=s("".charCodeAt),m=s("".replace),h=s(1..toString),b=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,y=function(n,e,t){var r=f(t,e-1),a=f(t,e+1);return u(g,n)&&!u(v,a)||u(v,n)&&!u(g,r)?"\\u"+h(d(n,0),16):n},x=c((function(){return'"\\udf06\\ud834"'!==p("\udf06\ud834")||'"\\udead"'!==p("\udead")}));p&&r({target:"JSON",stat:!0,forced:x},{stringify:function(n,e,t){for(var r=0,a=arguments.length,o=l(a);r<a;r++)o[r]=arguments[r];var s=i(p,null,o);return"string"==typeof s?m(s,b,y):s}})},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(91),a=t(279),o=t(280),i=t(281),s=t(282),c=t(283);function l(n){var e=this.__data__=new r(n);this.size=e.size}l.prototype.clear=a,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(58),a=t(124);n.exports=function(n){if(!a(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(300),a=t(48);n.exports=function n(e,t,o,i,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!=e&&t!=t:r(e,t,o,i,n,s))}},function(n,e,t){var r=t(193),a=t(303),o=t(194);n.exports=function(n,e,t,i,s,c){var l=1&t,p=n.length,u=e.length;if(p!=u&&!(l&&u>p))return!1;var f=c.get(n),d=c.get(e);if(f&&d)return f==e&&d==n;var m=-1,h=!0,b=2&t?new r:void 0;for(c.set(n,e),c.set(e,n);++m<p;){var g=n[m],v=e[m];if(i)var y=l?i(v,g,m,e,n,c):i(g,v,m,n,e,c);if(void 0!==y){if(y)continue;h=!1;break}if(b){if(!a(e,(function(n,e){if(!o(b,e)&&(g===n||s(g,n,t,i,c)))return b.push(e)}))){h=!1;break}}else if(g!==v&&!s(g,v,t,i,c)){h=!1;break}}return c.delete(n),c.delete(e),h}},function(n,e,t){var r=t(125),a=t(301),o=t(302);function i(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,n.exports=i},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(313),a=t(319),o=t(199);n.exports=function(n){return o(n)?r(n):a(n)}},function(n,e,t){(function(n){var r=t(28),a=t(315),o=e&&!e.nodeType&&e,i=o&&"object"==typeof n&&n&&!n.nodeType&&n,s=i&&i.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||a;n.exports=c}).call(this,t(146)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(316),a=t(317),o=t(318),i=o&&o.isTypedArray,s=i?a(i):r;n.exports=s},function(n,e,t){var r=t(189),a=t(127);n.exports=function(n){return null!=n&&a(n.length)&&!r(n)}},function(n,e,t){var r=t(41)(t(28),"Set");n.exports=r},function(n,e,t){var r=t(124);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(204),a=t(95);n.exports=function(n,e){for(var t=0,o=(e=r(e,n)).length;null!=n&&t<o;)n=n[a(e[t++])];return t&&t==o?n:void 0}},function(n,e,t){var r=t(26),a=t(128),o=t(330),i=t(333);n.exports=function(n,e){return r(n)?n:a(n,e)?[n]:o(i(n))}},function(n,e,t){"use strict";var r=t(0),a=t(1),o=t(35),i=t(8),s=t(10),c=t(65),l=t(60),p=r.Function,u=a([].concat),f=a([].join),d={},m=function(n,e,t){if(!s(d,e)){for(var r=[],a=0;a<e;a++)r[a]="a["+a+"]";d[e]=p("C,a","return new C("+f(r,",")+")")}return d[e](n,t)};n.exports=l?p.bind:function(n){var e=o(this),t=e.prototype,r=c(arguments,1),a=function(){var t=u(r,c(arguments));return this instanceof a?m(e,t.length,t):e.apply(n,t)};return i(t)&&(a.prototype=t),a}},function(n,e,t){"use strict";var r=t(2),a=t(366).start;r({target:"String",proto:!0,forced:t(368)},{padStart:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){},function(n,e,t){},function(n,e,t){t(2)({target:"Object",stat:!0},{setPrototypeOf:t(64)})},function(n,e,t){var r=t(2),a=t(16),o=t(34),i=t(205),s=t(165),c=t(7),l=t(8),p=t(32),u=t(3),f=a("Reflect","construct"),d=Object.prototype,m=[].push,h=u((function(){function n(){}return!(f((function(){}),[],n)instanceof n)})),b=!u((function(){f((function(){}))})),g=h||b;r({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(n,e){s(n),c(e);var t=arguments.length<3?n:s(arguments[2]);if(b&&!h)return f(n,e,t);if(n==t){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var r=[null];return o(m,r,e),new(o(i,n,r))}var a=t.prototype,u=p(l(a)?a:d),g=o(n,u,e);return l(g)?g:u}})},function(n,e,t){var r=t(2),a=t(0),o=t(56);r({global:!0},{Reflect:{}}),o(a.Reflect,"Reflect",!0)},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(266),a=t(271),o=t(342),i=t(350),s=t(359),c=t(228),l=o((function(n){var e=c(n);return s(e)&&(e=void 0),i(r(n,1,s,!0),a(e,2))}));n.exports=l},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,a=r.exec(t);if(!a)return t;var o="",i=0,s=0;for(i=a.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==i&&(o+=t.substring(s,i)),s=i+1,o+=e}return s!==i?o+t.substring(s,i):o}},function(n,e,t){"use strict";t.r(e);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},a=(t(369),t(29)),o=Object(a.a)(r,(function(){var n=this.$createElement;return(this._self._c||n)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=o.exports},function(n,e,t){"use strict";t.r(e);t(37),t(6),t(38),t(43),t(30);var r={name:"CodeGroup",data:function(){return{codeTabs:[],activeCodeTabIndex:-1}},watch:{activeCodeTabIndex:function(n){this.codeTabs.forEach((function(n){n.elm.classList.remove("theme-code-block__active")})),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted:function(){var n=this;this.codeTabs=(this.$slots.default||[]).filter((function(n){return Boolean(n.componentOptions)})).map((function(e,t){return""===e.componentOptions.propsData.active&&(n.activeCodeTabIndex=t),{title:e.componentOptions.propsData.title,elm:e.elm}})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab:function(n){this.activeCodeTabIndex=n}}},a=(t(370),t(29)),o=Object(a.a)(r,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"theme-code-group"},[t("div",{staticClass:"theme-code-group__nav"},[t("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(e,r){return t("li",{key:e.title,staticClass:"theme-code-group__li"},[t("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(r)}}},[n._v("\n            "+n._s(e.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?t("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=o.exports},function(n,e,t){"use strict";var r=t(9),a=t(0),o=t(1),i=t(100),s=t(14),c=t(10),l=t(145),p=t(33),u=t(80),f=t(154),d=t(3),m=t(55).f,h=t(39).f,b=t(13).f,g=t(364),v=t(148).trim,y=a.Number,x=y.prototype,w=a.TypeError,S=o("".slice),_=o("".charCodeAt),k=function(n){var e=f(n,"number");return"bigint"==typeof e?e:C(e)},C=function(n){var e,t,r,a,o,i,s,c,l=f(n,"number");if(u(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=v(l),43===(e=_(l,0))||45===e){if(88===(t=_(l,2))||120===t)return NaN}else if(48===e){switch(_(l,1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=(o=S(l,2)).length,s=0;s<i;s++)if((c=_(o,s))<48||c>a)return NaN;return parseInt(o,r)}return+l};if(i("Number",!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var A,j=function(n){var e=arguments.length<1?0:y(k(n)),t=this;return p(x,t)&&d((function(){g(t)}))?l(Object(e),t,j):e},P=r?m(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;P.length>T;T++)c(y,A=P[T])&&!c(j,A)&&b(j,A,h(y,A));j.prototype=x,x.constructor=j,s(a,"Number",j)}},function(n,e,t){var r=t(3),a=t(0).RegExp;n.exports=r((function(){var n=a(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}))},function(n,e,t){"use strict";var r=t(159).IteratorPrototype,a=t(32),o=t(47),i=t(56),s=t(62),c=function(){return this};n.exports=function(n,e,t,l){var p=e+" Iterator";return n.prototype=a(r,{next:o(+!l,t)}),i(n,p,!1,!0),s[p]=c,n}},function(n,e,t){var r=t(14);n.exports=function(n,e,t){for(var a in e)r(n,a,e[a],t);return n}},function(n,e,t){"use strict";var r=t(16),a=t(13),o=t(5),i=t(9),s=o("species");n.exports=function(n){var e=r(n),t=a.f;i&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},function(n,e,t){var r=t(0),a=t(33),o=r.TypeError;n.exports=function(n,e){if(a(e,n))return n;throw o("Incorrect invocation")}},function(n,e,t){var r=t(2),a=t(9),o=t(158),i=t(19),s=t(39),c=t(66);r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(n){for(var e,t,r=i(n),a=s.f,l=o(r),p={},u=0;l.length>u;)void 0!==(t=a(r,e=l[u++]))&&c(p,e,t);return p}})},function(n,e,t){var r=t(3),a=t(0).RegExp;n.exports=r((function(){var n=a("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}))},function(n,e,t){"use strict";var r=t(2),a=t(110).includes,o=t(135);r({target:"Array",proto:!0},{includes:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(174),i=t(17),s=t(12),c=t(175),l=a("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(n){return!!~l(s(i(this)),s(o(n)),arguments.length>1?arguments[1]:void 0)}})},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){"use strict";var r=t(2),a=t(148).trim;r({target:"String",proto:!0,forced:t(362)("trim")},{trim:function(){return a(this)}})},function(n,e,t){var r=t(119),a=Math.floor,o=function(n,e){var t=n.length,c=a(t/2);return t<8?i(n,e):s(n,o(r(n,0,c),e),o(r(n,c),e),e)},i=function(n,e){for(var t,r,a=n.length,o=1;o<a;){for(r=o,t=n[o];r&&e(n[r-1],t)>0;)n[r]=n[--r];r!==o++&&(n[r]=t)}return n},s=function(n,e,t,r){for(var a=e.length,o=t.length,i=0,s=0;i<a||s<o;)n[i+s]=i<a&&s<o?r(e[i],t[s])<=0?e[i++]:t[s++]:i<a?e[i++]:t[s++];return n};n.exports=o},function(n,e,t){var r=t(0),a=t(9),o=t(103).MISSED_STICKY,i=t(21),s=t(13).f,c=t(36).get,l=RegExp.prototype,p=r.TypeError;a&&o&&s(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!c(this).sticky;throw p("Incompatible receiver, RegExp required")}}})},function(n,e,t){n.exports=t(379)},function(n,e,t){var r=t(0),a=t(11),o=t(4),i=t(8),s=r.TypeError;n.exports=function(n,e){var t,r;if("string"===e&&o(t=n.toString)&&!i(r=a(t,n)))return r;if(o(t=n.valueOf)&&!i(r=a(t,n)))return r;if("string"!==e&&o(t=n.toString)&&!i(r=a(t,n)))return r;throw s("Can't convert object to primitive value")}},function(n,e,t){var r=t(0),a=t(4),o=t(84),i=r.WeakMap;n.exports=a(i)&&/native code/.test(o(i))},function(n,e,t){var r=t(0),a=t(4),o=r.String,i=r.TypeError;n.exports=function(n){if("object"==typeof n||a(n))return n;throw i("Can't set "+o(n)+" as a prototype")}},function(n,e,t){"use strict";var r,a,o,i,s=t(2),c=t(22),l=t(0),p=t(16),u=t(11),f=t(161),d=t(14),m=t(221),h=t(64),b=t(56),g=t(222),v=t(35),y=t(4),x=t(8),w=t(223),S=t(84),_=t(237),k=t(164),C=t(118),A=t(166).set,j=t(238),P=t(168),T=t(241),O=t(169),E=t(242),B=t(243),I=t(36),L=t(100),M=t(5),D=t(244),R=t(86),$=t(49),F=M("species"),q="Promise",z=I.getterFor(q),N=I.set,U=I.getterFor(q),J=f&&f.prototype,X=f,V=J,H=l.TypeError,Q=l.document,W=l.process,G=O.f,Y=G,K=!!(Q&&Q.createEvent&&l.dispatchEvent),Z=y(l.PromiseRejectionEvent),nn=!1,en=L(q,(function(){var n=S(X),e=n!==String(X);if(!e&&66===$)return!0;if(c&&!V.finally)return!0;if($>=51&&/native code/.test(n))return!1;var t=new X((function(n){n(1)})),r=function(n){n((function(){}),(function(){}))};return(t.constructor={})[F]=r,!(nn=t.then((function(){}))instanceof r)||!e&&D&&!Z})),tn=en||!k((function(n){X.all(n).catch((function(){}))})),rn=function(n){var e;return!(!x(n)||!y(e=n.then))&&e},an=function(n,e){var t,r,a,o=e.value,i=1==e.state,s=i?n.ok:n.fail,c=n.resolve,l=n.reject,p=n.domain;try{s?(i||(2===e.rejection&&pn(e),e.rejection=1),!0===s?t=o:(p&&p.enter(),t=s(o),p&&(p.exit(),a=!0)),t===n.promise?l(H("Promise-chain cycle")):(r=rn(t))?u(r,t,c,l):c(t)):l(o)}catch(n){p&&!a&&p.exit(),l(n)}},on=function(n,e){n.notified||(n.notified=!0,j((function(){for(var t,r=n.reactions;t=r.get();)an(t,n);n.notified=!1,e&&!n.rejection&&cn(n)})))},sn=function(n,e,t){var r,a;K?((r=Q.createEvent("Event")).promise=e,r.reason=t,r.initEvent(n,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:t},!Z&&(a=l["on"+n])?a(r):"unhandledrejection"===n&&T("Unhandled promise rejection",t)},cn=function(n){u(A,l,(function(){var e,t=n.facade,r=n.value;if(ln(n)&&(e=E((function(){R?W.emit("unhandledRejection",r,t):sn("unhandledrejection",t,r)})),n.rejection=R||ln(n)?2:1,e.error))throw e.value}))},ln=function(n){return 1!==n.rejection&&!n.parent},pn=function(n){u(A,l,(function(){var e=n.facade;R?W.emit("rejectionHandled",e):sn("rejectionhandled",e,n.value)}))},un=function(n,e,t){return function(r){n(e,r,t)}},fn=function(n,e,t){n.done||(n.done=!0,t&&(n=t),n.value=e,n.state=2,on(n,!0))},dn=function(n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===e)throw H("Promise can't be resolved itself");var r=rn(e);r?j((function(){var t={done:!1};try{u(r,e,un(dn,t,n),un(fn,t,n))}catch(e){fn(t,e,n)}})):(n.value=e,n.state=1,on(n,!1))}catch(e){fn({done:!1},e,n)}}};if(en&&(V=(X=function(n){w(this,V),v(n),u(r,this);var e=z(this);try{n(un(dn,e),un(fn,e))}catch(n){fn(e,n)}}).prototype,(r=function(n){N(this,{type:q,done:!1,notified:!1,parent:!1,reactions:new B,rejection:!1,state:0,value:void 0})}).prototype=m(V,{then:function(n,e){var t=U(this),r=G(C(this,X));return t.parent=!0,r.ok=!y(n)||n,r.fail=y(e)&&e,r.domain=R?W.domain:void 0,0==t.state?t.reactions.add(r):j((function(){an(r,t)})),r.promise},catch:function(n){return this.then(void 0,n)}}),a=function(){var n=new r,e=z(n);this.promise=n,this.resolve=un(dn,e),this.reject=un(fn,e)},O.f=G=function(n){return n===X||n===o?new a(n):Y(n)},!c&&y(f)&&J!==Object.prototype)){i=J.then,nn||(d(J,"then",(function(n,e){var t=this;return new X((function(n,e){u(i,t,n,e)})).then(n,e)}),{unsafe:!0}),d(J,"catch",V.catch,{unsafe:!0}));try{delete J.constructor}catch(n){}h&&h(J,V)}s({global:!0,wrap:!0,forced:en},{Promise:X}),b(X,q,!1,!0),g(q),o=p(q),s({target:q,stat:!0,forced:en},{reject:function(n){var e=G(this);return u(e.reject,void 0,n),e.promise}}),s({target:q,stat:!0,forced:c||en},{resolve:function(n){return P(c&&this===o?X:this,n)}}),s({target:q,stat:!0,forced:tn},{all:function(n){var e=this,t=G(e),r=t.resolve,a=t.reject,o=E((function(){var t=v(e.resolve),o=[],i=0,s=1;_(n,(function(n){var c=i++,l=!1;s++,u(t,e,n).then((function(n){l||(l=!0,o[c]=n,--s||r(o))}),a)})),--s||r(o)}));return o.error&&a(o.value),t.promise},race:function(n){var e=this,t=G(e),r=t.reject,a=E((function(){var a=v(e.resolve);_(n,(function(n){u(a,e,n).then(t.resolve,r)}))}));return a.error&&r(a.value),t.promise}})},function(n,e,t){var r=t(0),a=t(53),o=t(11),i=t(7),s=t(81),c=t(162),l=t(20),p=t(33),u=t(141),f=t(101),d=t(163),m=r.TypeError,h=function(n,e){this.stopped=n,this.result=e},b=h.prototype;n.exports=function(n,e,t){var r,g,v,y,x,w,S,_=t&&t.that,k=!(!t||!t.AS_ENTRIES),C=!(!t||!t.IS_ITERATOR),A=!(!t||!t.INTERRUPTED),j=a(e,_),P=function(n){return r&&d(r,"normal",n),new h(!0,n)},T=function(n){return k?(i(n),A?j(n[0],n[1],P):j(n[0],n[1])):A?j(n,P):j(n)};if(C)r=n;else{if(!(g=f(n)))throw m(s(n)+" is not iterable");if(c(g)){for(v=0,y=l(n);y>v;v++)if((x=T(n[v]))&&p(b,x))return x;return new h(!1)}r=u(n,g)}for(w=r.next;!(S=o(w,r)).done;){try{x=T(S.value)}catch(n){d(r,"throw",n)}if("object"==typeof x&&x&&p(b,x))return x}return new h(!1)}},function(n,e,t){var r,a,o,i,s,c,l,p,u=t(0),f=t(53),d=t(39).f,m=t(166).set,h=t(167),b=t(239),g=t(240),v=t(86),y=u.MutationObserver||u.WebKitMutationObserver,x=u.document,w=u.process,S=u.Promise,_=d(u,"queueMicrotask"),k=_&&_.value;k||(r=function(){var n,e;for(v&&(n=w.domain)&&n.exit();a;){e=a.fn,a=a.next;try{e()}catch(n){throw a?i():o=void 0,n}}o=void 0,n&&n.enter()},h||v||g||!y||!x?!b&&S&&S.resolve?((l=S.resolve(void 0)).constructor=S,p=f(l.then,l),i=function(){p(r)}):v?i=function(){w.nextTick(r)}:(m=f(m,u),i=function(){m(r)}):(s=!0,c=x.createTextNode(""),new y(r).observe(c,{characterData:!0}),i=function(){c.data=s=!s})),n.exports=k||function(n){var e={fn:n,next:void 0};o&&(o.next=e),a||(a=e,i()),o=e}},function(n,e,t){var r=t(27),a=t(0);n.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==a.Pebble},function(n,e,t){var r=t(27);n.exports=/web0s(?!.*chrome)/i.test(r)},function(n,e,t){var r=t(0);n.exports=function(n,e){var t=r.console;t&&t.error&&(1==arguments.length?t.error(n):t.error(n,e))}},function(n,e){n.exports=function(n){try{return{error:!1,value:n()}}catch(n){return{error:!0,value:n}}}},function(n,e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(n){var e={item:n,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},n.exports=t},function(n,e){n.exports="object"==typeof window},function(n,e,t){var r=t(2),a=t(246);r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},function(n,e,t){"use strict";var r=t(9),a=t(1),o=t(11),i=t(3),s=t(82),c=t(115),l=t(113),p=t(15),u=t(59),f=Object.assign,d=Object.defineProperty,m=a([].concat);n.exports=!f||i((function(){if(r&&1!==f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},e={},t=Symbol();return n[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(n){e[n]=n})),7!=f({},n)[t]||"abcdefghijklmnopqrst"!=s(f({},e)).join("")}))?function(n,e){for(var t=p(n),a=arguments.length,i=1,f=c.f,d=l.f;a>i;)for(var h,b=u(arguments[i++]),g=f?m(s(b),f(b)):s(b),v=g.length,y=0;v>y;)h=g[y++],r&&!o(d,b,h)||(t[h]=b[h]);return t}:f},function(n,e,t){"use strict";var r=t(2),a=t(22),o=t(161),i=t(3),s=t(16),c=t(4),l=t(118),p=t(168),u=t(14);if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&i((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(n){var e=l(this,s("Promise")),t=c(n);return this.then(t?function(t){return p(e,n()).then((function(){return t}))}:n,t?function(t){return p(e,n()).then((function(){throw t}))}:n)}}),!a&&c(o)){var f=s("Promise").prototype.finally;o.prototype.finally!==f&&u(o.prototype,"finally",f,{unsafe:!0})}},function(n,e,t){"use strict";var r=t(117),a=t(73);n.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},function(n,e,t){var r=t(0),a=t(57),o=t(85),i=t(8),s=t(5)("species"),c=r.Array;n.exports=function(n){var e;return a(n)&&(e=n.constructor,(o(e)&&(e===c||a(e.prototype))||i(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},function(n,e,t){"use strict";var r=t(2),a=t(251).left,o=t(45),i=t(49),s=t(86);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&i>79&&i<83},{reduce:function(n){var e=arguments.length;return a(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(0),a=t(35),o=t(15),i=t(59),s=t(20),c=r.TypeError,l=function(n){return function(e,t,r,l){a(t);var p=o(e),u=i(p),f=s(p),d=n?f-1:0,m=n?-1:1;if(r<2)for(;;){if(d in u){l=u[d],d+=m;break}if(d+=m,n?d<0:f<=d)throw c("Reduce of empty array with no initial value")}for(;n?d>=0:f>d;d+=m)d in u&&(l=t(l,u[d],d,p));return l}};n.exports={left:l(!1),right:l(!0)}},function(n,e,t){"use strict";var r,a=t(2),o=t(1),i=t(39).f,s=t(50),c=t(12),l=t(174),p=t(17),u=t(175),f=t(22),d=o("".startsWith),m=o("".slice),h=Math.min,b=u("startsWith");a({target:"String",proto:!0,forced:!!(f||b||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!b},{startsWith:function(n){var e=c(p(this));l(n);var t=s(h(arguments.length>1?arguments[1]:void 0,e.length)),r=c(n);return d?d(e,r,t):m(e,t,t+r.length)===r}})},function(n,e,t){var r=t(2),a=t(177),o=t(3),i=t(8),s=t(254).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){c(1)})),sham:!a},{freeze:function(n){return c&&i(n)?c(s(n)):n}})},function(n,e,t){var r=t(2),a=t(1),o=t(61),i=t(8),s=t(10),c=t(13).f,l=t(55),p=t(178),u=t(255),f=t(77),d=t(177),m=!1,h=f("meta"),b=0,g=function(n){c(n,h,{value:{objectID:"O"+b++,weakData:{}}})},v=n.exports={enable:function(){v.enable=function(){},m=!0;var n=l.f,e=a([].splice),t={};t[h]=1,n(t).length&&(l.f=function(t){for(var r=n(t),a=0,o=r.length;a<o;a++)if(r[a]===h){e(r,a,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f}))},fastKey:function(n,e){if(!i(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!s(n,h)){if(!u(n))return"F";if(!e)return"E";g(n)}return n[h].objectID},getWeakData:function(n,e){if(!s(n,h)){if(!u(n))return!0;if(!e)return!1;g(n)}return n[h].weakData},onFreeze:function(n){return d&&m&&u(n)&&!s(n,h)&&g(n),n}};o[h]=!0},function(n,e,t){var r=t(3),a=t(8),o=t(21),i=t(256),s=Object.isExtensible,c=r((function(){s(1)}));n.exports=c||i?function(n){return!!a(n)&&((!i||"ArrayBuffer"!=o(n))&&(!s||s(n)))}:s},function(n,e,t){var r=t(3);n.exports=r((function(){if("function"==typeof ArrayBuffer){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}}))},function(n,e,t){var r=t(0);n.exports=r},function(n,e,t){"use strict";var r=t(0),a=t(53),o=t(11),i=t(15),s=t(259),c=t(162),l=t(85),p=t(20),u=t(66),f=t(141),d=t(101),m=r.Array;n.exports=function(n){var e=i(n),t=l(this),r=arguments.length,h=r>1?arguments[1]:void 0,b=void 0!==h;b&&(h=a(h,r>2?arguments[2]:void 0));var g,v,y,x,w,S,_=d(e),k=0;if(!_||this==m&&c(_))for(g=p(e),v=t?new this(g):m(g);g>k;k++)S=b?h(e[k],k):e[k],u(v,k,S);else for(w=(x=f(e,_)).next,v=t?new this:[];!(y=o(w,x)).done;k++)S=b?s(x,h,[y.value,k],!0):y.value,u(v,k,S);return v.length=k,v}},function(n,e,t){var r=t(7),a=t(163);n.exports=function(n,e,t,o){try{return o?e(r(t)[0],t[1]):e(t)}catch(e){a(n,"throw",e)}}},function(n,e,t){"use strict";var r=t(16),a=t(10),o=t(23),i=t(33),s=t(64),c=t(114),l=t(145),p=t(182),u=t(261),f=t(262),d=t(263),m=t(22);n.exports=function(n,e,t,h){var b=h?2:1,g=n.split("."),v=g[g.length-1],y=r.apply(null,g);if(y){var x=y.prototype;if(!m&&a(x,"cause")&&delete x.cause,!t)return y;var w=r("Error"),S=e((function(n,e){var t=p(h?e:n,void 0),r=h?new y(n):new y;return void 0!==t&&o(r,"message",t),d&&o(r,"stack",f(r.stack,2)),this&&i(x,this)&&l(r,this,S),arguments.length>b&&u(r,arguments[b]),r}));if(S.prototype=x,"Error"!==v&&(s?s(S,w):c(S,w,{name:!0})),c(S,y),!m)try{x.name!==v&&o(x,"name",v),x.constructor=S}catch(n){}return S}}},function(n,e,t){var r=t(8),a=t(23);n.exports=function(n,e){r(e)&&"cause"in e&&a(n,"cause",e.cause)}},function(n,e,t){var r=t(1)("".replace),a=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,i=o.test(a);n.exports=function(n,e){if(i&&"string"==typeof n)for(;e--;)n=r(n,o,"");return n}},function(n,e,t){var r=t(3),a=t(47);n.exports=!r((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",a(1,7)),7!==n.stack)}))},function(n,e,t){"use strict";var r=t(9),a=t(3),o=t(7),i=t(32),s=t(182),c=Error.prototype.toString,l=a((function(){if(r){var n=i(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==c.call(n))return!0}return"2: 1"!==c.call({message:1,name:2})||"Error"!==c.call({})}));n.exports=l?function(){var n=o(this),e=s(n.name,"Error"),t=s(n.message);return e?t?e+": "+t:e:t}:c},function(n,e,t){var r=t(1),a=t(15),o=Math.floor,i=r("".charAt),s=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,p=/\$([$&'`]|\d{1,2})/g;n.exports=function(n,e,t,r,u,f){var d=t+n.length,m=r.length,h=p;return void 0!==u&&(u=a(u),h=l),s(f,h,(function(a,s){var l;switch(i(s,0)){case"$":return"$";case"&":return n;case"`":return c(e,0,t);case"'":return c(e,d);case"<":l=u[c(s,1,-1)];break;default:var p=+s;if(0===p)return a;if(p>m){var f=o(p/10);return 0===f?a:f<=m?void 0===r[f-1]?i(s,1):r[f-1]+i(s,1):a}l=r[p-1]}return void 0===l?"":l}))}},function(n,e,t){var r=t(185),a=t(267);n.exports=function n(e,t,o,i,s){var c=-1,l=e.length;for(o||(o=a),s||(s=[]);++c<l;){var p=e[c];t>0&&o(p)?t>1?n(p,t-1,o,i,s):r(s,p):i||(s[s.length]=p)}return s}},function(n,e,t){var r=t(67),a=t(122),o=t(26),i=r?r.isConcatSpreadable:void 0;n.exports=function(n){return o(n)||a(n)||!!(i&&n&&n[i])}},function(n,e,t){var r=t(58),a=t(48);n.exports=function(n){return a(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(67),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=o.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var a=i.call(n);return r&&(e?n[s]=t:delete n[s]),a}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(272),a=t(328),o=t(130),i=t(26),s=t(339);n.exports=function(n){return"function"==typeof n?n:null==n?o:"object"==typeof n?i(n)?a(n[0],n[1]):r(n):s(n)}},function(n,e,t){var r=t(273),a=t(327),o=t(202);n.exports=function(n){var e=a(n);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(187),a=t(191);n.exports=function(n,e,t,o){var i=t.length,s=i,c=!o;if(null==n)return!s;for(n=Object(n);i--;){var l=t[i];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++i<s;){var p=(l=t[i])[0],u=n[p],f=l[1];if(c&&l[2]){if(void 0===u&&!(p in n))return!1}else{var d=new r;if(o)var m=o(u,f,p,n,e,d);if(!(void 0===m?a(f,u,3,o,d):m))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(92),a=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():a.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(92);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(92);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(92);n.exports=function(n,e){var t=this.__data__,a=r(t,n);return a<0?(++this.size,t.push([n,e])):t[a][1]=e,this}},function(n,e,t){var r=t(91);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(91),a=t(123),o=t(125);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var i=t.__data__;if(!a||i.length<199)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new o(i)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(189),a=t(285),o=t(124),i=t(190),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,p=c.toString,u=l.hasOwnProperty,f=RegExp("^"+p.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!o(n)||a(n))&&(r(n)?f:s).test(i(n))}},function(n,e,t){var r,a=t(286),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!o&&o in n}},function(n,e,t){var r=t(28)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(289),a=t(91),o=t(123);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},function(n,e,t){var r=t(290),a=t(291),o=t(292),i=t(293),s=t(294);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(93);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(93),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return a.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(93),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:a.call(e,n)}},function(n,e,t){var r=t(93);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(94);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(94);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(94);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(94);n.exports=function(n,e){var t=r(this,n),a=t.size;return t.set(n,e),this.size+=t.size==a?0:1,this}},function(n,e,t){var r=t(187),a=t(192),o=t(304),i=t(307),s=t(323),c=t(26),l=t(196),p=t(198),u="[object Object]",f=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,d,m,h){var b=c(n),g=c(e),v=b?"[object Array]":s(n),y=g?"[object Array]":s(e),x=(v="[object Arguments]"==v?u:v)==u,w=(y="[object Arguments]"==y?u:y)==u,S=v==y;if(S&&l(n)){if(!l(e))return!1;b=!0,x=!1}if(S&&!x)return h||(h=new r),b||p(n)?a(n,e,t,d,m,h):o(n,e,v,t,d,m,h);if(!(1&t)){var _=x&&f.call(n,"__wrapped__"),k=w&&f.call(e,"__wrapped__");if(_||k){var C=_?n.value():n,A=k?e.value():e;return h||(h=new r),m(C,A,t,d,h)}}return!!S&&(h||(h=new r),i(n,e,t,d,m,h))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(67),a=t(305),o=t(188),i=t(192),s=t(306),c=t(126),l=r?r.prototype:void 0,p=l?l.valueOf:void 0;n.exports=function(n,e,t,r,l,u,f){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!u(new a(n),new a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var d=s;case"[object Set]":var m=1&r;if(d||(d=c),n.size!=e.size&&!m)return!1;var h=f.get(n);if(h)return h==e;r|=2,f.set(n,e);var b=i(d(n),d(e),r,l,u,f);return f.delete(n),b;case"[object Symbol]":if(p)return p.call(n)==p.call(e)}return!1}},function(n,e,t){var r=t(28).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(308),a=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,o,i,s){var c=1&t,l=r(n),p=l.length;if(p!=r(e).length&&!c)return!1;for(var u=p;u--;){var f=l[u];if(!(c?f in e:a.call(e,f)))return!1}var d=s.get(n),m=s.get(e);if(d&&m)return d==e&&m==n;var h=!0;s.set(n,e),s.set(e,n);for(var b=c;++u<p;){var g=n[f=l[u]],v=e[f];if(o)var y=c?o(v,g,f,e,n,s):o(g,v,f,n,e,s);if(!(void 0===y?g===v||i(g,v,t,o,s):y)){h=!1;break}b||(b="constructor"==f)}if(h&&!b){var x=n.constructor,w=e.constructor;x==w||!("constructor"in n)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(h=!1)}return s.delete(n),s.delete(e),h}},function(n,e,t){var r=t(309),a=t(310),o=t(195);n.exports=function(n){return r(n,o,a)}},function(n,e,t){var r=t(185),a=t(26);n.exports=function(n,e,t){var o=e(n);return a(n)?o:r(o,t(n))}},function(n,e,t){var r=t(311),a=t(312),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(n){return null==n?[]:(n=Object(n),r(i(n),(function(e){return o.call(n,e)})))}:a;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=0,o=[];++t<r;){var i=n[t];e(i,t,n)&&(o[a++]=i)}return o}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(314),a=t(122),o=t(26),i=t(196),s=t(197),c=t(198),l=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=o(n),p=!t&&a(n),u=!t&&!p&&i(n),f=!t&&!p&&!u&&c(n),d=t||p||u||f,m=d?r(n.length,String):[],h=m.length;for(var b in n)!e&&!l.call(n,b)||d&&("length"==b||u&&("offset"==b||"parent"==b)||f&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||s(b,h))||m.push(b);return m}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(58),a=t(127),o=t(48),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,n.exports=function(n){return o(n)&&a(n.length)&&!!i[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(186),a=e&&!e.nodeType&&e,o=a&&"object"==typeof n&&n&&!n.nodeType&&n,i=o&&o.exports===a&&r.process,s=function(){try{var n=o&&o.require&&o.require("util").types;return n||i&&i.binding&&i.binding("util")}catch(n){}}();n.exports=s}).call(this,t(146)(n))},function(n,e,t){var r=t(320),a=t(321),o=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return a(n);var e=[];for(var t in Object(n))o.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(322)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(324),a=t(123),o=t(325),i=t(200),s=t(326),c=t(58),l=t(190),p=l(r),u=l(a),f=l(o),d=l(i),m=l(s),h=c;(r&&"[object DataView]"!=h(new r(new ArrayBuffer(1)))||a&&"[object Map]"!=h(new a)||o&&"[object Promise]"!=h(o.resolve())||i&&"[object Set]"!=h(new i)||s&&"[object WeakMap]"!=h(new s))&&(h=function(n){var e=c(n),t="[object Object]"==e?n.constructor:void 0,r=t?l(t):"";if(r)switch(r){case p:return"[object DataView]";case u:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case m:return"[object WeakMap]"}return e}),n.exports=h},function(n,e,t){var r=t(41)(t(28),"DataView");n.exports=r},function(n,e,t){var r=t(41)(t(28),"Promise");n.exports=r},function(n,e,t){var r=t(41)(t(28),"WeakMap");n.exports=r},function(n,e,t){var r=t(201),a=t(195);n.exports=function(n){for(var e=a(n),t=e.length;t--;){var o=e[t],i=n[o];e[t]=[o,i,r(i)]}return e}},function(n,e,t){var r=t(191),a=t(329),o=t(336),i=t(128),s=t(201),c=t(202),l=t(95);n.exports=function(n,e){return i(n)&&s(e)?c(l(n),e):function(t){var i=a(t,n);return void 0===i&&i===e?o(t,n):r(e,i,3)}}},function(n,e,t){var r=t(203);n.exports=function(n,e,t){var a=null==n?void 0:r(n,e);return void 0===a?t:a}},function(n,e,t){var r=t(331),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(a,(function(n,t,r,a){e.push(r?a.replace(o,"$1"):t||n)})),e}));n.exports=i},function(n,e,t){var r=t(332);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(125);function a(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,a=e?e.apply(this,r):r[0],o=t.cache;if(o.has(a))return o.get(a);var i=n.apply(this,r);return t.cache=o.set(a,i)||o,i};return t.cache=new(a.Cache||r),t}a.Cache=r,n.exports=a},function(n,e,t){var r=t(334);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(67),a=t(335),o=t(26),i=t(129),s=r?r.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(o(e))return a(e,n)+"";if(i(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=Array(r);++t<r;)a[t]=e(n[t],t,n);return a}},function(n,e,t){var r=t(337),a=t(338);n.exports=function(n,e){return null!=n&&a(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(204),a=t(122),o=t(26),i=t(197),s=t(127),c=t(95);n.exports=function(n,e,t){for(var l=-1,p=(e=r(e,n)).length,u=!1;++l<p;){var f=c(e[l]);if(!(u=null!=n&&t(n,f)))break;n=n[f]}return u||++l!=p?u:!!(p=null==n?0:n.length)&&s(p)&&i(f,p)&&(o(n)||a(n))}},function(n,e,t){var r=t(340),a=t(341),o=t(128),i=t(95);n.exports=function(n){return o(n)?r(i(n)):a(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(203);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(130),a=t(343),o=t(345);n.exports=function(n,e){return o(a(n,e,r),n+"")}},function(n,e,t){var r=t(344),a=Math.max;n.exports=function(n,e,t){return e=a(void 0===e?n.length-1:e,0),function(){for(var o=arguments,i=-1,s=a(o.length-e,0),c=Array(s);++i<s;)c[i]=o[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=o[i];return l[e]=t(c),r(n,this,l)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(346),a=t(349)(r);n.exports=a},function(n,e,t){var r=t(347),a=t(348),o=t(130),i=a?function(n,e){return a(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;n.exports=i},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(41),a=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=a},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var a=t(),o=16-(a-r);if(r=a,o>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(193),a=t(351),o=t(356),i=t(194),s=t(357),c=t(126);n.exports=function(n,e,t){var l=-1,p=a,u=n.length,f=!0,d=[],m=d;if(t)f=!1,p=o;else if(u>=200){var h=e?null:s(n);if(h)return c(h);f=!1,p=i,m=new r}else m=e?[]:d;n:for(;++l<u;){var b=n[l],g=e?e(b):b;if(b=t||0!==b?b:0,f&&g==g){for(var v=m.length;v--;)if(m[v]===g)continue n;e&&m.push(g),d.push(b)}else p(m,g,t)||(m!==d&&m.push(g),d.push(b))}return d}},function(n,e,t){var r=t(352);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(353),a=t(354),o=t(355);n.exports=function(n,e,t){return e==e?o(n,e,t):r(n,a,t)}},function(n,e){n.exports=function(n,e,t,r){for(var a=n.length,o=t+(r?1:-1);r?o--:++o<a;)if(e(n[o],o,n))return o;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,a=n.length;++r<a;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,a=null==n?0:n.length;++r<a;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(200),a=t(358),o=t(126),i=r&&1/o(new r([,-0]))[1]==1/0?function(n){return new r(n)}:a;n.exports=i},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(199),a=t(48);n.exports=function(n){return a(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(63).PROPER,a=t(3),o=t(149);n.exports=function(n){return a((function(){return!!o[n]()||"​᠎"!=="​᠎"[n]()||r&&o[n].name!==n}))}},function(n,e,t){var r=t(2),a=t(205);r({target:"Function",proto:!0,forced:Function.bind!==a},{bind:a})},function(n,e,t){var r=t(1);n.exports=r(1..valueOf)},function(n,e){},function(n,e,t){var r=t(1),a=t(50),o=t(12),i=t(367),s=t(17),c=r(i),l=r("".slice),p=Math.ceil,u=function(n){return function(e,t,r){var i,u,f=o(s(e)),d=a(t),m=f.length,h=void 0===r?" ":o(r);return d<=m||""==h?f:((u=c(h,p((i=d-m)/h.length))).length>i&&(u=l(u,0,i)),n?f+u:u+f)}};n.exports={start:u(!1),end:u(!0)}},function(n,e,t){"use strict";var r=t(0),a=t(52),o=t(12),i=t(17),s=r.RangeError;n.exports=function(n){var e=o(i(this)),t="",r=a(n);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(t+=e);return t}},function(n,e,t){var r=t(27);n.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(n,e,t){"use strict";t(207)},function(n,e,t){"use strict";t(208)},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(35),i=t(15),s=t(20),c=t(12),l=t(3),p=t(230),u=t(45),f=t(372),d=t(373),m=t(49),h=t(374),b=[],g=a(b.sort),v=a(b.push),y=l((function(){b.sort(void 0)})),x=l((function(){b.sort(null)})),w=u("sort"),S=!l((function(){if(m)return m<70;if(!(f&&f>3)){if(d)return!0;if(h)return h<603;var n,e,t,r,a="";for(n=65;n<76;n++){switch(e=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(r=0;r<47;r++)b.push({k:e+r,v:t})}for(b.sort((function(n,e){return e.v-n.v})),r=0;r<b.length;r++)e=b[r].k.charAt(0),a.charAt(a.length-1)!==e&&(a+=e);return"DGBEFHACIJK"!==a}}));r({target:"Array",proto:!0,forced:y||!x||!w||!S},{sort:function(n){void 0!==n&&o(n);var e=i(this);if(S)return void 0===n?g(e):g(e,n);var t,r,a=[],l=s(e);for(r=0;r<l;r++)r in e&&v(a,e[r]);for(p(a,function(n){return function(e,t){return void 0===t?-1:void 0===e?1:void 0!==n?+n(e,t)||0:c(e)>c(t)?1:-1}}(n)),t=a.length,r=0;r<t;)e[r]=a[r++];for(;r<l;)delete e[r++];return e}})},function(n,e,t){var r=t(27).match(/firefox\/(\d+)/i);n.exports=!!r&&+r[1]},function(n,e,t){var r=t(27);n.exports=/MSIE|Trident/.test(r)},function(n,e,t){var r=t(27).match(/AppleWebKit\/(\d+)\./);n.exports=!!r&&+r[1]},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(212)},function(n,e,t){"use strict";t(213)},function(n,e,t){"use strict";t.r(e);t(139),t(236),t(245),t(247);var r=t(87),a=(t(136),t(51),t(6),t(24),t(31),t(43),t(30),Object.freeze({}));function o(n){return null==n}function i(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return null!==n&&"object"==typeof n}var p=Object.prototype.toString;function u(n){return"[object Object]"===p.call(n)}function f(n){return"[object RegExp]"===p.call(n)}function d(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function m(n){return i(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function h(n){return null==n?"":Array.isArray(n)||u(n)&&n.toString===p?JSON.stringify(n,null,2):String(n)}function b(n){var e=parseFloat(n);return isNaN(e)?n:e}function g(n,e){for(var t=Object.create(null),r=n.split(","),a=0;a<r.length;a++)t[r[a]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}g("slot,component",!0);var v=g("key,ref,slot,slot-scope,is");function y(n,e){if(n.length){var t=n.indexOf(e);if(t>-1)return n.splice(t,1)}}var x=Object.prototype.hasOwnProperty;function w(n,e){return x.call(n,e)}function S(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var _=/-(\w)/g,k=S((function(n){return n.replace(_,(function(n,e){return e?e.toUpperCase():""}))})),C=S((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),A=/\B([A-Z])/g,j=S((function(n){return n.replace(A,"-$1").toLowerCase()}));var P=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function T(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function O(n,e){for(var t in e)n[t]=e[t];return n}function E(n){for(var e={},t=0;t<n.length;t++)n[t]&&O(e,n[t]);return e}function B(n,e,t){}var I=function(n,e,t){return!1},L=function(n){return n};function M(n,e){if(n===e)return!0;var t=l(n),r=l(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var a=Array.isArray(n),o=Array.isArray(e);if(a&&o)return n.length===e.length&&n.every((function(n,t){return M(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(a||o)return!1;var i=Object.keys(n),s=Object.keys(e);return i.length===s.length&&i.every((function(t){return M(n[t],e[t])}))}catch(n){return!1}}function D(n,e){for(var t=0;t<n.length;t++)if(M(n[t],e))return t;return-1}function R(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}var $=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],q={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:I,isReservedAttr:I,isUnknownElement:I,getTagNamespace:B,parsePlatformTagName:L,mustUseProp:I,async:!0,_lifecycleHooks:F},z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function N(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var U=new RegExp("[^"+z.source+".$_\\d]");var J,X="__proto__"in{},V="undefined"!=typeof window,H="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Q=H&&WXEnvironment.platform.toLowerCase(),W=V&&window.navigator.userAgent.toLowerCase(),G=W&&/msie|trident/.test(W),Y=W&&W.indexOf("msie 9.0")>0,K=W&&W.indexOf("edge/")>0,Z=(W&&W.indexOf("android"),W&&/iphone|ipad|ipod|ios/.test(W)||"ios"===Q),nn=(W&&/chrome\/\d+/.test(W),W&&/phantomjs/.test(W),W&&W.match(/firefox\/(\d+)/)),en={}.watch,tn=!1;if(V)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){tn=!0}}),window.addEventListener("test-passive",null,rn)}catch(n){}var an=function(){return void 0===J&&(J=!V&&!H&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),J},on=V&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function sn(n){return"function"==typeof n&&/native code/.test(n.toString())}var cn,ln="undefined"!=typeof Symbol&&sn(Symbol)&&"undefined"!=typeof Reflect&&sn(Reflect.ownKeys);cn="undefined"!=typeof Set&&sn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var pn=B,un=0,fn=function(){this.id=un++,this.subs=[]};fn.prototype.addSub=function(n){this.subs.push(n)},fn.prototype.removeSub=function(n){y(this.subs,n)},fn.prototype.depend=function(){fn.target&&fn.target.addDep(this)},fn.prototype.notify=function(){var n=this.subs.slice();for(var e=0,t=n.length;e<t;e++)n[e].update()},fn.target=null;var dn=[];function mn(n){dn.push(n),fn.target=n}function hn(){dn.pop(),fn.target=dn[dn.length-1]}var bn=function(n,e,t,r,a,o,i,s){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=a,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=i,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},gn={child:{configurable:!0}};gn.child.get=function(){return this.componentInstance},Object.defineProperties(bn.prototype,gn);var vn=function(n){void 0===n&&(n="");var e=new bn;return e.text=n,e.isComment=!0,e};function yn(n){return new bn(void 0,void 0,void 0,String(n))}function xn(n){var e=new bn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var wn=Array.prototype,Sn=Object.create(wn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=wn[n];N(Sn,n,(function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var a,o=e.apply(this,t),i=this.__ob__;switch(n){case"push":case"unshift":a=t;break;case"splice":a=t.slice(2)}return a&&i.observeArray(a),i.dep.notify(),o}))}));var _n=Object.getOwnPropertyNames(Sn),kn=!0;function Cn(n){kn=n}var An=function(n){this.value=n,this.dep=new fn,this.vmCount=0,N(n,"__ob__",this),Array.isArray(n)?(X?function(n,e){n.__proto__=e}(n,Sn):function(n,e,t){for(var r=0,a=t.length;r<a;r++){var o=t[r];N(n,o,e[o])}}(n,Sn,_n),this.observeArray(n)):this.walk(n)};function jn(n,e){var t;if(l(n)&&!(n instanceof bn))return w(n,"__ob__")&&n.__ob__ instanceof An?t=n.__ob__:kn&&!an()&&(Array.isArray(n)||u(n))&&Object.isExtensible(n)&&!n._isVue&&(t=new An(n)),e&&t&&t.vmCount++,t}function Pn(n,e,t,r,a){var o=new fn,i=Object.getOwnPropertyDescriptor(n,e);if(!i||!1!==i.configurable){var s=i&&i.get,c=i&&i.set;s&&!c||2!==arguments.length||(t=n[e]);var l=!a&&jn(t);Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(n):t;return fn.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(e)&&En(e))),e},set:function(e){var r=s?s.call(n):t;e===r||e!=e&&r!=r||s&&!c||(c?c.call(n,e):t=e,l=!a&&jn(e),o.notify())}})}}function Tn(n,e,t){if(Array.isArray(n)&&d(e))return n.length=Math.max(n.length,e),n.splice(e,1,t),t;if(e in n&&!(e in Object.prototype))return n[e]=t,t;var r=n.__ob__;return n._isVue||r&&r.vmCount?t:r?(Pn(r.value,e,t),r.dep.notify(),t):(n[e]=t,t)}function On(n,e){if(Array.isArray(n)&&d(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||w(n,e)&&(delete n[e],t&&t.dep.notify())}}function En(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&En(e)}An.prototype.walk=function(n){for(var e=Object.keys(n),t=0;t<e.length;t++)Pn(n,e[t])},An.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)jn(n[e])};var Bn=q.optionMergeStrategies;function In(n,e){if(!e)return n;for(var t,r,a,o=ln?Reflect.ownKeys(e):Object.keys(e),i=0;i<o.length;i++)"__ob__"!==(t=o[i])&&(r=n[t],a=e[t],w(n,t)?r!==a&&u(r)&&u(a)&&In(r,a):Tn(n,t,a));return n}function Ln(n,e,t){return t?function(){var r="function"==typeof e?e.call(t,t):e,a="function"==typeof n?n.call(t,t):n;return r?In(r,a):a}:e?n?function(){return In("function"==typeof e?e.call(this,this):e,"function"==typeof n?n.call(this,this):n)}:e:n}function Mn(n,e){var t=e?n?n.concat(e):Array.isArray(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Dn(n,e,t,r){var a=Object.create(n||null);return e?O(a,e):a}Bn.data=function(n,e,t){return t?Ln(n,e,t):e&&"function"!=typeof e?n:Ln(n,e)},F.forEach((function(n){Bn[n]=Mn})),$.forEach((function(n){Bn[n+"s"]=Dn})),Bn.watch=function(n,e,t,r){if(n===en&&(n=void 0),e===en&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var a={};for(var o in O(a,n),e){var i=a[o],s=e[o];i&&!Array.isArray(i)&&(i=[i]),a[o]=i?i.concat(s):Array.isArray(s)?s:[s]}return a},Bn.props=Bn.methods=Bn.inject=Bn.computed=function(n,e,t,r){if(!n)return e;var a=Object.create(null);return O(a,n),e&&O(a,e),a},Bn.provide=Ln;var Rn=function(n,e){return void 0===e?n:e};function $n(n,e,t){if("function"==typeof e&&(e=e.options),function(n,e){var t=n.props;if(t){var r,a,o={};if(Array.isArray(t))for(r=t.length;r--;)"string"==typeof(a=t[r])&&(o[k(a)]={type:null});else if(u(t))for(var i in t)a=t[i],o[k(i)]=u(a)?a:{type:a};else 0;n.props=o}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(Array.isArray(t))for(var a=0;a<t.length;a++)r[t[a]]={from:t[a]};else if(u(t))for(var o in t){var i=t[o];r[o]=u(i)?O({from:o},i):{from:i}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];"function"==typeof r&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=$n(n,e.extends,t)),e.mixins))for(var r=0,a=e.mixins.length;r<a;r++)n=$n(n,e.mixins[r],t);var o,i={};for(o in n)s(o);for(o in e)w(n,o)||s(o);function s(r){var a=Bn[r]||Rn;i[r]=a(n[r],e[r],t,r)}return i}function Fn(n,e,t,r){if("string"==typeof t){var a=n[e];if(w(a,t))return a[t];var o=k(t);if(w(a,o))return a[o];var i=C(o);return w(a,i)?a[i]:a[t]||a[o]||a[i]}}function qn(n,e,t,r){var a=e[n],o=!w(t,n),i=t[n],s=Jn(Boolean,a.type);if(s>-1)if(o&&!w(a,"default"))i=!1;else if(""===i||i===j(n)){var c=Jn(String,a.type);(c<0||s<c)&&(i=!0)}if(void 0===i){i=function(n,e,t){if(!w(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return"function"==typeof r&&"Function"!==Nn(e.type)?r.call(n):r}(r,a,n);var l=kn;Cn(!0),jn(i),Cn(l)}return i}var zn=/^\s*function (\w+)/;function Nn(n){var e=n&&n.toString().match(zn);return e?e[1]:""}function Un(n,e){return Nn(n)===Nn(e)}function Jn(n,e){if(!Array.isArray(e))return Un(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Un(e[t],n))return t;return-1}function Xn(n,e,t){mn();try{if(e)for(var r=e;r=r.$parent;){var a=r.$options.errorCaptured;if(a)for(var o=0;o<a.length;o++)try{if(!1===a[o].call(r,n,e,t))return}catch(n){Hn(n,r,"errorCaptured hook")}}Hn(n,e,t)}finally{hn()}}function Vn(n,e,t,r,a){var o;try{(o=t?n.apply(e,t):n.call(e))&&!o._isVue&&m(o)&&!o._handled&&(o.catch((function(n){return Xn(n,r,a+" (Promise/async)")})),o._handled=!0)}catch(n){Xn(n,r,a)}return o}function Hn(n,e,t){if(q.errorHandler)try{return q.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Qn(e,null,"config.errorHandler")}Qn(n,e,t)}function Qn(n,e,t){if(!V&&!H||"undefined"==typeof console)throw n;console.error(n)}var Wn,Gn=!1,Yn=[],Kn=!1;function Zn(){Kn=!1;var n=Yn.slice(0);Yn.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&sn(Promise)){var ne=Promise.resolve();Wn=function(){ne.then(Zn),Z&&setTimeout(B)},Gn=!0}else if(G||"undefined"==typeof MutationObserver||!sn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Wn="undefined"!=typeof setImmediate&&sn(setImmediate)?function(){setImmediate(Zn)}:function(){setTimeout(Zn,0)};else{var ee=1,te=new MutationObserver(Zn),re=document.createTextNode(String(ee));te.observe(re,{characterData:!0}),Wn=function(){ee=(ee+1)%2,re.data=String(ee)},Gn=!0}function ae(n,e){var t;if(Yn.push((function(){if(n)try{n.call(e)}catch(n){Xn(n,e,"nextTick")}else t&&t(e)})),Kn||(Kn=!0,Wn()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}var oe=new cn;function ie(n){!function n(e,t){var r,a,o=Array.isArray(e);if(!o&&!l(e)||Object.isFrozen(e)||e instanceof bn)return;if(e.__ob__){var i=e.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(o)for(r=e.length;r--;)n(e[r],t);else for(a=Object.keys(e),r=a.length;r--;)n(e[a[r]],t)}(n,oe),oe.clear()}var se=S((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function ce(n,e){function t(){var n=arguments,r=t.fns;if(!Array.isArray(r))return Vn(r,null,arguments,e,"v-on handler");for(var a=r.slice(),o=0;o<a.length;o++)Vn(a[o],null,n,e,"v-on handler")}return t.fns=n,t}function le(n,e,t,r,a,i){var c,l,p,u;for(c in n)l=n[c],p=e[c],u=se(c),o(l)||(o(p)?(o(l.fns)&&(l=n[c]=ce(l,i)),s(u.once)&&(l=n[c]=a(u.name,l,u.capture)),t(u.name,l,u.capture,u.passive,u.params)):l!==p&&(p.fns=l,n[c]=p));for(c in e)o(n[c])&&r((u=se(c)).name,e[c],u.capture)}function pe(n,e,t){var r;n instanceof bn&&(n=n.data.hook||(n.data.hook={}));var a=n[e];function c(){t.apply(this,arguments),y(r.fns,c)}o(a)?r=ce([c]):i(a.fns)&&s(a.merged)?(r=a).fns.push(c):r=ce([a,c]),r.merged=!0,n[e]=r}function ue(n,e,t,r,a){if(i(e)){if(w(e,t))return n[t]=e[t],a||delete e[t],!0;if(w(e,r))return n[t]=e[r],a||delete e[r],!0}return!1}function fe(n){return c(n)?[yn(n)]:Array.isArray(n)?function n(e,t){var r,a,l,p,u=[];for(r=0;r<e.length;r++)o(a=e[r])||"boolean"==typeof a||(l=u.length-1,p=u[l],Array.isArray(a)?a.length>0&&(de((a=n(a,(t||"")+"_"+r))[0])&&de(p)&&(u[l]=yn(p.text+a[0].text),a.shift()),u.push.apply(u,a)):c(a)?de(p)?u[l]=yn(p.text+a):""!==a&&u.push(yn(a)):de(a)&&de(p)?u[l]=yn(p.text+a.text):(s(e._isVList)&&i(a.tag)&&o(a.key)&&i(t)&&(a.key="__vlist"+t+"_"+r+"__"),u.push(a)));return u}(n):void 0}function de(n){return i(n)&&i(n.text)&&!1===n.isComment}function me(n,e){if(n){for(var t=Object.create(null),r=ln?Reflect.ownKeys(n):Object.keys(n),a=0;a<r.length;a++){var o=r[a];if("__ob__"!==o){for(var i=n[o].from,s=e;s;){if(s._provided&&w(s._provided,i)){t[o]=s._provided[i];break}s=s.$parent}if(!s)if("default"in n[o]){var c=n[o].default;t[o]="function"==typeof c?c.call(e):c}else 0}}return t}}function he(n,e){if(!n||!n.length)return{};for(var t={},r=0,a=n.length;r<a;r++){var o=n[r],i=o.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,o.context!==e&&o.fnContext!==e||!i||null==i.slot)(t.default||(t.default=[])).push(o);else{var s=i.slot,c=t[s]||(t[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in t)t[l].every(be)&&delete t[l];return t}function be(n){return n.isComment&&!n.asyncFactory||" "===n.text}function ge(n){return n.isComment&&n.asyncFactory}function ve(n,e,t){var r,o=Object.keys(e).length>0,i=n?!!n.$stable:!o,s=n&&n.$key;if(n){if(n._normalized)return n._normalized;if(i&&t&&t!==a&&s===t.$key&&!o&&!t.$hasNormal)return t;for(var c in r={},n)n[c]&&"$"!==c[0]&&(r[c]=ye(e,c,n[c]))}else r={};for(var l in e)l in r||(r[l]=xe(e,l));return n&&Object.isExtensible(n)&&(n._normalized=r),N(r,"$stable",i),N(r,"$key",s),N(r,"$hasNormal",o),r}function ye(n,e,t){var r=function(){var n=arguments.length?t.apply(null,arguments):t({}),e=(n=n&&"object"==typeof n&&!Array.isArray(n)?[n]:fe(n))&&n[0];return n&&(!e||1===n.length&&e.isComment&&!ge(e))?void 0:n};return t.proxy&&Object.defineProperty(n,e,{get:r,enumerable:!0,configurable:!0}),r}function xe(n,e){return function(){return n[e]}}function we(n,e){var t,r,a,o,s;if(Array.isArray(n)||"string"==typeof n)for(t=new Array(n.length),r=0,a=n.length;r<a;r++)t[r]=e(n[r],r);else if("number"==typeof n)for(t=new Array(n),r=0;r<n;r++)t[r]=e(r+1,r);else if(l(n))if(ln&&n[Symbol.iterator]){t=[];for(var c=n[Symbol.iterator](),p=c.next();!p.done;)t.push(e(p.value,t.length)),p=c.next()}else for(o=Object.keys(n),t=new Array(o.length),r=0,a=o.length;r<a;r++)s=o[r],t[r]=e(n[s],s,r);return i(t)||(t=[]),t._isVList=!0,t}function Se(n,e,t,r){var a,o=this.$scopedSlots[n];o?(t=t||{},r&&(t=O(O({},r),t)),a=o(t)||("function"==typeof e?e():e)):a=this.$slots[n]||("function"==typeof e?e():e);var i=t&&t.slot;return i?this.$createElement("template",{slot:i},a):a}function _e(n){return Fn(this.$options,"filters",n)||L}function ke(n,e){return Array.isArray(n)?-1===n.indexOf(e):n!==e}function Ce(n,e,t,r,a){var o=q.keyCodes[e]||t;return a&&r&&!q.keyCodes[e]?ke(a,r):o?ke(o,n):r?j(r)!==e:void 0===n}function Ae(n,e,t,r,a){if(t)if(l(t)){var o;Array.isArray(t)&&(t=E(t));var i=function(i){if("class"===i||"style"===i||v(i))o=n;else{var s=n.attrs&&n.attrs.type;o=r||q.mustUseProp(e,s,i)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=k(i),l=j(i);c in o||l in o||(o[i]=t[i],a&&((n.on||(n.on={}))["update:"+i]=function(n){t[i]=n}))};for(var s in t)i(s)}else;return n}function je(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||Te(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,null,this),"__static__"+n,!1),r}function Pe(n,e,t){return Te(n,"__once__"+e+(t?"_"+t:""),!0),n}function Te(n,e,t){if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&Oe(n[r],e+"_"+r,t);else Oe(n,e,t)}function Oe(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function Ee(n,e){if(e)if(u(e)){var t=n.on=n.on?O({},n.on):{};for(var r in e){var a=t[r],o=e[r];t[r]=a?[].concat(a,o):o}}else;return n}function Be(n,e,t,r){e=e||{$stable:!t};for(var a=0;a<n.length;a++){var o=n[a];Array.isArray(o)?Be(o,e,t):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Ie(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function Le(n,e){return"string"==typeof n?e+n:n}function Me(n){n._o=Pe,n._n=b,n._s=h,n._l=we,n._t=Se,n._q=M,n._i=D,n._m=je,n._f=_e,n._k=Ce,n._b=Ae,n._v=yn,n._e=vn,n._u=Be,n._g=Ee,n._d=Ie,n._p=Le}function De(n,e,t,r,o){var i,c=this,l=o.options;w(r,"_uid")?(i=Object.create(r))._original=r:(i=r,r=r._original);var p=s(l._compiled),u=!p;this.data=n,this.props=e,this.children=t,this.parent=r,this.listeners=n.on||a,this.injections=me(l.inject,r),this.slots=function(){return c.$slots||ve(n.scopedSlots,c.$slots=he(t,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ve(n.scopedSlots,this.slots())}}),p&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=ve(n.scopedSlots,this.$slots)),l._scopeId?this._c=function(n,e,t,a){var o=Ue(i,n,e,t,a,u);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=r),o}:this._c=function(n,e,t,r){return Ue(i,n,e,t,r,u)}}function Re(n,e,t,r,a){var o=xn(n);return o.fnContext=t,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function $e(n,e){for(var t in e)n[k(t)]=e[t]}Me(De.prototype);var Fe={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;Fe.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;i(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Ke)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,r,o){0;var i=r.data.scopedSlots,s=n.$scopedSlots,c=!!(i&&!i.$stable||s!==a&&!s.$stable||i&&n.$scopedSlots.$key!==i.$key||!i&&n.$scopedSlots.$key),l=!!(o||n.$options._renderChildren||c);n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r);if(n.$options._renderChildren=o,n.$attrs=r.data.attrs||a,n.$listeners=t||a,e&&n.$options.props){Cn(!1);for(var p=n._props,u=n.$options._propKeys||[],f=0;f<u.length;f++){var d=u[f],m=n.$options.props;p[d]=qn(d,m,e,n)}Cn(!0),n.$options.propsData=e}t=t||a;var h=n.$options._parentListeners;n.$options._parentListeners=t,Ye(n,t,h),l&&(n.$slots=he(o,r.context),n.$forceUpdate());0}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,tt(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,at.push(e)):et(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(t&&(e._directInactive=!0,nt(e)))return;if(!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);tt(e,"deactivated")}}(e,!0):e.$destroy())}},qe=Object.keys(Fe);function ze(n,e,t,r,c){if(!o(n)){var p=t.$options._base;if(l(n)&&(n=p.extend(n)),"function"==typeof n){var u;if(o(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&i(n.errorComp))return n.errorComp;if(i(n.resolved))return n.resolved;var t=Xe;t&&i(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t);if(s(n.loading)&&i(n.loadingComp))return n.loadingComp;if(t&&!i(n.owners)){var r=n.owners=[t],a=!0,c=null,p=null;t.$on("hook:destroyed",(function(){return y(r,t)}));var u=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==p&&(clearTimeout(p),p=null))},f=R((function(t){n.resolved=Ve(t,e),a?r.length=0:u(!0)})),d=R((function(e){i(n.errorComp)&&(n.error=!0,u(!0))})),h=n(f,d);return l(h)&&(m(h)?o(n.resolved)&&h.then(f,d):m(h.component)&&(h.component.then(f,d),i(h.error)&&(n.errorComp=Ve(h.error,e)),i(h.loading)&&(n.loadingComp=Ve(h.loading,e),0===h.delay?n.loading=!0:c=setTimeout((function(){c=null,o(n.resolved)&&o(n.error)&&(n.loading=!0,u(!1))}),h.delay||200)),i(h.timeout)&&(p=setTimeout((function(){p=null,o(n.resolved)&&d(null)}),h.timeout)))),a=!1,n.loading?n.loadingComp:n.resolved}}(u=n,p)))return function(n,e,t,r,a){var o=vn();return o.asyncFactory=n,o.asyncMeta={data:e,context:t,children:r,tag:a},o}(u,e,t,r,c);e=e||{},kt(n),i(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var a=e.on||(e.on={}),o=a[r],s=e.model.callback;i(o)?(Array.isArray(o)?-1===o.indexOf(s):o!==s)&&(a[r]=[s].concat(o)):a[r]=s}(n.options,e);var f=function(n,e,t){var r=e.options.props;if(!o(r)){var a={},s=n.attrs,c=n.props;if(i(s)||i(c))for(var l in r){var p=j(l);ue(a,c,l,p,!0)||ue(a,s,l,p,!1)}return a}}(e,n);if(s(n.options.functional))return function(n,e,t,r,o){var s=n.options,c={},l=s.props;if(i(l))for(var p in l)c[p]=qn(p,l,e||a);else i(t.attrs)&&$e(c,t.attrs),i(t.props)&&$e(c,t.props);var u=new De(t,c,o,r,n),f=s.render.call(null,u._c,u);if(f instanceof bn)return Re(f,t,u.parent,s,u);if(Array.isArray(f)){for(var d=fe(f)||[],m=new Array(d.length),h=0;h<d.length;h++)m[h]=Re(d[h],t,u.parent,s,u);return m}}(n,f,e,t,r);var d=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var h=e.slot;e={},h&&(e.slot=h)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<qe.length;t++){var r=qe[t],a=e[r],o=Fe[r];a===o||a&&a._merged||(e[r]=a?Ne(o,a):o)}}(e);var b=n.options.name||c;return new bn("vue-component-"+n.cid+(b?"-"+b:""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:f,listeners:d,tag:c,children:r},u)}}}function Ne(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}function Ue(n,e,t,r,a,p){return(Array.isArray(t)||c(t))&&(a=r,r=t,t=void 0),s(p)&&(a=2),function(n,e,t,r,a){if(i(t)&&i(t.__ob__))return vn();i(t)&&i(t.is)&&(e=t.is);if(!e)return vn();0;Array.isArray(r)&&"function"==typeof r[0]&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===a?r=fe(r):1===a&&(r=function(n){for(var e=0;e<n.length;e++)if(Array.isArray(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var c,p;if("string"==typeof e){var u;p=n.$vnode&&n.$vnode.ns||q.getTagNamespace(e),c=q.isReservedTag(e)?new bn(q.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!i(u=Fn(n.$options,"components",e))?new bn(e,t,r,void 0,void 0,n):ze(u,t,n,r,e)}else c=ze(e,t,n,r);return Array.isArray(c)?c:i(c)?(i(p)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(i(e.children))for(var a=0,c=e.children.length;a<c;a++){var l=e.children[a];i(l.tag)&&(o(l.ns)||s(r)&&"svg"!==l.tag)&&n(l,t,r)}}(c,p),i(t)&&function(n){l(n.style)&&ie(n.style);l(n.class)&&ie(n.class)}(t),c):vn()}(n,e,t,r,a)}var Je,Xe=null;function Ve(n,e){return(n.__esModule||ln&&"Module"===n[Symbol.toStringTag])&&(n=n.default),l(n)?e.extend(n):n}function He(n){if(Array.isArray(n))for(var e=0;e<n.length;e++){var t=n[e];if(i(t)&&(i(t.componentOptions)||ge(t)))return t}}function Qe(n,e){Je.$on(n,e)}function We(n,e){Je.$off(n,e)}function Ge(n,e){var t=Je;return function r(){var a=e.apply(null,arguments);null!==a&&t.$off(n,r)}}function Ye(n,e,t){Je=n,le(e,t||{},Qe,We,Ge,n),Je=void 0}var Ke=null;function Ze(n){var e=Ke;return Ke=n,function(){Ke=e}}function nt(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function et(n,e){if(e){if(n._directInactive=!1,nt(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)et(n.$children[t]);tt(n,"activated")}}function tt(n,e){mn();var t=n.$options[e],r=e+" hook";if(t)for(var a=0,o=t.length;a<o;a++)Vn(t[a],n,null,n,r);n._hasHookEvent&&n.$emit("hook:"+e),hn()}var rt=[],at=[],ot={},it=!1,st=!1,ct=0;var lt=0,pt=Date.now;if(V&&!G){var ut=window.performance;ut&&"function"==typeof ut.now&&pt()>document.createEvent("Event").timeStamp&&(pt=function(){return ut.now()})}function ft(){var n,e;for(lt=pt(),st=!0,rt.sort((function(n,e){return n.id-e.id})),ct=0;ct<rt.length;ct++)(n=rt[ct]).before&&n.before(),e=n.id,ot[e]=null,n.run();var t=at.slice(),r=rt.slice();ct=rt.length=at.length=0,ot={},it=st=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,et(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r._watcher===t&&r._isMounted&&!r._isDestroyed&&tt(r,"updated")}}(r),on&&q.devtools&&on.emit("flush")}var dt=0,mt=function(n,e,t,r,a){this.vm=n,a&&(n._watcher=this),n._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++dt,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new cn,this.newDepIds=new cn,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(n){if(!U.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=B)),this.value=this.lazy?void 0:this.get()};mt.prototype.get=function(){var n;mn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Xn(n,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ie(n),hn(),this.cleanupDeps()}return n},mt.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},mt.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},mt.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(n){var e=n.id;if(null==ot[e]){if(ot[e]=!0,st){for(var t=rt.length-1;t>ct&&rt[t].id>n.id;)t--;rt.splice(t+1,0,n)}else rt.push(n);it||(it=!0,ae(ft))}}(this)},mt.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||l(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'+this.expression+'"';Vn(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},mt.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},mt.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},mt.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1}};var ht={enumerable:!0,configurable:!0,get:B,set:B};function bt(n,e,t){ht.get=function(){return this[e][t]},ht.set=function(n){this[e][t]=n},Object.defineProperty(n,t,ht)}function gt(n){n._watchers=[];var e=n.$options;e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props={},a=n.$options._propKeys=[];n.$parent&&Cn(!1);var o=function(o){a.push(o);var i=qn(o,e,t,n);Pn(r,o,i),o in n||bt(n,"_props",o)};for(var i in e)o(i);Cn(!0)}(n,e.props),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?B:P(e[t],n)}(n,e.methods),e.data?function(n){var e=n.$options.data;u(e=n._data="function"==typeof e?function(n,e){mn();try{return n.call(e,e)}catch(n){return Xn(n,e,"data()"),{}}finally{hn()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,a=(n.$options.methods,t.length);for(;a--;){var o=t[a];0,r&&w(r,o)||(i=void 0,36!==(i=(o+"").charCodeAt(0))&&95!==i&&bt(n,"_data",o))}var i;jn(e,!0)}(n):jn(n._data={},!0),e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=an();for(var a in e){var o=e[a],i="function"==typeof o?o:o.get;0,r||(t[a]=new mt(n,i||B,B,vt)),a in n||yt(n,a,o)}}(n,e.computed),e.watch&&e.watch!==en&&function(n,e){for(var t in e){var r=e[t];if(Array.isArray(r))for(var a=0;a<r.length;a++)St(n,t,r[a]);else St(n,t,r)}}(n,e.watch)}var vt={lazy:!0};function yt(n,e,t){var r=!an();"function"==typeof t?(ht.get=r?xt(e):wt(t),ht.set=B):(ht.get=t.get?r&&!1!==t.cache?xt(e):wt(t.get):B,ht.set=t.set||B),Object.defineProperty(n,e,ht)}function xt(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),fn.target&&e.depend(),e.value}}function wt(n){return function(){return n.call(this,this)}}function St(n,e,t,r){return u(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var _t=0;function kt(n){var e=n.options;if(n.super){var t=kt(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var a in t)t[a]!==r[a]&&(e||(e={}),e[a]=t[a]);return e}(n);r&&O(n.extendOptions,r),(e=n.options=$n(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Ct(n){this._init(n)}function At(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,a=n._Ctor||(n._Ctor={});if(a[r])return a[r];var o=n.name||t.options.name;var i=function(n){this._init(n)};return(i.prototype=Object.create(t.prototype)).constructor=i,i.cid=e++,i.options=$n(t.options,n),i.super=t,i.options.props&&function(n){var e=n.options.props;for(var t in e)bt(n.prototype,"_props",t)}(i),i.options.computed&&function(n){var e=n.options.computed;for(var t in e)yt(n.prototype,t,e[t])}(i),i.extend=t.extend,i.mixin=t.mixin,i.use=t.use,$.forEach((function(n){i[n]=t[n]})),o&&(i.options.components[o]=i),i.superOptions=t.options,i.extendOptions=n,i.sealedOptions=O({},i.options),a[r]=i,i}}function jt(n){return n&&(n.Ctor.options.name||n.tag)}function Pt(n,e){return Array.isArray(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!f(n)&&n.test(e)}function Tt(n,e){var t=n.cache,r=n.keys,a=n._vnode;for(var o in t){var i=t[o];if(i){var s=i.name;s&&!e(s)&&Ot(t,o,r,a)}}}function Ot(n,e,t,r){var a=n[e];!a||r&&a.tag===r.tag||a.componentInstance.$destroy(),n[e]=null,y(t,e)}!function(n){n.prototype._init=function(n){var e=this;e._uid=_t++,e._isVue=!0,n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var a=r.componentOptions;t.propsData=a.propsData,t._parentListeners=a.listeners,t._renderChildren=a.children,t._componentTag=a.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=$n(kt(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Ye(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,r=t&&t.context;n.$slots=he(e._renderChildren,r),n.$scopedSlots=a,n._c=function(e,t,r,a){return Ue(n,e,t,r,a,!1)},n.$createElement=function(e,t,r,a){return Ue(n,e,t,r,a,!0)};var o=t&&t.data;Pn(n,"$attrs",o&&o.attrs||a,null,!0),Pn(n,"$listeners",e._parentListeners||a,null,!0)}(e),tt(e,"beforeCreate"),function(n){var e=me(n.$options.inject,n);e&&(Cn(!1),Object.keys(e).forEach((function(t){Pn(n,t,e[t])})),Cn(!0))}(e),gt(e),function(n){var e=n.$options.provide;e&&(n._provided="function"==typeof e?e.call(n):e)}(e),tt(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Ct),function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=Tn,n.prototype.$delete=On,n.prototype.$watch=function(n,e,t){if(u(e))return St(this,n,e,t);(t=t||{}).user=!0;var r=new mt(this,n,e,t);if(t.immediate){var a='callback for immediate watcher "'+r.expression+'"';mn(),Vn(e,this,[r.value],this,a),hn()}return function(){r.teardown()}}}(Ct),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(Array.isArray(n))for(var a=0,o=n.length;a<o;a++)r.$on(n[a],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(n)){for(var r=0,a=n.length;r<a;r++)t.$off(n[r],e);return t}var o,i=t._events[n];if(!i)return t;if(!e)return t._events[n]=null,t;for(var s=i.length;s--;)if((o=i[s])===e||o.fn===e){i.splice(s,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?T(t):t;for(var r=T(arguments,1),a='event handler for "'+n+'"',o=0,i=t.length;o<i;o++)Vn(t[o],e,r,e,a)}return e}}(Ct),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,a=t._vnode,o=Ze(t);t._vnode=n,t.$el=a?t.__patch__(a,n):t.__patch__(t.$el,n,e,!1),o(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){tt(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||y(e.$children,n),n._watcher&&n._watcher.teardown();for(var t=n._watchers.length;t--;)n._watchers[t].teardown();n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),tt(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Ct),function(n){Me(n.prototype),n.prototype.$nextTick=function(n){return ae(n,this)},n.prototype._render=function(){var n,e=this,t=e.$options,r=t.render,a=t._parentVnode;a&&(e.$scopedSlots=ve(a.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=a;try{Xe=e,n=r.call(e._renderProxy,e.$createElement)}catch(t){Xn(t,e,"render"),n=e._vnode}finally{Xe=null}return Array.isArray(n)&&1===n.length&&(n=n[0]),n instanceof bn||(n=vn()),n.parent=a,n}}(Ct);var Et=[String,RegExp,Array],Bt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Et,exclude:Et,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var a=t.tag,o=t.componentInstance,i=t.componentOptions;n[r]={name:jt(i),tag:a,componentInstance:o},e.push(r),this.max&&e.length>parseInt(this.max)&&Ot(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Ot(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){Tt(n,(function(n){return Pt(e,n)}))})),this.$watch("exclude",(function(e){Tt(n,(function(n){return!Pt(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=He(n),t=e&&e.componentOptions;if(t){var r=jt(t),a=this.include,o=this.exclude;if(a&&(!r||!Pt(a,r))||o&&r&&Pt(o,r))return e;var i=this.cache,s=this.keys,c=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;i[c]?(e.componentInstance=i[c].componentInstance,y(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return q}};Object.defineProperty(n,"config",e),n.util={warn:pn,extend:O,mergeOptions:$n,defineReactive:Pn},n.set=Tn,n.delete=On,n.nextTick=ae,n.observable=function(n){return jn(n),n},n.options=Object.create(null),$.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,O(n.options.components,Bt),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=T(arguments,1);return t.unshift(this),"function"==typeof n.install?n.install.apply(n,t):"function"==typeof n&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=$n(this.options,n),this}}(n),At(n),function(n){$.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&u(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&"function"==typeof t&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Ct),Object.defineProperty(Ct.prototype,"$isServer",{get:an}),Object.defineProperty(Ct.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ct,"FunctionalRenderContext",{value:De}),Ct.version="2.6.14";var It=g("style,class"),Lt=g("input,textarea,option,select,progress"),Mt=g("contenteditable,draggable,spellcheck"),Dt=g("events,caret,typing,plaintext-only"),Rt=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),$t="http://www.w3.org/1999/xlink",Ft=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},qt=function(n){return Ft(n)?n.slice(6,n.length):""},zt=function(n){return null==n||!1===n};function Nt(n){for(var e=n.data,t=n,r=n;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=Ut(r.data,e));for(;i(t=t.parent);)t&&t.data&&(e=Ut(e,t.data));return function(n,e){if(i(n)||i(e))return Jt(n,Xt(e));return""}(e.staticClass,e.class)}function Ut(n,e){return{staticClass:Jt(n.staticClass,e.staticClass),class:i(n.class)?[n.class,e.class]:e.class}}function Jt(n,e){return n?e?n+" "+e:n:e||""}function Xt(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,a=n.length;r<a;r++)i(e=Xt(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):l(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var Vt={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ht=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Qt=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Wt=function(n){return Ht(n)||Qt(n)};var Gt=Object.create(null);var Yt=g("text,number,password,search,email,tel,url");var Kt=Object.freeze({createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(Vt[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),Zt={create:function(n,e){nr(e)},update:function(n,e){n.data.ref!==e.data.ref&&(nr(n,!0),nr(e))},destroy:function(n){nr(n,!0)}};function nr(n,e){var t=n.data.ref;if(i(t)){var r=n.context,a=n.componentInstance||n.elm,o=r.$refs;e?Array.isArray(o[t])?y(o[t],a):o[t]===a&&(o[t]=void 0):n.data.refInFor?Array.isArray(o[t])?o[t].indexOf(a)<0&&o[t].push(a):o[t]=[a]:o[t]=a}}var er=new bn("",{},[]),tr=["create","activate","update","remove","destroy"];function rr(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&i(n.data)===i(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=i(t=n.data)&&i(t=t.attrs)&&t.type,a=i(t=e.data)&&i(t=t.attrs)&&t.type;return r===a||Yt(r)&&Yt(a)}(n,e)||s(n.isAsyncPlaceholder)&&o(e.asyncFactory.error))}function ar(n,e,t){var r,a,o={};for(r=e;r<=t;++r)i(a=n[r].key)&&(o[a]=r);return o}var or={create:ir,update:ir,destroy:function(n){ir(n,er)}};function ir(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,a,o=n===er,i=e===er,s=cr(n.data.directives,n.context),c=cr(e.data.directives,e.context),l=[],p=[];for(t in c)r=s[t],a=c[t],r?(a.oldValue=r.value,a.oldArg=r.arg,pr(a,"update",e,n),a.def&&a.def.componentUpdated&&p.push(a)):(pr(a,"bind",e,n),a.def&&a.def.inserted&&l.push(a));if(l.length){var u=function(){for(var t=0;t<l.length;t++)pr(l[t],"inserted",e,n)};o?pe(e,"insert",u):u()}p.length&&pe(e,"postpatch",(function(){for(var t=0;t<p.length;t++)pr(p[t],"componentUpdated",e,n)}));if(!o)for(t in s)c[t]||pr(s[t],"unbind",n,n,i)}(n,e)}var sr=Object.create(null);function cr(n,e){var t,r,a=Object.create(null);if(!n)return a;for(t=0;t<n.length;t++)(r=n[t]).modifiers||(r.modifiers=sr),a[lr(r)]=r,r.def=Fn(e.$options,"directives",r.name);return a}function lr(n){return n.rawName||n.name+"."+Object.keys(n.modifiers||{}).join(".")}function pr(n,e,t,r,a){var o=n.def&&n.def[e];if(o)try{o(t.elm,n,t,r,a)}catch(r){Xn(r,t.context,"directive "+n.name+" "+e+" hook")}}var ur=[Zt,or];function fr(n,e){var t=e.componentOptions;if(!(i(t)&&!1===t.Ctor.options.inheritAttrs||o(n.data.attrs)&&o(e.data.attrs))){var r,a,s=e.elm,c=n.data.attrs||{},l=e.data.attrs||{};for(r in i(l.__ob__)&&(l=e.data.attrs=O({},l)),l)a=l[r],c[r]!==a&&dr(s,r,a,e.data.pre);for(r in(G||K)&&l.value!==c.value&&dr(s,"value",l.value),c)o(l[r])&&(Ft(r)?s.removeAttributeNS($t,qt(r)):Mt(r)||s.removeAttribute(r))}}function dr(n,e,t,r){r||n.tagName.indexOf("-")>-1?mr(n,e,t):Rt(e)?zt(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):Mt(e)?n.setAttribute(e,function(n,e){return zt(e)||"false"===e?"false":"contenteditable"===n&&Dt(e)?e:"true"}(e,t)):Ft(e)?zt(t)?n.removeAttributeNS($t,qt(e)):n.setAttributeNS($t,e,t):mr(n,e,t)}function mr(n,e,t){if(zt(t))n.removeAttribute(e);else{if(G&&!Y&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var hr={create:fr,update:fr};function br(n,e){var t=e.elm,r=e.data,a=n.data;if(!(o(r.staticClass)&&o(r.class)&&(o(a)||o(a.staticClass)&&o(a.class)))){var s=Nt(e),c=t._transitionClasses;i(c)&&(s=Jt(s,Xt(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var gr,vr={create:br,update:br};function yr(n,e,t){var r=gr;return function a(){var o=e.apply(null,arguments);null!==o&&Sr(n,a,t,r)}}var xr=Gn&&!(nn&&Number(nn[1])<=53);function wr(n,e,t,r){if(xr){var a=lt,o=e;e=o._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=a||n.timeStamp<=0||n.target.ownerDocument!==document)return o.apply(this,arguments)}}gr.addEventListener(n,e,tn?{capture:t,passive:r}:t)}function Sr(n,e,t,r){(r||gr).removeEventListener(n,e._wrapper||e,t)}function _r(n,e){if(!o(n.data.on)||!o(e.data.on)){var t=e.data.on||{},r=n.data.on||{};gr=e.elm,function(n){if(i(n.__r)){var e=G?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}i(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),le(t,r,wr,Sr,yr,e.context),gr=void 0}}var kr,Cr={create:_r,update:_r};function Ar(n,e){if(!o(n.data.domProps)||!o(e.data.domProps)){var t,r,a=e.elm,s=n.data.domProps||{},c=e.data.domProps||{};for(t in i(c.__ob__)&&(c=e.data.domProps=O({},c)),s)t in c||(a[t]="");for(t in c){if(r=c[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===s[t])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===t&&"PROGRESS"!==a.tagName){a._value=r;var l=o(r)?"":String(r);jr(a,l)&&(a.value=l)}else if("innerHTML"===t&&Qt(a.tagName)&&o(a.innerHTML)){(kr=kr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var p=kr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;p.firstChild;)a.appendChild(p.firstChild)}else if(r!==s[t])try{a[t]=r}catch(n){}}}}function jr(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(i(r)){if(r.number)return b(t)!==b(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Pr={create:Ar,update:Ar},Tr=S((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Or(n){var e=Er(n.style);return n.staticStyle?O(n.staticStyle,e):e}function Er(n){return Array.isArray(n)?E(n):"string"==typeof n?Tr(n):n}var Br,Ir=/^--/,Lr=/\s*!important$/,Mr=function(n,e,t){if(Ir.test(e))n.style.setProperty(e,t);else if(Lr.test(t))n.style.setProperty(j(e),t.replace(Lr,""),"important");else{var r=Rr(e);if(Array.isArray(t))for(var a=0,o=t.length;a<o;a++)n.style[r]=t[a];else n.style[r]=t}},Dr=["Webkit","Moz","ms"],Rr=S((function(n){if(Br=Br||document.createElement("div").style,"filter"!==(n=k(n))&&n in Br)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<Dr.length;t++){var r=Dr[t]+e;if(r in Br)return r}}));function $r(n,e){var t=e.data,r=n.data;if(!(o(t.staticStyle)&&o(t.style)&&o(r.staticStyle)&&o(r.style))){var a,s,c=e.elm,l=r.staticStyle,p=r.normalizedStyle||r.style||{},u=l||p,f=Er(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?O({},f):f;var d=function(n,e){var t,r={};if(e)for(var a=n;a.componentInstance;)(a=a.componentInstance._vnode)&&a.data&&(t=Or(a.data))&&O(r,t);(t=Or(n.data))&&O(r,t);for(var o=n;o=o.parent;)o.data&&(t=Or(o.data))&&O(r,t);return r}(e,!0);for(s in u)o(d[s])&&Mr(c,s,"");for(s in d)(a=d[s])!==u[s]&&Mr(c,s,null==a?"":a)}}var Fr={create:$r,update:$r},qr=/\s+/;function zr(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(qr).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" "+(n.getAttribute("class")||"")+" ";t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function Nr(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(qr).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" "+(n.getAttribute("class")||"")+" ",r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function Ur(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&O(e,Jr(n.name||"v")),O(e,n),e}return"string"==typeof n?Jr(n):void 0}}var Jr=S((function(n){return{enterClass:n+"-enter",enterToClass:n+"-enter-to",enterActiveClass:n+"-enter-active",leaveClass:n+"-leave",leaveToClass:n+"-leave-to",leaveActiveClass:n+"-leave-active"}})),Xr=V&&!Y,Vr="transition",Hr="transitionend",Qr="animation",Wr="animationend";Xr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Vr="WebkitTransition",Hr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Qr="WebkitAnimation",Wr="webkitAnimationEnd"));var Gr=V?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function Yr(n){Gr((function(){Gr(n)}))}function Kr(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),zr(n,e))}function Zr(n,e){n._transitionClasses&&y(n._transitionClasses,e),Nr(n,e)}function na(n,e,t){var r=ta(n,e),a=r.type,o=r.timeout,i=r.propCount;if(!a)return t();var s="transition"===a?Hr:Wr,c=0,l=function(){n.removeEventListener(s,p),t()},p=function(e){e.target===n&&++c>=i&&l()};setTimeout((function(){c<i&&l()}),o+1),n.addEventListener(s,p)}var ea=/\b(transform|all)(,|$)/;function ta(n,e){var t,r=window.getComputedStyle(n),a=(r[Vr+"Delay"]||"").split(", "),o=(r[Vr+"Duration"]||"").split(", "),i=ra(a,o),s=(r[Qr+"Delay"]||"").split(", "),c=(r[Qr+"Duration"]||"").split(", "),l=ra(s,c),p=0,u=0;return"transition"===e?i>0&&(t="transition",p=i,u=o.length):"animation"===e?l>0&&(t="animation",p=l,u=c.length):u=(t=(p=Math.max(i,l))>0?i>l?"transition":"animation":null)?"transition"===t?o.length:c.length:0,{type:t,timeout:p,propCount:u,hasTransform:"transition"===t&&ea.test(r[Vr+"Property"])}}function ra(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return aa(e)+aa(n[t])})))}function aa(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function oa(n,e){var t=n.elm;i(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=Ur(n.data.transition);if(!o(r)&&!i(t._enterCb)&&1===t.nodeType){for(var a=r.css,s=r.type,c=r.enterClass,p=r.enterToClass,u=r.enterActiveClass,f=r.appearClass,d=r.appearToClass,m=r.appearActiveClass,h=r.beforeEnter,g=r.enter,v=r.afterEnter,y=r.enterCancelled,x=r.beforeAppear,w=r.appear,S=r.afterAppear,_=r.appearCancelled,k=r.duration,C=Ke,A=Ke.$vnode;A&&A.parent;)C=A.context,A=A.parent;var j=!C._isMounted||!n.isRootInsert;if(!j||w||""===w){var P=j&&f?f:c,T=j&&m?m:u,O=j&&d?d:p,E=j&&x||h,B=j&&"function"==typeof w?w:g,I=j&&S||v,L=j&&_||y,M=b(l(k)?k.enter:k);0;var D=!1!==a&&!Y,$=ca(B),F=t._enterCb=R((function(){D&&(Zr(t,O),Zr(t,T)),F.cancelled?(D&&Zr(t,P),L&&L(t)):I&&I(t),t._enterCb=null}));n.data.show||pe(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),B&&B(t,F)})),E&&E(t),D&&(Kr(t,P),Kr(t,T),Yr((function(){Zr(t,P),F.cancelled||(Kr(t,O),$||(sa(M)?setTimeout(F,M):na(t,s,F)))}))),n.data.show&&(e&&e(),B&&B(t,F)),D||$||F()}}}function ia(n,e){var t=n.elm;i(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=Ur(n.data.transition);if(o(r)||1!==t.nodeType)return e();if(!i(t._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,p=r.leaveToClass,u=r.leaveActiveClass,f=r.beforeLeave,d=r.leave,m=r.afterLeave,h=r.leaveCancelled,g=r.delayLeave,v=r.duration,y=!1!==a&&!Y,x=ca(d),w=b(l(v)?v.leave:v);0;var S=t._leaveCb=R((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),y&&(Zr(t,p),Zr(t,u)),S.cancelled?(y&&Zr(t,c),h&&h(t)):(e(),m&&m(t)),t._leaveCb=null}));g?g(_):_()}function _(){S.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),f&&f(t),y&&(Kr(t,c),Kr(t,u),Yr((function(){Zr(t,c),S.cancelled||(Kr(t,p),x||(sa(w)?setTimeout(S,w):na(t,s,S)))}))),d&&d(t,S),y||x||S())}}function sa(n){return"number"==typeof n&&!isNaN(n)}function ca(n){if(o(n))return!1;var e=n.fns;return i(e)?ca(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function la(n,e){!0!==e.data.show&&oa(e)}var pa=function(n){var e,t,r={},a=n.modules,l=n.nodeOps;for(e=0;e<tr.length;++e)for(r[tr[e]]=[],t=0;t<a.length;++t)i(a[t][tr[e]])&&r[tr[e]].push(a[t][tr[e]]);function p(n){var e=l.parentNode(n);i(e)&&l.removeChild(e,n)}function u(n,e,t,a,o,c,p){if(i(n.elm)&&i(c)&&(n=c[p]=xn(n)),n.isRootInsert=!o,!function(n,e,t,a){var o=n.data;if(i(o)){var c=i(n.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(n,!1),i(n.componentInstance))return f(n,e),d(t,n.elm,a),s(c)&&function(n,e,t,a){var o,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<r.activate.length;++o)r.activate[o](er,s);e.push(s);break}d(t,n.elm,a)}(n,e,t,a),!0}}(n,e,t,a)){var u=n.data,h=n.children,g=n.tag;i(g)?(n.elm=n.ns?l.createElementNS(n.ns,g):l.createElement(g,n),v(n),m(n,h,e),i(u)&&b(n,e),d(t,n.elm,a)):s(n.isComment)?(n.elm=l.createComment(n.text),d(t,n.elm,a)):(n.elm=l.createTextNode(n.text),d(t,n.elm,a))}}function f(n,e){i(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,h(n)?(b(n,e),v(n)):(nr(n),e.push(n))}function d(n,e,t){i(n)&&(i(t)?l.parentNode(t)===n&&l.insertBefore(n,e,t):l.appendChild(n,e))}function m(n,e,t){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)u(e[r],t,n.elm,null,!0,e,r)}else c(n.text)&&l.appendChild(n.elm,l.createTextNode(String(n.text)))}function h(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return i(n.tag)}function b(n,t){for(var a=0;a<r.create.length;++a)r.create[a](er,n);i(e=n.data.hook)&&(i(e.create)&&e.create(er,n),i(e.insert)&&t.push(n))}function v(n){var e;if(i(e=n.fnScopeId))l.setStyleScope(n.elm,e);else for(var t=n;t;)i(e=t.context)&&i(e=e.$options._scopeId)&&l.setStyleScope(n.elm,e),t=t.parent;i(e=Ke)&&e!==n.context&&e!==n.fnContext&&i(e=e.$options._scopeId)&&l.setStyleScope(n.elm,e)}function y(n,e,t,r,a,o){for(;r<=a;++r)u(t[r],o,n,e,!1,t,r)}function x(n){var e,t,a=n.data;if(i(a))for(i(e=a.hook)&&i(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(i(e=n.children))for(t=0;t<n.children.length;++t)x(n.children[t])}function w(n,e,t){for(;e<=t;++e){var r=n[e];i(r)&&(i(r.tag)?(S(r),x(r)):p(r.elm))}}function S(n,e){if(i(e)||i(n.data)){var t,a=r.remove.length+1;for(i(e)?e.listeners+=a:e=function(n,e){function t(){0==--t.listeners&&p(n)}return t.listeners=e,t}(n.elm,a),i(t=n.componentInstance)&&i(t=t._vnode)&&i(t.data)&&S(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);i(t=n.data.hook)&&i(t=t.remove)?t(n,e):e()}else p(n.elm)}function _(n,e,t,r){for(var a=t;a<r;a++){var o=e[a];if(i(o)&&rr(n,o))return a}}function k(n,e,t,a,c,p){if(n!==e){i(e.elm)&&i(a)&&(e=a[c]=xn(e));var f=e.elm=n.elm;if(s(n.isAsyncPlaceholder))i(e.asyncFactory.resolved)?j(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var d,m=e.data;i(m)&&i(d=m.hook)&&i(d=d.prepatch)&&d(n,e);var b=n.children,g=e.children;if(i(m)&&h(e)){for(d=0;d<r.update.length;++d)r.update[d](n,e);i(d=m.hook)&&i(d=d.update)&&d(n,e)}o(e.text)?i(b)&&i(g)?b!==g&&function(n,e,t,r,a){var s,c,p,f=0,d=0,m=e.length-1,h=e[0],b=e[m],g=t.length-1,v=t[0],x=t[g],S=!a;for(0;f<=m&&d<=g;)o(h)?h=e[++f]:o(b)?b=e[--m]:rr(h,v)?(k(h,v,r,t,d),h=e[++f],v=t[++d]):rr(b,x)?(k(b,x,r,t,g),b=e[--m],x=t[--g]):rr(h,x)?(k(h,x,r,t,g),S&&l.insertBefore(n,h.elm,l.nextSibling(b.elm)),h=e[++f],x=t[--g]):rr(b,v)?(k(b,v,r,t,d),S&&l.insertBefore(n,b.elm,h.elm),b=e[--m],v=t[++d]):(o(s)&&(s=ar(e,f,m)),o(c=i(v.key)?s[v.key]:_(v,e,f,m))?u(v,r,n,h.elm,!1,t,d):rr(p=e[c],v)?(k(p,v,r,t,d),e[c]=void 0,S&&l.insertBefore(n,p.elm,h.elm)):u(v,r,n,h.elm,!1,t,d),v=t[++d]);f>m?y(n,o(t[g+1])?null:t[g+1].elm,t,d,g,r):d>g&&w(e,f,m)}(f,b,g,t,p):i(g)?(i(n.text)&&l.setTextContent(f,""),y(f,null,g,0,g.length-1,t)):i(b)?w(b,0,b.length-1):i(n.text)&&l.setTextContent(f,""):n.text!==e.text&&l.setTextContent(f,e.text),i(m)&&i(d=m.hook)&&i(d=d.postpatch)&&d(n,e)}}}function C(n,e,t){if(s(t)&&i(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var A=g("attrs,class,staticClass,staticStyle,key");function j(n,e,t,r){var a,o=e.tag,c=e.data,l=e.children;if(r=r||c&&c.pre,e.elm=n,s(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(a=c.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return f(e,t),!0;if(i(o)){if(i(l))if(n.hasChildNodes())if(i(a=c)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==n.innerHTML)return!1}else{for(var p=!0,u=n.firstChild,d=0;d<l.length;d++){if(!u||!j(u,l[d],t,r)){p=!1;break}u=u.nextSibling}if(!p||u)return!1}else m(e,l,t);if(i(c)){var h=!1;for(var g in c)if(!A(g)){h=!0,b(e,t);break}!h&&c.class&&ie(c.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,a){if(!o(e)){var c,p=!1,f=[];if(o(n))p=!0,u(e,f);else{var d=i(n.nodeType);if(!d&&rr(n,e))k(n,e,f,null,null,a);else{if(d){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&j(n,e,f))return C(e,f,!0),n;c=n,n=new bn(l.tagName(c).toLowerCase(),{},[],void 0,c)}var m=n.elm,b=l.parentNode(m);if(u(e,f,m._leaveCb?null:b,l.nextSibling(m)),i(e.parent))for(var g=e.parent,v=h(e);g;){for(var y=0;y<r.destroy.length;++y)r.destroy[y](g);if(g.elm=e.elm,v){for(var S=0;S<r.create.length;++S)r.create[S](er,g);var _=g.data.hook.insert;if(_.merged)for(var A=1;A<_.fns.length;A++)_.fns[A]()}else nr(g);g=g.parent}i(b)?w([n],0,0):i(n.tag)&&x(n)}}return C(e,f,p),e.elm}i(n)&&x(n)}}({nodeOps:Kt,modules:[hr,vr,Cr,Pr,Fr,V?{create:la,activate:la,remove:function(n,e){!0!==n.data.show?ia(n,e):e()}}:{}].concat(ur)});Y&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&va(n,"input")}));var ua={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?pe(t,"postpatch",(function(){ua.componentUpdated(n,e,t)})):fa(n,e,t.context),n._vOptions=[].map.call(n.options,ha)):("textarea"===t.tag||Yt(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",ba),n.addEventListener("compositionend",ga),n.addEventListener("change",ga),Y&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){fa(n,e,t.context);var r=n._vOptions,a=n._vOptions=[].map.call(n.options,ha);if(a.some((function(n,e){return!M(n,r[e])})))(n.multiple?e.value.some((function(n){return ma(n,a)})):e.value!==e.oldValue&&ma(e.value,a))&&va(n,"change")}}};function fa(n,e,t){da(n,e,t),(G||K)&&setTimeout((function(){da(n,e,t)}),0)}function da(n,e,t){var r=e.value,a=n.multiple;if(!a||Array.isArray(r)){for(var o,i,s=0,c=n.options.length;s<c;s++)if(i=n.options[s],a)o=D(r,ha(i))>-1,i.selected!==o&&(i.selected=o);else if(M(ha(i),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));a||(n.selectedIndex=-1)}}function ma(n,e){return e.every((function(e){return!M(e,n)}))}function ha(n){return"_value"in n?n._value:n.value}function ba(n){n.target.composing=!0}function ga(n){n.target.composing&&(n.target.composing=!1,va(n.target,"input"))}function va(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function ya(n){return!n.componentInstance||n.data&&n.data.transition?n:ya(n.componentInstance._vnode)}var xa={model:ua,show:{bind:function(n,e,t){var r=e.value,a=(t=ya(t)).data&&t.data.transition,o=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&a?(t.data.show=!0,oa(t,(function(){n.style.display=o}))):n.style.display=r?o:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=ya(t)).data&&t.data.transition?(t.data.show=!0,r?oa(t,(function(){n.style.display=n.__vOriginalDisplay})):ia(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,a){a||(n.style.display=n.__vOriginalDisplay)}}},wa={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Sa(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?Sa(He(e.children)):n}function _a(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var a=t._parentListeners;for(var o in a)e[k(o)]=a[o];return e}function ka(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Ca=function(n){return n.tag||ge(n)},Aa=function(n){return"show"===n.name},ja={name:"transition",props:wa,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Ca)).length){0;var r=this.mode;0;var a=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return a;var o=Sa(a);if(!o)return a;if(this._leaving)return ka(n,a);var i="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?i+"comment":i+o.tag:c(o.key)?0===String(o.key).indexOf(i)?o.key:i+o.key:o.key;var s=(o.data||(o.data={})).transition=_a(this),l=this._vnode,p=Sa(l);if(o.data.directives&&o.data.directives.some(Aa)&&(o.data.show=!0),p&&p.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(o,p)&&!ge(p)&&(!p.componentInstance||!p.componentInstance._vnode.isComment)){var u=p.data.transition=O({},s);if("out-in"===r)return this._leaving=!0,pe(u,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),ka(n,a);if("in-out"===r){if(ge(o))return l;var f,d=function(){f()};pe(s,"afterEnter",d),pe(s,"enterCancelled",d),pe(u,"delayLeave",(function(n){f=n}))}}return a}}},Pa=O({tag:String,moveClass:String},wa);function Ta(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Oa(n){n.data.newPos=n.elm.getBoundingClientRect()}function Ea(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,a=e.top-t.top;if(r||a){n.data.moved=!0;var o=n.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+a+"px)",o.transitionDuration="0s"}}delete Pa.mode;var Ba={Transition:ja,TransitionGroup:{props:Pa,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var a=Ze(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,a(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,a=this.$slots.default||[],o=this.children=[],i=_a(this),s=0;s<a.length;s++){var c=a[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),t[c.key]=c,(c.data||(c.data={})).transition=i;else;}if(r){for(var l=[],p=[],u=0;u<r.length;u++){var f=r[u];f.data.transition=i,f.data.pos=f.elm.getBoundingClientRect(),t[f.key]?l.push(f):p.push(f)}this.kept=n(e,null,l),this.removed=p}return n(e,null,o)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Ta),n.forEach(Oa),n.forEach(Ea),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;Kr(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Hr,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Hr,n),t._moveCb=null,Zr(t,e))})}})))},methods:{hasMove:function(n,e){if(!Xr)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){Nr(t,n)})),zr(t,e),t.style.display="none",this.$el.appendChild(t);var r=ta(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};Ct.config.mustUseProp=function(n,e,t){return"value"===t&&Lt(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Ct.config.isReservedTag=Wt,Ct.config.isReservedAttr=It,Ct.config.getTagNamespace=function(n){return Qt(n)?"svg":"math"===n?"math":void 0},Ct.config.isUnknownElement=function(n){if(!V)return!0;if(Wt(n))return!1;if(n=n.toLowerCase(),null!=Gt[n])return Gt[n];var e=document.createElement(n);return n.indexOf("-")>-1?Gt[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Gt[n]=/HTMLUnknownElement/.test(e.toString())},O(Ct.options.directives,xa),O(Ct.options.components,Ba),Ct.prototype.__patch__=V?pa:B,Ct.prototype.$mount=function(n,e){return function(n,e,t){var r;return n.$el=e,n.$options.render||(n.$options.render=vn),tt(n,"beforeMount"),r=function(){n._update(n._render(),t)},new mt(n,r,B,{before:function(){n._isMounted&&!n._isDestroyed&&tt(n,"beforeUpdate")}},!0),t=!1,null==n.$vnode&&(n._isMounted=!0,tt(n,"mounted")),n}(this,n=n&&V?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},V&&setTimeout((function(){q.devtools&&on&&on.emit("init",Ct)}),0);var Ia=Ct;
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function La(n,e){for(var t in e)n[t]=e[t];return n}var Ma=/[!'()*]/g,Da=function(n){return"%"+n.charCodeAt(0).toString(16)},Ra=/%2C/g,$a=function(n){return encodeURIComponent(n).replace(Ma,Da).replace(Ra,",")};function Fa(n){try{return decodeURIComponent(n)}catch(n){0}return n}var qa=function(n){return null==n||"object"==typeof n?n:String(n)};function za(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=Fa(t.shift()),a=t.length>0?Fa(t.join("=")):null;void 0===e[r]?e[r]=a:Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]})),e):e}function Na(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return $a(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push($a(e)):r.push($a(e)+"="+$a(n)))})),r.join("&")}return $a(e)+"="+$a(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var Ua=/\/?$/;function Ja(n,e,t,r){var a=r&&r.options.stringifyQuery,o=e.query||{};try{o=Xa(o)}catch(n){}var i={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:Qa(e,a),matched:n?Ha(n):[]};return t&&(i.redirectedFrom=Qa(t,a)),Object.freeze(i)}function Xa(n){if(Array.isArray(n))return n.map(Xa);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=Xa(n[t]);return e}return n}var Va=Ja(null,{path:"/"});function Ha(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function Qa(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var a=n.hash;return void 0===a&&(a=""),(t||"/")+(e||Na)(r)+a}function Wa(n,e,t){return e===Va?n===e:!!e&&(n.path&&e.path?n.path.replace(Ua,"")===e.path.replace(Ua,"")&&(t||n.hash===e.hash&&Ga(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&Ga(n.query,e.query)&&Ga(n.params,e.params))))}function Ga(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,a){var o=n[t];if(r[a]!==t)return!1;var i=e[t];return null==o||null==i?o===i:"object"==typeof o&&"object"==typeof i?Ga(o,i):String(o)===String(i)}))}function Ya(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var a=t.instances[r],o=t.enteredCbs[r];if(a&&o){delete t.enteredCbs[r];for(var i=0;i<o.length;i++)a._isBeingDestroyed||o[i](a)}}}}var Ka={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,a=e.parent,o=e.data;o.routerView=!0;for(var i=a.$createElement,s=t.name,c=a.$route,l=a._routerViewCache||(a._routerViewCache={}),p=0,u=!1;a&&a._routerRoot!==a;){var f=a.$vnode?a.$vnode.data:{};f.routerView&&p++,f.keepAlive&&a._directInactive&&a._inactive&&(u=!0),a=a.$parent}if(o.routerViewDepth=p,u){var d=l[s],m=d&&d.component;return m?(d.configProps&&Za(m,o,d.route,d.configProps),i(m,o,r)):i()}var h=c.matched[p],b=h&&h.components[s];if(!h||!b)return l[s]=null,i();l[s]={component:b},o.registerRouteInstance=function(n,e){var t=h.instances[s];(e&&t!==n||!e&&t===n)&&(h.instances[s]=e)},(o.hook||(o.hook={})).prepatch=function(n,e){h.instances[s]=e.componentInstance},o.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==h.instances[s]&&(h.instances[s]=n.componentInstance),Ya(c)};var g=h.props&&h.props[s];return g&&(La(l[s],{route:c,configProps:g}),Za(b,o,c,g)),i(b,o,r)}};function Za(n,e,t,r){var a=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(a){a=e.props=La({},a);var o=e.attrs=e.attrs||{};for(var i in a)n.props&&i in n.props||(o[i]=a[i],delete a[i])}}function no(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var o=n.replace(/^\//,"").split("/"),i=0;i<o.length;i++){var s=o[i];".."===s?a.pop():"."!==s&&a.push(s)}return""!==a[0]&&a.unshift(""),a.join("/")}function eo(n){return n.replace(/\/+/g,"/")}var to=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},ro=vo,ao=lo,oo=function(n,e){return uo(lo(n,e),e)},io=uo,so=go,co=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function lo(n,e){for(var t,r=[],a=0,o=0,i="",s=e&&e.delimiter||"/";null!=(t=co.exec(n));){var c=t[0],l=t[1],p=t.index;if(i+=n.slice(o,p),o=p+c.length,l)i+=l[1];else{var u=n[o],f=t[2],d=t[3],m=t[4],h=t[5],b=t[6],g=t[7];i&&(r.push(i),i="");var v=null!=f&&null!=u&&u!==f,y="+"===b||"*"===b,x="?"===b||"*"===b,w=t[2]||s,S=m||h;r.push({name:d||a++,prefix:f||"",delimiter:w,optional:x,repeat:y,partial:v,asterisk:!!g,pattern:S?mo(S):g?".*":"[^"+fo(w)+"]+?"})}}return o<n.length&&(i+=n.substr(o)),i&&r.push(i),r}function po(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function uo(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",bo(e)));return function(e,r){for(var a="",o=e||{},i=(r||{}).pretty?po:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,p=o[c.name];if(null==p){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(to(p)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var u=0;u<p.length;u++){if(l=i(p[u]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");a+=(0===u?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(p).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):i(p),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');a+=c.prefix+l}}else a+=c}return a}}function fo(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function mo(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function ho(n,e){return n.keys=e,n}function bo(n){return n&&n.sensitive?"":"i"}function go(n,e,t){to(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,a=!1!==t.end,o="",i=0;i<n.length;i++){var s=n[i];if("string"==typeof s)o+=fo(s);else{var c=fo(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+c+l+")*"),o+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var p=fo(t.delimiter||"/"),u=o.slice(-p.length)===p;return r||(o=(u?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":r&&u?"":"(?="+p+"|$)",ho(new RegExp("^"+o,bo(t)),e)}function vo(n,e,t){return to(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ho(n,e)}(n,e):to(n)?function(n,e,t){for(var r=[],a=0;a<n.length;a++)r.push(vo(n[a],e,t).source);return ho(new RegExp("(?:"+r.join("|")+")",bo(t)),e)}(n,e,t):function(n,e,t){return go(lo(n,t),e,t)}(n,e,t)}ro.parse=ao,ro.compile=oo,ro.tokensToFunction=io,ro.tokensToRegExp=so;var yo=Object.create(null);function xo(n,e,t){e=e||{};try{var r=yo[n]||(yo[n]=ro.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function wo(n,e,t,r){var a="string"==typeof n?{path:n}:n;if(a._normalized)return a;if(a.name){var o=(a=La({},n)).params;return o&&"object"==typeof o&&(a.params=La({},o)),a}if(!a.path&&a.params&&e){(a=La({},a))._normalized=!0;var i=La(La({},e.params),a.params);if(e.name)a.name=e.name,a.params=i;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;a.path=xo(s,i,e.path)}else 0;return a}var c=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var a=n.indexOf("?");return a>=0&&(t=n.slice(a+1),n=n.slice(0,a)),{path:n,query:t,hash:e}}(a.path||""),l=e&&e.path||"/",p=c.path?no(c.path,l,t||a.append):l,u=function(n,e,t){void 0===e&&(e={});var r,a=t||za;try{r=a(n||"")}catch(n){r={}}for(var o in e){var i=e[o];r[o]=Array.isArray(i)?i.map(qa):qa(i)}return r}(c.query,a.query,r&&r.options.parseQuery),f=a.hash||c.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:p,query:u,hash:f}}var So,_o=function(){},ko={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,a=t.resolve(this.to,r,this.append),o=a.location,i=a.route,s=a.href,c={},l=t.options.linkActiveClass,p=t.options.linkExactActiveClass,u=null==l?"router-link-active":l,f=null==p?"router-link-exact-active":p,d=null==this.activeClass?u:this.activeClass,m=null==this.exactActiveClass?f:this.exactActiveClass,h=i.redirectedFrom?Ja(null,wo(i.redirectedFrom),null,t):i;c[m]=Wa(r,h,this.exactPath),c[d]=this.exact||this.exactPath?c[m]:function(n,e){return 0===n.path.replace(Ua,"/").indexOf(e.path.replace(Ua,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,h);var b=c[m]?this.ariaCurrentValue:null,g=function(n){Co(n)&&(e.replace?t.replace(o,_o):t.push(o,_o))},v={click:Co};Array.isArray(this.event)?this.event.forEach((function(n){v[n]=g})):v[this.event]=g;var y={class:c},x=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:i,navigate:g,isActive:c[d],isExactActive:c[m]});if(x){if(1===x.length)return x[0];if(x.length>1||!x.length)return 0===x.length?n():n("span",{},x)}if("a"===this.tag)y.on=v,y.attrs={href:s,"aria-current":b};else{var w=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(w){w.isStatic=!1;var S=w.data=La({},w.data);for(var _ in S.on=S.on||{},S.on){var k=S.on[_];_ in v&&(S.on[_]=Array.isArray(k)?k:[k])}for(var C in v)C in S.on?S.on[C].push(v[C]):S.on[C]=g;var A=w.data.attrs=La({},w.data.attrs);A.href=s,A["aria-current"]=b}else y.on=v}return n(this.tag,y,this.$slots.default)}};function Co(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Ao="undefined"!=typeof window;function jo(n,e,t,r,a){var o=e||[],i=t||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,a,o,i){var s=a.path,c=a.name;0;var l=a.pathToRegexpOptions||{},p=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return eo(e.path+"/"+n)}(s,o,l.strict);"boolean"==typeof a.caseSensitive&&(l.sensitive=a.caseSensitive);var u={path:p,regex:Po(p,l),components:a.components||{default:a.component},alias:a.alias?"string"==typeof a.alias?[a.alias]:a.alias:[],instances:{},enteredCbs:{},name:c,parent:o,matchAs:i,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};a.children&&a.children.forEach((function(a){var o=i?eo(i+"/"+a.path):void 0;n(e,t,r,a,u,o)}));t[u.path]||(e.push(u.path),t[u.path]=u);if(void 0!==a.alias)for(var f=Array.isArray(a.alias)?a.alias:[a.alias],d=0;d<f.length;++d){0;var m={path:f[d],children:a.children};n(e,t,r,m,o,u.path||"/")}c&&(r[c]||(r[c]=u))}(o,i,s,n,a)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:i,nameMap:s}}function Po(n,e){return ro(n,[],e)}function To(n,e){var t=jo(n),r=t.pathList,a=t.pathMap,o=t.nameMap;function i(n,t,i){var s=wo(n,t,!1,e),l=s.name;if(l){var p=o[l];if(!p)return c(null,s);var u=p.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var f in t.params)!(f in s.params)&&u.indexOf(f)>-1&&(s.params[f]=t.params[f]);return s.path=xo(p.path,s.params),c(p,s,i)}if(s.path){s.params={};for(var d=0;d<r.length;d++){var m=r[d],h=a[m];if(Oo(h.regex,s.path,s.params))return c(h,s,i)}}return c(null,s)}function s(n,t){var r=n.redirect,a="function"==typeof r?r(Ja(n,t,null,e)):r;if("string"==typeof a&&(a={path:a}),!a||"object"!=typeof a)return c(null,t);var s=a,l=s.name,p=s.path,u=t.query,f=t.hash,d=t.params;if(u=s.hasOwnProperty("query")?s.query:u,f=s.hasOwnProperty("hash")?s.hash:f,d=s.hasOwnProperty("params")?s.params:d,l){o[l];return i({_normalized:!0,name:l,query:u,hash:f,params:d},void 0,t)}if(p){var m=function(n,e){return no(n,e.parent?e.parent.path:"/",!0)}(p,n);return i({_normalized:!0,path:xo(m,d),query:u,hash:f},void 0,t)}return c(null,t)}function c(n,t,r){return n&&n.redirect?s(n,r||t):n&&n.matchAs?function(n,e,t){var r=i({_normalized:!0,path:xo(t,e.params)});if(r){var a=r.matched,o=a[a.length-1];return e.params=r.params,c(o,e)}return c(null,e)}(0,t,n.matchAs):Ja(n,t,r,e)}return{match:i,addRoute:function(n,e){var t="object"!=typeof n?o[n]:void 0;jo([e||n],r,a,o,t),t&&t.alias.length&&jo(t.alias.map((function(n){return{path:n,children:[e]}})),r,a,o,t)},getRoutes:function(){return r.map((function(n){return a[n]}))},addRoutes:function(n){jo(n,r,a,o)}}}function Oo(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var a=1,o=r.length;a<o;++a){var i=n.keys[a-1];i&&(t[i.name||"pathMatch"]="string"==typeof r[a]?Fa(r[a]):r[a])}return!0}var Eo=Ao&&window.performance&&window.performance.now?window.performance:Date;function Bo(){return Eo.now().toFixed(3)}var Io=Bo();function Lo(){return Io}function Mo(n){return Io=n}var Do=Object.create(null);function Ro(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=La({},window.history.state);return t.key=Lo(),window.history.replaceState(t,"",e),window.addEventListener("popstate",qo),function(){window.removeEventListener("popstate",qo)}}function $o(n,e,t,r){if(n.app){var a=n.options.scrollBehavior;a&&n.app.$nextTick((function(){var o=function(){var n=Lo();if(n)return Do[n]}(),i=a.call(n,e,t,r?o:null);i&&("function"==typeof i.then?i.then((function(n){Xo(n,o)})).catch((function(n){0})):Xo(i,o))}))}}function Fo(){var n=Lo();n&&(Do[n]={x:window.pageXOffset,y:window.pageYOffset})}function qo(n){Fo(),n.state&&n.state.key&&Mo(n.state.key)}function zo(n){return Uo(n.x)||Uo(n.y)}function No(n){return{x:Uo(n.x)?n.x:window.pageXOffset,y:Uo(n.y)?n.y:window.pageYOffset}}function Uo(n){return"number"==typeof n}var Jo=/^#\d/;function Xo(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var a=Jo.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(a){var o=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(a,o={x:Uo((t=o).x)?t.x:0,y:Uo(t.y)?t.y:0})}else zo(n)&&(e=No(n))}else r&&zo(n)&&(e=No(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var Vo,Ho=Ao&&((-1===(Vo=window.navigator.userAgent).indexOf("Android 2.")&&-1===Vo.indexOf("Android 4.0")||-1===Vo.indexOf("Mobile Safari")||-1!==Vo.indexOf("Chrome")||-1!==Vo.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Qo(n,e){Fo();var t=window.history;try{if(e){var r=La({},t.state);r.key=Lo(),t.replaceState(r,"",n)}else t.pushState({key:Mo(Bo())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function Wo(n){Qo(n,!0)}function Go(n,e,t){var r=function(a){a>=n.length?t():n[a]?e(n[a],(function(){r(a+1)})):r(a+1)};r(0)}var Yo={redirected:2,aborted:4,cancelled:8,duplicated:16};function Ko(n,e){return ni(n,e,Yo.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return ei.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function Zo(n,e){return ni(n,e,Yo.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function ni(n,e,t,r){var a=new Error(r);return a._isRouter=!0,a.from=n,a.to=e,a.type=t,a}var ei=["params","query","hash"];function ti(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function ri(n,e){return ti(n)&&n._isRouter&&(null==e||n.type===e)}function ai(n){return function(e,t,r){var a=!1,o=0,i=null;oi(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){a=!0,o++;var c,l=ci((function(e){var a;((a=e).__esModule||si&&"Module"===a[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:So.extend(e),t.components[s]=e,--o<=0&&r()})),p=ci((function(n){var e="Failed to resolve async component "+s+": "+n;i||(i=ti(n)?n:new Error(e),r(i))}));try{c=n(l,p)}catch(n){p(n)}if(c)if("function"==typeof c.then)c.then(l,p);else{var u=c.component;u&&"function"==typeof u.then&&u.then(l,p)}}})),a||r()}}function oi(n,e){return ii(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function ii(n){return Array.prototype.concat.apply([],n)}var si="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ci(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var li=function(n,e){this.router=n,this.base=function(n){if(!n)if(Ao){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=Va,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function pi(n,e,t,r){var a=oi(n,(function(n,r,a,o){var i=function(n,e){"function"!=typeof n&&(n=So.extend(n));return n.options[e]}(n,e);if(i)return Array.isArray(i)?i.map((function(n){return t(n,r,a,o)})):t(i,r,a,o)}));return ii(r?a.reverse():a)}function ui(n,e){if(e)return function(){return n.apply(e,arguments)}}li.prototype.listen=function(n){this.cb=n},li.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},li.prototype.onError=function(n){this.errorCbs.push(n)},li.prototype.transitionTo=function(n,e,t){var r,a=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var o=this.current;this.confirmTransition(r,(function(){a.updateRoute(r),e&&e(r),a.ensureURL(),a.router.afterHooks.forEach((function(n){n&&n(r,o)})),a.ready||(a.ready=!0,a.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!a.ready&&(ri(n,Yo.redirected)&&o===Va||(a.ready=!0,a.readyErrorCbs.forEach((function(e){e(n)}))))}))},li.prototype.confirmTransition=function(n,e,t){var r=this,a=this.current;this.pending=n;var o,i,s=function(n){!ri(n)&&ti(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},c=n.matched.length-1,l=a.matched.length-1;if(Wa(n,a)&&c===l&&n.matched[c]===a.matched[l])return this.ensureURL(),n.hash&&$o(this.router,a,n,!1),s(((i=ni(o=a,n,Yo.duplicated,'Avoided redundant navigation to current location: "'+o.fullPath+'".')).name="NavigationDuplicated",i));var p=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),u=p.updated,f=p.deactivated,d=p.activated,m=[].concat(function(n){return pi(n,"beforeRouteLeave",ui,!0)}(f),this.router.beforeHooks,function(n){return pi(n,"beforeRouteUpdate",ui)}(u),d.map((function(n){return n.beforeEnter})),ai(d)),h=function(e,t){if(r.pending!==n)return s(Zo(a,n));try{e(n,a,(function(e){!1===e?(r.ensureURL(!0),s(function(n,e){return ni(n,e,Yo.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(a,n))):ti(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(Ko(a,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){s(n)}};Go(m,h,(function(){Go(function(n){return pi(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,a,o){return n(r,a,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),o(n)}))}}(n,t,r)}))}(d).concat(r.router.resolveHooks),h,(function(){if(r.pending!==n)return s(Zo(a,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){Ya(n)}))}))}))},li.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},li.prototype.setupListeners=function(){},li.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=Va,this.pending=null};var fi=function(n){function e(e,t){n.call(this,e,t),this._startLocation=di(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=Ho&&t;r&&this.listeners.push(Ro());var a=function(){var t=n.current,a=di(n.base);n.current===Va&&a===n._startLocation||n.transitionTo(a,(function(n){r&&$o(e,n,t,!0)}))};window.addEventListener("popstate",a),this.listeners.push((function(){window.removeEventListener("popstate",a)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Qo(eo(r.base+n.fullPath)),$o(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Wo(eo(r.base+n.fullPath)),$o(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(di(this.base)!==this.current.fullPath){var e=eo(this.base+this.current.fullPath);n?Qo(e):Wo(e)}},e.prototype.getCurrentLocation=function(){return di(this.base)},e}(li);function di(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(eo(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var mi=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=di(n);if(!/^\/#/.test(e))return window.location.replace(eo(n+"/#"+e)),!0}(this.base)||hi()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=Ho&&e;t&&this.listeners.push(Ro());var r=function(){var e=n.current;hi()&&n.transitionTo(bi(),(function(r){t&&$o(n.router,r,e,!0),Ho||yi(r.fullPath)}))},a=Ho?"popstate":"hashchange";window.addEventListener(a,r),this.listeners.push((function(){window.removeEventListener(a,r)}))}},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){vi(n.fullPath),$o(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){yi(n.fullPath),$o(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;bi()!==e&&(n?vi(e):yi(e))},e.prototype.getCurrentLocation=function(){return bi()},e}(li);function hi(){var n=bi();return"/"===n.charAt(0)||(yi("/"+n),!1)}function bi(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function gi(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function vi(n){Ho?Qo(gi(n)):window.location.hash=n}function yi(n){Ho?Wo(gi(n)):window.location.replace(gi(n))}var xi=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){ri(n,Yo.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(li),wi=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=To(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!Ho&&!1!==n.fallback,this.fallback&&(e="hash"),Ao||(e="abstract"),this.mode=e,e){case"history":this.history=new fi(this,n.base);break;case"hash":this.history=new mi(this,n.base,this.fallback);break;case"abstract":this.history=new xi(this,n.base);break;default:0}},Si={currentRoute:{configurable:!0}};function _i(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}wi.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},Si.currentRoute.get=function(){return this.history&&this.history.current},wi.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof fi||t instanceof mi){var r=function(n){t.setupListeners(),function(n){var r=t.current,a=e.options.scrollBehavior;Ho&&a&&"fullPath"in n&&$o(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},wi.prototype.beforeEach=function(n){return _i(this.beforeHooks,n)},wi.prototype.beforeResolve=function(n){return _i(this.resolveHooks,n)},wi.prototype.afterEach=function(n){return _i(this.afterHooks,n)},wi.prototype.onReady=function(n,e){this.history.onReady(n,e)},wi.prototype.onError=function(n){this.history.onError(n)},wi.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},wi.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},wi.prototype.go=function(n){this.history.go(n)},wi.prototype.back=function(){this.go(-1)},wi.prototype.forward=function(){this.go(1)},wi.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},wi.prototype.resolve=function(n,e,t){var r=wo(n,e=e||this.history.current,t,this),a=this.match(r,e),o=a.redirectedFrom||a.fullPath;return{location:r,route:a,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?eo(n+"/"+r):r}(this.history.base,o,this.mode),normalizedTo:r,resolved:a}},wi.prototype.getRoutes=function(){return this.matcher.getRoutes()},wi.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==Va&&this.history.transitionTo(this.history.getCurrentLocation())},wi.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==Va&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(wi.prototype,Si),wi.install=function n(e){if(!n.installed||So!==e){n.installed=!0,So=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",Ka),e.component("RouterLink",ko);var a=e.config.optionMergeStrategies;a.beforeRouteEnter=a.beforeRouteLeave=a.beforeRouteUpdate=a.created}},wi.version="3.5.3",wi.isNavigationFailure=ri,wi.NavigationFailureType=Yo,wi.START_LOCATION=Va,Ao&&window.Vue&&window.Vue.use(wi);var ki=wi;t(224),t(173),t(250),t(99),t(252),t(37),t(38),t(253);function Ci(n){n.locales&&Object.keys(n.locales).forEach((function(e){n.locales[e].path=e})),Object.freeze(n)}t(74),t(89),t(120);function Ai(n){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var ji=t(68),Pi=(t(183),t(18),t(44),t(226),t(227),t(40),t(25),{NotFound:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,472))},Layout:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,471))}}),Ti={"v-71e76812":function(){return t.e(7).then(t.bind(null,473))},"v-52d4a0de":function(){return t.e(10).then(t.bind(null,474))},"v-763c4d7e":function(){return t.e(6).then(t.bind(null,475))},"v-0aaa33f7":function(){return t.e(8).then(t.bind(null,476))},"v-2f6761fc":function(){return t.e(9).then(t.bind(null,477))},"v-43fc48ca":function(){return t.e(11).then(t.bind(null,478))},"v-a5cec558":function(){return t.e(5).then(t.bind(null,479))}};function Oi(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var Ei=/-(\w)/g,Bi=Oi((function(n){return n.replace(Ei,(function(n,e){return e?e.toUpperCase():""}))})),Ii=/\B([A-Z])/g,Li=Oi((function(n){return n.replace(Ii,"-$1").toLowerCase()})),Mi=Oi((function(n){return n.charAt(0).toUpperCase()+n.slice(1)}));function Di(n,e){if(e)return n(e)?n(e):e.includes("-")?n(Mi(Bi(e))):n(Mi(e))||n(Li(e))}var Ri=Object.assign({},Pi,Ti),$i=function(n){return Ri[n]},Fi=function(n){return Ti[n]},qi=function(n){return Pi[n]},zi=function(n){return Ia.component(n)};function Ni(n){return Di(Fi,n)}function Ui(n){return Di(qi,n)}function Ji(n){return Di($i,n)}function Xi(n){return Di(zi,n)}function Vi(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Promise.all(e.filter((function(n){return n})).map(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Xi(e)||!Ji(e)){n.next=5;break}return n.next=3,Ji(e)();case 3:t=n.sent,Ia.component(e,t.default);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()))}function Hi(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var Qi=t(131),Wi=(t(184),t(106),t(70),t(214)),Gi=t.n(Wi),Yi=t(215),Ki=t.n(Yi),Zi={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(n){return"meta"===Object(Qi.a)(n,1)[0]})).map((function(n){var e=Object(Qi.a)(n,2);e[0];return e[1]})),this.$ssrContext){var n=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(e=n)?e.map((function(n){var e="<meta";return Object.keys(n).forEach((function(t){e+=" ".concat(t,'="').concat(Ki()(n[t]),'"')})),e+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=es(this.$canonicalUrl)}var e},mounted:function(){this.currentMetaTags=Object(ji.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var n=this.getMergedMetaTags();this.currentMetaTags=ts(n,this.currentMetaTags)},getMergedMetaTags:function(){var n=this.$page.frontmatter.meta||[];return Gi()([{name:"description",content:this.$description}],n,this.siteMeta,rs)},updateCanonicalLink:function(){ns(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",es(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){ts(null,this.currentMetaTags),ns()}};function ns(){var n=document.querySelector("link[rel='canonical']");n&&n.remove()}function es(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n?'<link href="'.concat(n,'" rel="canonical" />'):""}function ts(n,e){if(e&&Object(ji.a)(e).filter((function(n){return n.parentNode===document.head})).forEach((function(n){return document.head.removeChild(n)})),n)return n.map((function(n){var e=document.createElement("meta");return Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),document.head.appendChild(e),e}))}function rs(n){for(var e=0,t=["name","property","itemprop"];e<t.length;e++){var r=t[e];if(n.hasOwnProperty(r))return n[r]+r}return JSON.stringify(n)}t(133);var as=t(147),os={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(as)()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var n=this,e=[].slice.call(document.querySelectorAll(".sidebar-link")),t=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(n){return e.some((function(e){return e.hash===n.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),o=window.innerHeight+r,i=0;i<t.length;i++){var s=t[i],c=t[i+1],l=0===i&&0===r||r>=s.parentElement.offsetTop+10&&(!c||r<c.parentElement.offsetTop-10),p=decodeURIComponent(this.$route.hash);if(l&&p!==decodeURIComponent(s.hash)){var u=s;if(o===a)for(var f=i+1;f<t.length;f++)if(p===decodeURIComponent(t[f].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(u.hash),(function(){n.$nextTick((function(){n.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},is=(t(102),t(97)),ss=t.n(is),cs={mounted:function(){var n=this;ss.a.configure({showSpinner:!1}),this.$router.beforeEach((function(n,e,t){n.path===e.path||Ia.component(n.name)||ss.a.start(),t()})),this.$router.afterEach((function(){ss.a.done(),n.isSidebarOpen=!1}))}};t(72),t(71),t(75),t(360);function ls(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t(137);function ps(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function us(n,e,t){return e&&ps(n.prototype,e),t&&ps(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}t(361);var fs=function(){function n(){ls(this,n);this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}return us(n,[{key:"show",value:function(n){var e=this,t=n.text,r=void 0===t?"":t,a=n.duration,o=void 0===a?3e3:a,i=document.createElement("div");i.className="message move-in",i.innerHTML='\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">'.concat(r,"</div>\n    "),this.containerEl.appendChild(i),o>0&&setTimeout((function(){e.close(i)}),o)}},{key:"close",value:function(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",(function(){n.remove()}))}}]),n}(),ds={mounted:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy:function(){var n=this;setTimeout((function(){(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach((function(e){document.querySelectorAll(e).forEach(n.generateCopyButton)}))}),1e3)},generateCopyButton:function(n){var e=this;if(!n.classList.contains("codecopy-enabled")){var t=document.createElement("i");t.className="code-copy",t.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',t.title="Copy to clipboard",t.addEventListener("click",(function(){e.copyToClipboard(n.innerText)})),n.appendChild(t),n.classList.add("codecopy-enabled")}},copyToClipboard:function(n){var e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),(new fs).show({text:"复制成功",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};t(229),t(98),t(132),t(134),t(363);!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var ms={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},hs={},bs=function(n){return'<div id="app">\n'.concat(n,"\n</div>")},gs=function(n){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[n]?window.$VUEPRESS_DEMO_BLOCK[n]:ms[n]},vs=function n(e,t,r){var a=document.createElement(e);return t&&Object.keys(t).forEach((function(n){if(n.indexOf("data"))a[n]=t[n];else{var e=n.replace("data","");a.dataset[e]=t[n]}})),r&&r.forEach((function(e){var t=e.tag,r=e.attrs,o=e.children;a.appendChild(n(t,r,o))})),a},ys=function(n,e,t){var r,a=(r=n.querySelectorAll(".".concat(e)),Array.prototype.slice.call(r));return 1!==a.length||t?a:a[0]},xs=function(n,e){var t,r,a=n.match(/<style>([\s\S]+)<\/style>/),o=n.match(/<template>([\s\S]+)<\/template>/),i=n.match(/<script>([\s\S]+)<\/script>/),s={css:a&&a[1].replace(/^\n|\n$/g,""),html:o&&o[1].replace(/^\n|\n$/g,""),js:i&&i[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};s.htmlTpl=bs(s.html),s.jsTpl=(t=s.js,r=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(r,"\n})")),s.script=function(n,e){var t=n.split(/export\s+default/),r="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),a=window.Babel?window.Babel.transform(r,{presets:["es2015"]}).code:r,o=[eval][0](a);return o.template=e,o}(s.js,s.html);var c=gs("vue");return s.jsLib.unshift(c),s},ws=function(n,e){var t,r=n.match(/<style>([\s\S]+)<\/style>/),a=n.match(/<html>([\s\S]+)<\/html>/),o=n.match(/<script>([\s\S]+)<\/script>/),i={css:r&&r[1].replace(/^\n|\n$/g,""),html:a&&a[1].replace(/^\n|\n$/g,""),js:o&&o[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};return i.htmlTpl=i.html,i.jsTpl=i.js,i.script=(t=i.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),i},Ss=function(n){return n=n.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),n+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function _s(){var n=ys(document,"vuepress-plugin-demo-block__wrapper",!0);n.length?n.forEach((function(n){if("true"!==n.dataset.created){n.style.display="block";var e=ys(n,"vuepress-plugin-demo-block__code"),t=ys(n,"vuepress-plugin-demo-block__display"),r=ys(n,"vuepress-plugin-demo-block__footer"),a=ys(t,"vuepress-plugin-demo-block__app"),o=decodeURIComponent(n.dataset.code),i=decodeURIComponent(n.dataset.config),s=decodeURIComponent(n.dataset.type);i=i?JSON.parse(i):{};var c=e.querySelector("div").clientHeight,l="react"===s?function(n,e){var t=(0,window.Babel.transform)(n,{presets:["es2015","react"]}).code,r="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),a=new Function("return ".concat(r))(),o={js:a,css:a.__style__||"",jsLib:e.jsLib||[],cssLib:e.cssLib||[],jsTpl:Ss(n),htmlTpl:bs("")},i=gs("react"),s=gs("reactDOM");return o.jsLib.unshift(i,s),o}(o,i):"vanilla"===s?ws(o,i):xs(o,i),p=vs("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(r.appendChild(p),p.addEventListener("click",ks.bind(null,p,c,e,r)),gs("jsfiddle")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,a=n.jsLib,o=n.cssLib,i=a.concat(o).concat(gs("cssLib")).concat(gs("jsLib")).join(",");return vs("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:e}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:r}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:i}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(l)),gs("codepen")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,a=n.jsLib,o=n.cssLib,i=JSON.stringify({css:e,html:t,js:r,js_external:a.concat(gs("jsLib")).join(";"),css_external:o.concat(gs("cssLib")).join(";"),layout:gs("codepenLayout"),js_pre_processor:gs("codepenJsProcessor"),editors:gs("codepenEditors")});return vs("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:i}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(l)),void 0!==i.horizontal?i.horizontal:gs("horizontal")){n.classList.add("vuepress-plugin-demo-block__horizontal");var u=e.firstChild.cloneNode(!0);u.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(u)}if(l.css&&function(n){if(!hs[n]){var e=vs("style",{innerHTML:n});document.body.appendChild(e),hs[n]=!0}}(l.css),"react"===s)ReactDOM.render(React.createElement(l.js),a);else if("vue"===s){var f=(new(Vue.extend(l.script))).$mount();a.appendChild(f.$el)}else"vanilla"===s&&(a.innerHTML=l.html,new Function("return (function(){".concat(l.script,"})()"))());n.dataset.created="true"}})):setTimeout((function(n){_s()}),300)}function ks(n,e,t,r){var a="1"!==n.dataset.isExpand;t.style.height=a?"".concat(e,"px"):0,a?r.classList.add("vuepress-plugin-demo-block__show-link"):r.classList.remove("vuepress-plugin-demo-block__show-link"),n.dataset.isExpand=a?"1":"0"}var Cs={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},_s()},updated:function(){_s()}},As=(t(218),"auto"),js="zoom-in",Ps="zoom-out",Ts="grab",Os="move";function Es(n,e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a={passive:!1};r?n.addEventListener(e,t,a):n.removeEventListener(e,t,a)}function Bs(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function Is(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Ls(n,e,t){!function(n){var e=Ms,t=Ds;if(n.transition){var r=n.transition;delete n.transition,n[e]=r}if(n.transform){var a=n.transform;delete n.transform,n[t]=a}}(e);var r=n.style,a={};for(var o in e)t&&(a[o]=r[o]||""),r[o]=e[o];return a}var Ms="transition",Ds="transform",Rs="transform",$s="transitionend";var Fs=function(){},qs={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:Fs,onClose:Fs,onGrab:Fs,onMove:Fs,onRelease:Fs,onBeforeOpen:Fs,onBeforeClose:Fs,onBeforeGrab:Fs,onBeforeRelease:Fs,onImageLoading:Fs,onImageLoaded:Fs},zs={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),Us(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var r=this.lastScrollPosition.x-e,a=this.lastScrollPosition.y-t,o=this.options.scrollThreshold;(Math.abs(a)>=o||Math.abs(r)>=o)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(Ns(n)&&!Us(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){Ns(n)&&!Us(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,r=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,r=e.clientY;this.move(t,r)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function Ns(n){return 0===n.button}function Us(n){return n.metaKey||n.ctrlKey}var Js={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Ls(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),Es(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Ls(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vs=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Hs=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qs={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=Is(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,r=n.transitionDuration,a=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?Ts:Ps,transition:Rs+"\n        "+r+"s\n        "+a,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Ls(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Ls(this.el,{transform:"none"})},grab:function(n,e,t){var r=Ws(),a=r.x-n,o=r.y-e;Ls(this.el,{cursor:Os,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var r=Ws(),a=r.x-n,o=r.y-e;Ls(this.el,{transition:Rs,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Ls(this.el,this.styleClose)},restoreOpenStyle:function(){Ls(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=Ws(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,r=this.instance.options,a=r.customSize,o=r.scaleBase;if(!a&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(a&&"object"===(void 0===a?"undefined":Xs(a)))return{x:a.width/this.rect.width,y:a.height/this.rect.height};var i=this.rect.width/2,s=this.rect.height/2,c=Ws(),l={x:c.x-i,y:c.y-s},p=l.x/i,u=l.y/s,f=o+Math.min(p,u);if(a&&"string"==typeof a){var d=t||this.el.naturalWidth,m=e||this.el.naturalHeight,h=parseFloat(a)*d/(100*this.rect.width),b=parseFloat(a)*m/(100*this.rect.height);if(f>h||f>b)return{x:h,y:b}}return{x:f,y:f}}};function Ws(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function Gs(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){Es(n,r,e[r],t)}))}var Ys=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(Qs),this.overlay=Object.create(Js),this.handler=Object.create(zs),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=Hs({},qs,e),this.overlay.init(this),this.handler.init(this)}return Vs(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=js,Es(n,"click",this.handler.click),this.options.preloadImage&&Bs(Is(n)));return this}},{key:"config",value:function(n){return n?(Hs(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof n?document.querySelector(n):n;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var a=this.target.srcOriginal;null!=a&&(this.options.onImageLoading(r),Bs(a,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),Es(document,"scroll",this.handler.scroll),Es(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&Es(window,"resize",this.handler.resizeWindow);var o=function n(){Es(r,$s,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&Gs(document,e.handler,!0),t(r)};return Es(r,$s,o),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=As,this.overlay.fadeOut(),this.target.zoomOut(),Es(document,"scroll",this.handler.scroll,!1),Es(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&Es(window,"resize",this.handler.resizeWindow,!1);var r=function r(){Es(t,$s,r,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&Gs(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return Es(t,$s,r),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var a=this.target.el;this.options.onBeforeGrab(a),this.released=!1,this.target.grab(n,e,t);var o=function n(){Es(a,$s,n,!1),r(a)};return Es(a,$s,o),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Os,this.target.move(n,e,t);var a=this.target.el,o=function n(){Es(a,$s,n,!1),r(a)};return Es(a,$s,o),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=As,this.target.restoreOpenStyle();var r=function r(){Es(t,$s,r,!1),n.lock=!1,n.released=!0,e(t)};return Es(t,$s,r),this}}}]),n}(),Ks=".theme-vdoing-content img:not(.no-zoom)",Zs=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),nc=Number("500"),ec=function(){function n(){ls(this,n),this.instance=new Ys(Zs)}return us(n,[{key:"update",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ks;"undefined"!=typeof window&&this.instance.listen(n)}},{key:"updateDelay",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ks,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nc;setTimeout((function(){return n.update(e)}),t)}}]),n}(),tc=[Zi,os,cs,ds,Cs,{watch:{"$page.path":function(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted:function(){this.$vuepress.zooming=new ec,this.$vuepress.zooming.updateDelay()}}],rc={name:"GlobalLayout",computed:{layout:function(){var n=this.getLayout();return Hi("layout",n),Ia.component(n)}},methods:{getLayout:function(){if(this.$page.path){var n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},ac=t(29),oc=Object(ac.a)(rc,(function(){var n=this.$createElement;return(this._self._c||n)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){var r;switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),(r=n[e]).push.apply(r,Object(ji.a)(t));break;default:throw new Error("Unknown option name.")}}(oc,"mixins",tc);var ic=[{name:"v-71e76812",path:"/pages/dev/idea/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-71e76812").then(t)}},{path:"/pages/dev/idea/index.html",redirect:"/pages/dev/idea/"},{path:"/02.开发指南/01.idea使用技巧.html",redirect:"/pages/dev/idea/"},{name:"v-52d4a0de",path:"/archives/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-52d4a0de").then(t)}},{path:"/archives/index.html",redirect:"/archives/"},{path:"/@pages/archivesPage.html",redirect:"/archives/"},{name:"v-763c4d7e",path:"/pages/rabbitMQ/AMQP0-9-1/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-763c4d7e").then(t)}},{path:"/pages/rabbitMQ/AMQP0-9-1/index.html",redirect:"/pages/rabbitMQ/AMQP0-9-1/"},{path:"/01.文档翻译/02.RabbitMQ/01.AMQP0-9-1模型.html",redirect:"/pages/rabbitMQ/AMQP0-9-1/"},{name:"v-0aaa33f7",path:"/pages/dev/vscode/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-0aaa33f7").then(t)}},{path:"/pages/dev/vscode/index.html",redirect:"/pages/dev/vscode/"},{path:"/02.开发指南/02.vscode使用技巧.html",redirect:"/pages/dev/vscode/"},{name:"v-2f6761fc",path:"/pages/note/java8InAction/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-2f6761fc").then(t)}},{path:"/pages/note/java8InAction/index.html",redirect:"/pages/note/java8InAction/"},{path:"/03.读书笔记/01.Java8实战.html",redirect:"/pages/note/java8InAction/"},{name:"v-43fc48ca",path:"/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-43fc48ca").then(t)}},{path:"/index.html",redirect:"/"},{name:"v-a5cec558",path:"/pages/spring/core/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-a5cec558").then(t)}},{path:"/pages/spring/core/index.html",redirect:"/pages/spring/core/"},{path:"/01.文档翻译/01.Spring Framework/01.core.html",redirect:"/pages/spring/core/"},{path:"*",component:oc}],sc={title:"ccc-docs",description:"cheysen的个人技术知识文档库",base:"/ccc-docs/",headTags:[["link",{rel:"icon",href:"/ccc-docs/assets/favicon.ico"}],["meta",{name:"keywords",content:"vuepress,blog,doc,document,cheysen,heysen"}],["meta",{name:"theme-color",content:"#11a8cd"}]],pages:[{title:"idea使用技巧",frontmatter:{title:"idea使用技巧",permalink:"/pages/dev/idea/",date:"2022-01-20T12:33:20.000Z"},regularPath:"/02.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/01.idea%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7.html",relativePath:"02.开发指南/01.idea使用技巧.md",key:"v-71e76812",path:"/pages/dev/idea/",headersStr:null,content:"# 1.快捷键\n\n快捷键                      说明\nCtrl + e                 查看最近的文件\nCtrl + b                 转到声明\nF2                       光标跳转到下一个建议或警告\nCtrl + Alt + b           转到实现\nAlt + F7                 查找所有的使用\n双击Ctrl                   运行任何内容\nCtrl + w                 延伸选择区域\nCtrl + shift + w         缩小选择区域\nCtrl + shift + enter     完成当前语句并将光标调到正确的位置\nCtrl + shift + alt + t   重构\nCtrl + shift + a         查找操作\n双击shift                  全局搜索",normalizedContent:"# 1.快捷键\n\n快捷键                      说明\nctrl + e                 查看最近的文件\nctrl + b                 转到声明\nf2                       光标跳转到下一个建议或警告\nctrl + alt + b           转到实现\nalt + f7                 查找所有的使用\n双击ctrl                   运行任何内容\nctrl + w                 延伸选择区域\nctrl + shift + w         缩小选择区域\nctrl + shift + enter     完成当前语句并将光标调到正确的位置\nctrl + shift + alt + t   重构\nctrl + shift + a         查找操作\n双击shift                  全局搜索",charsets:{cjk:!0}},{title:"归档",frontmatter:{archivesPage:!0,title:"归档",permalink:"/archives/",article:!1},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-52d4a0de",path:"/archives/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"AMQP0-9-1模型",frontmatter:{title:"AMQP0-9-1模型",permalink:"/pages/rabbitMQ/AMQP0-9-1/",date:"2022-01-20T11:23:25.000Z",article:!0},regularPath:"/01.%E6%96%87%E6%A1%A3%E7%BF%BB%E8%AF%91/02.RabbitMQ/01.AMQP0-9-1%E6%A8%A1%E5%9E%8B.html",relativePath:"01.文档翻译/02.RabbitMQ/01.AMQP0-9-1模型.md",key:"v-763c4d7e",path:"/pages/rabbitMQ/AMQP0-9-1/",headersStr:null,content:"# 什么是AMQP 0-9-1\n\nAMQP 0-9-1（高级消息队列协议）是一种消息传递协议，使客户端应用程序能够与消息中间件代理进行通信。\n\n\n# 代理Brokers\n\n消息代理接受来自发布者（发布消息的应用程序，也叫生产者）的消息并把它们路由到消费者（处理消息的应用程序）。\n\n因为它是一个网络协议，所以发布者、消费者和代理都能部署在不同机器上。\n\n\n# AMQP 0-9-1模型简介\n\nAMQP 0-9-1模型如下：消息被发布到交换机（就像邮政局或邮箱）中，然后使用称为绑定（bindings）的规则分发消息副本到队列（queues）。然后，代理将消息传递给订阅队列的消费者，或者消费者按需从队列中获取消息。\n\n\n\n发布消息时，发布者可以定义各种消息属性（消息元数据）。其中一些元数据可以被代理使用，但是它的其余部分对代理完全不透明，并且仅被接收消息的应用程序使用。\n\n网络是不可靠的，并且应用程序可能无法处理消息，因此AMQP 0-9-1模型具有消息确认（message acknowledgements）的概念：当消息被传递给消费者时，消费者会自动通知代理（如果应用程序开发人员选择这样做）。当使用消息确认机制时，在收到该消息（或消息组）的通知时，代理才会完全从队列中删除该消息。\n\n在某些情况下，例如，当无法路由消息时，可以将消息返回给发布者、丢弃，或者，如果代理实现了扩展，则将这些消息推到所谓的“死信队列（dead letter queue）”中。发布者通过使用某些参数发布消息来选择如何处理这样的情况。\n\n队列（Queues），交换（exchanges）和绑定（bindings）称为AMQP实体。\n\n\n# AMQP 0-9-1是可编程协议\n\nAMQP 0-9-1是一种可编程协议，即AMQP 0-9-1实体和路由规则主要由应用程序本身定义，而不是代理管理员。\n\n因此，为协议操作定义了一系列规则如声明队列和交换机、定义他们之间的绑定、订阅队列等。\n\n这给了应用程序开发人员很多自由，但也需要他们意识到潜在的定义冲突。在实践中，定义冲突是罕见的，并且通常表明存在错误配置。\n\n应用程序声明所需的AMQP 0-9-1实体，定义必要的路由规则，并且可以在不再使用它们时删除AMQP 0-9-1实体。\n\n\n# 交换机和交换类型\n\n消息会发送到交换机，交换机是AMQP 0-9-1实体。交换传递消息，将其路由到零或多个队列中。使用的路由算法取决于交换类型和被称为绑定的规则。AMQP 0-9-1代理提供四种交换类型：\n\nEXCHANGE TYPE          DEFAULT PRE-DECLARED NAMES\nDirect exchange直连交换机   (Empty string) and amq.direct\nFanout exchange扇形交换机   amq.fanout\nTopic exchange主题交换机    amq.topic\nHeaders exchange头交换机   amq.match (and amq.headers in RabbitMQ)\n\n除了交换类型之外，交换机还声明了许多属性，最重要的是：\n\n * Name：交换机名称\n * Durability (exchanges survive broker restart)：是否持久化。如果持久性，则代理重启后，交换机还存在\n * Auto-delete (exchange is deleted when last queue is unbound from it)：当所有与之绑定的消息队列都完成了对此交换机的使用后，删掉它\n * Arguments (optional, used by plugins and broker-specific features)：可选，插件和代理特定功能使用\n\n交换机可以是持久化的或临时的。持久化的交换机在代理重新启动任然存在，而临时的不会（当代理重新在线时，他们必须被重新声明）。并非所有场景都需要持久化的交换机。\n\n\n# 默认交换机\n\n默认交换机是代理预先声明的没有名称（空字符串）的直连交换机。它有一个特殊的属性，非常适用于简单的应用程序：创建的每个队列都是用与队列名称相同的路由key自动绑定到该类交换机。\n\n例如，当声明一个名为为“search-indexing-online”的队列时，AMQP 0-9-1代理将使用“search-indexing-online”作为路由key将其绑定到默认交换机（在此上下文有时称为绑定key）。因此，发布到默认交换机的路由key为“search-indexing-online”的消息将被路由到队列“search-indexing-online”。换句话说，默认交换使其似乎可以直接向队列传递消息。\n\n\n# 直连交换机\n\n直连交换机基于消息路由key将消息传递到队列。直连交换机非常适合消息的单播路由（尽管它们也可用于组播路由）。下面是它的工作原理：\n\n * 队列通过路由key K绑定到交换机\n * 当具有路由key R的新消息到达直接交换机时，如果K = R，则交换机将其路由到该队列\n\n直接交换机通常用于以循环方式在多个工作实例（相同应用程序的实例）之间分配任务。这样做时，重要的是要理解，在AMQP 0-9-1中，消息是在消费者之间负载均衡，而不是在队列之间负载均衡。\n\n直接交换机可以以图形方式表示如下：\n\n\n\n\n# 扇形交换机\n\n扇形交换机不管绑定的key是什么，会路由消息到绑定到它的所有队列。如果N个队列绑定到扇形交换机，则当新消息发布到该交换机时，它将传递消息的副本到这N个队列。扇形交换机适合广播路由。\n\n因为扇形交换机将消息的副本传递给绑定到它的每个队列，所以它的使用场景非常相似：\n\n * 大型多人在线（MMO）游戏可以将其用于排行榜更新或其他全局事件\n * 体育新闻网站可以使用扇形交换机实时地发布更新的分数到移动客户端\n * 分布式系统可以广播各种状态和配置更新\n * 群组聊天可以使用扇形交换机分发参与者之间的消息（虽然AMQP没有内置的相关概念，所以XMPP可能是一个更好的选择）\n\n扇形交换机可以以图形方式表示如下：\n\n\n\n\n# 主题交换机\n\n主题交换机基于消息路由key和用于将队列绑定到交换机的模式之间的匹配，将消息路由到一个或多个队列。主题交换机通常用于实现各种发布/订阅模式变体。主题交换机通常用于消息的组播路由。\n\n主题交换机具有非常广泛的使用场景。当一个问题涉及多个消费者/应用程序有选择性地接收哪种类型的消息时，应考虑使用主题交换机。\n\n使用案例：\n\n * 分发与特定地理位置相关的数据，例如销售点\n\n * 由多个工作实例处理的后台任务，每个工作实例都能够处理特定的任务集\n\n * 库存价格更新（以及其他类型的财务数据更新）\n\n * 涉及分类或标记的新闻更新（例如，仅适用于特定运动或团队）\n\n * 不同类型云服务的编排\n\n * 分布式架构/操作系统的软件构建或打包，其中每个构建器只能处理一个架构或操作系统\n\n\n# 头交换机\n\n头交换机被设计用于路由多个属性，这些属性更容易用消息头表示而不是路由key。头交换机会忽略路由key属性。相反，用于路由的属性是从头属性中取得的。如果头属性值等于绑定指定的值，则匹配该消息。\n\n可以使用多个消息头绑定消息到头交换机。在这种情况下，代理需要应用程序开发者提供更多信息，即，是匹配其中一个消息头还是所有消息头？这就是“x-match”绑定参数做的事。当“x-match”参数被设置为“any”时，匹配任意一个消息头值就行了。或者，将“x-match”设置为“all”要求所有值必须匹配。\n\n头交换机可以看做是特殊的直连交换机。因为它们都是基于消息头属性值路由，路由key不必是字符串时，它们可以用作直接交换，例如，它可以是整数或哈希（字典）。\n\n注意，以字符串x-开头的消息头将不会用于匹配。\n\n\n# 队列\n\nAMQP 0-9-1模型中的队列与其他消息和任务队列系统中的队列非常相似：它们存储由应用程序消费的消息。队列与交换机共享一些属性，但也有一些额外的属性：\n\n * Name：名称\n * Durable：队列在代理重启时扔存在\n * Exclusive：仅被一个连接使用并且该连接关闭时队列将被删除\n * Auto-delete：当最后一个消费者取消订阅时，至少有一个消费者的队列将被删除\n * Arguments ：可选，由Plugins和Broker特定功能使用，例如消息TTL，队列长度限制等\n\n在使用队列之前，必须声明它。声明队列将导致它会在尚未存在的情况下创建。如果已存在队列，并且其属性与声明中的属性相同，则该声明不会有什么影响。当已存在的队列属性和声明的不同时，将会引发一个406错误码（PRECONDITION_FAILED）的管道级异常\n\n\n# 队列名\n\n应用程序可以自己选择队列名称或让代理生成。队列名称最长为255个字节的UTF-8字符。AMQP 0-9-1代理可以生成唯一的代表应用的队列名称。要使用此功能，请将队列名称参数设为空字符串。生成的名称将以队列声明响应返回给客户端。\n\n以“amq.”开头的队列名称只在代理内部使用。尝试使用违反此规则的名称声明队列将导致具有403返回码（ACCESS_REFUSED）的管道级别异常。\n\n\n# 队列持久化\n\n在AMQP 0-9-1中，队列可以被声明为持久化的或暂存的。持久化的队列的元数据存储在磁盘上，而临时队列的元数据在可用的情况下存储在内存中。\n\n在需要持久化的场景下，应用程序必须使用持久化的队列来确保发布者将推送的消息标记为持久化。\n\n\n# 绑定\n\n绑定是交换机将消息传送到队列使用的规则（以及其他内容）。为了让交换机E将消息路由到队列Q，Q必须绑定到E。一些类型的交换机使用的绑定有可选的路由key属性。路由key的目的是选择正确的发布到交换机的某些消息到绑定队列。换句话说，路由key就像是一个过滤器。\n\n打个比方：\n\n * 队列就像目的地长沙市\n * 交换机就像宝安机场\n * 绑定就是从宝安机场到长沙的路径，有多条路径可以选择\n\n这样的间接层让那种很难用直接推送到队列的方式实现的的路由场景变得可能，并且也减少了开发者的重复性工作。\n\n如果消息不能路由到队列（比如因为交换机没有绑定任何队列），消息将被丢弃或返回给发布者，具体是哪种取决于发布者设置的消息的相关属性。\n\n\n# 消费者\n\n除非应用程序可以消费它们，否则存储队列中的消息是没用的。在AMQP 0-9-1模型中，应用程序有两种方法来执行此操作：\n\n * 订阅传递给它们的消息（“push API”）：这是推荐的选项\n * 轮询（“pull API”）：这种方式很低效，在大多数情况下应该避免\n\n使用“push API”，应用程序必须指定消费哪个队列的消息。当他们这样做时，我们说他们注册了消费者或简单地说，订阅了一个队列。每个队列可以拥有多个消费者或注册独占消费者（在消费时从队列中排除所有其他消费者）。\n\n每个消费者（订阅）有一个称为消费者标记的标识符。它可用于取消订阅消息。消费者标签是字符串。\n\n\n# 消息确认\n\n消费者应用程序 - 也就是说，接收和处理消息的应用程序 - 可能偶尔可能会无法处理单个消息，也可能程序崩溃了。还有可能出现网络问题。这提出了一个问题：代理应该什么时候从队列中删除消息？AMQP 0-9-1规范为消费者提供了消息确认机制。有两种确认模式：\n\n * 在代理向应用程序发送一个消息之后（使用basic.deliver或者basic.get-ok方法）\n * 在应用程序发送确认消息后（使用basic.ack方法）\n\n前者称为自动确认模型，而后者称为显式确认模型。通过显式模型，应用程序选择在何时发送确认消息。它可以在收到消息后，或在处理前存到数据存储器之后，或者在完全处理消息之后（例如，成功地获取网页，处理和将其存储到一些持久数据存储中）。\n\n如果消费者死亡而不发送确认，则代理将将其重新发送到另一个消费者，或者如果没有可用消费者，则代理将在至少一个消费者重新注册到同一个队列后尝试重新发送消息。\n\n由于网络不可靠，或者应用程序无法响应，通常需要具有某种机制来处理确认。有时只需确认消费者已收到消息。有时，确认意味着由消费者验证并处理了消息，例如，验证具有强制性数据并持久地持续到数据存储或索引中。\n\n这种情况非常常见，因此AMQP 0-9-1具有名为消息确认（有时称为acks）的内置功能，消费者用于确认消息传递或处理。如果应用程序崩溃（AMQP Broker在连接时关闭时会注意到），如果预期消息确认但是AMQP代理未收到ack，则该消息将重入队列（并且可能立即将其发送给另一个存在的消费者）。\n\n具有内置协议的确认有助于开发人员构建更强大的软件。\n\n\n# 拒绝消息\n\n当消费者应用程序接收到消息时，可能无法成功处理该消息。应用程序可以通过拒绝消息来告知代理消息处理失败流（或者无法在当前完成）。拒绝消息时，应用程序可以要求代理丢弃或重新入队列。当队列中只有一个消费者时，请确保通过拒绝消息并重入队列不会创建无穷的消息循环发送。\n\n\n# 否定应答\n\n可以使用basic.reject方法拒绝消息，但basic.reject有一个限制：没有办法拒绝多个消息。但是如果您使用的是RabbitMQ，那么就有一个解决方案。RabbitMQ提供称为否定应答（negative acknowledgements）或nacks的AMQP 0-9-1扩展。\n\n\n# 预取消息\n\n对于多个消费者共享队列的情况，能够指定在发送下一个确认之前可以一次发送到每个消费者的消息数是有用的。这可以用作简单的负载平衡技术或提高吞吐量，如果消息倾向于批量发布。例如，如果生产应用程序因工作需要每分钟发送消息。\n\n请注意，RabbitMQ仅支持信道级预取计数，而不是基于连接或大小的预取。\n\n\n# 消息属性和负载\n\nAMQP 0-9-1模型中的消息具有属性。某些属性很常见，即AMQP 0-9-1规范定义它们，应用程序开发人员不必考虑确切的属性名称。一些例子是\n\n * Content type\n * Content encoding\n * Routing key\n * Delivery mode (persistent or not)\n * Message priority\n * Message publishing timestamp\n * Expiration period\n * Publisher application id\n\nAMQP代理会使用其中某些属性，但大多数还是对应用程序开放的。某些属性是可选的，称为headers。它们类似于HTTP中的X-Headers。发布消息时，会设置消息属性。\n\n消息还具有有效载荷（它们携带的数据），AMQP代理将其视为不透明字节数组。代理不会检查或修改有效负载。消息可以仅包含属性而没有有效载荷。通常使用JSON，Thrift，Protocol Buffers和MessagePack等序列化格式来序列化结构化数据，以便将其发布为消息有效载荷。协议对等体通常使用“content-type”和“content-encoding”字段来传达此信息，但这仅是约定。\n\n消息可能会发布为持久化的，这使得代理将它们持久化到磁盘。如果重新启动服务器，系统可确保收到的持久消息不会丢失。只将消息发布到持久化的交换机或所路由的持久化的队列不会使消息持久化：这一切都取决于消息本身的持久化模式。发布消息并持久化会影响性能（就像数据存储一样，持久化会在性能上有一定开销）。\n\n\n# AMQP 0-9-1方法\n\nAMQP 0-9-1有许多方法。方法是操作（如http方法），并且不像面向对象编程语言中的方法。AMQP 0-9-1中的协议方法被分组为类。类只是AMQP方法的逻辑分组。AMQP 0-9-1 手册含所有AMQP方法的完整细节。\n\n让我们来看看交换机类，这是一组与交换机的操作相关的方法。它包括以下操作：\n\n * exchange.declare\n * exchange.declare-ok\n * exchange.delete\n * exchange.delete-ok\n\n上面的操作组成逻辑对：exchange.declare和exchange.declare-ok，exchange.delete和exchange.delete-ok。这些操作是“requests”（客户端发送）和“responses”（通过代理发送响应上述“请求”））\n\n举个例子，客户端要求代理使用exchange.declare方法声明新的Exchange：\n\n\n\n如上图所示，exchange.declare带有多个参数。它们使客户端可指定Exchange名称，类型，持久性标志等。\n\n如果操作成功，则代理使用exchange.declare-ok方法响应：\n\n\n\nexchange.declare-ok不携带除管道号之外的任何参数。\n\n队列的queue.declare和queue.declare-ok也是类似：\n\n\n\n\n\n并非所有AMQP 0-9-1方法都有对应方法。有些（如最广泛使用的basic.publish）没有相应的“response”方法，有些（如basic.get）具有多个可能的“response”。\n\n\n# 连接\n\nAMQP 0-9-1连接通常是长期的。AMQP 0-9-1是一种应用级别协议，它使用TCP进行可靠的消息传递。连接使用身份验证，可以使用TLS保护。当应用程序不再需要连接到服务器时，它应该优雅地关闭其AMQP 0-9-1连接，而不是突然关闭底层TCP连接。\n\n\n# 管道\n\n某些应用程序需要多个连接到代理。但是同时持有多个TCP连接不是一个好的选择，因为这样做会消耗系统资源并使配置防火墙更加困难。AMQP 0-9-1连接使用管道实现复用，可以被认为是“共享单个TCP连接的轻量级连接”。\n\n客户端执行的每个协议操作发生在管道上。特定频道上的通信与另一个通道上的通信是完全分开的，因此每个协议方法还携带channel ID（channal number），这是代理和客户端用来弄清该方法作用管道的整数。\n\n管道仅存在连接的上下文中，而不是自己的。当连接关闭时，所有管道也会关闭。\n\n对于使用多个线程/进程进行处理的应用程序，每个线程/进程会打开新的管道，而不会共享管道。\n\n\n# 虚拟主机\n\n为了使单个代理能够托管多个孤立的“environments”（用户组，交换机，队列等），AMQP 0-9-1包含了虚拟主机的概念（vhosts）。它们类似于许多流行的Web服务器使用的虚拟主机，并提供完全隔离的环境，其中就有AMQP实体。协议客户端指定在连接协商期间他们想要使用的vhosts。\n\n\n# 可扩展的AMQP\n\nAMQP 0-9-1有几个扩展点：\n\n * 自定义交换机类型让开发人员实现路由方案。\n * 交换机和队列的声明可以包括代理可以使用的附加属性。例如，RabbitMQ中的 per-queue message TTL以这种方式实现。\n * 代理特定于协议的扩展。例如extensions that RabbitMQ implements\n * New AMQP 0-9-1 method classes\n * 代理可以用附加插件扩展，例如，RabbitMQ管理端和HTTP API被实现为插件。\n\n这些功能使AMQP 0-9-1模型更加灵活。\n\n\n# AMQP 0-9-1客户端生态环境\n\n许多流行的编程语言和平台有许多AMQP 0-9-1客户端。其中一些只提供AMQP方法的实现。有些提供其他功能、便利的方法和抽象。一些客户端是异步的（非阻塞），有些是同步（阻塞），有些支持两种模式。某些客户端支持特定于供应商的扩展（例如，RabbitMQ特定的扩展）。",normalizedContent:"# 什么是amqp 0-9-1\n\namqp 0-9-1（高级消息队列协议）是一种消息传递协议，使客户端应用程序能够与消息中间件代理进行通信。\n\n\n# 代理brokers\n\n消息代理接受来自发布者（发布消息的应用程序，也叫生产者）的消息并把它们路由到消费者（处理消息的应用程序）。\n\n因为它是一个网络协议，所以发布者、消费者和代理都能部署在不同机器上。\n\n\n# amqp 0-9-1模型简介\n\namqp 0-9-1模型如下：消息被发布到交换机（就像邮政局或邮箱）中，然后使用称为绑定（bindings）的规则分发消息副本到队列（queues）。然后，代理将消息传递给订阅队列的消费者，或者消费者按需从队列中获取消息。\n\n\n\n发布消息时，发布者可以定义各种消息属性（消息元数据）。其中一些元数据可以被代理使用，但是它的其余部分对代理完全不透明，并且仅被接收消息的应用程序使用。\n\n网络是不可靠的，并且应用程序可能无法处理消息，因此amqp 0-9-1模型具有消息确认（message acknowledgements）的概念：当消息被传递给消费者时，消费者会自动通知代理（如果应用程序开发人员选择这样做）。当使用消息确认机制时，在收到该消息（或消息组）的通知时，代理才会完全从队列中删除该消息。\n\n在某些情况下，例如，当无法路由消息时，可以将消息返回给发布者、丢弃，或者，如果代理实现了扩展，则将这些消息推到所谓的“死信队列（dead letter queue）”中。发布者通过使用某些参数发布消息来选择如何处理这样的情况。\n\n队列（queues），交换（exchanges）和绑定（bindings）称为amqp实体。\n\n\n# amqp 0-9-1是可编程协议\n\namqp 0-9-1是一种可编程协议，即amqp 0-9-1实体和路由规则主要由应用程序本身定义，而不是代理管理员。\n\n因此，为协议操作定义了一系列规则如声明队列和交换机、定义他们之间的绑定、订阅队列等。\n\n这给了应用程序开发人员很多自由，但也需要他们意识到潜在的定义冲突。在实践中，定义冲突是罕见的，并且通常表明存在错误配置。\n\n应用程序声明所需的amqp 0-9-1实体，定义必要的路由规则，并且可以在不再使用它们时删除amqp 0-9-1实体。\n\n\n# 交换机和交换类型\n\n消息会发送到交换机，交换机是amqp 0-9-1实体。交换传递消息，将其路由到零或多个队列中。使用的路由算法取决于交换类型和被称为绑定的规则。amqp 0-9-1代理提供四种交换类型：\n\nexchange type          default pre-declared names\ndirect exchange直连交换机   (empty string) and amq.direct\nfanout exchange扇形交换机   amq.fanout\ntopic exchange主题交换机    amq.topic\nheaders exchange头交换机   amq.match (and amq.headers in rabbitmq)\n\n除了交换类型之外，交换机还声明了许多属性，最重要的是：\n\n * name：交换机名称\n * durability (exchanges survive broker restart)：是否持久化。如果持久性，则代理重启后，交换机还存在\n * auto-delete (exchange is deleted when last queue is unbound from it)：当所有与之绑定的消息队列都完成了对此交换机的使用后，删掉它\n * arguments (optional, used by plugins and broker-specific features)：可选，插件和代理特定功能使用\n\n交换机可以是持久化的或临时的。持久化的交换机在代理重新启动任然存在，而临时的不会（当代理重新在线时，他们必须被重新声明）。并非所有场景都需要持久化的交换机。\n\n\n# 默认交换机\n\n默认交换机是代理预先声明的没有名称（空字符串）的直连交换机。它有一个特殊的属性，非常适用于简单的应用程序：创建的每个队列都是用与队列名称相同的路由key自动绑定到该类交换机。\n\n例如，当声明一个名为为“search-indexing-online”的队列时，amqp 0-9-1代理将使用“search-indexing-online”作为路由key将其绑定到默认交换机（在此上下文有时称为绑定key）。因此，发布到默认交换机的路由key为“search-indexing-online”的消息将被路由到队列“search-indexing-online”。换句话说，默认交换使其似乎可以直接向队列传递消息。\n\n\n# 直连交换机\n\n直连交换机基于消息路由key将消息传递到队列。直连交换机非常适合消息的单播路由（尽管它们也可用于组播路由）。下面是它的工作原理：\n\n * 队列通过路由key k绑定到交换机\n * 当具有路由key r的新消息到达直接交换机时，如果k = r，则交换机将其路由到该队列\n\n直接交换机通常用于以循环方式在多个工作实例（相同应用程序的实例）之间分配任务。这样做时，重要的是要理解，在amqp 0-9-1中，消息是在消费者之间负载均衡，而不是在队列之间负载均衡。\n\n直接交换机可以以图形方式表示如下：\n\n\n\n\n# 扇形交换机\n\n扇形交换机不管绑定的key是什么，会路由消息到绑定到它的所有队列。如果n个队列绑定到扇形交换机，则当新消息发布到该交换机时，它将传递消息的副本到这n个队列。扇形交换机适合广播路由。\n\n因为扇形交换机将消息的副本传递给绑定到它的每个队列，所以它的使用场景非常相似：\n\n * 大型多人在线（mmo）游戏可以将其用于排行榜更新或其他全局事件\n * 体育新闻网站可以使用扇形交换机实时地发布更新的分数到移动客户端\n * 分布式系统可以广播各种状态和配置更新\n * 群组聊天可以使用扇形交换机分发参与者之间的消息（虽然amqp没有内置的相关概念，所以xmpp可能是一个更好的选择）\n\n扇形交换机可以以图形方式表示如下：\n\n\n\n\n# 主题交换机\n\n主题交换机基于消息路由key和用于将队列绑定到交换机的模式之间的匹配，将消息路由到一个或多个队列。主题交换机通常用于实现各种发布/订阅模式变体。主题交换机通常用于消息的组播路由。\n\n主题交换机具有非常广泛的使用场景。当一个问题涉及多个消费者/应用程序有选择性地接收哪种类型的消息时，应考虑使用主题交换机。\n\n使用案例：\n\n * 分发与特定地理位置相关的数据，例如销售点\n\n * 由多个工作实例处理的后台任务，每个工作实例都能够处理特定的任务集\n\n * 库存价格更新（以及其他类型的财务数据更新）\n\n * 涉及分类或标记的新闻更新（例如，仅适用于特定运动或团队）\n\n * 不同类型云服务的编排\n\n * 分布式架构/操作系统的软件构建或打包，其中每个构建器只能处理一个架构或操作系统\n\n\n# 头交换机\n\n头交换机被设计用于路由多个属性，这些属性更容易用消息头表示而不是路由key。头交换机会忽略路由key属性。相反，用于路由的属性是从头属性中取得的。如果头属性值等于绑定指定的值，则匹配该消息。\n\n可以使用多个消息头绑定消息到头交换机。在这种情况下，代理需要应用程序开发者提供更多信息，即，是匹配其中一个消息头还是所有消息头？这就是“x-match”绑定参数做的事。当“x-match”参数被设置为“any”时，匹配任意一个消息头值就行了。或者，将“x-match”设置为“all”要求所有值必须匹配。\n\n头交换机可以看做是特殊的直连交换机。因为它们都是基于消息头属性值路由，路由key不必是字符串时，它们可以用作直接交换，例如，它可以是整数或哈希（字典）。\n\n注意，以字符串x-开头的消息头将不会用于匹配。\n\n\n# 队列\n\namqp 0-9-1模型中的队列与其他消息和任务队列系统中的队列非常相似：它们存储由应用程序消费的消息。队列与交换机共享一些属性，但也有一些额外的属性：\n\n * name：名称\n * durable：队列在代理重启时扔存在\n * exclusive：仅被一个连接使用并且该连接关闭时队列将被删除\n * auto-delete：当最后一个消费者取消订阅时，至少有一个消费者的队列将被删除\n * arguments ：可选，由plugins和broker特定功能使用，例如消息ttl，队列长度限制等\n\n在使用队列之前，必须声明它。声明队列将导致它会在尚未存在的情况下创建。如果已存在队列，并且其属性与声明中的属性相同，则该声明不会有什么影响。当已存在的队列属性和声明的不同时，将会引发一个406错误码（precondition_failed）的管道级异常\n\n\n# 队列名\n\n应用程序可以自己选择队列名称或让代理生成。队列名称最长为255个字节的utf-8字符。amqp 0-9-1代理可以生成唯一的代表应用的队列名称。要使用此功能，请将队列名称参数设为空字符串。生成的名称将以队列声明响应返回给客户端。\n\n以“amq.”开头的队列名称只在代理内部使用。尝试使用违反此规则的名称声明队列将导致具有403返回码（access_refused）的管道级别异常。\n\n\n# 队列持久化\n\n在amqp 0-9-1中，队列可以被声明为持久化的或暂存的。持久化的队列的元数据存储在磁盘上，而临时队列的元数据在可用的情况下存储在内存中。\n\n在需要持久化的场景下，应用程序必须使用持久化的队列来确保发布者将推送的消息标记为持久化。\n\n\n# 绑定\n\n绑定是交换机将消息传送到队列使用的规则（以及其他内容）。为了让交换机e将消息路由到队列q，q必须绑定到e。一些类型的交换机使用的绑定有可选的路由key属性。路由key的目的是选择正确的发布到交换机的某些消息到绑定队列。换句话说，路由key就像是一个过滤器。\n\n打个比方：\n\n * 队列就像目的地长沙市\n * 交换机就像宝安机场\n * 绑定就是从宝安机场到长沙的路径，有多条路径可以选择\n\n这样的间接层让那种很难用直接推送到队列的方式实现的的路由场景变得可能，并且也减少了开发者的重复性工作。\n\n如果消息不能路由到队列（比如因为交换机没有绑定任何队列），消息将被丢弃或返回给发布者，具体是哪种取决于发布者设置的消息的相关属性。\n\n\n# 消费者\n\n除非应用程序可以消费它们，否则存储队列中的消息是没用的。在amqp 0-9-1模型中，应用程序有两种方法来执行此操作：\n\n * 订阅传递给它们的消息（“push api”）：这是推荐的选项\n * 轮询（“pull api”）：这种方式很低效，在大多数情况下应该避免\n\n使用“push api”，应用程序必须指定消费哪个队列的消息。当他们这样做时，我们说他们注册了消费者或简单地说，订阅了一个队列。每个队列可以拥有多个消费者或注册独占消费者（在消费时从队列中排除所有其他消费者）。\n\n每个消费者（订阅）有一个称为消费者标记的标识符。它可用于取消订阅消息。消费者标签是字符串。\n\n\n# 消息确认\n\n消费者应用程序 - 也就是说，接收和处理消息的应用程序 - 可能偶尔可能会无法处理单个消息，也可能程序崩溃了。还有可能出现网络问题。这提出了一个问题：代理应该什么时候从队列中删除消息？amqp 0-9-1规范为消费者提供了消息确认机制。有两种确认模式：\n\n * 在代理向应用程序发送一个消息之后（使用basic.deliver或者basic.get-ok方法）\n * 在应用程序发送确认消息后（使用basic.ack方法）\n\n前者称为自动确认模型，而后者称为显式确认模型。通过显式模型，应用程序选择在何时发送确认消息。它可以在收到消息后，或在处理前存到数据存储器之后，或者在完全处理消息之后（例如，成功地获取网页，处理和将其存储到一些持久数据存储中）。\n\n如果消费者死亡而不发送确认，则代理将将其重新发送到另一个消费者，或者如果没有可用消费者，则代理将在至少一个消费者重新注册到同一个队列后尝试重新发送消息。\n\n由于网络不可靠，或者应用程序无法响应，通常需要具有某种机制来处理确认。有时只需确认消费者已收到消息。有时，确认意味着由消费者验证并处理了消息，例如，验证具有强制性数据并持久地持续到数据存储或索引中。\n\n这种情况非常常见，因此amqp 0-9-1具有名为消息确认（有时称为acks）的内置功能，消费者用于确认消息传递或处理。如果应用程序崩溃（amqp broker在连接时关闭时会注意到），如果预期消息确认但是amqp代理未收到ack，则该消息将重入队列（并且可能立即将其发送给另一个存在的消费者）。\n\n具有内置协议的确认有助于开发人员构建更强大的软件。\n\n\n# 拒绝消息\n\n当消费者应用程序接收到消息时，可能无法成功处理该消息。应用程序可以通过拒绝消息来告知代理消息处理失败流（或者无法在当前完成）。拒绝消息时，应用程序可以要求代理丢弃或重新入队列。当队列中只有一个消费者时，请确保通过拒绝消息并重入队列不会创建无穷的消息循环发送。\n\n\n# 否定应答\n\n可以使用basic.reject方法拒绝消息，但basic.reject有一个限制：没有办法拒绝多个消息。但是如果您使用的是rabbitmq，那么就有一个解决方案。rabbitmq提供称为否定应答（negative acknowledgements）或nacks的amqp 0-9-1扩展。\n\n\n# 预取消息\n\n对于多个消费者共享队列的情况，能够指定在发送下一个确认之前可以一次发送到每个消费者的消息数是有用的。这可以用作简单的负载平衡技术或提高吞吐量，如果消息倾向于批量发布。例如，如果生产应用程序因工作需要每分钟发送消息。\n\n请注意，rabbitmq仅支持信道级预取计数，而不是基于连接或大小的预取。\n\n\n# 消息属性和负载\n\namqp 0-9-1模型中的消息具有属性。某些属性很常见，即amqp 0-9-1规范定义它们，应用程序开发人员不必考虑确切的属性名称。一些例子是\n\n * content type\n * content encoding\n * routing key\n * delivery mode (persistent or not)\n * message priority\n * message publishing timestamp\n * expiration period\n * publisher application id\n\namqp代理会使用其中某些属性，但大多数还是对应用程序开放的。某些属性是可选的，称为headers。它们类似于http中的x-headers。发布消息时，会设置消息属性。\n\n消息还具有有效载荷（它们携带的数据），amqp代理将其视为不透明字节数组。代理不会检查或修改有效负载。消息可以仅包含属性而没有有效载荷。通常使用json，thrift，protocol buffers和messagepack等序列化格式来序列化结构化数据，以便将其发布为消息有效载荷。协议对等体通常使用“content-type”和“content-encoding”字段来传达此信息，但这仅是约定。\n\n消息可能会发布为持久化的，这使得代理将它们持久化到磁盘。如果重新启动服务器，系统可确保收到的持久消息不会丢失。只将消息发布到持久化的交换机或所路由的持久化的队列不会使消息持久化：这一切都取决于消息本身的持久化模式。发布消息并持久化会影响性能（就像数据存储一样，持久化会在性能上有一定开销）。\n\n\n# amqp 0-9-1方法\n\namqp 0-9-1有许多方法。方法是操作（如http方法），并且不像面向对象编程语言中的方法。amqp 0-9-1中的协议方法被分组为类。类只是amqp方法的逻辑分组。amqp 0-9-1 手册含所有amqp方法的完整细节。\n\n让我们来看看交换机类，这是一组与交换机的操作相关的方法。它包括以下操作：\n\n * exchange.declare\n * exchange.declare-ok\n * exchange.delete\n * exchange.delete-ok\n\n上面的操作组成逻辑对：exchange.declare和exchange.declare-ok，exchange.delete和exchange.delete-ok。这些操作是“requests”（客户端发送）和“responses”（通过代理发送响应上述“请求”））\n\n举个例子，客户端要求代理使用exchange.declare方法声明新的exchange：\n\n\n\n如上图所示，exchange.declare带有多个参数。它们使客户端可指定exchange名称，类型，持久性标志等。\n\n如果操作成功，则代理使用exchange.declare-ok方法响应：\n\n\n\nexchange.declare-ok不携带除管道号之外的任何参数。\n\n队列的queue.declare和queue.declare-ok也是类似：\n\n\n\n\n\n并非所有amqp 0-9-1方法都有对应方法。有些（如最广泛使用的basic.publish）没有相应的“response”方法，有些（如basic.get）具有多个可能的“response”。\n\n\n# 连接\n\namqp 0-9-1连接通常是长期的。amqp 0-9-1是一种应用级别协议，它使用tcp进行可靠的消息传递。连接使用身份验证，可以使用tls保护。当应用程序不再需要连接到服务器时，它应该优雅地关闭其amqp 0-9-1连接，而不是突然关闭底层tcp连接。\n\n\n# 管道\n\n某些应用程序需要多个连接到代理。但是同时持有多个tcp连接不是一个好的选择，因为这样做会消耗系统资源并使配置防火墙更加困难。amqp 0-9-1连接使用管道实现复用，可以被认为是“共享单个tcp连接的轻量级连接”。\n\n客户端执行的每个协议操作发生在管道上。特定频道上的通信与另一个通道上的通信是完全分开的，因此每个协议方法还携带channel id（channal number），这是代理和客户端用来弄清该方法作用管道的整数。\n\n管道仅存在连接的上下文中，而不是自己的。当连接关闭时，所有管道也会关闭。\n\n对于使用多个线程/进程进行处理的应用程序，每个线程/进程会打开新的管道，而不会共享管道。\n\n\n# 虚拟主机\n\n为了使单个代理能够托管多个孤立的“environments”（用户组，交换机，队列等），amqp 0-9-1包含了虚拟主机的概念（vhosts）。它们类似于许多流行的web服务器使用的虚拟主机，并提供完全隔离的环境，其中就有amqp实体。协议客户端指定在连接协商期间他们想要使用的vhosts。\n\n\n# 可扩展的amqp\n\namqp 0-9-1有几个扩展点：\n\n * 自定义交换机类型让开发人员实现路由方案。\n * 交换机和队列的声明可以包括代理可以使用的附加属性。例如，rabbitmq中的 per-queue message ttl以这种方式实现。\n * 代理特定于协议的扩展。例如extensions that rabbitmq implements\n * new amqp 0-9-1 method classes\n * 代理可以用附加插件扩展，例如，rabbitmq管理端和http api被实现为插件。\n\n这些功能使amqp 0-9-1模型更加灵活。\n\n\n# amqp 0-9-1客户端生态环境\n\n许多流行的编程语言和平台有许多amqp 0-9-1客户端。其中一些只提供amqp方法的实现。有些提供其他功能、便利的方法和抽象。一些客户端是异步的（非阻塞），有些是同步（阻塞），有些支持两种模式。某些客户端支持特定于供应商的扩展（例如，rabbitmq特定的扩展）。",charsets:{cjk:!0}},{title:"vscode使用技巧",frontmatter:{title:"vscode使用技巧",permalink:"/pages/dev/vscode/",date:"2022-01-20T12:33:26.000Z"},regularPath:"/02.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/02.vscode%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7.html",relativePath:"02.开发指南/02.vscode使用技巧.md",key:"v-0aaa33f7",path:"/pages/dev/vscode/",headersStr:null,content:"# 1.快捷键\n\n快捷键                      说明\nF1或者Ctrl + shift + p     打开命令面板\nAlt + ←                  回到上一个位置\nAlt + shift + f          格式化代码\nCtrl + shift + f         搜索选中内容\nCtrl + \\                 分割编辑窗口\nAlt + shift + up或者down   复制一行\nAlt + up或者down           上下移动一行\nAlt + shift + →或者←       扩大或者缩小选择",normalizedContent:"# 1.快捷键\n\n快捷键                      说明\nf1或者ctrl + shift + p     打开命令面板\nalt + ←                  回到上一个位置\nalt + shift + f          格式化代码\nctrl + shift + f         搜索选中内容\nctrl + \\                 分割编辑窗口\nalt + shift + up或者down   复制一行\nalt + up或者down           上下移动一行\nalt + shift + →或者←       扩大或者缩小选择",charsets:{cjk:!0}},{title:"Java8实战",frontmatter:{title:"Java8实战",permalink:"/pages/note/java8InAction/",article:!0,date:"2022-01-20T11:23:25.000Z"},regularPath:"/03.%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/01.Java8%E5%AE%9E%E6%88%98.html",relativePath:"03.读书笔记/01.Java8实战.md",key:"v-2f6761fc",path:"/pages/note/java8InAction/",headers:[{level:2,title:"1.1 流处理",slug:"_1-1-流处理",normalizedTitle:"1.1 流处理",charIndex:13},{level:2,title:"1.2行为参数化",slug:"_1-2行为参数化",normalizedTitle:"1.2行为参数化",charIndex:218},{level:2,title:"1.3 并行与共享的可变数据",slug:"_1-3-并行与共享的可变数据",normalizedTitle:"1.3 并行与共享的可变数据",charIndex:448},{level:2,title:"1.4 函数",slug:"_1-4-函数",normalizedTitle:"1.4 函数",charIndex:554},{level:2,title:"1.5 Stream API与Collection API",slug:"_1-5-stream-api与collection-api",normalizedTitle:"1.5 stream api与collection api",charIndex:781},{level:2,title:"1.6 默认方法",slug:"_1-6-默认方法",normalizedTitle:"1.6 默认方法",charIndex:946},{level:2,title:"2.1 函数式接口",slug:"_2-1-函数式接口",normalizedTitle:"2.1 函数式接口",charIndex:1707},{level:2,title:"2.2 类型检查、推断和限制",slug:"_2-2-类型检查、推断和限制",normalizedTitle:"2.2 类型检查、推断和限制",charIndex:1797},{level:3,title:"2.2.1 使用局部变量",slug:"_2-2-1-使用局部变量",normalizedTitle:"2.2.1 使用局部变量",charIndex:1949},{level:3,title:"2.2.2 方法引用",slug:"_2-2-2-方法引用",normalizedTitle:"2.2.2 方法引用",charIndex:2225},{level:3,title:"2.2.3 复合",slug:"_2-2-3-复合",normalizedTitle:"2.2.3 复合",charIndex:2548},{level:2,title:"3.1 流操作",slug:"_3-1-流操作",normalizedTitle:"3.1 流操作",charIndex:3412},{level:3,title:"3.1.1 中间操作",slug:"_3-1-1-中间操作",normalizedTitle:"3.1.1 中间操作",charIndex:3471},{level:3,title:"3.1.2 终端操作",slug:"_3-1-2-终端操作",normalizedTitle:"3.1.2 终端操作",charIndex:3560},{level:2,title:"4.1 筛选和切片",slug:"_4-1-筛选和切片",normalizedTitle:"4.1 筛选和切片",charIndex:3638},{level:2,title:"4.2 映射",slug:"_4-2-映射",normalizedTitle:"4.2 映射",charIndex:3660},{level:2,title:"4.3 查找和匹配",slug:"_4-3-查找和匹配",normalizedTitle:"4.3 查找和匹配",charIndex:3684},{level:2,title:"4.4 归约",slug:"_4-4-归约",normalizedTitle:"4.4 归约",charIndex:3745},{level:2,title:"4.5 原始类型流特化",slug:"_4-5-原始类型流特化",normalizedTitle:"4.5 原始类型流特化",charIndex:4025},{level:2,title:"4.6 创建流",slug:"_4-6-创建流",normalizedTitle:"4.6 创建流",charIndex:4133},{level:2,title:"5.1 Collectors预定义收集器",slug:"_5-1-collectors预定义收集器",normalizedTitle:"5.1 collectors预定义收集器",charIndex:4881},{level:2,title:"5.2 广义的归约汇总",slug:"_5-2-广义的归约汇总",normalizedTitle:"5.2 广义的归约汇总",charIndex:5125},{level:2,title:"5.3 分组",slug:"_5-3-分组",normalizedTitle:"5.3 分组",charIndex:5293},{level:2,title:"5.4 分区",slug:"_5-4-分区",normalizedTitle:"5.4 分区",charIndex:5512},{level:2,title:"5.5 收集器接口",slug:"_5-5-收集器接口",normalizedTitle:"5.5 收集器接口",charIndex:5570},{level:3,title:"5.5.1 supplier建立新的结果容器",slug:"_5-5-1-supplier建立新的结果容器",normalizedTitle:"5.5.1 supplier建立新的结果容器",charIndex:21032},{level:3,title:"5.5.2 accumulator将元素添加到结果容器",slug:"_5-5-2-accumulator将元素添加到结果容器",normalizedTitle:"5.5.2 accumulator将元素添加到结果容器",charIndex:21154},{level:3,title:"5.5.3 finisher对结果容器应用最终转换",slug:"_5-5-3-finisher对结果容器应用最终转换",normalizedTitle:"5.5.3 finisher对结果容器应用最终转换",charIndex:21250},{level:3,title:"5.5.4 combiner合并两个结果容器",slug:"_5-5-4-combiner合并两个结果容器",normalizedTitle:"5.5.4 combiner合并两个结果容器",charIndex:21355},{level:3,title:"5.5.5 characteristics方法",slug:"_5-5-5-characteristics方法",normalizedTitle:"5.5.5 characteristics方法",charIndex:21764},{level:3,title:"5.5.6 自定义收集",slug:"_5-5-6-自定义收集",normalizedTitle:"5.5.6 自定义收集",charIndex:21996},{level:2,title:"6.1 将顺序流转换为并行流",slug:"_6-1-将顺序流转换为并行流",normalizedTitle:"6.1 将顺序流转换为并行流",charIndex:22170},{level:2,title:"6.2 正确使用并行",slug:"_6-2-正确使用并行",normalizedTitle:"6.2 正确使用并行",charIndex:22569},{level:2,title:"6.3 Fork/Join框架",slug:"_6-3-fork-join框架",normalizedTitle:"6.3 fork/join框架",charIndex:25340},{level:3,title:"6.3.1 RecursiveTask",slug:"_6-3-1-recursivetask",normalizedTitle:"6.3.1 recursivetask",charIndex:25360},{level:3,title:"6.3.2 使用Fork/Join的最佳做法",slug:"_6-3-2-使用fork-join的最佳做法",normalizedTitle:"6.3.2 使用fork/join的最佳做法",charIndex:25918},{level:3,title:"6.3.3 工作窃取",slug:"_6-3-3-工作窃取",normalizedTitle:"6.3.3 工作窃取",charIndex:26635},{level:2,title:"6.4 Spliterator可分迭代器",slug:"_6-4-spliterator可分迭代器",normalizedTitle:"6.4 spliterator可分迭代器",charIndex:26762},{level:3,title:"6.4.1 拆分过程",slug:"_6-4-1-拆分过程",normalizedTitle:"6.4.1 拆分过程",charIndex:27180},{level:3,title:"6.4.2 自定义Spliterator",slug:"_6-4-2-自定义spliterator",normalizedTitle:"6.4.2 自定义spliterator",charIndex:27537},{level:2,title:"7.1 重构",slug:"_7-1-重构",normalizedTitle:"7.1 重构",charIndex:27578},{level:3,title:"7.1.1 使用Lambda替换匿名类",slug:"_7-1-1-使用lambda替换匿名类",normalizedTitle:"7.1.1 使用lambda替换匿名类",charIndex:27589},{level:3,title:"7.1.2 方法引用代替Lambda",slug:"_7-1-2-方法引用代替lambda",normalizedTitle:"7.1.2 方法引用代替lambda",charIndex:27721},{level:3,title:"7.1.3 从命令式的数据处理切换到Stream",slug:"_7-1-3-从命令式的数据处理切换到stream",normalizedTitle:"7.1.3 从命令式的数据处理切换到stream",charIndex:27744},{level:3,title:"7.1.4重构模式",slug:"_7-1-4重构模式",normalizedTitle:"7.1.4重构模式",charIndex:27773},{level:2,title:"7.2 使用Lambda重构面向对象的设计模式",slug:"_7-2-使用lambda重构面向对象的设计模式",normalizedTitle:"7.2 使用lambda重构面向对象的设计模式",charIndex:28120},{level:3,title:"7.2.1 策略模式",slug:"_7-2-1-策略模式",normalizedTitle:"7.2.1 策略模式",charIndex:28148},{level:3,title:"7.2.2 模板方法",slug:"_7-2-2-模板方法",normalizedTitle:"7.2.2 模板方法",charIndex:28176},{level:3,title:"7.2.3 观察者模式",slug:"_7-2-3-观察者模式",normalizedTitle:"7.2.3 观察者模式",charIndex:28206},{level:3,title:"7.2.4 责任链模式",slug:"_7-2-4-责任链模式",normalizedTitle:"7.2.4 责任链模式",charIndex:28289},{level:3,title:"7.2.5 工厂模式",slug:"_7-2-5-工厂模式",normalizedTitle:"7.2.5 工厂模式",charIndex:28332},{level:2,title:"7.2 测试Lambda",slug:"_7-2-测试lambda",normalizedTitle:"7.2 测试lambda",charIndex:28374},{level:2,title:"7.3 调试",slug:"_7-3-调试",normalizedTitle:"7.3 调试",charIndex:28391},{level:2,title:"11.1 LocalDate和LocalTime",slug:"_11-1-localdate和localtime",normalizedTitle:"11.1 localdate和localtime",charIndex:29514},{level:2,title:"11.2 Instant",slug:"_11-2-instant",normalizedTitle:"11.2 instant",charIndex:29543},{level:2,title:"11.3 Duration或Period",slug:"_11-3-duration或period",normalizedTitle:"11.3 duration或period",charIndex:29573},{level:2,title:"11.4 操纵、解析和格式化日期",slug:"_11-4-操纵、解析和格式化日期",normalizedTitle:"11.4 操纵、解析和格式化日期",charIndex:30332},{level:3,title:"11.4.1 使用TemporalAdjuster",slug:"_11-4-1-使用temporaladjuster",normalizedTitle:"11.4.1 使用temporaladjuster",charIndex:31312},{level:3,title:"11.4.2 DateTimeFormatter",slug:"_11-4-2-datetimeformatter",normalizedTitle:"11.4.2 datetimeformatter",charIndex:31459},{level:2,title:"11.5 处理不同的时区和历法",slug:"_11-5-处理不同的时区和历法",normalizedTitle:"11.5 处理不同的时区和历法",charIndex:32854}],headersStr:"1.1 流处理 1.2行为参数化 1.3 并行与共享的可变数据 1.4 函数 1.5 Stream API与Collection API 1.6 默认方法 2.1 函数式接口 2.2 类型检查、推断和限制 2.2.1 使用局部变量 2.2.2 方法引用 2.2.3 复合 3.1 流操作 3.1.1 中间操作 3.1.2 终端操作 4.1 筛选和切片 4.2 映射 4.3 查找和匹配 4.4 归约 4.5 原始类型流特化 4.6 创建流 5.1 Collectors预定义收集器 5.2 广义的归约汇总 5.3 分组 5.4 分区 5.5 收集器接口 5.5.1 supplier建立新的结果容器 5.5.2 accumulator将元素添加到结果容器 5.5.3 finisher对结果容器应用最终转换 5.5.4 combiner合并两个结果容器 5.5.5 characteristics方法 5.5.6 自定义收集 6.1 将顺序流转换为并行流 6.2 正确使用并行 6.3 Fork/Join框架 6.3.1 RecursiveTask 6.3.2 使用Fork/Join的最佳做法 6.3.3 工作窃取 6.4 Spliterator可分迭代器 6.4.1 拆分过程 6.4.2 自定义Spliterator 7.1 重构 7.1.1 使用Lambda替换匿名类 7.1.2 方法引用代替Lambda 7.1.3 从命令式的数据处理切换到Stream 7.1.4重构模式 7.2 使用Lambda重构面向对象的设计模式 7.2.1 策略模式 7.2.2 模板方法 7.2.3 观察者模式 7.2.4 责任链模式 7.2.5 工厂模式 7.2 测试Lambda 7.3 调试 11.1 LocalDate和LocalTime 11.2 Instant 11.3 Duration或Period 11.4 操纵、解析和格式化日期 11.4.1 使用TemporalAdjuster 11.4.2 DateTimeFormatter 11.5 处理不同的时区和历法",content:'# 1.基础知识\n\n\n# 1.1 流处理\n\n流是一系列数据项，一次只生成一项。可以想象成汽车组装流水线，尽管流水线实际上是一个序列，但不同加工站的运行一般是并行的。\n\n# 该例子表示把两个文件连接起来创建一个流，然后转换流中的字符，对流中的行进行排序，最后给出流的最后三行。\n# 这几个命令在Unix中是同时执行的。\ncat file1 file2 | tr "[a-z]" "[A-Z]" | sort | tail -3\n\n\n\n# 1.2行为参数化\n\nStream API是构建在通过传递代码使得操作行为实现参数化的思想上。\n\n比方说，你有一堆发票代码，格式类似于2013UK0001、2014US0002……前四位数代表年份， 接下来两个字母代表国家，最后四位是客户的代码。你可能想按照年份、客户代码，甚至国家来 对发票进行排序。你真正想要的是，能够给sort命令一个参数让用户定义顺序：给sort命令传 递一段独立代码。Java8增加了把代码作为参数传递给另一个方法的能力。\n\n\n\n\n# 1.3 并行与共享的可变数据\n\n> 没有共享的可变数据和将方法和函数即代码传递给其他方法的能力是函数式编程范式的基石。函数式编程中的函数的主要意思是“把函数作为一等值”，也即“执行时在元素之间无互动”。\n\n\n# 1.4 函数\n\n * Java8允许把方法和函数作为一等公民（可传递的值）。让方法作为值构成了其他若干Java8功能的基础。\n * Java8可以传递方法引用，以前只能传递对象引用\n * 谓词（predicate）：在数学上常常用来代表一个类似函数的东西，他接受一个参数值，并返回true或false。\n * 如果Lambda的长度多于几行，它的行为也不是一目了然的话，应该用方法引用来指向一个有描述性名称的方法，而不是使用匿名的Lambda。\n\n\n# 1.5 Stream API与Collection API\n\n * 用集合循环一个个去迭代再处理元素称为外部迭代，流处理是在库内部进行的，称为内部迭代。\n * 流的并行比使用线程同步更不易出错，流天生具有利用多核的优势。\n * Collection主要是为了存储和访问数据，而Stream则主要用于描述对数据的计算。\n\n\n\n\n# 1.6 默认方法\n\n设计默认方法的目的在于改变已发布的接口而不破坏已有的实现。例如Java8中List新增的默认方法：\n\ndefault void sort(Comparator<? super E> c) {\n    Object[] a = this.toArray();\n        Arrays.sort(a, (Comparator) c);\n        ListIterator<E> i = this.listIterator();\n        for (Object e : a) {\n            i.next();\n            i.set((E) e);\n        }\n}\n\n\n但一个类可以实现多个接口，如果在好几个接口里有多个默认实现，某种程度上意味着Java有了多重继承。Java用一些限制来避免出现类似C++中的菱形继承问题。\n\n\n# 2.Lambda表达式\n\n可以把Lambda表达式看做匿名函数，也就是没有声明名称的方法，和匿名类一样可以作为参数传递给一个方法，它有参数列表、函数主体、返回类型、还有可能有可以抛出的异常列表。\n\n// 表达式就是Lambda的返回值\n(parameters) -> expression\n(parameters) -> { statements;}\n(1).() -> {}\n(2).() -> "hello world"\n(3).() -> { return "hello world";}\n(4).(Integer i) -> return "hello" + i; //无效，不应有return\n(5).(String s) -> { "IronMan"; } //无效，显示返回要加上return\n\n\n\n\n# 2.1 函数式接口\n\n函数式接口中的抽象方法的签名可以描述Lambda表达式的签名。函数式接口的抽象方法的签名成为函数描述符。\n\n> 任何函数式接口都不允许抛出受检异常。\n\n\n# 2.2 类型检查、推断和限制\n\nLambda的类型是从使用Lambda的上下文推断出来的。如果Lambda表达式抛出一个异常，那么抽象方法所声明的throws语句也必须与之匹配\n\n> 特殊的void兼容规则:如果一个Lambda的主体是一个语句表达式， 它就和一个返回void的函数描述符兼容。\n\n\n# 2.2.1 使用局部变量\n\nLambda表达式允许使用自由变量（在外层作用域中定义的变量），就像匿名类一样，它们被称作Lambda捕获。Lambda可以没有限制地捕获实例变量和静态变量，但局部变量必须显式声明为final或逻辑上是final的，也就是只能捕获局部变量一次\n\n> 闭包\n> \n> 闭包是一个函数的实例，且它可以无限制地访问那个函数的非本地变量。但Lambda访问非本地变量有必须是隐式最终的限制，因为局部变量保存在栈上，是线程私有的，线程访问非本地局部变量时实际上是访问它的副本。可以认为Lambda对值封闭，而不是对变量封闭。\n\n\n# 2.2.2 方法引用\n\n如果一个Lambda代表的只是“直接调用这个方法”，那最好还是用名称来调用它，而不是去描述如何调用它。 可以把方法引用看作针对仅仅涉及单一方法的Lambda的语法糖\n\n * 指向静态方法的方法引用。Integer::parseInt\n * 指向任意类型实例方法的方法引用。String::length\n * 指向现有对象的实例方法的方法引用。在 Lambda 中 调 用 一 个 已 经 存 在 的 外 部 对 象 中 的 方 法 。 例 如 ， Lambda 表 达 式 ()->expensiveTransaction.getValue()可以写作expensiveTransaction::getValue\n\n\n# 2.2.3 复合\n\n// 1.比较器链。如先按重量递减排序，两个苹果一样重时，再按国家排序\ninventory.sort(comparing(Apple::getWeoght))\n    .reversed()\n    .thenComparing(Apple::getCountry)\n// 2.谓词复合。and和or是按照在表达式链中的位置从左向右确定优先级的。a.or(b).and(c)可以看做(a || b) && c\nPredicate<Apple> redAndHeavyAppleOrGreen = redApple.and(a -> a.getWeight() > 150)\n\t\t\t\t\t\t\t\t\t\t\t.or(a -> "green".equals(a.getColor()));\n// 3.函数复合。\nFunction<Integer, Integer> f = x -> x + 1;\nFunction<Integer, Integer> g = x -> x * 2;\nFunction<Integer, Integer> h = f.andThen(g); //数学上写作g(f(x))\nFunction<Integer, Integer> h = f.compose(g); //数学上写作f(g(x))\nint result = h.apply(1);\n\n\n\n# 3.引入流\n\n流：从支持数据处理操作的源生成的元素序列。流只能消费一次且是按需计算的。\n\n * 元素序列：访问特定元素类型的一组有序值 ，集合讲的是数据，流讲的是计算 。\n * 源：从有序集合生成流时会保留原有的顺序。由列表生成的流，其元素顺序与列表一致。\n * 数据处理操作：流操作可以顺序执行，也可并行执行 。\n * 流水线：很多流操作本身会返回一个流 ，流水线的操作可以看作对数据源进行数据库式查询。\n * 内部迭代：流的迭代操作是在背后进行的。 Streams库的内部迭代可以自动选择一种适合你硬件的数据表示和并行实现。\n\n\n# 3.1 流操作\n\n可以连接起来的流操作称为中间操作，关闭流的操作称为操作。 流的流水线理念类似于建造者模式。\n\n\n# 3.1.1 中间操作\n\n中间操作会返回另一个流。除非流水线上触发一个终端操作，否则中间操作不会执行任何处理，因为中间操作一般都可以合并起来，在终端操作时一次性全部处理。\n\n\n# 3.1.2 终端操作\n\n终端操作会从流的流水线生成结果。其结果是任何不是流的值，比如List、 Integer，甚至void。\n\n\n# 4.使用流\n\n\n# 4.1 筛选和切片\n\nfilter\n\n\n# 4.2 映射\n\nmap、flatMap\n\n\n# 4.3 查找和匹配\n\nallMatch、anyMatch、noneMatch、findFirst、findAny\n\n\n# 4.4 归约\n\nreduce\n\n> 归约方法的优势与并行化\n> \n> 相比于逐步迭代，使用reduce的好处在于，这里的迭代被内部迭代抽象化了，这让内部实现得以选择并行执行reduce操作。而迭代式求和例子要更新共享变量sum，这不是那么容易并行化的。如果你加入了同步，很可能会发现线程竞争消了并行本应带来的 性能提升。这种计算的并行化需要另一种办法法：将输入分块，分块求和，最后合并起来。但这样的代码看起来就完全不一样了。但要并行执行需要代价，传递给reduce的Lambda不能更改状态（如实例变量），而且操作必须满足结合律才可以按任意顺序执行。\n\n\n# 4.5 原始类型流特化\n\n为了避免拆装箱操作带来的性能损耗，Java8引入了三个原始类型特化流接口（Optional也有）来解决这个问题：IntStream、DoubleStream和LongStream。\n\n\n# 4.6 创建流\n\n//由值创建流\nStream<String> stream = Stream.of("Java 8 ", "Lambdas ", "In ", "Action");\nStream<String> emptyStream = Stream.empty();\n//由数组创建流\nint[] numbers = {2, 3, 5, 7, 11, 13};\nint sum = Arrays.stream(numbers).sum();\n//由函数生成流\nStream.iterate(new int[]{0, 1},t -> new int[]{t[1],t[0] + t[1]})\n.limit(10)\n.map(t -> t[0])\n.forEach(System.out::println);\n// ===相比于iterate，generate是有状态的\nIntSupplier fib = new IntSupplier(){\nprivate int previous = 0;\nprivate int current = 1;\npublic int getAsInt(){\nint oldPrevious = this.previous;\nint nextValue = this.previous + this.current;\nthis.previous = this.current;\nthis.current = nextValue;\nreturn oldPrevious;\n}\n};\nIntStream.generate(fib).limit(10).forEach(System.out::println);\n//=====\n\n\n\n# 5.用流收集数据\n\n\n# 5.1 Collectors预定义收集器\n\n * Collectors.counting计数\n * Collectors.max(min)By 查找最大值和最小值\n * Collectors.summingInt，Collectors.averagingInt(Long|Double)汇总\n * Collectors.summarizingInt(Long|Double)一次性取总和、平均值、最大值和最小值\n * Collectors.joining(可选分隔符)连接字符串\n\n\n# 5.2 广义的归约汇总\n\nCollectors.reducing：把流中的第一个项目作为起点，把恒等函数（即一个函数仅仅是返回其输入参数）作为一个转换函数。注意可能会返回null。\n\n> 收集与归约\n> \n> reduce方法旨在把两个值结合起来生成一个新值，是一个不可变的归约。collect是改变容器从而累积要输出的结果。\n\n\n# 5.3 分组\n\n * 一级分组。groupingBy(f)，f是分类函数实际上是groupingBy(f, toList())的简便写法\n * n级分组，可以将collector类型传递给前一个groupingBy的第二个参数，以此类推。\n * 按子组收集数据，groupingBy的第二个收集器可以是任何类型\n * 把收集器的结果转换为另一种类型。Collectors.collectingAndThen\n * mapping\n\n\n# 5.4 分区\n\npartitioningBy分区是分组的特殊情况，由一个谓词作为分类函数，他称为分区函数。\n\n\n# 5.5 收集器接口\n\npackage java.util.stream;\n\nimport java.util.Collections;\nimport java.util.EnumSet;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.function.BiConsumer;\nimport java.util.function.BinaryOperator;\nimport java.util.function.Function;\nimport java.util.function.Supplier;\n\n// A compilation test for the code snippets in this class-level javadoc can be found at:\n// test/jdk/java/util/stream/test/org/openjdk/tests/java/util/stream/CollectorExample.java\n// The test needs to be updated if the examples in this javadoc change or new examples are added.\n\n/**\n * A <a href="package-summary.html#Reduction">mutable reduction operation</a> that\n * accumulates input elements into a mutable result container, optionally transforming\n * the accumulated result into a final representation after all input elements\n * have been processed.  Reduction operations can be performed either sequentially\n * or in parallel.\n *\n * <p>Examples of mutable reduction operations include:\n * accumulating elements into a {@code Collection}; concatenating\n * strings using a {@code StringBuilder}; computing summary information about\n * elements such as sum, min, max, or average; computing "pivot table" summaries\n * such as "maximum valued transaction by seller", etc.  The class {@link Collectors}\n * provides implementations of many common mutable reductions.\n *\n * <p>A {@code Collector} is specified by four functions that work together to\n * accumulate entries into a mutable result container, and optionally perform\n * a final transform on the result.  They are: <ul>\n *     <li>creation of a new result container ({@link #supplier()})</li>\n *     <li>incorporating a new data element into a result container ({@link #accumulator()})</li>\n *     <li>combining two result containers into one ({@link #combiner()})</li>\n *     <li>performing an optional final transform on the container ({@link #finisher()})</li>\n * </ul>\n *\n * <p>Collectors also have a set of characteristics, such as\n * {@link Characteristics#CONCURRENT}, that provide hints that can be used by a\n * reduction implementation to provide better performance.\n *\n * <p>A sequential implementation of a reduction using a collector would\n * create a single result container using the supplier function, and invoke the\n * accumulator function once for each input element.  A parallel implementation\n * would partition the input, create a result container for each partition,\n * accumulate the contents of each partition into a subresult for that partition,\n * and then use the combiner function to merge the subresults into a combined\n * result.\n *\n * <p>To ensure that sequential and parallel executions produce equivalent\n * results, the collector functions must satisfy an <em>identity</em> and an\n * <a href="package-summary.html#Associativity">associativity</a> constraints.\n *\n * <p>The identity constraint says that for any partially accumulated result,\n * combining it with an empty result container must produce an equivalent\n * result.  That is, for a partially accumulated result {@code a} that is the\n * result of any series of accumulator and combiner invocations, {@code a} must\n * be equivalent to {@code combiner.apply(a, supplier.get())}.\n *\n * <p>The associativity constraint says that splitting the computation must\n * produce an equivalent result.  That is, for any input elements {@code t1}\n * and {@code t2}, the results {@code r1} and {@code r2} in the computation\n * below must be equivalent:\n * <pre>{@code\n *     A a1 = supplier.get();\n *     accumulator.accept(a1, t1);\n *     accumulator.accept(a1, t2);\n *     R r1 = finisher.apply(a1);  // result without splitting\n *\n *     A a2 = supplier.get();\n *     accumulator.accept(a2, t1);\n *     A a3 = supplier.get();\n *     accumulator.accept(a3, t2);\n *     R r2 = finisher.apply(combiner.apply(a2, a3));  // result with splitting\n * } </pre>\n *\n * <p>For collectors that do not have the {@code UNORDERED} characteristic,\n * two accumulated results {@code a1} and {@code a2} are equivalent if\n * {@code finisher.apply(a1).equals(finisher.apply(a2))}.  For unordered\n * collectors, equivalence is relaxed to allow for non-equality related to\n * differences in order.  (For example, an unordered collector that accumulated\n * elements to a {@code List} would consider two lists equivalent if they\n * contained the same elements, ignoring order.)\n *\n * <p>Libraries that implement reduction based on {@code Collector}, such as\n * {@link Stream#collect(Collector)}, must adhere to the following constraints:\n * <ul>\n *     <li>The first argument passed to the accumulator function, both\n *     arguments passed to the combiner function, and the argument passed to the\n *     finisher function must be the result of a previous invocation of the\n *     result supplier, accumulator, or combiner functions.</li>\n *     <li>The implementation should not do anything with the result of any of\n *     the result supplier, accumulator, or combiner functions other than to\n *     pass them again to the accumulator, combiner, or finisher functions,\n *     or return them to the caller of the reduction operation.</li>\n *     <li>If a result is passed to the combiner or finisher\n *     function, and the same object is not returned from that function, it is\n *     never used again.</li>\n *     <li>Once a result is passed to the combiner or finisher function, it\n *     is never passed to the accumulator function again.</li>\n *     <li>For non-concurrent collectors, any result returned from the result\n *     supplier, accumulator, or combiner functions must be serially\n *     thread-confined.  This enables collection to occur in parallel without\n *     the {@code Collector} needing to implement any additional synchronization.\n *     The reduction implementation must manage that the input is properly\n *     partitioned, that partitions are processed in isolation, and combining\n *     happens only after accumulation is complete.</li>\n *     <li>For concurrent collectors, an implementation is free to (but not\n *     required to) implement reduction concurrently.  A concurrent reduction\n *     is one where the accumulator function is called concurrently from\n *     multiple threads, using the same concurrently-modifiable result container,\n *     rather than keeping the result isolated during accumulation.\n *     A concurrent reduction should only be applied if the collector has the\n *     {@link Characteristics#UNORDERED} characteristics or if the\n *     originating data is unordered.</li>\n * </ul>\n *\n * <p>In addition to the predefined implementations in {@link Collectors}, the\n * static factory methods {@link #of(Supplier, BiConsumer, BinaryOperator, Characteristics...)}\n * can be used to construct collectors.  For example, you could create a collector\n * that accumulates widgets into a {@code TreeSet} with:\n *\n * <pre>{@code\n *     Collector<Widget, ?, TreeSet<Widget>> intoSet =\n *         Collector.of(TreeSet::new, TreeSet::add,\n *                      (left, right) -> { left.addAll(right); return left; });\n * }</pre>\n *\n * (This behavior is also implemented by the predefined collector\n * {@link Collectors#toCollection(Supplier)}).\n *\n * @apiNote\n * Performing a reduction operation with a {@code Collector} should produce a\n * result equivalent to:\n * <pre>{@code\n *     A container = collector.supplier().get();\n *     for (T t : data)\n *         collector.accumulator().accept(container, t);\n *     return collector.finisher().apply(container);\n * }</pre>\n *\n * <p>However, the library is free to partition the input, perform the reduction\n * on the partitions, and then use the combiner function to combine the partial\n * results to achieve a parallel reduction.  (Depending on the specific reduction\n * operation, this may perform better or worse, depending on the relative cost\n * of the accumulator and combiner functions.)\n *\n * <p>Collectors are designed to be <em>composed</em>; many of the methods\n * in {@link Collectors} are functions that take a collector and produce\n * a new collector.  For example, given the following collector that computes\n * the sum of the salaries of a stream of employees:\n *\n * <pre>{@code\n *     Collector<Employee, ?, Integer> summingSalaries\n *         = Collectors.summingInt(Employee::getSalary))\n * }</pre>\n *\n * If we wanted to create a collector to tabulate the sum of salaries by\n * department, we could reuse the "sum of salaries" logic using\n * {@link Collectors#groupingBy(Function, Collector)}:\n *\n * <pre>{@code\n *     Collector<Employee, ?, Map<Department, Integer>> summingSalariesByDept\n *         = Collectors.groupingBy(Employee::getDepartment, summingSalaries);\n * }</pre>\n *\n * @see Stream#collect(Collector)\n * @see Collectors\n *\n * @param <T> the type of input elements to the reduction operation\n * @param <A> the mutable accumulation type of the reduction operation (often\n *            hidden as an implementation detail)\n * @param <R> the result type of the reduction operation\n * @since 1.8\n */\npublic interface Collector<T, A, R> {\n    /**\n     * 创建并返回新的可变结果容器的函数。\n     * 返回值：返回新的可变结果容器的函数\n     */\n    Supplier<A> supplier();\n\n    /**\n     * A function that folds a value into a mutable result container.\n     *\n     * @return a function which folds a value into a mutable result container\n     */\n    BiConsumer<A, T> accumulator();\n\n    /**\n     * A function that accepts two partial results and merges them.  The\n     * combiner function may fold state from one argument into the other and\n     * return that, or may return a new result container.\n     *\n     * @return a function which combines two partial results into a combined\n     * result\n     */\n    BinaryOperator<A> combiner();\n\n    /**\n     * Perform the final transformation from the intermediate accumulation type\n     * {@code A} to the final result type {@code R}.\n     *\n     * <p>If the characteristic {@code IDENTITY_FINISH} is\n     * set, this function may be presumed to be an identity transform with an\n     * unchecked cast from {@code A} to {@code R}.\n     *\n     * @return a function which transforms the intermediate result to the final\n     * result\n     */\n    Function<A, R> finisher();\n\n    /**\n     * Returns a {@code Set} of {@code Collector.Characteristics} indicating\n     * the characteristics of this Collector.  This set should be immutable.\n     *\n     * @return an immutable set of collector characteristics\n     */\n    Set<Characteristics> characteristics();\n\n    /**\n     * Returns a new {@code Collector} described by the given {@code supplier},\n     * {@code accumulator}, and {@code combiner} functions.  The resulting\n     * {@code Collector} has the {@code Collector.Characteristics.IDENTITY_FINISH}\n     * characteristic.\n     *\n     * @param supplier The supplier function for the new collector\n     * @param accumulator The accumulator function for the new collector\n     * @param combiner The combiner function for the new collector\n     * @param characteristics The collector characteristics for the new\n     *                        collector\n     * @param <T> The type of input elements for the new collector\n     * @param <R> The type of intermediate accumulation result, and final result,\n     *           for the new collector\n     * @throws NullPointerException if any argument is null\n     * @return the new {@code Collector}\n     */\n    public static<T, R> Collector<T, R, R> of(Supplier<R> supplier,\n                                              BiConsumer<R, T> accumulator,\n                                              BinaryOperator<R> combiner,\n                                              Characteristics... characteristics) {\n        Objects.requireNonNull(supplier);\n        Objects.requireNonNull(accumulator);\n        Objects.requireNonNull(combiner);\n        Objects.requireNonNull(characteristics);\n        Set<Characteristics> cs = (characteristics.length == 0)\n                                  ? Collectors.CH_ID\n                                  : Collections.unmodifiableSet(EnumSet.of(Collector.Characteristics.IDENTITY_FINISH,\n                                                                           characteristics));\n        return new Collectors.CollectorImpl<>(supplier, accumulator, combiner, cs);\n    }\n\n    /**\n     * Returns a new {@code Collector} described by the given {@code supplier},\n     * {@code accumulator}, {@code combiner}, and {@code finisher} functions.\n     *\n     * @param supplier The supplier function for the new collector\n     * @param accumulator The accumulator function for the new collector\n     * @param combiner The combiner function for the new collector\n     * @param finisher The finisher function for the new collector\n     * @param characteristics The collector characteristics for the new\n     *                        collector\n     * @param <T> The type of input elements for the new collector\n     * @param <A> The intermediate accumulation type of the new collector\n     * @param <R> The final result type of the new collector\n     * @throws NullPointerException if any argument is null\n     * @return the new {@code Collector}\n     */\n    public static<T, A, R> Collector<T, A, R> of(Supplier<A> supplier,\n                                                 BiConsumer<A, T> accumulator,\n                                                 BinaryOperator<A> combiner,\n                                                 Function<A, R> finisher,\n                                                 Characteristics... characteristics) {\n        Objects.requireNonNull(supplier);\n        Objects.requireNonNull(accumulator);\n        Objects.requireNonNull(combiner);\n        Objects.requireNonNull(finisher);\n        Objects.requireNonNull(characteristics);\n        Set<Characteristics> cs = Collectors.CH_NOID;\n        if (characteristics.length > 0) {\n            cs = EnumSet.noneOf(Characteristics.class);\n            Collections.addAll(cs, characteristics);\n            cs = Collections.unmodifiableSet(cs);\n        }\n        return new Collectors.CollectorImpl<>(supplier, accumulator, combiner, finisher, cs);\n    }\n\n    /**\n     * Characteristics indicating properties of a {@code Collector}, which can\n     * be used to optimize reduction implementations.\n     */\n    enum Characteristics {\n        /**\n         * Indicates that this collector is <em>concurrent</em>, meaning that\n         * the result container can support the accumulator function being\n         * called concurrently with the same result container from multiple\n         * threads.\n         *\n         * <p>If a {@code CONCURRENT} collector is not also {@code UNORDERED},\n         * then it should only be evaluated concurrently if applied to an\n         * unordered data source.\n         */\n        CONCURRENT,\n\n        /**\n         * Indicates that the collection operation does not commit to preserving\n         * the encounter order of input elements.  (This might be true if the\n         * result container has no intrinsic order, such as a {@link Set}.)\n         */\n        UNORDERED,\n\n        /**\n         * Indicates that the finisher function is the identity function and\n         * can be elided.  If set, it must be the case that an unchecked cast\n         * from A to R will succeed.\n         */\n        IDENTITY_FINISH\n    }\n}\n\n\n\n * T是流中要收集的项目的泛型\n * A是累加器的类型，累加器是在收集过程中用于累积部分结果的对象\n * R是收集操作得到的对象的类型\n * characteristics方法提供了一系列特征，告诉collect方法在执行归约操作的时候可以应用哪些优化，如并行化。\n\n\n# 5.5.1 supplier建立新的结果容器\n\n该方法返回一个结果为空的supplier，也就是一个无参函数，在调用是它会创建一个空的累加器实例，供数据收集过程使用，所以，在对空流执行操作的时候，这个空的累加器也代表了收集过程的结果。\n\n\n# 5.5.2 accumulator将元素添加到结果容器\n\n该方法返回执行归约操作的函数。该函数返回void，因为累加器是原位更新，即函数的执行改变了它的内部状态以体现便利元素的效果。\n\n\n# 5.5.3 finisher对结果容器应用最终转换\n\n该方法必须返回在累积过程的最后要调用的一个函数，以便将累加器对象转换为整个集合操作的最终结果。如果结果无需转换，则只需返回identity函数\n\n\n\n\n# 5.5.4 combiner合并两个结果容器\n\n该方法返回一个供归约操作使用的函数，它定义了对流的各个子部分进行并行处理时，各个子部分归约所得的累加器要如何合并。对于toList而言：只是简单的把从流的第二个部分收集到的项目列表添加到遍历第一部分时得到的列表后面\n\npublic static <T> Collector<T, ?, List<T>> toList() {\n     return new CollectorImpl<>((Supplier<List<T>>) ArrayList::new, List::add,\n                                   (left, right) -> { left.addAll(right); return left; },CH_ID);\n}\n\n\n该方法会用到Java7中引入的分支/合并框架和Spliterator抽象。\n\n\n# 5.5.5 characteristics方法\n\n该方法可以提示流是否可以进行归约以及可使用的优化。\n\n * UNORDERED--归约结果不受流中项目的遍历和累积顺序的影响\n\n * CONCUNRRENT--accumulator函数可以从多个线程同时调用，且收集器可以并行归约流，如果收集器没有标为UNORDERED，它仅在用于无序数据源时才可以进行归约\n\n * IDENTITY_FINISH--这表明完成器方法返回的函数是一个恒等函数，可以跳过。\n\n\n# 5.5.6 自定义收集\n\n对于IDENTITY_FINISH的收集操作，Stream有一个重载的collect方法接受三个函数（supplier,accumulator,combiner）。我们也可以通过实现collector接口定义自己的收集器。\n\n\n# 6.并行数据处理与性能\n\nStream的并行流内部使用流Fork/Join框架。\n\n\n# 6.1 将顺序流转换为并行流\n\nparallel会将顺序流转化为并行流。但这不代表流本身发生了变化，只是在内部设置流一个boolean标志，表示在调用该方法后的所有操作都并行执行。同样的，可以用sequential方法把流变为顺序流，但是如果将这个两个方法结合时，会以最后一次调用的为准。\n\n> 配置并行流使用的线程池\n> \n> 并行流内部使用流默认的ForkJoinPool，它默认的线程数量就是处理器数量，由Runtime.getRuntime().availableProcessors()获取(实际返回的是可用内核的数量，包括超线程生成的虚拟内核)。\n> \n> 但是也可以自定义System.setProperty("java.util.concurrent.ForkJoinPool.common.parallelism","数量")，注意这是一个全局设置，它将影响所有并行流。\n\n\n# 6.2 正确使用并行\n\nimport java.util.stream.*;\n\npublic class ParallelStreams {\n\n    public static long iterativeSum(long n) {\n        long result = 0;\n        for (long i = 0; i <= n; i++) {\n            result += i;\n        }\n        return result;\n    }\n\n    public static long sequentialSum(long n) {\n        return Stream.iterate(1L, i -> i + 1).limit(n).reduce(Long::sum).get();\n    }\n\n    public static long parallelSum(long n) {\n        return Stream.iterate(1L, i -> i + 1).limit(n).parallel().reduce(Long::sum).get();\n    }\n\n    public static long rangedSum(long n) {\n        return LongStream.rangeClosed(1, n).reduce(Long::sum).getAsLong();\n    }\n\n    public static long parallelRangedSum(long n) {\n        return LongStream.rangeClosed(1, n).parallel().reduce(Long::sum).getAsLong();\n    }\n\n    public static long sideEffectSum(long n) {\n        Accumulator accumulator = new Accumulator();\n        LongStream.rangeClosed(1, n).forEach(accumulator::add);\n        return accumulator.total;\n    }\n\n    public static long sideEffectParallelSum(long n) {\n        Accumulator accumulator = new Accumulator();\n        LongStream.rangeClosed(1, n).parallel().forEach(accumulator::add);\n        return accumulator.total;\n    }\n\n    public static class Accumulator {\n        private long total = 0;\n\n        public void add(long value) {\n            total += value;\n        }\n    }\n}\n\npackage chl;\n\n//===============================================================================================\n\nimport java.util.function.Function;\n\npublic class MyParallelStreams {\n    public static long measureSumPerf(Function<Long, Long> adder, long n) {\n        long fastest = Long.MAX_VALUE;\n        for (int i = 0; i < 10; i++) {\n            long start = System.nanoTime();\n            long sum = adder.apply(n);\n            long duration = (System.nanoTime() - start) / 1000000;\n            System.out.println("Result:" + sum);\n            if (duration < fastest) fastest = duration;\n        }\n        return fastest;\n    }\n\n    public static void main(String[] args) {\n        System.out.println("耗时:" + measureSumPerf(ParallelStreams::sideEffectParallelSum, 10000000));\n    }\n}\n\n\n\n要确保并行正确执行必须保证不存在共享的可变状态。\n\n * 测量。有时候并行流并不一定比顺序流快。\n * 注意装箱。自动装箱和拆箱操作会大大降低性能，这时候可以使用原始类型流。\n * 有些操作在并行流上的性能比顺序流差。特别是limit和findFirst等依赖于元素顺序的操作。如果不依赖顺序，可以调用unordered方法把有序流变成无序流。\n * 如果一个元素通过流水线的处理成本高，那么使用并行流时性能好的可能性比较大。\n * 对于较小的数据量，选择并行流并不的优先级并不高，因为并行化（分配线程等资源）的开销更高。\n * 考虑流背后的数据结构是否易于分解。可以自定义Spliterator来控制分解过程。\n * 流自身的特点以及流水线中的中间操作修改流的方法，都可能会改变分解过程的性能。一个已知大小的流比未知的更好拆分。\n * 还要考虑终端操作中合并步骤的代价是大是小，如果这一步代价很大，那么组合每个子流的部分结果所产生的的代价就可能会超出通过并行流得到的性能提升。\n\n流的数据源可分解性\n\n源                 可分解性\nArrayList         极佳\nLinkedList        差\nIntStream.range   极佳\nStream.iterate    差\nHashSet           好\nTreeSet           好\n\n\n# 6.3 Fork/Join框架\n\n\n# 6.3.1 RecursiveTask\n\npublic abstract class RecursiveTask<V> extends ForkJoinTask<V> {\n    private static final long serialVersionUID = 5232453952276485270L;\n\n    @SuppressWarnings("serial") \n    V result;\n\n    protected abstract V compute();\n\n    public final V getRawResult() {\n        return result;\n    }\n\n    protected final void setRawResult(V value) {\n        result = value;\n    }\n\n    protected final boolean exec() {\n        result = compute();\n        return true;\n    }\n\n}\n\n\n\n\n\n> 使用多个ForkJoinPool是没有意义的，一般把它实例化一次，然后把实例保存在静态字段中，使之称为单例，这样就可以重用。\n\n\n# 6.3.2 使用Fork/Join的最佳做法\n\n * 对一个任务调用join方法会阻塞调用方，直到该任务做出结果。因此，有必要在两个子任务的计算都开始之后再调用它。\n\n * 不应该在RecursiveTask内部使用ForkJoinPool的invoke方法。相反，应始终直接调用compute或fork方法，只有顺序代码才应该用invoke来启动并行计算。\n\n * 对子任务调用fork方法可以把它排进ForkJoinPool。同时对左边和右边的子任务调用它似乎很自然，但这样做的效率要比直接对其中一个调用compute低。这样做可以为其中一个子任务重用同一线程，从而避免在线程池中多分配一个任务造成的开销。\n\n * 调试使用分支/合并框架的并行计算可能有点棘手。特别是你平常都在你喜欢的IDE里面看栈跟踪（ stack trace）来找问题，但放在分支合并计算上就不行了，因为调用compute的线程并不是概念上的调用方，后者是调用fork的那个。\n\n * 和并行流一样，不应理所当然地认为在多核处理器上使用分支/合并框架就比顺序计算快。一个任务可以分解成多个独立的子任务，才能让性能在并行化时有所提升。所有这些子任务的运行时间都应该比分出新任务所花的时间长；一个惯用方法是把输入/输出放在一个子任务里，计算放在另一个里，这样计算就可以和输入/输出同时进行。此外，在比较同一算法的顺序和并行版本的性能时还有别的因素要考虑。就像任何其他Java代码一样，分支/合并框架需要“预热”或者说要执行几遍才会被JIT编译器优化。同时还要知道，编译器内置的优化可能会为顺序版本带来一些优势（例如执行代码分析——删去从未被使用的计算）\n\n\n# 6.3.3 工作窃取\n\n应该让划分的子任务都用相同的时间完成，但是由于外部因素，如划分策略效率低、磁盘访问慢或是需要和外部服务协调执行，每个子任务所花的时间不尽相同。框架使用一种称为工作窃取（work stealing）的技术解决这个问题。\n\n\n\n\n# 6.4 Spliterator可分迭代器\n\npublic interace Spliterator<T> {\n    /**\n     * 按序遍历，如果没有元素则返回false，否则对元素执行给定的操作并返回true\n     */\n    boolean tryAdvance(Consumer<? super T> action);\n    \n    /**\n     * 把元素划出去分给第二个Spliterator,让他们并行处理，直到返回null\n     */\n    Spliterator<T> trySplit();\n    \n     /**\n     * 返回forEachRemaining遍历将遇到的估计值，如果无限或无法计算，则返回Long.MAX_VALUE\n     */\n    long estimateSize();\n    \n    int characteristics();\n}\n\n\n\n# 6.4.1 拆分过程\n\n\n\nSpliterator的特性\n\n特性           含义\nORDERED      元素有既定顺序，Spliterator在遍历和划分时遵循这一顺序\nDISTINCT     对于任意一对遍历过的元素x和y，x.equals(y)返回false\nSORTED       遍历的元素按照一个预定义的顺序排序\nSIZED        该Spliterator由一个已知大小的源建立，因此estimatedSize()返回的是准确值\nNONNULL      保证遍历的元素不会为null\nIMMUTABLE    数据源不能修改\nCONCURRENT   数据源可被其他线程同时修改而无需同步\nSUBSIZED     所有拆分出来的Spliterator都是SIZED\n\n\n# 6.4.2 自定义Spliterator\n\n\n# 7. 重构、测试和调试\n\n\n# 7.1 重构\n\n\n# 7.1.1 使用Lambda替换匿名类\n\n需要注意的是，Lambda中的this和super代表的是包含类，而匿名类的代表匿名类自身；匿名类可以屏蔽包含类的变量，而Lambda不能。另外，在涉及重载的上下文中，应该使用显示的类型转换来减低类型推断的难度。\n\n\n# 7.1.2 方法引用代替Lambda\n\n\n# 7.1.3 从命令式的数据处理切换到Stream\n\n\n# 7.1.4重构模式\n\n有条件的延迟执行\n\nif (logger.isLoggable(Log.FINER)){\n\tlogger.finer("Problem: " + generateDiagnostic());\n}\n//使用log方法代替上面的判断\npublic void log(Level level, Supplier<String> msgSupplier)\n\n\n如果需要频繁地从客户端去查询一个对象的状态（比如日志器的状态），只是为了传递参数、调用该对象的一个方法（比如输出一条日志），那么可以考虑实现一个新的方法，以Lambda或者方法表达式作为参数，代码会更易读，封装性会更好（对象的状态也不会暴露给客户端代码了）。\n\n环绕执行\n\nLambda作为参数传递，类似切面。\n\n\n# 7.2 使用Lambda重构面向对象的设计模式\n\n\n# 7.2.1 策略模式\n\n关键点：实现函数式接口\n\n\n# 7.2.2 模板方法\n\n关键点：方法增加函数式入参\n\n\n# 7.2.3 观察者模式\n\n关键点：Lambda代替通知方法，注意如果观察者的逻辑十分复杂，比如它们可能持有状态亦或是定义了多个方法等，则应继续使用类的方式。\n\n\n# 7.2.4 责任链模式\n\n关键点：UnaryOperator、andThen\n\n\n# 7.2.5 工厂模式\n\n关键点：构造函数入参低于2个时，使用方法引用...\n\n\n# 7.2 测试Lambda\n\n\n# 7.3 调试\n\npeek方法？\n\n\n# 8.默认方法\n\n不同类型兼容性：二进制、源代码、和函数行为\n\n * 二进制兼容：现有的二进制执行文件能无缝链（包括验证、准备和解析）和运行。比如，为接口添加一个方法就是二进制兼容的，这种方式下，如果新加的方法不被调用，接口已经实现的方法可以继续运行，不会出现错误。\n * 源代码兼容：引入变化后，现有的程序依然能成功编译通过。\n * 函数行为兼容：变更后，程序接受同样的输入能得到同样的结果。\n\n解决菱形继承的三条规则\n\n * 类中的方法优先级最高。类或父类中声明的方法的优先级高于任何声明为默认方法的优先级\n * 如果第一条无法判断，那么子接口的优先级更高。函数签名相同时，优先选择拥有最具体实现的默认方法的接口，即如果B继承了A，那么B就比A更加具体\n * 如果还是无法判断，继承了多个接口的类必须通过显示覆盖和调用期望的方法\n\nJava8引入了一种新语法X.super.m(...)，其中X是希望调用的m方法所在的父接口。\n\n\n# 9.Optional\n\n使用Optional的语义在于：可以很清楚地知道它可以接受空值，或者它可能返回一个空值。\n\nOptional.empty();\nOptional.of(...);\nOptional.ofNullable(...);\n//如果要处理的元素为空，则不做任何操作,并返回一个空的Optional对象\nOptional.map(...);\nOptional.flatMap(...);\n\n\n\n> Optional不能被序列化。Java语言的架构师明确地说过它的设计初衷仅仅是要支持能返回Optional对象的语法。\n\nOptional.get();\nOptional.orElse(T other);\nOptional.orElseGet(Supplier<? extends T> other);\nOptional.orElseThrow(Supplier<? extends X> exceptionSupplier);\nOptional.ifPresent(Consumer<? super T>);\nOptional.isPresent();\n\n\n\n# 10.CompletableFuture组合式异步编程\n\n相比于并行流，CompletableFuture的优势在于可以配置线程池中的线程大小。\n\n * 如果进行的是计算密集型的操作，并且没有I/O，推荐使用Stream接口。\n * 如果并行的工作单元还涉及等待I/O的操作（包括网络连接等待），那么使用CompletableFuture灵活性更好。\n\n\n# 11.新的日期API\n\n\n# 11.1 LocalDate和LocalTime\n\n\n# 11.2 Instant\n\n为了便于机器使用而设计\n\n\n# 11.3 Duration或Period\n\nDuration主要用于以秒和纳秒衡量时间的长短；Period可以以年、月或日的方式对多个时间单位建模。\n\n方法名            是否静态方法   描述\nbetween        是        创建两个时间点之间的 interval (间隔)\nfrom           是        由一个临时时间点创建 interval\nof             是        由它的组成部分创建 interval 的实例\nparse          是        由字符串创建 interval 的实例\naddTo          否        创建该 interval 的副本，并将其Ԯ加到某个指定的 temporal 对象\nget            否        读取该 interval 的状态\nisNegative     否        检查该 interval 是否为负值，不包含零\nisZero         否        检查该 interval 的时长是否为零\nminus          否        通过减去一定的时间创建该 interval 的副本\nmultipliedBy   否        将 interval 的值乘以某个标量创建该 interval 的副本\nnegated        否        以忽略某个时长的方式创建该 interval 的副本\nplus           否        以增加某个指定的时长的方式创建该 interval 的副本\nsubtractFrom   否        从指定的 temporal 对象中减去该 interval\n\n\n# 11.4 操纵、解析和格式化日期\n\nLocalDate date1 = LocalDate.of(2014, 3, 18);\nLocalDate date2 = date1.withYear(2011);\nLocalDate date3 = date2.withDayOfMonth(25);\nLocalDate date4 = date3.with(ChronoField.MONTH_OF_YEAR, 9);\n\nLocalDate date1 = LocalDate.of(2014, 3, 18);\nLocalDate date2 = date1.plusWeeks(1);\nLocalDate date3 = date2.minusYears(3);\nLocalDate date4 = date3.plus(6, ChronoUnit.MONTHS);\n\n\n方法名        是否静态方法   描述\nfrom       是        依据传入的 Temporal 对象创建对象实例\nnow        是        依据系统时钟创建 Temporal 对象\nof         是        由 Temporal 对象的某个部分创建该对象的实例\nparse      是        由字符串创建 Temporal 对象的实例\natOffset   否        将 Temporal 对象和某个时区偏移相结合\natZone     否        将 Temporal 对象和某个时区相结合\nformat     否        使用某个指定的格式器将Temporal对象转换为字符串（ Instant类不提供该方法）\nget        否        读取 Temporal 对象的某一部分的值\nminus      否        创建 Temporal 对象的一个副本，通过将当前 Temporal 对象的值ђ去一定的时长，创建该副本\nplus       否        创建 Temporal 对象的一个副本，通过将当前 Temporal 对象的值加上一定的时长，创建该副本\nwith       否        以该 Temporal 对象为模板，对某些状态进行修改创建该对象的副本\n\n\n# 11.4.1 使用TemporalAdjuster\n\n可以使用重载版本的with方法，向其传递一个提供了更多定制化选择的TemporalAdjuster对象，更 加 灵 活 地 处 理 日 期 。\n\n\n\n----------------------------------------\n\n\n# 11.4.2 DateTimeFormatter\n\n线程安全的，内置了几种解析常量。\n\nLocalDate date = LocalDate.of(2014, 3, 18);\nString s1 = date.format(DateTimeFormatter.BASIC_ISO_DATE); // 20140318\nString s2 = date.format(DateTimeFormatter.ISO_LOCAL_DATE); // 2014-03-18\n\nLocalDate date1 = LocalDate.parse("20140318",DateTimeFormatter.BASIC_ISO_DATE);\nLocalDate date2 = LocalDate.parse("2014-03-18",DateTimeFormatter.ISO_LOCAL_DATE);\n\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd/MM/yyyy");\nLocalDate date1 = LocalDate.of(2014, 3, 18);\nString formattedDate = date1.format(formatter);\nLocalDate date2 = LocalDate.parse(formattedDate, formatter);\n\n\n创建一个本地化的DateTimeFormatter\n\nDateTimeFormatter italianFormatter =DateTimeFormatter.ofPattern("d. MMMM yyyy", Locale.ITALIAN);\nLocalDate date1 = LocalDate.of(2014, 3, 18);\nString formattedDate = date.format(italianFormatter); // 18. marzo 2014\nLocalDate date2 = LocalDate.parse(formattedDate, italianFormatter);\n\n\n如果需要更加细粒度的控制， DateTimeFormatterBuilder类还提供了更复杂的格式器，可以选择恰当的方法，一步一步地构造自己的格式器。另外，它还提供了非常强大的解析功能，比如区分大小写的解析、柔性解析（允许解析器使用启发式的机制去解析输入，不精 确 地 匹 配 指 定 的 模 式 ）、 填充 ， 以 及 在 格 式 器 中 指 定 可 选 节 。\n\nDateTimeFormatter italianFormatter = new DateTimeFormatterBuilder()\n.appendText(ChronoField.DAY_OF_MONTH)\n.appendLiteral(". ")\n.appendText(ChronoField.MONTH_OF_YEAR)\n.appendLiteral(" ")\n.appendText(ChronoField.YEAR)\n.parseCaseInsensitive()\n.toFormatter(Locale.ITALIAN);\n\n\n\n# 11.5 处理不同的时区和历法\n\n',normalizedContent:'# 1.基础知识\n\n\n# 1.1 流处理\n\n流是一系列数据项，一次只生成一项。可以想象成汽车组装流水线，尽管流水线实际上是一个序列，但不同加工站的运行一般是并行的。\n\n# 该例子表示把两个文件连接起来创建一个流，然后转换流中的字符，对流中的行进行排序，最后给出流的最后三行。\n# 这几个命令在unix中是同时执行的。\ncat file1 file2 | tr "[a-z]" "[a-z]" | sort | tail -3\n\n\n\n# 1.2行为参数化\n\nstream api是构建在通过传递代码使得操作行为实现参数化的思想上。\n\n比方说，你有一堆发票代码，格式类似于2013uk0001、2014us0002……前四位数代表年份， 接下来两个字母代表国家，最后四位是客户的代码。你可能想按照年份、客户代码，甚至国家来 对发票进行排序。你真正想要的是，能够给sort命令一个参数让用户定义顺序：给sort命令传 递一段独立代码。java8增加了把代码作为参数传递给另一个方法的能力。\n\n\n\n\n# 1.3 并行与共享的可变数据\n\n> 没有共享的可变数据和将方法和函数即代码传递给其他方法的能力是函数式编程范式的基石。函数式编程中的函数的主要意思是“把函数作为一等值”，也即“执行时在元素之间无互动”。\n\n\n# 1.4 函数\n\n * java8允许把方法和函数作为一等公民（可传递的值）。让方法作为值构成了其他若干java8功能的基础。\n * java8可以传递方法引用，以前只能传递对象引用\n * 谓词（predicate）：在数学上常常用来代表一个类似函数的东西，他接受一个参数值，并返回true或false。\n * 如果lambda的长度多于几行，它的行为也不是一目了然的话，应该用方法引用来指向一个有描述性名称的方法，而不是使用匿名的lambda。\n\n\n# 1.5 stream api与collection api\n\n * 用集合循环一个个去迭代再处理元素称为外部迭代，流处理是在库内部进行的，称为内部迭代。\n * 流的并行比使用线程同步更不易出错，流天生具有利用多核的优势。\n * collection主要是为了存储和访问数据，而stream则主要用于描述对数据的计算。\n\n\n\n\n# 1.6 默认方法\n\n设计默认方法的目的在于改变已发布的接口而不破坏已有的实现。例如java8中list新增的默认方法：\n\ndefault void sort(comparator<? super e> c) {\n    object[] a = this.toarray();\n        arrays.sort(a, (comparator) c);\n        listiterator<e> i = this.listiterator();\n        for (object e : a) {\n            i.next();\n            i.set((e) e);\n        }\n}\n\n\n但一个类可以实现多个接口，如果在好几个接口里有多个默认实现，某种程度上意味着java有了多重继承。java用一些限制来避免出现类似c++中的菱形继承问题。\n\n\n# 2.lambda表达式\n\n可以把lambda表达式看做匿名函数，也就是没有声明名称的方法，和匿名类一样可以作为参数传递给一个方法，它有参数列表、函数主体、返回类型、还有可能有可以抛出的异常列表。\n\n// 表达式就是lambda的返回值\n(parameters) -> expression\n(parameters) -> { statements;}\n(1).() -> {}\n(2).() -> "hello world"\n(3).() -> { return "hello world";}\n(4).(integer i) -> return "hello" + i; //无效，不应有return\n(5).(string s) -> { "ironman"; } //无效，显示返回要加上return\n\n\n\n\n# 2.1 函数式接口\n\n函数式接口中的抽象方法的签名可以描述lambda表达式的签名。函数式接口的抽象方法的签名成为函数描述符。\n\n> 任何函数式接口都不允许抛出受检异常。\n\n\n# 2.2 类型检查、推断和限制\n\nlambda的类型是从使用lambda的上下文推断出来的。如果lambda表达式抛出一个异常，那么抽象方法所声明的throws语句也必须与之匹配\n\n> 特殊的void兼容规则:如果一个lambda的主体是一个语句表达式， 它就和一个返回void的函数描述符兼容。\n\n\n# 2.2.1 使用局部变量\n\nlambda表达式允许使用自由变量（在外层作用域中定义的变量），就像匿名类一样，它们被称作lambda捕获。lambda可以没有限制地捕获实例变量和静态变量，但局部变量必须显式声明为final或逻辑上是final的，也就是只能捕获局部变量一次\n\n> 闭包\n> \n> 闭包是一个函数的实例，且它可以无限制地访问那个函数的非本地变量。但lambda访问非本地变量有必须是隐式最终的限制，因为局部变量保存在栈上，是线程私有的，线程访问非本地局部变量时实际上是访问它的副本。可以认为lambda对值封闭，而不是对变量封闭。\n\n\n# 2.2.2 方法引用\n\n如果一个lambda代表的只是“直接调用这个方法”，那最好还是用名称来调用它，而不是去描述如何调用它。 可以把方法引用看作针对仅仅涉及单一方法的lambda的语法糖\n\n * 指向静态方法的方法引用。integer::parseint\n * 指向任意类型实例方法的方法引用。string::length\n * 指向现有对象的实例方法的方法引用。在 lambda 中 调 用 一 个 已 经 存 在 的 外 部 对 象 中 的 方 法 。 例 如 ， lambda 表 达 式 ()->expensivetransaction.getvalue()可以写作expensivetransaction::getvalue\n\n\n# 2.2.3 复合\n\n// 1.比较器链。如先按重量递减排序，两个苹果一样重时，再按国家排序\ninventory.sort(comparing(apple::getweoght))\n    .reversed()\n    .thencomparing(apple::getcountry)\n// 2.谓词复合。and和or是按照在表达式链中的位置从左向右确定优先级的。a.or(b).and(c)可以看做(a || b) && c\npredicate<apple> redandheavyappleorgreen = redapple.and(a -> a.getweight() > 150)\n\t\t\t\t\t\t\t\t\t\t\t.or(a -> "green".equals(a.getcolor()));\n// 3.函数复合。\nfunction<integer, integer> f = x -> x + 1;\nfunction<integer, integer> g = x -> x * 2;\nfunction<integer, integer> h = f.andthen(g); //数学上写作g(f(x))\nfunction<integer, integer> h = f.compose(g); //数学上写作f(g(x))\nint result = h.apply(1);\n\n\n\n# 3.引入流\n\n流：从支持数据处理操作的源生成的元素序列。流只能消费一次且是按需计算的。\n\n * 元素序列：访问特定元素类型的一组有序值 ，集合讲的是数据，流讲的是计算 。\n * 源：从有序集合生成流时会保留原有的顺序。由列表生成的流，其元素顺序与列表一致。\n * 数据处理操作：流操作可以顺序执行，也可并行执行 。\n * 流水线：很多流操作本身会返回一个流 ，流水线的操作可以看作对数据源进行数据库式查询。\n * 内部迭代：流的迭代操作是在背后进行的。 streams库的内部迭代可以自动选择一种适合你硬件的数据表示和并行实现。\n\n\n# 3.1 流操作\n\n可以连接起来的流操作称为中间操作，关闭流的操作称为操作。 流的流水线理念类似于建造者模式。\n\n\n# 3.1.1 中间操作\n\n中间操作会返回另一个流。除非流水线上触发一个终端操作，否则中间操作不会执行任何处理，因为中间操作一般都可以合并起来，在终端操作时一次性全部处理。\n\n\n# 3.1.2 终端操作\n\n终端操作会从流的流水线生成结果。其结果是任何不是流的值，比如list、 integer，甚至void。\n\n\n# 4.使用流\n\n\n# 4.1 筛选和切片\n\nfilter\n\n\n# 4.2 映射\n\nmap、flatmap\n\n\n# 4.3 查找和匹配\n\nallmatch、anymatch、nonematch、findfirst、findany\n\n\n# 4.4 归约\n\nreduce\n\n> 归约方法的优势与并行化\n> \n> 相比于逐步迭代，使用reduce的好处在于，这里的迭代被内部迭代抽象化了，这让内部实现得以选择并行执行reduce操作。而迭代式求和例子要更新共享变量sum，这不是那么容易并行化的。如果你加入了同步，很可能会发现线程竞争消了并行本应带来的 性能提升。这种计算的并行化需要另一种办法法：将输入分块，分块求和，最后合并起来。但这样的代码看起来就完全不一样了。但要并行执行需要代价，传递给reduce的lambda不能更改状态（如实例变量），而且操作必须满足结合律才可以按任意顺序执行。\n\n\n# 4.5 原始类型流特化\n\n为了避免拆装箱操作带来的性能损耗，java8引入了三个原始类型特化流接口（optional也有）来解决这个问题：intstream、doublestream和longstream。\n\n\n# 4.6 创建流\n\n//由值创建流\nstream<string> stream = stream.of("java 8 ", "lambdas ", "in ", "action");\nstream<string> emptystream = stream.empty();\n//由数组创建流\nint[] numbers = {2, 3, 5, 7, 11, 13};\nint sum = arrays.stream(numbers).sum();\n//由函数生成流\nstream.iterate(new int[]{0, 1},t -> new int[]{t[1],t[0] + t[1]})\n.limit(10)\n.map(t -> t[0])\n.foreach(system.out::println);\n// ===相比于iterate，generate是有状态的\nintsupplier fib = new intsupplier(){\nprivate int previous = 0;\nprivate int current = 1;\npublic int getasint(){\nint oldprevious = this.previous;\nint nextvalue = this.previous + this.current;\nthis.previous = this.current;\nthis.current = nextvalue;\nreturn oldprevious;\n}\n};\nintstream.generate(fib).limit(10).foreach(system.out::println);\n//=====\n\n\n\n# 5.用流收集数据\n\n\n# 5.1 collectors预定义收集器\n\n * collectors.counting计数\n * collectors.max(min)by 查找最大值和最小值\n * collectors.summingint，collectors.averagingint(long|double)汇总\n * collectors.summarizingint(long|double)一次性取总和、平均值、最大值和最小值\n * collectors.joining(可选分隔符)连接字符串\n\n\n# 5.2 广义的归约汇总\n\ncollectors.reducing：把流中的第一个项目作为起点，把恒等函数（即一个函数仅仅是返回其输入参数）作为一个转换函数。注意可能会返回null。\n\n> 收集与归约\n> \n> reduce方法旨在把两个值结合起来生成一个新值，是一个不可变的归约。collect是改变容器从而累积要输出的结果。\n\n\n# 5.3 分组\n\n * 一级分组。groupingby(f)，f是分类函数实际上是groupingby(f, tolist())的简便写法\n * n级分组，可以将collector类型传递给前一个groupingby的第二个参数，以此类推。\n * 按子组收集数据，groupingby的第二个收集器可以是任何类型\n * 把收集器的结果转换为另一种类型。collectors.collectingandthen\n * mapping\n\n\n# 5.4 分区\n\npartitioningby分区是分组的特殊情况，由一个谓词作为分类函数，他称为分区函数。\n\n\n# 5.5 收集器接口\n\npackage java.util.stream;\n\nimport java.util.collections;\nimport java.util.enumset;\nimport java.util.objects;\nimport java.util.set;\nimport java.util.function.biconsumer;\nimport java.util.function.binaryoperator;\nimport java.util.function.function;\nimport java.util.function.supplier;\n\n// a compilation test for the code snippets in this class-level javadoc can be found at:\n// test/jdk/java/util/stream/test/org/openjdk/tests/java/util/stream/collectorexample.java\n// the test needs to be updated if the examples in this javadoc change or new examples are added.\n\n/**\n * a <a href="package-summary.html#reduction">mutable reduction operation</a> that\n * accumulates input elements into a mutable result container, optionally transforming\n * the accumulated result into a final representation after all input elements\n * have been processed.  reduction operations can be performed either sequentially\n * or in parallel.\n *\n * <p>examples of mutable reduction operations include:\n * accumulating elements into a {@code collection}; concatenating\n * strings using a {@code stringbuilder}; computing summary information about\n * elements such as sum, min, max, or average; computing "pivot table" summaries\n * such as "maximum valued transaction by seller", etc.  the class {@link collectors}\n * provides implementations of many common mutable reductions.\n *\n * <p>a {@code collector} is specified by four functions that work together to\n * accumulate entries into a mutable result container, and optionally perform\n * a final transform on the result.  they are: <ul>\n *     <li>creation of a new result container ({@link #supplier()})</li>\n *     <li>incorporating a new data element into a result container ({@link #accumulator()})</li>\n *     <li>combining two result containers into one ({@link #combiner()})</li>\n *     <li>performing an optional final transform on the container ({@link #finisher()})</li>\n * </ul>\n *\n * <p>collectors also have a set of characteristics, such as\n * {@link characteristics#concurrent}, that provide hints that can be used by a\n * reduction implementation to provide better performance.\n *\n * <p>a sequential implementation of a reduction using a collector would\n * create a single result container using the supplier function, and invoke the\n * accumulator function once for each input element.  a parallel implementation\n * would partition the input, create a result container for each partition,\n * accumulate the contents of each partition into a subresult for that partition,\n * and then use the combiner function to merge the subresults into a combined\n * result.\n *\n * <p>to ensure that sequential and parallel executions produce equivalent\n * results, the collector functions must satisfy an <em>identity</em> and an\n * <a href="package-summary.html#associativity">associativity</a> constraints.\n *\n * <p>the identity constraint says that for any partially accumulated result,\n * combining it with an empty result container must produce an equivalent\n * result.  that is, for a partially accumulated result {@code a} that is the\n * result of any series of accumulator and combiner invocations, {@code a} must\n * be equivalent to {@code combiner.apply(a, supplier.get())}.\n *\n * <p>the associativity constraint says that splitting the computation must\n * produce an equivalent result.  that is, for any input elements {@code t1}\n * and {@code t2}, the results {@code r1} and {@code r2} in the computation\n * below must be equivalent:\n * <pre>{@code\n *     a a1 = supplier.get();\n *     accumulator.accept(a1, t1);\n *     accumulator.accept(a1, t2);\n *     r r1 = finisher.apply(a1);  // result without splitting\n *\n *     a a2 = supplier.get();\n *     accumulator.accept(a2, t1);\n *     a a3 = supplier.get();\n *     accumulator.accept(a3, t2);\n *     r r2 = finisher.apply(combiner.apply(a2, a3));  // result with splitting\n * } </pre>\n *\n * <p>for collectors that do not have the {@code unordered} characteristic,\n * two accumulated results {@code a1} and {@code a2} are equivalent if\n * {@code finisher.apply(a1).equals(finisher.apply(a2))}.  for unordered\n * collectors, equivalence is relaxed to allow for non-equality related to\n * differences in order.  (for example, an unordered collector that accumulated\n * elements to a {@code list} would consider two lists equivalent if they\n * contained the same elements, ignoring order.)\n *\n * <p>libraries that implement reduction based on {@code collector}, such as\n * {@link stream#collect(collector)}, must adhere to the following constraints:\n * <ul>\n *     <li>the first argument passed to the accumulator function, both\n *     arguments passed to the combiner function, and the argument passed to the\n *     finisher function must be the result of a previous invocation of the\n *     result supplier, accumulator, or combiner functions.</li>\n *     <li>the implementation should not do anything with the result of any of\n *     the result supplier, accumulator, or combiner functions other than to\n *     pass them again to the accumulator, combiner, or finisher functions,\n *     or return them to the caller of the reduction operation.</li>\n *     <li>if a result is passed to the combiner or finisher\n *     function, and the same object is not returned from that function, it is\n *     never used again.</li>\n *     <li>once a result is passed to the combiner or finisher function, it\n *     is never passed to the accumulator function again.</li>\n *     <li>for non-concurrent collectors, any result returned from the result\n *     supplier, accumulator, or combiner functions must be serially\n *     thread-confined.  this enables collection to occur in parallel without\n *     the {@code collector} needing to implement any additional synchronization.\n *     the reduction implementation must manage that the input is properly\n *     partitioned, that partitions are processed in isolation, and combining\n *     happens only after accumulation is complete.</li>\n *     <li>for concurrent collectors, an implementation is free to (but not\n *     required to) implement reduction concurrently.  a concurrent reduction\n *     is one where the accumulator function is called concurrently from\n *     multiple threads, using the same concurrently-modifiable result container,\n *     rather than keeping the result isolated during accumulation.\n *     a concurrent reduction should only be applied if the collector has the\n *     {@link characteristics#unordered} characteristics or if the\n *     originating data is unordered.</li>\n * </ul>\n *\n * <p>in addition to the predefined implementations in {@link collectors}, the\n * static factory methods {@link #of(supplier, biconsumer, binaryoperator, characteristics...)}\n * can be used to construct collectors.  for example, you could create a collector\n * that accumulates widgets into a {@code treeset} with:\n *\n * <pre>{@code\n *     collector<widget, ?, treeset<widget>> intoset =\n *         collector.of(treeset::new, treeset::add,\n *                      (left, right) -> { left.addall(right); return left; });\n * }</pre>\n *\n * (this behavior is also implemented by the predefined collector\n * {@link collectors#tocollection(supplier)}).\n *\n * @apinote\n * performing a reduction operation with a {@code collector} should produce a\n * result equivalent to:\n * <pre>{@code\n *     a container = collector.supplier().get();\n *     for (t t : data)\n *         collector.accumulator().accept(container, t);\n *     return collector.finisher().apply(container);\n * }</pre>\n *\n * <p>however, the library is free to partition the input, perform the reduction\n * on the partitions, and then use the combiner function to combine the partial\n * results to achieve a parallel reduction.  (depending on the specific reduction\n * operation, this may perform better or worse, depending on the relative cost\n * of the accumulator and combiner functions.)\n *\n * <p>collectors are designed to be <em>composed</em>; many of the methods\n * in {@link collectors} are functions that take a collector and produce\n * a new collector.  for example, given the following collector that computes\n * the sum of the salaries of a stream of employees:\n *\n * <pre>{@code\n *     collector<employee, ?, integer> summingsalaries\n *         = collectors.summingint(employee::getsalary))\n * }</pre>\n *\n * if we wanted to create a collector to tabulate the sum of salaries by\n * department, we could reuse the "sum of salaries" logic using\n * {@link collectors#groupingby(function, collector)}:\n *\n * <pre>{@code\n *     collector<employee, ?, map<department, integer>> summingsalariesbydept\n *         = collectors.groupingby(employee::getdepartment, summingsalaries);\n * }</pre>\n *\n * @see stream#collect(collector)\n * @see collectors\n *\n * @param <t> the type of input elements to the reduction operation\n * @param <a> the mutable accumulation type of the reduction operation (often\n *            hidden as an implementation detail)\n * @param <r> the result type of the reduction operation\n * @since 1.8\n */\npublic interface collector<t, a, r> {\n    /**\n     * 创建并返回新的可变结果容器的函数。\n     * 返回值：返回新的可变结果容器的函数\n     */\n    supplier<a> supplier();\n\n    /**\n     * a function that folds a value into a mutable result container.\n     *\n     * @return a function which folds a value into a mutable result container\n     */\n    biconsumer<a, t> accumulator();\n\n    /**\n     * a function that accepts two partial results and merges them.  the\n     * combiner function may fold state from one argument into the other and\n     * return that, or may return a new result container.\n     *\n     * @return a function which combines two partial results into a combined\n     * result\n     */\n    binaryoperator<a> combiner();\n\n    /**\n     * perform the final transformation from the intermediate accumulation type\n     * {@code a} to the final result type {@code r}.\n     *\n     * <p>if the characteristic {@code identity_finish} is\n     * set, this function may be presumed to be an identity transform with an\n     * unchecked cast from {@code a} to {@code r}.\n     *\n     * @return a function which transforms the intermediate result to the final\n     * result\n     */\n    function<a, r> finisher();\n\n    /**\n     * returns a {@code set} of {@code collector.characteristics} indicating\n     * the characteristics of this collector.  this set should be immutable.\n     *\n     * @return an immutable set of collector characteristics\n     */\n    set<characteristics> characteristics();\n\n    /**\n     * returns a new {@code collector} described by the given {@code supplier},\n     * {@code accumulator}, and {@code combiner} functions.  the resulting\n     * {@code collector} has the {@code collector.characteristics.identity_finish}\n     * characteristic.\n     *\n     * @param supplier the supplier function for the new collector\n     * @param accumulator the accumulator function for the new collector\n     * @param combiner the combiner function for the new collector\n     * @param characteristics the collector characteristics for the new\n     *                        collector\n     * @param <t> the type of input elements for the new collector\n     * @param <r> the type of intermediate accumulation result, and final result,\n     *           for the new collector\n     * @throws nullpointerexception if any argument is null\n     * @return the new {@code collector}\n     */\n    public static<t, r> collector<t, r, r> of(supplier<r> supplier,\n                                              biconsumer<r, t> accumulator,\n                                              binaryoperator<r> combiner,\n                                              characteristics... characteristics) {\n        objects.requirenonnull(supplier);\n        objects.requirenonnull(accumulator);\n        objects.requirenonnull(combiner);\n        objects.requirenonnull(characteristics);\n        set<characteristics> cs = (characteristics.length == 0)\n                                  ? collectors.ch_id\n                                  : collections.unmodifiableset(enumset.of(collector.characteristics.identity_finish,\n                                                                           characteristics));\n        return new collectors.collectorimpl<>(supplier, accumulator, combiner, cs);\n    }\n\n    /**\n     * returns a new {@code collector} described by the given {@code supplier},\n     * {@code accumulator}, {@code combiner}, and {@code finisher} functions.\n     *\n     * @param supplier the supplier function for the new collector\n     * @param accumulator the accumulator function for the new collector\n     * @param combiner the combiner function for the new collector\n     * @param finisher the finisher function for the new collector\n     * @param characteristics the collector characteristics for the new\n     *                        collector\n     * @param <t> the type of input elements for the new collector\n     * @param <a> the intermediate accumulation type of the new collector\n     * @param <r> the final result type of the new collector\n     * @throws nullpointerexception if any argument is null\n     * @return the new {@code collector}\n     */\n    public static<t, a, r> collector<t, a, r> of(supplier<a> supplier,\n                                                 biconsumer<a, t> accumulator,\n                                                 binaryoperator<a> combiner,\n                                                 function<a, r> finisher,\n                                                 characteristics... characteristics) {\n        objects.requirenonnull(supplier);\n        objects.requirenonnull(accumulator);\n        objects.requirenonnull(combiner);\n        objects.requirenonnull(finisher);\n        objects.requirenonnull(characteristics);\n        set<characteristics> cs = collectors.ch_noid;\n        if (characteristics.length > 0) {\n            cs = enumset.noneof(characteristics.class);\n            collections.addall(cs, characteristics);\n            cs = collections.unmodifiableset(cs);\n        }\n        return new collectors.collectorimpl<>(supplier, accumulator, combiner, finisher, cs);\n    }\n\n    /**\n     * characteristics indicating properties of a {@code collector}, which can\n     * be used to optimize reduction implementations.\n     */\n    enum characteristics {\n        /**\n         * indicates that this collector is <em>concurrent</em>, meaning that\n         * the result container can support the accumulator function being\n         * called concurrently with the same result container from multiple\n         * threads.\n         *\n         * <p>if a {@code concurrent} collector is not also {@code unordered},\n         * then it should only be evaluated concurrently if applied to an\n         * unordered data source.\n         */\n        concurrent,\n\n        /**\n         * indicates that the collection operation does not commit to preserving\n         * the encounter order of input elements.  (this might be true if the\n         * result container has no intrinsic order, such as a {@link set}.)\n         */\n        unordered,\n\n        /**\n         * indicates that the finisher function is the identity function and\n         * can be elided.  if set, it must be the case that an unchecked cast\n         * from a to r will succeed.\n         */\n        identity_finish\n    }\n}\n\n\n\n * t是流中要收集的项目的泛型\n * a是累加器的类型，累加器是在收集过程中用于累积部分结果的对象\n * r是收集操作得到的对象的类型\n * characteristics方法提供了一系列特征，告诉collect方法在执行归约操作的时候可以应用哪些优化，如并行化。\n\n\n# 5.5.1 supplier建立新的结果容器\n\n该方法返回一个结果为空的supplier，也就是一个无参函数，在调用是它会创建一个空的累加器实例，供数据收集过程使用，所以，在对空流执行操作的时候，这个空的累加器也代表了收集过程的结果。\n\n\n# 5.5.2 accumulator将元素添加到结果容器\n\n该方法返回执行归约操作的函数。该函数返回void，因为累加器是原位更新，即函数的执行改变了它的内部状态以体现便利元素的效果。\n\n\n# 5.5.3 finisher对结果容器应用最终转换\n\n该方法必须返回在累积过程的最后要调用的一个函数，以便将累加器对象转换为整个集合操作的最终结果。如果结果无需转换，则只需返回identity函数\n\n\n\n\n# 5.5.4 combiner合并两个结果容器\n\n该方法返回一个供归约操作使用的函数，它定义了对流的各个子部分进行并行处理时，各个子部分归约所得的累加器要如何合并。对于tolist而言：只是简单的把从流的第二个部分收集到的项目列表添加到遍历第一部分时得到的列表后面\n\npublic static <t> collector<t, ?, list<t>> tolist() {\n     return new collectorimpl<>((supplier<list<t>>) arraylist::new, list::add,\n                                   (left, right) -> { left.addall(right); return left; },ch_id);\n}\n\n\n该方法会用到java7中引入的分支/合并框架和spliterator抽象。\n\n\n# 5.5.5 characteristics方法\n\n该方法可以提示流是否可以进行归约以及可使用的优化。\n\n * unordered--归约结果不受流中项目的遍历和累积顺序的影响\n\n * concunrrent--accumulator函数可以从多个线程同时调用，且收集器可以并行归约流，如果收集器没有标为unordered，它仅在用于无序数据源时才可以进行归约\n\n * identity_finish--这表明完成器方法返回的函数是一个恒等函数，可以跳过。\n\n\n# 5.5.6 自定义收集\n\n对于identity_finish的收集操作，stream有一个重载的collect方法接受三个函数（supplier,accumulator,combiner）。我们也可以通过实现collector接口定义自己的收集器。\n\n\n# 6.并行数据处理与性能\n\nstream的并行流内部使用流fork/join框架。\n\n\n# 6.1 将顺序流转换为并行流\n\nparallel会将顺序流转化为并行流。但这不代表流本身发生了变化，只是在内部设置流一个boolean标志，表示在调用该方法后的所有操作都并行执行。同样的，可以用sequential方法把流变为顺序流，但是如果将这个两个方法结合时，会以最后一次调用的为准。\n\n> 配置并行流使用的线程池\n> \n> 并行流内部使用流默认的forkjoinpool，它默认的线程数量就是处理器数量，由runtime.getruntime().availableprocessors()获取(实际返回的是可用内核的数量，包括超线程生成的虚拟内核)。\n> \n> 但是也可以自定义system.setproperty("java.util.concurrent.forkjoinpool.common.parallelism","数量")，注意这是一个全局设置，它将影响所有并行流。\n\n\n# 6.2 正确使用并行\n\nimport java.util.stream.*;\n\npublic class parallelstreams {\n\n    public static long iterativesum(long n) {\n        long result = 0;\n        for (long i = 0; i <= n; i++) {\n            result += i;\n        }\n        return result;\n    }\n\n    public static long sequentialsum(long n) {\n        return stream.iterate(1l, i -> i + 1).limit(n).reduce(long::sum).get();\n    }\n\n    public static long parallelsum(long n) {\n        return stream.iterate(1l, i -> i + 1).limit(n).parallel().reduce(long::sum).get();\n    }\n\n    public static long rangedsum(long n) {\n        return longstream.rangeclosed(1, n).reduce(long::sum).getaslong();\n    }\n\n    public static long parallelrangedsum(long n) {\n        return longstream.rangeclosed(1, n).parallel().reduce(long::sum).getaslong();\n    }\n\n    public static long sideeffectsum(long n) {\n        accumulator accumulator = new accumulator();\n        longstream.rangeclosed(1, n).foreach(accumulator::add);\n        return accumulator.total;\n    }\n\n    public static long sideeffectparallelsum(long n) {\n        accumulator accumulator = new accumulator();\n        longstream.rangeclosed(1, n).parallel().foreach(accumulator::add);\n        return accumulator.total;\n    }\n\n    public static class accumulator {\n        private long total = 0;\n\n        public void add(long value) {\n            total += value;\n        }\n    }\n}\n\npackage chl;\n\n//===============================================================================================\n\nimport java.util.function.function;\n\npublic class myparallelstreams {\n    public static long measuresumperf(function<long, long> adder, long n) {\n        long fastest = long.max_value;\n        for (int i = 0; i < 10; i++) {\n            long start = system.nanotime();\n            long sum = adder.apply(n);\n            long duration = (system.nanotime() - start) / 1000000;\n            system.out.println("result:" + sum);\n            if (duration < fastest) fastest = duration;\n        }\n        return fastest;\n    }\n\n    public static void main(string[] args) {\n        system.out.println("耗时:" + measuresumperf(parallelstreams::sideeffectparallelsum, 10000000));\n    }\n}\n\n\n\n要确保并行正确执行必须保证不存在共享的可变状态。\n\n * 测量。有时候并行流并不一定比顺序流快。\n * 注意装箱。自动装箱和拆箱操作会大大降低性能，这时候可以使用原始类型流。\n * 有些操作在并行流上的性能比顺序流差。特别是limit和findfirst等依赖于元素顺序的操作。如果不依赖顺序，可以调用unordered方法把有序流变成无序流。\n * 如果一个元素通过流水线的处理成本高，那么使用并行流时性能好的可能性比较大。\n * 对于较小的数据量，选择并行流并不的优先级并不高，因为并行化（分配线程等资源）的开销更高。\n * 考虑流背后的数据结构是否易于分解。可以自定义spliterator来控制分解过程。\n * 流自身的特点以及流水线中的中间操作修改流的方法，都可能会改变分解过程的性能。一个已知大小的流比未知的更好拆分。\n * 还要考虑终端操作中合并步骤的代价是大是小，如果这一步代价很大，那么组合每个子流的部分结果所产生的的代价就可能会超出通过并行流得到的性能提升。\n\n流的数据源可分解性\n\n源                 可分解性\narraylist         极佳\nlinkedlist        差\nintstream.range   极佳\nstream.iterate    差\nhashset           好\ntreeset           好\n\n\n# 6.3 fork/join框架\n\n\n# 6.3.1 recursivetask\n\npublic abstract class recursivetask<v> extends forkjointask<v> {\n    private static final long serialversionuid = 5232453952276485270l;\n\n    @suppresswarnings("serial") \n    v result;\n\n    protected abstract v compute();\n\n    public final v getrawresult() {\n        return result;\n    }\n\n    protected final void setrawresult(v value) {\n        result = value;\n    }\n\n    protected final boolean exec() {\n        result = compute();\n        return true;\n    }\n\n}\n\n\n\n\n\n> 使用多个forkjoinpool是没有意义的，一般把它实例化一次，然后把实例保存在静态字段中，使之称为单例，这样就可以重用。\n\n\n# 6.3.2 使用fork/join的最佳做法\n\n * 对一个任务调用join方法会阻塞调用方，直到该任务做出结果。因此，有必要在两个子任务的计算都开始之后再调用它。\n\n * 不应该在recursivetask内部使用forkjoinpool的invoke方法。相反，应始终直接调用compute或fork方法，只有顺序代码才应该用invoke来启动并行计算。\n\n * 对子任务调用fork方法可以把它排进forkjoinpool。同时对左边和右边的子任务调用它似乎很自然，但这样做的效率要比直接对其中一个调用compute低。这样做可以为其中一个子任务重用同一线程，从而避免在线程池中多分配一个任务造成的开销。\n\n * 调试使用分支/合并框架的并行计算可能有点棘手。特别是你平常都在你喜欢的ide里面看栈跟踪（ stack trace）来找问题，但放在分支合并计算上就不行了，因为调用compute的线程并不是概念上的调用方，后者是调用fork的那个。\n\n * 和并行流一样，不应理所当然地认为在多核处理器上使用分支/合并框架就比顺序计算快。一个任务可以分解成多个独立的子任务，才能让性能在并行化时有所提升。所有这些子任务的运行时间都应该比分出新任务所花的时间长；一个惯用方法是把输入/输出放在一个子任务里，计算放在另一个里，这样计算就可以和输入/输出同时进行。此外，在比较同一算法的顺序和并行版本的性能时还有别的因素要考虑。就像任何其他java代码一样，分支/合并框架需要“预热”或者说要执行几遍才会被jit编译器优化。同时还要知道，编译器内置的优化可能会为顺序版本带来一些优势（例如执行代码分析——删去从未被使用的计算）\n\n\n# 6.3.3 工作窃取\n\n应该让划分的子任务都用相同的时间完成，但是由于外部因素，如划分策略效率低、磁盘访问慢或是需要和外部服务协调执行，每个子任务所花的时间不尽相同。框架使用一种称为工作窃取（work stealing）的技术解决这个问题。\n\n\n\n\n# 6.4 spliterator可分迭代器\n\npublic interace spliterator<t> {\n    /**\n     * 按序遍历，如果没有元素则返回false，否则对元素执行给定的操作并返回true\n     */\n    boolean tryadvance(consumer<? super t> action);\n    \n    /**\n     * 把元素划出去分给第二个spliterator,让他们并行处理，直到返回null\n     */\n    spliterator<t> trysplit();\n    \n     /**\n     * 返回foreachremaining遍历将遇到的估计值，如果无限或无法计算，则返回long.max_value\n     */\n    long estimatesize();\n    \n    int characteristics();\n}\n\n\n\n# 6.4.1 拆分过程\n\n\n\nspliterator的特性\n\n特性           含义\nordered      元素有既定顺序，spliterator在遍历和划分时遵循这一顺序\ndistinct     对于任意一对遍历过的元素x和y，x.equals(y)返回false\nsorted       遍历的元素按照一个预定义的顺序排序\nsized        该spliterator由一个已知大小的源建立，因此estimatedsize()返回的是准确值\nnonnull      保证遍历的元素不会为null\nimmutable    数据源不能修改\nconcurrent   数据源可被其他线程同时修改而无需同步\nsubsized     所有拆分出来的spliterator都是sized\n\n\n# 6.4.2 自定义spliterator\n\n\n# 7. 重构、测试和调试\n\n\n# 7.1 重构\n\n\n# 7.1.1 使用lambda替换匿名类\n\n需要注意的是，lambda中的this和super代表的是包含类，而匿名类的代表匿名类自身；匿名类可以屏蔽包含类的变量，而lambda不能。另外，在涉及重载的上下文中，应该使用显示的类型转换来减低类型推断的难度。\n\n\n# 7.1.2 方法引用代替lambda\n\n\n# 7.1.3 从命令式的数据处理切换到stream\n\n\n# 7.1.4重构模式\n\n有条件的延迟执行\n\nif (logger.isloggable(log.finer)){\n\tlogger.finer("problem: " + generatediagnostic());\n}\n//使用log方法代替上面的判断\npublic void log(level level, supplier<string> msgsupplier)\n\n\n如果需要频繁地从客户端去查询一个对象的状态（比如日志器的状态），只是为了传递参数、调用该对象的一个方法（比如输出一条日志），那么可以考虑实现一个新的方法，以lambda或者方法表达式作为参数，代码会更易读，封装性会更好（对象的状态也不会暴露给客户端代码了）。\n\n环绕执行\n\nlambda作为参数传递，类似切面。\n\n\n# 7.2 使用lambda重构面向对象的设计模式\n\n\n# 7.2.1 策略模式\n\n关键点：实现函数式接口\n\n\n# 7.2.2 模板方法\n\n关键点：方法增加函数式入参\n\n\n# 7.2.3 观察者模式\n\n关键点：lambda代替通知方法，注意如果观察者的逻辑十分复杂，比如它们可能持有状态亦或是定义了多个方法等，则应继续使用类的方式。\n\n\n# 7.2.4 责任链模式\n\n关键点：unaryoperator、andthen\n\n\n# 7.2.5 工厂模式\n\n关键点：构造函数入参低于2个时，使用方法引用...\n\n\n# 7.2 测试lambda\n\n\n# 7.3 调试\n\npeek方法？\n\n\n# 8.默认方法\n\n不同类型兼容性：二进制、源代码、和函数行为\n\n * 二进制兼容：现有的二进制执行文件能无缝链（包括验证、准备和解析）和运行。比如，为接口添加一个方法就是二进制兼容的，这种方式下，如果新加的方法不被调用，接口已经实现的方法可以继续运行，不会出现错误。\n * 源代码兼容：引入变化后，现有的程序依然能成功编译通过。\n * 函数行为兼容：变更后，程序接受同样的输入能得到同样的结果。\n\n解决菱形继承的三条规则\n\n * 类中的方法优先级最高。类或父类中声明的方法的优先级高于任何声明为默认方法的优先级\n * 如果第一条无法判断，那么子接口的优先级更高。函数签名相同时，优先选择拥有最具体实现的默认方法的接口，即如果b继承了a，那么b就比a更加具体\n * 如果还是无法判断，继承了多个接口的类必须通过显示覆盖和调用期望的方法\n\njava8引入了一种新语法x.super.m(...)，其中x是希望调用的m方法所在的父接口。\n\n\n# 9.optional\n\n使用optional的语义在于：可以很清楚地知道它可以接受空值，或者它可能返回一个空值。\n\noptional.empty();\noptional.of(...);\noptional.ofnullable(...);\n//如果要处理的元素为空，则不做任何操作,并返回一个空的optional对象\noptional.map(...);\noptional.flatmap(...);\n\n\n\n> optional不能被序列化。java语言的架构师明确地说过它的设计初衷仅仅是要支持能返回optional对象的语法。\n\noptional.get();\noptional.orelse(t other);\noptional.orelseget(supplier<? extends t> other);\noptional.orelsethrow(supplier<? extends x> exceptionsupplier);\noptional.ifpresent(consumer<? super t>);\noptional.ispresent();\n\n\n\n# 10.completablefuture组合式异步编程\n\n相比于并行流，completablefuture的优势在于可以配置线程池中的线程大小。\n\n * 如果进行的是计算密集型的操作，并且没有i/o，推荐使用stream接口。\n * 如果并行的工作单元还涉及等待i/o的操作（包括网络连接等待），那么使用completablefuture灵活性更好。\n\n\n# 11.新的日期api\n\n\n# 11.1 localdate和localtime\n\n\n# 11.2 instant\n\n为了便于机器使用而设计\n\n\n# 11.3 duration或period\n\nduration主要用于以秒和纳秒衡量时间的长短；period可以以年、月或日的方式对多个时间单位建模。\n\n方法名            是否静态方法   描述\nbetween        是        创建两个时间点之间的 interval (间隔)\nfrom           是        由一个临时时间点创建 interval\nof             是        由它的组成部分创建 interval 的实例\nparse          是        由字符串创建 interval 的实例\naddto          否        创建该 interval 的副本，并将其ԯ加到某个指定的 temporal 对象\nget            否        读取该 interval 的状态\nisnegative     否        检查该 interval 是否为负值，不包含零\niszero         否        检查该 interval 的时长是否为零\nminus          否        通过减去一定的时间创建该 interval 的副本\nmultipliedby   否        将 interval 的值乘以某个标量创建该 interval 的副本\nnegated        否        以忽略某个时长的方式创建该 interval 的副本\nplus           否        以增加某个指定的时长的方式创建该 interval 的副本\nsubtractfrom   否        从指定的 temporal 对象中减去该 interval\n\n\n# 11.4 操纵、解析和格式化日期\n\nlocaldate date1 = localdate.of(2014, 3, 18);\nlocaldate date2 = date1.withyear(2011);\nlocaldate date3 = date2.withdayofmonth(25);\nlocaldate date4 = date3.with(chronofield.month_of_year, 9);\n\nlocaldate date1 = localdate.of(2014, 3, 18);\nlocaldate date2 = date1.plusweeks(1);\nlocaldate date3 = date2.minusyears(3);\nlocaldate date4 = date3.plus(6, chronounit.months);\n\n\n方法名        是否静态方法   描述\nfrom       是        依据传入的 temporal 对象创建对象实例\nnow        是        依据系统时钟创建 temporal 对象\nof         是        由 temporal 对象的某个部分创建该对象的实例\nparse      是        由字符串创建 temporal 对象的实例\natoffset   否        将 temporal 对象和某个时区偏移相结合\natzone     否        将 temporal 对象和某个时区相结合\nformat     否        使用某个指定的格式器将temporal对象转换为字符串（ instant类不提供该方法）\nget        否        读取 temporal 对象的某一部分的值\nminus      否        创建 temporal 对象的一个副本，通过将当前 temporal 对象的值ђ去一定的时长，创建该副本\nplus       否        创建 temporal 对象的一个副本，通过将当前 temporal 对象的值加上一定的时长，创建该副本\nwith       否        以该 temporal 对象为模板，对某些状态进行修改创建该对象的副本\n\n\n# 11.4.1 使用temporaladjuster\n\n可以使用重载版本的with方法，向其传递一个提供了更多定制化选择的temporaladjuster对象，更 加 灵 活 地 处 理 日 期 。\n\n\n\n----------------------------------------\n\n\n# 11.4.2 datetimeformatter\n\n线程安全的，内置了几种解析常量。\n\nlocaldate date = localdate.of(2014, 3, 18);\nstring s1 = date.format(datetimeformatter.basic_iso_date); // 20140318\nstring s2 = date.format(datetimeformatter.iso_local_date); // 2014-03-18\n\nlocaldate date1 = localdate.parse("20140318",datetimeformatter.basic_iso_date);\nlocaldate date2 = localdate.parse("2014-03-18",datetimeformatter.iso_local_date);\n\ndatetimeformatter formatter = datetimeformatter.ofpattern("dd/mm/yyyy");\nlocaldate date1 = localdate.of(2014, 3, 18);\nstring formatteddate = date1.format(formatter);\nlocaldate date2 = localdate.parse(formatteddate, formatter);\n\n\n创建一个本地化的datetimeformatter\n\ndatetimeformatter italianformatter =datetimeformatter.ofpattern("d. mmmm yyyy", locale.italian);\nlocaldate date1 = localdate.of(2014, 3, 18);\nstring formatteddate = date.format(italianformatter); // 18. marzo 2014\nlocaldate date2 = localdate.parse(formatteddate, italianformatter);\n\n\n如果需要更加细粒度的控制， datetimeformatterbuilder类还提供了更复杂的格式器，可以选择恰当的方法，一步一步地构造自己的格式器。另外，它还提供了非常强大的解析功能，比如区分大小写的解析、柔性解析（允许解析器使用启发式的机制去解析输入，不精 确 地 匹 配 指 定 的 模 式 ）、 填充 ， 以 及 在 格 式 器 中 指 定 可 选 节 。\n\ndatetimeformatter italianformatter = new datetimeformatterbuilder()\n.appendtext(chronofield.day_of_month)\n.appendliteral(". ")\n.appendtext(chronofield.month_of_year)\n.appendliteral(" ")\n.appendtext(chronofield.year)\n.parsecaseinsensitive()\n.toformatter(locale.italian);\n\n\n\n# 11.5 处理不同的时区和历法\n\n',charsets:{cyrillic:!0,cjk:!0}},{title:"Home",frontmatter:{home:!0,heroImage:"/assets/logo.png",heroText:"ccc-docs",tagline:"📚cheysen's知识文档库",actionText:"开始阅读 →",actionLink:"/pages/spring/core/",bannerBg:"none",features:[{title:"文档翻译",details:"对各种框架、相关技术的英文文档的翻译"},{title:"开发指南",details:"记录开发中遇到的问题，并形成总结和助记手册"},{title:"读书笔记",details:"记录阅读书籍后的提要或总结"}],postList:"none"},regularPath:"/",relativePath:"index.md",key:"v-43fc48ca",path:"/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"Spring Core",frontmatter:{title:"Spring Core",permalink:"/pages/spring/core/",article:!0,date:"2022-01-20T11:23:25.000Z"},regularPath:"/01.%E6%96%87%E6%A1%A3%E7%BF%BB%E8%AF%91/01.Spring%20Framework/01.core.html",relativePath:"01.文档翻译/01.Spring Framework/01.core.md",key:"v-a5cec558",path:"/pages/spring/core/",headers:[{level:2,title:"1.1. Spring Ioc容器和Beans介绍",slug:"_1-1-spring-ioc容器和beans介绍",normalizedTitle:"1.1. spring ioc容器和beans介绍",charIndex:32},{level:2,title:"1.2. Container介绍",slug:"_1-2-container介绍",normalizedTitle:"1.2. container介绍",charIndex:782},{level:3,title:"1.2.1. 元数据配置",slug:"_1-2-1-元数据配置",normalizedTitle:"1.2.1. 元数据配置",charIndex:1453},{level:3,title:"1.2.2. 容器初始化",slug:"_1-2-2-容器初始化",normalizedTitle:"1.2.2. 容器初始化",charIndex:2968},{level:3,title:"1.2.3. 使用容器",slug:"_1-2-3-使用容器",normalizedTitle:"1.2.3. 使用容器",charIndex:6579},{level:2,title:"1.3. Bean介绍",slug:"_1-3-bean介绍",normalizedTitle:"1.3. bean介绍",charIndex:7998},{level:3,title:"1.3.1. Beans命名",slug:"_1-3-1-beans命名",normalizedTitle:"1.3.1. beans命名",charIndex:9190},{level:3,title:"1.3.2. 实例化Beans",slug:"_1-3-2-实例化beans",normalizedTitle:"1.3.2. 实例化beans",charIndex:10872},{level:2,title:"1.4. 依赖Dependencies",slug:"_1-4-依赖dependencies",normalizedTitle:"1.4. 依赖dependencies",charIndex:14474},{level:3,title:"1.4.1. 依赖注入",slug:"_1-4-1-依赖注入",normalizedTitle:"1.4.1. 依赖注入",charIndex:14630},{level:3,title:"1.4.2.  依赖配置详解",slug:"_1-4-2-依赖配置详解",normalizedTitle:"1.4.2.  依赖配置详解",charIndex:null},{level:3,title:"1.4.3. depends-on",slug:"_1-4-3-depends-on",normalizedTitle:"1.4.3. depends-on",charIndex:37135},{level:3,title:"1.4.4. 懒加载Beans",slug:"_1-4-4-懒加载beans",normalizedTitle:"1.4.4. 懒加载beans",charIndex:37890},{level:3,title:"1.4.5. 自动装配协作者",slug:"_1-4-5-自动装配协作者",normalizedTitle:"1.4.5. 自动装配协作者",charIndex:38653},{level:3,title:"1.4.6. 方法注入",slug:"_1-4-6-方法注入",normalizedTitle:"1.4.6. 方法注入",charIndex:40945},{level:2,title:"1.5. Bean作用域",slug:"_1-5-bean作用域",normalizedTitle:"1.5. bean作用域",charIndex:46502},{level:3,title:"1.5.1. 单例作用域",slug:"_1-5-1-单例作用域",normalizedTitle:"1.5.1. 单例作用域",charIndex:47532},{level:3,title:"1.5.2. 原型作用域",slug:"_1-5-2-原型作用域",normalizedTitle:"1.5.2. 原型作用域",charIndex:48268},{level:3,title:"1.5.3. 包含原型bean引用的单例beans",slug:"_1-5-3-包含原型bean引用的单例beans",normalizedTitle:"1.5.3. 包含原型bean引用的单例beans",charIndex:48981},{level:3,title:"1.5.4. Request, Session, Application, and WebSocket 作用域",slug:"_1-5-4-request-session-application-and-websocket-作用域",normalizedTitle:"1.5.4. request, session, application, and websocket 作用域",charIndex:49304},{level:3,title:"1.5.5. 自定义作用域",slug:"_1-5-5-自定义作用域",normalizedTitle:"1.5.5. 自定义作用域",charIndex:56491},{level:2,title:"1.6. 自定义bean性质",slug:"_1-6-自定义bean性质",normalizedTitle:"1.6. 自定义bean性质",charIndex:59254},{level:3,title:"1.6.1. Lifecycle 回调",slug:"_1-6-1-lifecycle-回调",normalizedTitle:"1.6.1. lifecycle 回调",charIndex:59403},{level:3,title:"1.6.2. ApplicationContextAware和BeanNameAware",slug:"_1-6-2-applicationcontextaware和beannameaware",normalizedTitle:"1.6.2. applicationcontextaware和beannameaware",charIndex:66917},{level:3,title:"1.6.3. 其他Aware接口",slug:"_1-6-3-其他aware接口",normalizedTitle:"1.6.3. 其他aware接口",charIndex:68100},{level:2,title:"1.7. Bean定义继承",slug:"_1-7-bean定义继承",normalizedTitle:"1.7. bean定义继承",charIndex:70065},{level:2,title:"1.8. 容器扩展点",slug:"_1-8-容器扩展点",normalizedTitle:"1.8. 容器扩展点",charIndex:71908},{level:3,title:"1.8.1. 用BeanPostProcessor自定义Beans",slug:"_1-8-1-用beanpostprocessor自定义beans",normalizedTitle:"1.8.1. 用beanpostprocessor自定义beans",charIndex:72010},{level:3,title:"1.8.2. 使用BeanFactoryPostProcessor自定义配置元数据",slug:"_1-8-2-使用beanfactorypostprocessor自定义配置元数据",normalizedTitle:"1.8.2. 使用beanfactorypostprocessor自定义配置元数据",charIndex:77010},{level:3,title:"1.8.3. 使用FactoryBean自定义实例化逻辑",slug:"_1-8-3-使用factorybean自定义实例化逻辑",normalizedTitle:"1.8.3. 使用factorybean自定义实例化逻辑",charIndex:81389},{level:2,title:"1.9. 基于注解的容器配置",slug:"_1-9-基于注解的容器配置",normalizedTitle:"1.9. 基于注解的容器配置",charIndex:82095},{level:3,title:"1.9.1. @Required",slug:"_1-9-1-required",normalizedTitle:"1.9.1. @required",charIndex:84064},{level:3,title:"1.9.2. 使用@Autowired",slug:"_1-9-2-使用-autowired",normalizedTitle:"1.9.2. 使用@autowired",charIndex:84623},{level:3,title:"1.9.3.  使用@Primary调整基于注解的自动注入",slug:"_1-9-3-使用-primary调整基于注解的自动注入",normalizedTitle:"1.9.3.  使用@primary调整基于注解的自动注入",charIndex:null},{level:3,title:"1.9.4.  使用@Qualifiers调整基于注解的自动注入",slug:"_1-9-4-使用-qualifiers调整基于注解的自动注入",normalizedTitle:"1.9.4.  使用@qualifiers调整基于注解的自动注入",charIndex:null},{level:2,title:"服务定位器模式",slug:"服务定位器模式",normalizedTitle:"服务定位器模式",charIndex:229}],headersStr:"1.1. Spring Ioc容器和Beans介绍 1.2. Container介绍 1.2.1. 元数据配置 1.2.2. 容器初始化 1.2.3. 使用容器 1.3. Bean介绍 1.3.1. Beans命名 1.3.2. 实例化Beans 1.4. 依赖Dependencies 1.4.1. 依赖注入 1.4.2.  依赖配置详解 1.4.3. depends-on 1.4.4. 懒加载Beans 1.4.5. 自动装配协作者 1.4.6. 方法注入 1.5. Bean作用域 1.5.1. 单例作用域 1.5.2. 原型作用域 1.5.3. 包含原型bean引用的单例beans 1.5.4. Request, Session, Application, and WebSocket 作用域 1.5.5. 自定义作用域 1.6. 自定义bean性质 1.6.1. Lifecycle 回调 1.6.2. ApplicationContextAware和BeanNameAware 1.6.3. 其他Aware接口 1.7. Bean定义继承 1.8. 容器扩展点 1.8.1. 用BeanPostProcessor自定义Beans 1.8.2. 使用BeanFactoryPostProcessor自定义配置元数据 1.8.3. 使用FactoryBean自定义实例化逻辑 1.9. 基于注解的容器配置 1.9.1. @Required 1.9.2. 使用@Autowired 1.9.3.  使用@Primary调整基于注解的自动注入 1.9.4.  使用@Qualifiers调整基于注解的自动注入 服务定位器模式",content:'# 核心技术\n\n> 5.3.2\n\n\n# 1.Ioc容器\n\n\n# 1.1. Spring Ioc容器和Beans介绍\n\n本章介绍了控制反转（IoC）原理的Spring框架实现。 IoC也称为依赖注入（DI）。 在此过程中，对象仅通过构造函数参数，工厂方法的参数或在构造后或从工厂方法返回后在对象实例上设置的属性来定义其依赖项（即与它们一起使用的其他对象） 。 然后，容器在创建bean时注入那些依赖项。 此过程从根本上讲是bean本身通过使用类的直接构造或诸如服务定位器模式之类的机制来控制其依赖项的实例或位置的逆过程（因此称为控制的反转）。\n\norg.springframework.beans和org.springframework.context包是Spring Framework的IoC容器的基础。BeanFactory接口提供了一种能够管理任何类型对象的高级配置机制。ApplicationContext是BeanFactory的子接口。 它增加了：\n\n * 与Spring AOP功能轻松集成\n * 消息资源处理（用于国际化）\n * 事件发布\n * 应用层特定的上下文，例如Web应用程序中使用的WebApplicationContext\n\n简而言之，BeanFactory提供了配置框架和基本的功能，而ApplicationContext添加了更多企业特定的功能。 ApplicationContext是BeanFactory的完整超集，在本章中仅在Spring的IoC容器描述中使用。\n\n在Spring中，构成应用程序主干并由Spring IoC容器管理的对象称为bean。bean是由Spring IoC容器实例化、组装和管理的对象。否则，bean只是应用程序中众多对象中的一个。bean及其之间的依赖关系反映在容器使用的配置元数据中。\n\n\n# 1.2. Container介绍\n\norg.springframework.context.ApplicationContext接口代表Spring IoC容器，并负责实例化，配置和组装Bean。 容器通过读取配置元数据获取有关要实例化，配置和组装哪些对象的说明。 配置元数据以XML，Java注解或Java代码表示。 它使您能够表达组成应用程序的对象以及这些对象之间的丰富相互依赖关系。\n\nSpring提供了ApplicationContext接口的几种实现。 在独立应用程序中，通常创建ClassPathXmlApplicationContext或FileSystemXmlApplicationContext的实例。 尽管XML是定义配置元数据的传统格式，但是可以通过提供少量XML配置来声明性地启用对其他元数据格式的支持，从而指示容器将Java注解或代码用作元数据格式。\n\n在大多数应用场景中，不需要显式用户代码即可实例化一个Spring IoC容器的一个或多个实例。 例如，在Web应用程序场景中，应用程序的web.xml文件中的简单八行（约）样板Web描述符XML通常就足够了。 如果您使用Spring Tools for Eclipse（由Eclipse驱动的开发环境），则只需单击几下鼠标或击键即可轻松创建此样板配置。\n\n下图显示了Spring的工作原理的高级视图。 您的应用程序类与配置元数据结合在一起，以便在创建和初始化ApplicationContext之后，您将拥有一个完全配置且可执行的系统或应用程序。\n\n\n\n\n# 1.2.1. 元数据配置\n\n如上图所示，Spring IoC容器使用一种形式的配置元数据。 此配置元数据表示您作为应用程序开发人员如何告诉Spring容器实例化，配置和组装应用程序中的对象。传统上，配置元数据以简单直观的XML格式提供，这是本章大部分用来传达Spring IoC容器的关键概念和功能的格式。\n\n> 基于XML的元数据不是配置元数据的唯一允许形式。 Spring IoC容器本身与实际写入此配置元数据的格式完全脱钩。 如今，许多开发人员为他们的Spring应用程序选择基于Java代码的配置。\n\n * 基于注解的配置：Spring 2.5引入了对基于注解的配置元数据的支持。\n * 基于Java的配置：从Spring 3.0开始，Spring JavaConfig项目提供的许多功能成为核心Spring Framework的一部分。 因此，您可以使用Java而不是XML文件来定义应用程序类外部的bean。 要使用这些新功能，请参见@ Configuration，@Bean，@Import和@DependsOn注解。\n\nSpring配置由容器必须管理的至少一个（通常是一个以上）bean定义组成。 基于XML的配置元数据将这些bean配置为顶级<beans />元素内的<bean />元素。 Java配置通常在@Configuration类中使用@Bean注释的方法。\n\n这些bean定义对应于组成应用程序的实际对象。 通常，您定义服务层对象，数据访问对象（DAO），表示对象（例如Struts Action实例），基础结构对象（例如Hibernate SessionFactories，JMS队列）等等。 通常，不会在容器中配置细粒度的域对象，因为DAO和业务逻辑通常负责创建和加载域对象。 但是，您可以使用Spring与AspectJ的集成来配置在IoC容器控制之外创建的对象。 请参阅使用AspectJ通过Spring依赖注入域对象。\n\n以下示例显示了基于XML的配置元数据的基本结构：\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="..." class="...">  \n        \x3c!-- collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="..." class="...">\n        \x3c!-- collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions go here --\x3e\n\n</beans>\n\n\n * id属性是一个标识单个bean定义的字符串。它的值指代该对象的引用。\n\n * class属性定义bean的类型并使用完全限定名。\n\n\n# 1.2.2. 容器初始化\n\n提供给ApplicationContext构造函数的一个或多个位置路径是资源字符串，这些资源字符串使容器可以从各种外部资源（例如本地文件系统，Java CLASSPATH等）加载配置元数据。\n\nApplicationContext context = new ClassPathXmlApplicationContext("services.xml", "daos.xml");\n\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    \x3c!-- services --\x3e\n\n    <bean id="petStore" class="org.springframework.samples.jpetstore.services.PetStoreServiceImpl">\n        <property name="accountDao" ref="accountDao"/>\n        <property name="itemDao" ref="itemDao"/>\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for services go here --\x3e\n\n</beans>\n\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="accountDao"\n        class="org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="itemDao" class="org.springframework.samples.jpetstore.dao.jpa.JpaItemDao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for data access objects go here --\x3e\n\n</beans>\n\n\n在前面的示例中，服务层由PetStoreServiceImpl类和两个JpaAccountDao和JpaItemDao类型的数据访问对象组成（基于JPA对象关系映射标准）。 属性名称元素引用JavaBean属性的名称，而ref元素引用另一个bean定义的名称。 id和ref元素之间的这种联系表达了协作对象之间的依赖性。\n\n# 构造基于XML的元数据\n\n使bean定义跨越多个XML文件可能很有用。 通常，每个单独的XML配置文件都代表体系结构中的逻辑层或模块。您可以使用应用程序上下文构造函数从所有这些XML片段中加载bean定义。 如上一节中所示，此构造函数具有多个Resource位置。 或者，使用<import />元素的一个或多个实例从另一个文件加载bean定义。 以下示例显示了如何执行此操作：\n\nCode\n\n<beans>\n    <import resource="services.xml"/>\n    <import resource="resources/messageSource.xml"/>\n    <import resource="/resources/themeSource.xml"/>\n\n    <bean id="bean1" class="..."/>\n    <bean id="bean2" class="..."/>\n</beans>\n\n\n在前面的示例中，外部bean定义是从三个文件加载的：services.xml，messageSource.xml和themeSource.xml。 所有位置路径都相对于执行导入的定义文件，因此，services.xml必须与执行导入的文件位于同一目录或类路径位置，而messageSource.xml和themeSource.xml必须位于该位置下方的资源位置 。 如您所见，斜杠被忽略。 但是，鉴于这些路径是相对的，最好不要使用任何斜线。 根据Spring Schema，导入的文件的内容（包括顶级<beans />元素）必须是有效的XML bean定义。\n\n> 可以但不建议使用相对路径“ ../”引用父目录中的文件。 这样做会创建对当前应用程序外部文件的依赖。 特别是，不建议对classpath：URL（例如，classpath：../ services.xml）使用此引用，在URL中，运行时解析过程会选择“最近”的classpath根目录，然后查看其父目录。 类路径配置的更改可能导致选择其他错误的目录。您始终可以使用绝对资源路径而不是相对路径：例如，file：C：/config/services.xml或classpath：/config/services.xml。 但是请注意，您正在将应用程序的配置耦合到特定的绝对路径。 通常，最好为这样的绝对路径保留一个间接寻址，例如，通过在运行时针对JVM系统属性解析的“ $ {…}”占位符。\n\n命名空间本身提供了import指令特性。除了普通bean定义之外，Spring提供的XML名称空间的选择中还有其他配置特性，例如context和util命名空间。\n\n# The Groovy Bean Definition DSL(领域特定语言)\n\n作为外部化配置元数据的另一个示例，Bean定义也可以在Spring的Groovy Bean定义DSL中表达，如Grails框架所示。 通常，这种配置位于“ .groovy”文件中，其结构如以下示例所示：\n\nbeans {\n    dataSource(BasicDataSource) {\n        driverClassName = "org.hsqldb.jdbcDriver"\n        url = "jdbc:hsqldb:mem:grailsDB"\n        username = "sa"\n        password = ""\n        settings = [mynew:"setting"]\n    }\n    sessionFactory(SessionFactory) {\n        dataSource = dataSource\n    }\n    myService(MyService) {\n        nestedBean = { AnotherBean bean ->\n            dataSource = dataSource\n        }\n    }\n}\n\n\n这种配置样式在很大程度上等同于XML bean定义，甚至支持Spring的XML配置名称空间。 它还允许通过importBeans指令导入XML bean定义文件。\n\n\n# 1.2.3. 使用容器\n\nApplicationContext是高级的工厂接口，该工厂能够维护不同bean及其依赖关系的注册表。 通过使用方法T getBean(String name，Class <T> requiredType)，可以检索bean的实例。\n\n// create and configure beans\nApplicationContext context = new ClassPathXmlApplicationContext("services.xml", "daos.xml");\n\n// retrieve configured instance\nPetStoreService service = context.getBean("petStore", PetStoreService.class);\n\n// use configured instance\nList<String> userList = service.getUsernameList();\n\n\n在Groovy配置中，使用看起来非常相似。它有一个不同的上下文实现类，该类支持groovy(但也理解XML bean定义)。下面的示例显示了Groovy配置\n\nApplicationContext context = new GenericGroovyApplicationContext("services.groovy", "daos.groovy");\n\n\n最灵活的变体是结合reader委托使用的GenericApplicationContext，例如，使用XML文件的XmlBeanDefinitionReader，如下面的示例所示\n\nGenericApplicationContext context = new GenericApplicationContext();\nnew XmlBeanDefinitionReader(context).loadBeanDefinitions("services.xml", "daos.xml");\ncontext.refresh();\n\n\n还可以为Groovy文件使用GroovyBeanDefinitionReader，如下面的示例所示\n\nGenericApplicationContext context = new GenericApplicationContext();\nnew GroovyBeanDefinitionReader(context).loadBeanDefinitions("services.groovy", "daos.groovy");\ncontext.refresh();\n\n\n您可以在相同的ApplicationContext上混合和匹配这样的读取器委派，从不同的配置源读取bean定义.\n\n然后可以使用getBean检索bean的实例。 ApplicationContext接口还有其他几种检索bean的方法，但是理想情况下，您的应用程序代码永远不要使用它们。 实际上，您的应用程序代码应该根本不调用getBean（）方法，因此完全不依赖于Spring API。 例如，Spring与Web框架的集成为各种Web框架组件（例如控制器和JSF管理的Bean）提供了依赖项注入，使您可以通过元数据（例如自动装配注释）声明对特定Bean的依赖项。\n\n\n# 1.3. Bean介绍\n\n在容器本身内，bean定义表示为BeanDefinition对象，其中包含（除其他信息外）以下元数据：\n\n * 包限定的类名：通常，定义了Bean的实际实现类。\n\n * Bean行为配置元素，用于声明Bean在容器中的行为（作用域，生命周期回调等）。\n\n * 引用该bean完成其工作所需的其他bean。 这些引用也称为协作者或依赖项。\n\n * 要在新创建的对象中设置的其他配置设置，例如，池的大小限制或在管理连接池的bean中要使用的连接数。\n\n该元数据转换为一组组成每个bean定义的属性。下表描述了这些属性\n\nPROPERTY                   EXPLAINED IN…\nClass                      Instantiating Beans\nName                       Naming Beans\nScope                      Bean Scopes\nConstructor arguments      Dependency Injection\nProperties                 Dependency Injection\nAutowiring mode            Autowiring Collaborators\nLazy initialization mode   Lazy-initialized Beans\nInitialization method      Initialization Callbacks\nDestruction method         Destruction Callbacks\n\n除了包含有关如何创建特定bean的信息的bean定义之外，ApplicationContext实现还允许注册在容器外部（由用户）创建的现有对象。 这是通过通过getBeanFactory（）方法访问ApplicationContext的BeanFactory来完成的，该方法返回BeanFactory DefaultListableBeanFactory实现。 DefaultListableBeanFactory通过registerSingleton（..）和registerBeanDefinition（..）方法支持此注册。 但是，典型的应用程序只能与通过常规bean定义元数据定义的bean一起使用。\n\n> Bean元数据和手动提供的单例实例需要尽早注册，以便容器在自动装配和其他自省步骤期间正确地判断它们。虽然在某种程度上支持覆盖现有元数据和现有的单例实例，但在运行时注册新bean(与对工厂的实时访问并发)不受官方支持，可能会导致并发访问异常、bean容器中的不一致状态，或者两者都有。\n\n\n# 1.3.1. Beans命名\n\n每个bean具有一个或多个标识符。 这些标识符在承载Bean的容器内必须唯一。 一个bean通常只有一个标识符。 但是，如果需要多个，则可以将多余的别名视为别名。\n\n在基于XML的配置元数据中，可以使用id属性和/或name属性来指定Bean标识符。 id属性可让您精确指定一个id。 按照惯例，这些名称是字母数字（“ myBean”，“ someService”等），但它们也可以包含特殊字符。 如果要为bean引入其他别名，还可以在name属性中指定它们，并用逗号（，），分号（;）或空格分隔。 作为历史记录，在Spring 3.1之前的版本中，id属性定义为xsd：ID类型，该类型限制了可能的字符。 从3.1开始，它被定义为xsd：string类型。 请注意，bean ID唯一性仍由容器强制执行，尽管不再由XML解析器执行。\n\n您不需要提供bean的名称或ID。 如果未明确提供名称或ID，则容器将为该bean生成一个唯一的名称。 但是，如果要按名称引用该bean，则通过使用ref元素或服务定位器样式查找，必须提供一个名称。 不提供名称的动机与使用内部bean和自动装配协作类有关。\n\n> 约定是在命名bean时使用标准Java约定来命名实例字段名。也就是说，bean名称以小写字母开头，并从那里采用驼峰格式。这些名称的例子包括accountManager、accountService、userDao、loginController等等。一致地命名bean可以使配置更易于阅读和理解。另外，如果您使用Spring AOP，在将通知(advice)应用到一组与名称相关的bean时，它会很有用。\n> \n> 通过在类路径中进行组件扫描，Spring会按照前面描述的规则为未命名的组件生成Bean名称：本质上，采用简单的类名称并将其初始字符转换为小写。 但是，在特殊情况下，如果有多个字符并且第一个和第二个字符均为大写字母，则会保留原始大小写。 这些规则与java.beans.Introspector.decapitalize（Spring使用的）定义的规则相同。\n\n# Bean别名\n\n在bean定义本身中，可以使用由id属性指定的最多一个名称和name属性中任意数量的其他名称的组合，为bean提供多个名称。 这些名称可以是同一个bean的等效别名，并且在某些情况下很有用，例如，通过使用特定于该组件本身的bean名称，让应用程序中的每个组件都引用一个公共依赖项。\n\n但是，在实际定义bean的地方指定所有别名并不够。 有时需要为在别处定义的bean引入别名。 这在大型系统中通常是这种情况，在大型系统中，配置在每个子系统之间分配，每个子系统都有自己的对象定义集。 在基于XML的配置元数据中，可以使用<alias />元素来完成此操作。 以下示例显示了如何执行此操作：\n\n<alias name="fromName" alias="toName"/>\n\n\n例如，子系统A的配置元数据可以通过subsystemA-dataSource的名称引用数据源。 子系统B的配置元数据可以通过subsystemB-dataSource的名称引用数据源。 组成使用这两个子系统的主应用程序时，主应用程序通过myApp-dataSource的名称引用数据源。 要使所有三个名称都引用相同的对象，可以将以下别名定义添加到配置元数据中：\n\n<alias name="myApp-dataSource" alias="subsystemA-dataSource"/>\n<alias name="myApp-dataSource" alias="subsystemB-dataSource"/>\n\n\n现在，每个组件和主应用程序都可以通过唯一的名称引用数据源，并且保证不会与任何其他定义(有效地创建一个名称空间)冲突，但它们引用的是同一个bean。\n\n> 如果使用Javaconfiguration，则@Bean注解可用于提供别名。\n\n\n# 1.3.2. 实例化Beans\n\nbean定义本质上是创建一个或多个对象的方法。当被请求时，容器查看指定bean的方法，并使用该bean定义封装的配置元数据创建(或获取)实际对象。\n\n如果使用基于XML的配置元数据，则在<bean />元素的class属性中指定要实例化的对象的类型（或类）。 这个类属性（在内部是BeanDefinition实例的Class属性）通常是必需的。 （可以通过以下两种方式之一使用Class属性：\n\n * 通常，在容器本身通过反射性地调用其构造函数直接创建Bean的情况下，指定要构造的Bean类，这在某种程度上等同于使用new运算符的Java代码。\n\n * 要指定包含用于创建对象的静态工厂方法的实际类，在不太常见的情况下，容器将在类上调用静态工厂方法以创建Bean。 从静态工厂方法的调用返回的对象类型可以是同一类，也可以是完全不同的另一类。\n\n> 如果要为静态内部类配置Bean定义，则必须使用内部类的二进制名称。例如，如果您在com.example包中有一个名为SomeThing的类，并且此SomeThing类具有一个名为OtherThing的静态内部类，则bean定义上的class属性的值为com.example.SomeThing $ OtherThing。请注意，名称中使用$字符将内部类的类名与外部类名分开。\n\n# 构造器实例化\n\n当通过构造方法创建一个bean时，所有普通类都可以被Spring使用并兼容。 也就是说，正在开发的类不需要实现任何特定的接口或以特定的方式进行编码。 只需指定bean类就足够了。 但是，根据您用于该特定bean的IoC的类型，您可能需要一个默认（空）构造函数。\n\nSpring IoC容器几乎可以管理您要管理的任何类。 它不仅限于管理真正的JavaBean。 大多数Spring用户更喜欢实际的JavaBean，它仅具有默认（无参数）构造函数，并具有根据容器中的属性构造的适当setter和getter。 您还可以在容器中具有更多非bean规范的类。 例如，如果您需要使用绝对不符合JavaBean规范的旧式连接池，则Spring也可以对其进行管理。\n\n# 静态工厂实例化\n\n定义使用静态工厂方法创建的bean时，请使用class属性指定包含静态工厂方法的类，并使用名为factory-method的属性指定工厂方法本身的名称。 您应该能够调用此方法（使用可选参数，如稍后所述）并返回一个活动对象，该对象随后将被视为已通过构造函数创建。 这种bean定义的一种用法是在旧版代码中调用静态工厂。\n\n以下bean定义指定通过调用工厂方法来创建bean。 该定义不指定返回对象的类型（类），而仅指定包含工厂方法的类。 在此示例中，createInstance（）方法必须是静态方法。 以下示例显示如何指定工厂方法：\n\n<bean id="clientService"\n    class="examples.ClientService"\n    factory-method="createInstance"/>\n\n\n以下示例显示了可与前面的bean定义一起使用的类：\n\npublic class ClientService {\n    private static ClientService clientService = new ClientService();\n    private ClientService() {}\n\n    public static ClientService createInstance() {\n        return clientService;\n    }\n}\n\n\n# 实例工厂实例化\n\n类似于通过静态工厂方法进行实例化，使用实例工厂方法进行实例化会从容器中调用现有bean的非静态方法来创建新bean。 要使用此机制，请将class属性保留为空，并在factory-bean属性中，在当前（或祖先）容器中指定包含要创建该对象的实例方法的bean的名称。 使用factory-method属性设置工厂方法本身的名称。 以下示例显示了如何配置此类Bean：\n\n\x3c!-- the factory bean, which contains a method called createInstance() --\x3e\n<bean id="serviceLocator" class="examples.DefaultServiceLocator">\n    \x3c!-- inject any dependencies required by this locator bean --\x3e\n</bean>\n\n\x3c!-- the bean to be created via the factory bean --\x3e\n<bean id="clientService"\n    factory-bean="serviceLocator"\n    factory-method="createClientServiceInstance"/>\n\n\npublic class DefaultServiceLocator {\n\n    private static ClientService clientService = new ClientServiceImpl();\n\n    public ClientService createClientServiceInstance() {\n        return clientService;\n    }\n}\n\n\n一个工厂类也可以包含一个以上的工厂方法，如以下示例所示：\n\n<bean id="serviceLocator" class="examples.DefaultServiceLocator">\n    \x3c!-- inject any dependencies required by this locator bean --\x3e\n</bean>\n\n<bean id="clientService"\n    factory-bean="serviceLocator"\n    factory-method="createClientServiceInstance"/>\n\n<bean id="accountService"\n    factory-bean="serviceLocator"\n    factory-method="createAccountServiceInstance"/>\n\n\npublic class DefaultServiceLocator {\n\n    private static ClientService clientService = new ClientServiceImpl();\n\n    private static AccountService accountService = new AccountServiceImpl();\n\n    public ClientService createClientServiceInstance() {\n        return clientService;\n    }\n\n    public AccountService createAccountServiceInstance() {\n        return accountService;\n    }\n}\n\n\n这种方法表明，工厂Bean本身可以通过依赖项注入（DI）进行管理和配置。\n\n> 在Spring文档中，“ factory bean”是指在Spring容器中配置并通过实例或静态工厂方法创建对象的bean。 相比之下，FactoryBean（注意大小写）是指特定于Spring的FactoryBean实现类。\n\n# 确定Bean的运行时类型\n\n确定特定bean的运行时类型并非易事。 Bean元数据定义中的指定类只是初始类引用，可能与声明的工厂方法结合使用，或者是FactoryBean类，这可能导致Bean的运行时类型不同，或者在实例级工厂方法（通过指定的factory-bean名称解析）的情况下完全不进行设置 。 此外，AOP代理可以使用基于接口的代理包装bean实例，而目标Bean的实际类型（仅是其实现的接口）的暴露程度有限。\n\n找出特定bean的实际运行时类型的推荐方法是对指定bean名称的BeanFactory.getType调用。 这考虑了上述所有情况，并返回了针对相同bean名称的BeanFactory.getBean调用将返回的对象的类型。\n\n\n# 1.4. 依赖Dependencies\n\n典型的企业应用程序不包含单个对象(或Spring术语中的bean)。即使是最简单的应用程序也有几个对象一起工作，以表示最终用户认为一致的应用程序。下一节将解释如何从定义大量独立的bean定义过渡到一个完全实现的应用程序，在该应用程序中，对象相互协作以实现目标。\n\n\n# 1.4.1. 依赖注入\n\n依赖注入（DI）是一个过程，在这个过程中，对象仅通过构造函数参数、工厂方法的参数，或者在对象实例被构造或从工厂方法返回后设置的属性来定义它们的依赖项(即与它们一起工作的其他对象)。 然后，容器在创建bean时注入那些依赖项。 从根本上讲，此过程是通过使用类的直接构造或服务定位器模式来控制bean自身依赖的实例或位置的bean创建的逆过程（因此称为Control Inversion-控制反转）\n\n使用DI原则后，代码更加清晰，当提供对象的依赖关系时，解耦会更加有效。对象不查找它的依赖项，也不知道依赖项的位置或类。因此，您的类变得更容易测试，特别是当依赖关系在接口或抽象基类上时，这些依赖关系允许在单元测试中使用stub或mock 实现。\n\n依赖注入有两种主要的变体:基于构造函数的依赖注入和基于setter的依赖注入。\n\n# 构造器注入\n\n基于构造函数的DI是通过容器调用具有多个参数的构造函数来完成的，每个参数表示一个依赖项。 调用带有特定参数的静态工厂方法来构造Bean几乎是等效的，并且本次讨论将构造函数和静态工厂方法的参数视为类似。 以下示例显示了只能通过构造函数注入进行依赖项注入的类：\n\npublic class SimpleMovieLister {\n\n    // the SimpleMovieLister has a dependency on a MovieFinder\n    private MovieFinder movieFinder;\n\n    // a constructor so that the Spring container can inject a MovieFinder\n    public SimpleMovieLister(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\t/*这里的MovieFinder需由Ioc容器管理；若有多个构造器的话，需要注意是否正确使用，可参考\n      https://blog.csdn.net/qq_41737716/article/details/85596817*/\n    // business logic that actually uses the injected MovieFinder is omitted...\n}\n\n\n注意，该类没有什么特别的。 它是一个POJO，不依赖于特定于容器的接口，基类或注解。\n\n构造器参数解析\n\n构造函数参数解析匹配通过使用参数的类型进行。 如果Bean定义的构造函数参数中没有潜在的歧义，则在实例化Bean时，在Bean定义中定义构造函数参数的顺序就是将这些参数提供给适当的构造函数的顺序。 考虑以下类：\n\npackage x.y;\n\npublic class ThingOne {\n\n    public ThingOne(ThingTwo thingTwo, ThingThree thingThree) {\n        // ...\n    }\n}\n\n\n假设ThingTwo和ThingThree类没有通过继承关联，则不存在潜在的歧义。 因此，以下配置可以正常运行，并且您无需在<constructor-arg />元素中显式指定构造函数参数索引或类型。\n\n<beans>\n    <bean id="beanOne" class="x.y.ThingOne">\n        <constructor-arg ref="beanTwo"/>\n        <constructor-arg ref="beanThree"/>\n    </bean>\n\n    <bean id="beanTwo" class="x.y.ThingTwo"/>\n\n    <bean id="beanThree" class="x.y.ThingThree"/>\n</beans>\n\n\n当引用另一个bean时，类型是已知的，并且可以发生匹配（与前面的示例一样）。 当使用简单类型（例如<value> true </value>）时，Spring无法确定值的类型，因此在没有指示的情况下无法按类型进行匹配。 考虑以下类别：\n\npackage examples;\n\npublic class ExampleBean {\n\n    // Number of years to calculate the Ultimate Answer\n    private int years;\n\n    // The Answer to Life, the Universe, and Everything\n    private String ultimateAnswer;\n\n    public ExampleBean(int years, String ultimateAnswer) {\n        this.years = years;\n        this.ultimateAnswer = ultimateAnswer;\n    }\n}\n\n\n构造器参数类型匹配\n\n在上述情况下，如果通过使用type属性显式指定构造函数参数的类型，则容器可以使用简单类型的类型匹配。 如下例所示：\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg type="int" value="7500000"/>\n    <constructor-arg type="java.lang.String" value="42"/>\n</bean>\n\n\n构造器参数索引\n\n您可以使用index属性来显式指定构造函数参数的索引，如以下示例所示：\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg index="0" value="7500000"/>\n    <constructor-arg index="1" value="42"/>\n</bean>\n\n\n除了解决多个简单值的歧义之外，指定索引还可以解决构造函数有两个相同类型的参数的歧义。\n\n> 索引从0开始。\n\n构造器参数名\n\n还可以使用构造函数参数名来消除值的歧义，如下面的示例所示\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg name="years" value="7500000"/>\n    <constructor-arg name="ultimateAnswer" value="42"/>\n</bean>\n\n\n请记住，要使其能够开箱即用，您的代码必须在编译时启用debug标志，以便Spring可以从构造函数查找参数名。如果您不能或不希望用debug标志编译您的代码，您可以使用@ConstructorProperties JDK注解来显式地命名您的构造函数参数。示例类如下所示\n\npackage examples;\n\npublic class ExampleBean {\n\n    // Fields omitted\n\n    @ConstructorProperties({"years", "ultimateAnswer"})\n    public ExampleBean(int years, String ultimateAnswer) {\n        this.years = years;\n        this.ultimateAnswer = ultimateAnswer;\n    }\n}\n\n\n# setter注入\n\n基于setter的DI是由容器在调用无参数构造函数或无参数静态工厂方法来实例化bean之后再调用bean上的setter方法来实现的。\n\n下面的示例显示了一个只能通过使用纯setter注入来注入依赖项的类。这个类是传统的Java。它是一个不依赖于容器特定接口、基类或注解的POJO。\n\npublic class SimpleMovieLister {\n\n    // the SimpleMovieLister has a dependency on the MovieFinder\n    private MovieFinder movieFinder;\n\n    // a setter method so that the Spring container can inject a MovieFinder\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // business logic that actually uses the injected MovieFinder is omitted...\n}\n\n\nApplicationContext支持它管理的bean的基于构造函数和基于setter的DI。 在已经通过构造函数方法注入了某些依赖项之后，它还支持基于setter的DI。 您可以以BeanDefinition的形式配置依赖项，并与PropertyEditor实例结合使用，以将属性从一种格式转换为另一种格式。 但是，大多数Spring用户并不直接（即以编程方式）使用这些类，而是使用XML bean定义，带注解的组件（即以@ Component，@ Controller等进行注解的类）或@Bean方法来处理这些类。 基于Java的@Configuration类。 然后将它们在内部转换为BeanDefinition实例，并用于加载整个Spring IoC容器实例。\n\n> 由于可以混合使用基于构造函数的DI和基于setter的DI，因此将构造函数用于强制性依赖项并将setter方法或配置方法用于可选的依赖项是一个很好的经验。 注意，在setter方法上使用@Required批注可以使该属性成为必需的依赖项。 但是，最好使用带有参数的程序验证的构造函数注入。\n> \n> Spring团队通常提倡构造函数注入，因为它使您可以将应用程序组件实现为不可变对象，并确保所需的依赖项不为null。 此外，注入构造函数的组件始终以完全初始化的状态返回到客户端（调用）代码。 附带说明一下，构造器包含大量的参数是不好的代码，这表明该类可能承担了太多的职责，应进行重构以更好地解决关注点分离问题。\n> \n> Setter注入主要应仅用于可以在类中分配合理的默认值的可选依赖项。 否则，必须在代码使用依赖项的任何地方执行非空检查。 setter注入的一个好处是，setter方法使该类的对象在以后可以重新配置或重新注入。 因此，通过JMX MBean进行管理是用于setter注入的典型用例。\n> \n> 使用对特定类最有意义的DI。 有时，在处理您没有源代码的第三方类时，将为您做出选择。 例如，如果第三方类未公开任何setter方法，则构造函数注入可能是DI的唯一可用形式。\n\n# 依赖解析过程\n\n容器按如下方式执行bean依赖项解析：\n\n * 使用描述所有bean的配置元数据创建和初始化ApplicationContext。 可以通过XML，Java代码或注解指定配置元数据。\n\n * 对于每个bean，它的依赖关系都以属性、构造函数参数或静态工厂方法的参数的形式表示(如果您使用该方法而不是普通的构造函数)。当实际创建bean时，将向bean提供这些依赖项。\n\n * 每个属性或构造函数参数都是要设置的实参，或者是对容器中另一个bean的引用。\n\n * 作为值的每个属性或构造函数参数都将从其指定的格式转换为该属性或构造函数参数的实际类型。默认情况下，Spring可以将以字符串格式提供的值转换为所有内置类型，比如int、long、string、boolean等等。\n\n在创建容器时，Spring容器会验证每个bean的配置。 但是，在实际创建Bean之前，不会设置Bean属性本身。 创建容器时，将创建具有单例作用域并设置为预先实例化（默认）的Bean。 作用域在Bean作用域中定义。 否则，仅在请求时才创建Bean。 创建和分配bean的依赖关系及其依赖关系（依此类推）时，创建bean可能会导致创建一个bean图。 请注意，这些依赖项之间的解析不匹配可能会在后期出现，即在第一次创建受影响的bean时。\n\n> 如果主要使用构造函数注入，则可能会创建无法解析的循环依赖方案。\n> \n> 例如：A类通过构造函数注入需要B类的实例，而B类通过构造函数注入需要A类的实例。 如果您为将类A和B相互注入而配置了bean，则Spring IoC容器会在运行时检测到此循环引用，并抛出BeanCurrentlyInCreationException。\n> \n> 一种可能的解决方案是编辑某些类的源代码，这些类的源代码由setter而不是构造函数来配置。 或者，避免构造函数注入，而仅使用setter注入。 换句话说，尽管不建议这样做，但是您可以使用setter注入配置循环依赖项。\n> \n> 与典型情况（没有循环依赖关系）不同，Bean A和Bean B之间的循环依赖关系迫使其中一个Bean在完全初始化之前被注入另一个Bean（经典的“鸡与蛋”场景）。\n\n通常，您可以信任Spring做正确的事。 它在容器加载时检测配置问题，例如对不存在的Bean的引用和循环依赖项。 Spring设置属性并尽可能晚地解决依赖关系--在实际创建bean时。 这意味着，如果创建对象或其依赖项之一有问题，则正确加载了Spring的容器以后可以在您请求对象时抛出异常-例如，bean会因不存在或无效属性而抛出异常。这样可能会延迟某些配置问题的可见性，所以这就是为什么默认情况下ApplicationContext实现会预先实例化单例bean的原因。 在实际需要这些bean之前需要花一些前期时间和内存来创建它们，您会在创建ApplicationContext时发现配置问题，而不是稍后。 您仍然可以覆盖此默认行为，以便单例bean延迟初始化，而不是预先实例化。\n\n如果不存在循环依赖关系，则在将一个或多个协作Bean注入到从属Bean中时，每个协作Bean在注入到从属Bean中之前都已完全配置。 这意味着，如果bean A依赖于bean B，则Spring IoC容器会在对bean A调用setter方法之前完全配置beanB。换句话说，被实例化的bean（如果它不是预先实例化的单例） ），它的依赖项被设置，并调用了相关的生命周期方法（例如已配置的init方法或InitializingBean回调方法）。\n\n# 依赖注入实例\n\n下面的示例为基于setter的DI使用基于xml的配置元数据。Spring XML配置文件的一小部分指定了一些bean定义，如下所示\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    \x3c!-- setter injection using the nested ref element --\x3e\n    <property name="beanOne">\n        <ref bean="anotherExampleBean"/>\n    </property>\n\n    \x3c!-- setter injection using the neater ref attribute --\x3e\n    <property name="beanTwo" ref="yetAnotherBean"/>\n    <property name="integerProperty" value="1"/>\n</bean>\n\n<bean id="anotherExampleBean" class="examples.AnotherBean"/>\n<bean id="yetAnotherBean" class="examples.YetAnotherBean"/>\n\n\npublic class ExampleBean {\n\n    private AnotherBean beanOne;\n\n    private YetAnotherBean beanTwo;\n\n    private int i;\n\n    public void setBeanOne(AnotherBean beanOne) {\n        this.beanOne = beanOne;\n    }\n\n    public void setBeanTwo(YetAnotherBean beanTwo) {\n        this.beanTwo = beanTwo;\n    }\n\n    public void setIntegerProperty(int i) {\n        this.i = i;\n    }\n}\n\n\n在前面的示例中，将setter声明为与XML文件中指定的属性匹配。下面的示例使用基于构造函数的DI\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    \x3c!-- constructor injection using the nested ref element --\x3e\n    <constructor-arg>\n        <ref bean="anotherExampleBean"/>\n    </constructor-arg>\n\n    \x3c!-- constructor injection using the neater ref attribute --\x3e\n    <constructor-arg ref="yetAnotherBean"/>\n\n    <constructor-arg type="int" value="1"/>\n</bean>\n\n<bean id="anotherExampleBean" class="examples.AnotherBean"/>\n<bean id="yetAnotherBean" class="examples.YetAnotherBean"/>\n\n\npublic class ExampleBean {\n\n    private AnotherBean beanOne;\n\n    private YetAnotherBean beanTwo;\n\n    private int i;\n\n    public ExampleBean(\n        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {\n        this.beanOne = anotherBean;\n        this.beanTwo = yetAnotherBean;\n        this.i = i;\n    }\n}\n\n\nbean定义中指定的构造函数参数用作ExampleBean构造函数的参数。\n\n现在考虑该示例的一个变体，在该变体中，不是使用构造函数，而是告诉Spring调用静态工厂方法以返回对象的实例：\n\n<bean id="exampleBean" class="examples.ExampleBean" factory-method="createInstance">\n    <constructor-arg ref="anotherExampleBean"/>\n    <constructor-arg ref="yetAnotherBean"/>\n    <constructor-arg value="1"/>\n</bean>\n\n<bean id="anotherExampleBean" class="examples.AnotherBean"/>\n<bean id="yetAnotherBean" class="examples.YetAnotherBean"/>\n\n\npublic class ExampleBean {\n\n    // a private constructor\n    private ExampleBean(...) {\n        ...\n    }\n\n    // a static factory method; the arguments to this method can be\n    // considered the dependencies of the bean that is returned,\n    // regardless of how those arguments are actually used.\n    public static ExampleBean createInstance (\n        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {\n\n        ExampleBean eb = new ExampleBean (...);\n        // some other operations...\n        return eb;\n    }\n}\n\n\n静态工厂方法的参数由<constructor-arg />元素提供，与实际使用构造函数的情况完全相同。 factory方法返回的类的类型不必与包含静态工厂方法的类的类型相同（尽管在此示例中是）。 实例（非静态）工厂方法可以以基本上相同的方式使用（除了使用factory-bean属性代替class属性之外），因此在此不讨论这些细节。\n\n\n# 1.4.2. 依赖配置详解\n\n如上一节所述，您可以将bean属性和构造器参数定义为对容器中其他bean（协作者）的引用或内联定义的值。 Spring的基于XML的配置元数据为达到此目的在其<property />和<constructor-arg />元素中支持子元素类型。\n\n# 直接值（原语，Strings等）\n\n<property />元素的value属性将属性或构造器参数指定为人类可读的字符串表示形式。 Spring的转换服务用于将这些值从字符串转换为属性或参数的实际类型。 以下示例显示了设置的各种值：\n\n<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">\n    \x3c!-- results in a setDriverClassName(String) call --\x3e\n    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>\n    <property name="url" value="jdbc:mysql://localhost:3306/mydb"/>\n    <property name="username" value="root"/>\n    <property name="password" value="misterkaoli"/>\n</bean>\n\n\n下面的示例使用p-namespace进行更简洁的XML配置\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n    https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"\n        destroy-method="close"\n        p:driverClassName="com.mysql.jdbc.Driver"\n        p:url="jdbc:mysql://localhost:3306/mydb"\n        p:username="root"\n        p:password="misterkaoli"/>\n\n</beans>\n\n\n前面的XML更简洁。 但是，除非在创建bean定义时使用支持自动属性补全的IDE（例如IntelliJ IDEA或Eclipse的Spring Tools），否则错误是在运行时而不是编码时发现的。 强烈建议您使用此类IDE帮助开发。\n\n您还可以配置java.util.Properties实例，如下所示：\n\n<bean id="mappings"\n    class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">\n\n    \x3c!-- typed as a java.util.Properties --\x3e\n    <property name="properties">\n        <value>\n            jdbc.driver.className=com.mysql.jdbc.Driver\n            jdbc.url=jdbc:mysql://localhost:3306/mydb\n        </value>\n    </property>\n</bean>\n\n\nSpring容器通过使用JavaBeans PropertyEditor机制将<value />元素内的文本转换为java.util.Properties实例。 这很方便，并且是Spring团队偏爱使用嵌套的<value />元素而不是value属性的几个地方之一。\n\nidref元素\n\nidref元素只是将容器中另一个bean的id（字符串值-不是引用）传递给<constructor-arg />或<property />元素的一种防错方法。 以下示例显示了如何使用它：\n\n<bean id="theTargetBean" class="..."/>\n\n<bean id="theClientBean" class="...">\n    <property name="targetName">\n        <idref bean="theTargetBean"/>\n    </property>\n</bean>\n\n\n前面的bean定义代码片段(在运行时)与下面的代码片段完全等价\n\n<bean id="theTargetBean" class="..." />\n\n<bean id="client" class="...">\n    <property name="targetName" value="theTargetBean"/>\n</bean>\n\n\n第一种形式优于第二种形式，因为使用idref标记可使容器在部署时验证所引用的名为bean的实际存在。 在第二个变体中，不对传递给客户端bean的targetName属性的值执行验证。 拼写错误仅在实际实例化客户端bean时才发现（最有可能导致致命的结果）。 如果客户端Bean是原型Bean，则可能在部署容器很久之后才发现此错误和所产生的异常。\n\n> 这里传的都是字面量，而不是bean引用，idref与value的区别只是前者会做校验。\n> \n> 在4.0 Bean XSD中不再支持idref元素上的local属性，因为它不再提供常规Bean引用上的值（这里不好理解，之前local属性的作用是：只能指定与当前配置的对象在同一个配置文件的对象定义的名称，所以这里认为5.3.2把这个属性废弃就行了）。 升级到4.0模式时，将现有的idref local属性更改为idref bean。\n\n<idref />元素带来价值的一个常见地方（至少在Spring 2.0之前的版本中）是在ProxyFactoryBean bean定义中配置AOP拦截器。 在指定拦截器名称时使用<idref />元素可防止您拼写错误的拦截器ID。\n\n# 引用其他Bean\n\nref元素是<constructor-arg />或<property />定义元素内的最后一个元素。 在这里，您将Bean的指定属性的值设置为对容器管理的另一个Bean（协作者）的引用。 引用的bean是要设置其属性的bean的依赖，并且在设置属性之前根据需要对其进行初始化。 （如果协作者是单例bean，则它可能已经由容器初始化了。）所有引用最终都是对另一个对象的引用。 作用于和验证取决于您是通过bean还是parent指定另一个对象的ID或名称。\n\n通过<ref />标记的bean属性指定目标bean是最通用的形式，并且允许创建对同一容器或父容器中任何bean的引用，而不管它是否在同一XML文件中。 bean属性的值可以与目标bean的id属性相同，也可以与目标bean的name属性中的值之一相同。 下面的示例演示如何使用ref元素：\n\n<ref bean="someBean"/>\n\n\n通过parent属性指定目标Bean将创建对当前容器的父容器中的Bean的引用。 parent属性的值可以与目标Bean的id属性或目标Bean的名称属性中的值之一相同。 目标Bean必须位于当前容器的父容器中。 在容器具有层次结构并且要包装一个与在父容器中已存在的bean具有相同名称的代理bean时，才应该使用parent属性。 以下清单显示了如何使用parent属性：\n\n\x3c!-- in the parent context --\x3e\n<bean id="accountService" class="com.something.SimpleAccountService">\n    \x3c!-- insert dependencies as required as here --\x3e\n</bean>\n\n\n\x3c!-- in the child (descendant) context --\x3e\n<bean id="accountService" \x3c!-- bean name is the same as the parent bean --\x3e\n    class="org.springframework.aop.framework.ProxyFactoryBean">\n    <property name="target">\n        <ref parent="accountService"/> \x3c!-- notice how we refer to the parent bean --\x3e\n    </property>\n    \x3c!-- insert other configuration and dependencies as required here --\x3e\n</bean>\n\n\n> ref元素的local属性在4.0 Bean XSD中不再受支持，因为它不再提供常规Bean引用上的值。 升级到4.0模式时，将现有的ref local更改为ref bean。\n\n# 内部Beans\n\n<property />或<constructor-arg />元素内的<bean />元素定义了一个内部bean，如以下示例所示：\n\n<bean id="outer" class="...">\n    \x3c!-- instead of using a reference to a target bean, simply define the target bean inline --\x3e\n    <property name="target">\n        <bean class="com.example.Person"> \x3c!-- this is the inner bean --\x3e\n            <property name="name" value="Fiona Apple"/>\n            <property name="age" value="25"/>\n        </bean>\n    </property>\n</bean>\n\n\n内部bean定义不需要定义ID或名称。 如果指定，则容器不使用该值作为标识符。 容器在创建时也会忽略scope标志，因为内部Bean始终是匿名的，并且始终与外部Bean一起创建。 不能独立访问内部bean，也不能将它们注入到协作bean中（除了封装的bean）。\n\n# 集合\n\n<list />，<set />，<map />和<props />元素分别设置Java集合类型的List，Set，Map和Properties的属性和参数。 以下示例显示了如何使用它们：\n\n<bean id="moreComplexObject" class="example.ComplexObject">\n    \x3c!-- results in a setAdminEmails(java.util.Properties) call --\x3e\n    <property name="adminEmails">\n        <props>\n            <prop key="administrator">administrator@example.org</prop>\n            <prop key="support">support@example.org</prop>\n            <prop key="development">development@example.org</prop>\n        </props>\n    </property>\n    \x3c!-- results in a setSomeList(java.util.List) call --\x3e\n    <property name="someList">\n        <list>\n            <value>a list element followed by a reference</value>\n            <ref bean="myDataSource" />\n        </list>\n    </property>\n    \x3c!-- results in a setSomeMap(java.util.Map) call --\x3e\n    <property name="someMap">\n        <map>\n            <entry key="an entry" value="just some string"/>\n            <entry key ="a ref" value-ref="myDataSource"/>\n        </map>\n    </property>\n    \x3c!-- results in a setSomeSet(java.util.Set) call --\x3e\n    <property name="someSet">\n        <set>\n            <value>just some string</value>\n            <ref bean="myDataSource" />\n        </set>\n    </property>\n</bean>\n\n\n其中，map的key或者value，或set的value，可以是以下任一元素：\n\nbean | ref | idref | list | set | map | props | value | null\n\n\n集合合并\n\nSpring容器还支持合并集合。 应用程序开发人员可以定义父<list />，<map />，<set />或<props />元素，并具有从父集合继承并覆盖值的子元素，，或。 也就是说，子集合的值是合并父集合和子集合的元素的结果，子集合的元素会覆盖父集合中指定的值。\n\n下面的示例演示了集合合并：\n\n<beans>\n    <bean id="parent" abstract="true" class="example.ComplexObject">\n        <property name="adminEmails">\n            <props>\n                <prop key="administrator">administrator@example.com</prop>\n                <prop key="support">support@example.com</prop>\n            </props>\n        </property>\n    </bean>\n    <bean id="child" parent="parent">\n        <property name="adminEmails">\n            \x3c!-- the merge is specified on the child collection definition --\x3e\n            <props merge="true">\n                <prop key="sales">sales@example.com</prop>\n                <prop key="support">support@example.co.uk</prop>\n            </props>\n        </property>\n    </bean>\n<beans>\n\n\n注意子bean定义的adminEmails属性的<props />元素上使用merge = true属性。 当子bean由容器解析并实例化后，生成的实例具有adminEmails Properties集合，其中包含将子bean的adminEmails集合与父bean的adminEmails集合合并的结果。 以下清单显示了结果：\n\nadministrator=administrator@example.com\nsales=sales@example.com\nsupport=support@example.co.uk\n\n\n子Properties集合的值集继承了父<props />的所有属性，子属性的support值覆盖了父集合中的值。\n\n此合并行为类似地适用于<list />，<map />和<set />集合类型。 在<list />元素的特定情况下，将维护与List集合类型关联的语义（即，值的有序集合的概念）。 父级的值先于子级列表的所有值。 对于Map，Set和Properties集合类型，不存在排序。 因此，对于容器内部使用的关联Map，Set和Properties实现类型的集合，没有有效的排序语义。\n\n集合合并的限制\n\n您不能合并不同的集合类型(如Map和List)。如果您尝试这样做，则会抛出适当的异常。必须在下层的继承的子集合定义上指定merge属性。在父集合定义上指定merge属性是多余的，并且不会导致所需的合并。\n\n强类型的集合\n\n随着Java 5中泛型类型的引入，您可以使用强类型集合。 也就是说，可以声明一个Collection类型，使其只能包含（例如）String元素。 如果使用Spring将强类型的Collection依赖注入到Bean中，则可以利用Spring的类型转换支持，以便在将强类型的Collection实例的元素添加到Bean中之前，先将其转换为适当的类型。 以下Java类和bean定义显示了如何执行此操作：\n\npublic class SomeClass {\n\n    private Map<String, Float> accounts;\n\n    public void setAccounts(Map<String, Float> accounts) {\n        this.accounts = accounts;\n    }\n}\n\n\n<beans>\n    <bean id="something" class="x.y.SomeClass">\n        <property name="accounts">\n            <map>\n                <entry key="one" value="9.99"/>\n                <entry key="two" value="2.75"/>\n                <entry key="six" value="3.99"/>\n            </map>\n        </property>\n    </bean>\n</beans>\n\n\n当准备注入something bean的accounts属性时，可以通过反射获得有关强类型Map <String，Float>的元素类型的泛型信息。 因此，Spring的类型转换基础架构将各种值元素识别为Float类型，并将字符串值（9.99、2.75和3.99）转换为实际的Float类型。\n\n# Null和空String\n\nSpring将属性之类的空参数视为空字符串。以下基于xml的配置元数据片段将email属性设置为空字符串值("")。\n\n<bean class="ExampleBean">\n    <property name="email" value=""/>\n</bean>\n\n\n等价于：\n\nexampleBean.setEmail("");\n\n\n<null />元素处理空值。 以下清单显示了一个示例：\n\n<bean class="ExampleBean">\n    <property name="email">\n        <null/>\n    </property>\n</bean>\n\n\n等价于：\n\nexampleBean.setEmail(null);\n\n\n# p-namespace\n\n通过p-namespace，您可以使用bean元素的属性（而不是嵌套的<property />元素）来描述协作bean的属性值，或同时使用这两者。\n\nSpring支持带有命名空间的可扩展配置格式，这些名称空间基于XML Schema定义。 本章讨论的bean配置格式在XML Schema文档中定义。 但是，p-namespace未在XSD文件中定义，仅存在于Spring Core中。\n\n下面的示例显示了两个解析到相同结果的XML片段(第一个使用标准XML格式，第二个使用p-namespace)：\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean name="classic" class="com.example.ExampleBean">\n        <property name="email" value="someone@somewhere.com"/>\n    </bean>\n\n    <bean name="p-namespace" class="com.example.ExampleBean"\n        p:email="someone@somewhere.com"/>\n</beans>\n\n\n该示例显示了bean定义中的p-namespace中的一个名为email的属性。这告诉Spring包含一个属性声明。如前所述，p-namespace没有schema 定义，因此可以将属性的名称设置为属性名。\n\n下一个示例包括另外两个bean定义，它们都引用了另一个bean：\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean name="john-classic" class="com.example.Person">\n        <property name="name" value="John Doe"/>\n        <property name="spouse" ref="jane"/>\n    </bean>\n\n    <bean name="john-modern"\n        class="com.example.Person"\n        p:name="John Doe"\n        p:spouse-ref="jane"/>\n\n    <bean name="jane" class="com.example.Person">\n        <property name="name" value="Jane Doe"/>\n    </bean>\n</beans>\n\n\n此示例不仅包括使用p-namespace的属性值，而且还使用特殊格式来声明属性引用。 第一个bean定义使用<property name="spouse" ref="jane" />创建从bean john到bean jane的引用，而第二个bean定义使用p:spouse-ref="jane"属性做相同的事情。 在这种情况下，spouse是属性名称，而-ref部分表示这不是一个直接值，而是对另一个bean的引用。\n\n> p-namespace不像标准XML格式那么灵活。例如，声明属性引用的格式与以Ref结尾的属性发生冲突(我验证仍能正确解析)，而标准XML格式没有。我们建议您谨慎地选择自己的方法，并将其告知团队成员，以避免生成同时使用这三种方法的XML文档。\n\n# c-namespace\n\n与p-namespace的XML快捷方式类似，Spring 3.1中引入的c-namespace允许内联属性来配置构造函数参数，而不是嵌套的constructor-arg元素。\n\n下面的示例使用c:namespace来做和基于构造器的依赖注入相同的事情\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:c="http://www.springframework.org/schema/c"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="beanTwo" class="x.y.ThingTwo"/>\n    <bean id="beanThree" class="x.y.ThingThree"/>\n\n    \x3c!-- traditional declaration with optional argument names --\x3e\n    <bean id="beanOne" class="x.y.ThingOne">\n        <constructor-arg name="thingTwo" ref="beanTwo"/>\n        <constructor-arg name="thingThree" ref="beanThree"/>\n        <constructor-arg name="email" value="something@somewhere.com"/>\n    </bean>\n\n    \x3c!-- c-namespace declaration with argument names --\x3e\n    <bean id="beanOne" class="x.y.ThingOne" c:thingTwo-ref="beanTwo"\n        c:thingThree-ref="beanThree" c:email="something@somewhere.com"/>\n\n</beans>\n\n\nc:命名空间使用与p: 相同的约定(bean引用的末尾是-ref)，通过它们的名称设置构造器参数。类似地，它需要在XML文件中声明，即使它不是在XSD模式中定义的(它存在于Spring Core中)。\n\n对于极少数情况下无法使用构造函数参数名称的情况（通常，如果字节码是在没有调试信息的情况下编译的），则可以使用参数索引，如下所示：\n\n\x3c!-- c-namespace index declaration --\x3e\n<bean id="beanOne" class="x.y.ThingOne" c:_0-ref="beanTwo" c:_1-ref="beanThree"\n    c:_2="something@somewhere.com"/>\n\n\n> 由于XML语法的原因，索引表示法需要有前导符号 "_"，因为XML属性名不能以数字开头(尽管有些ide允许)。<constructor-arg>元素也可以使用相应的索引表示法，但不常用，因为在那里声明的普通顺序通常就足够了。\n\n# 复合属性名\n\n在设置bean属性时，可以使用复合或嵌套属性名，只要路径的所有组件(最终属性名除外)都不是null的。考虑下面的bean定义\n\n<bean id="something" class="things.ThingOne">\n    <property name="fred.bob.sammy" value="123" />\n</bean>\n\n\nsomething bean有一个fred属性，它有一个bob属性，bob还有一个sammy属性，最后的sammy属性被设置为值123。为了正常解析，在构造bean之后，something的fred属性和fred的bob属性不能为空。否则，抛出NullPointerException。\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n<bean id="student" class="pre.chl.spring.core.Student" p:ref-ref="courseRef">\n    \x3c!--如果把下面这行注释了就会抛异常NullValueInNestedPathException\n\t如果不注释，score最后的值也是99，可见p命名空间和原始标签混用可能会出现冲\t突，应该只会选原始标签元素去解析--\x3e\n    \x3c!--<property name="ref" ref="courseRef"/>--\x3e\n    <property name="ref.score" value="99"/>\n</bean>\n    <bean id="courseRef" class="pre.chl.spring.core.Course" p:score="100"/>\n</beans>\n\n\n\n# 1.4.3. depends-on\n\n如果一个bean是另一个bean的依赖项，则通常意味着将一个bean设置为另一个bean的属性。 通常，您可以使用基于XML的配置元数据中的<ref />元素来完成此操作。 但是，有时bean之间的依赖不太直接。 一个例子是当要触发类中的静态初始化器的时候，例如数据库驱动程序注册。 depends-on可以显式地强制初始化一个或多个使用该元素引用的bean。 下面的示例使用depends-on属性来表示对单例bean的依赖关系：\n\n<bean id="beanOne" class="ExampleBean" depends-on="manager"/>\n<bean id="manager" class="ManagerBean" />\n\n\n要表达对多个bean的依赖关系，请提供一个bean名称的列表作为depends-on属性的值（逗号，空格和分号都是合法 的分隔符）：\n\n<bean id="beanOne" class="ExampleBean" depends-on="manager,accountDao">\n    <property name="manager" ref="manager" />\n</bean>\n\n<bean id="manager" class="ManagerBean" />\n<bean id="accountDao" class="x.y.jdbc.JdbcAccountDao" />\n\n\n> depends-on既可以指定初始化时依赖项，在单例bean的情况下，也可以指定相应的销毁时依赖项。在销毁给定bean本身之前，首先销毁 depends-on的bean。因此， depends-on还可以控制关闭顺序。\n\n\n# 1.4.4. 懒加载Beans\n\n默认情况下，作为初始化过程的一部分，ApplicationContext实现会尽早创建和配置所有单例bean。 通常，这种预初始化是可取的，因为与数小时甚至数天后相比，会立即发现配置或环境参数中的错误。 如果您不希望这样做，则可以通过将bean定义标记为延迟初始化来阻止单例bean的预实例化。 延迟初始化的bean告诉IoC容器在首次请求时（而不是在启动时）才创建一个bean实例。\n\n在XML中，此行为由<bean />元素上的lazy-init属性控制，如以下示例所示：\n\n<bean id="lazy" class="com.something.ExpensiveToCreateBean" lazy-init="true"/>\n<bean name="not.lazy" class="com.something.AnotherBean"/>\n\n\nApplicationContext使用上述配置时，当ApplicationContext启动，lazy bean不会立即预实例化，not.lazy bean被尽早地预实例化。\n\n但是，当延迟初始化的bean是未延迟初始化的单例bean的依赖项时，ApplicationContext会在启动时创建延迟初始化的bean，因为它必须满足单例的依赖关系。 延迟初始化的bean被注入到其他未延迟初始化的单例bean中。\n\n您还可以使用<beans />元素上的default-lazy-init属性在容器级别控制延迟初始化，如以下示例所示：\n\n<beans default-lazy-init="true">\n    \x3c!-- no beans will be pre-instantiated... --\x3e\n</beans>\n\n\n\n# 1.4.5. 自动装配协作者\n\nSpring容器可以自动装配协作bean之间的关系。您可以通过检查ApplicationContext的内容，让Spring为您的bean自动解析协作者(其他bean)。自动装配具有以下优点：\n\n * 自动装配可以显著减少指定属性或构造器参数的需要。(本章其他地方讨论的其他机制，比如bean模板，在这方面也很有价值。)\n\n * 随着对象的更新，自动装配可以更新配置。 例如，如果需要将依赖项添加到类中，则无需修改配置即可自动满足该依赖项。 因此，自动装配在开发过程中特别有用，而不必否定在代码库变得更稳定时切换到显式装配的选择。\n\n使用基于XML的配置元数据时（请参阅“依赖注入”），可以使用<bean />元素的autowire属性为bean定义指定自动装配模式。 自动装配功能具有四种模式。 您可以为每个bean指定自动装配，并选择要自动装配的模式。 下表描述了四种自动装配模式：\n\nMODE          EXPLANATION\nno            (默认)不自动装配。Bean引用必须由ref元素定义。对于较大的部署，不建议更改默认设置，因为显式地指定协作者可以提供更好的控制和透明度。在某种程度上，它记录了系统的结构。\nbyName        按属性名称自动装配。 Spring查找与需要自动装配的属性同名的bean。\n              例如，如果一个bean定义被设置为按名称自动装配，并且包含一个master属性（即，它具有setMaster（..）方法），那么Spring将查找一个名为master的bean定义并使用它来设置该属性。\nbyType        如果容器中恰好存在该属性类型的一个bean，则自动装配该属性。如果存在多个，将抛出一个致命异常，这表明您不能对该bean使用byType自动装配。如果没有匹配的bean，则什么也不会发生(属性没有设置)。\nconstructor   与byType类似，但适用于构造函数参数。 如果容器中不存在构造函数参数类型的一个bean，则将引发致命错误。\n\n使用byType或构造器自动装配模式，您可以装配数组和集合类。 在这种情况下，将提供容器中与预期类型匹配的所有自动装配候选，以满足依赖。 如果期望的key类型为String，则可以自动装配强类型Map实例。 自动装配的Map实例的值包括与期望类型匹配的所有bean实例，并且Map实例的key包含相应的bean名称。\n\n# 自动装配的局限和缺点\n\n当在项目中一致使用自动装配时，自动装配效果最佳。 如果不全部使用自动装配，则可能会使开发人员使用自动装配仅来装配一个或两个Bean定义而感到困惑。\n\n考虑自动装配的局限性和缺点：\n\n * property和constructor-arg设置中的显式依赖总是覆盖自动装配。您不能自动装配简单的属性，如原语、Strings和Classes(以及这些简单属性的数组)。这种限制是由设计造成的。\n\n * 自动装配不如显示装配严格。尽管如此，正如前面的表中所指出的那样，在出现可能产生意外结果的歧义时，Spring会谨慎地避免猜测。spring管理的对象之间的关系不再显式地记录。\n\n * 从Spring容器生成文档的工具可能无法使用装配信息。\n\n * 容器内的多个bean定义可能与要自动装配的setter方法或构造器参数指定的类型匹配。 对于数组，集合或Map实例，这不一定是问题。 但是，对于需要单个值的依赖项，不会随便解决此歧义。 如果没有唯一的bean定义可用，则会引发异常。\n\n在后一种情况下，您有几种选择：\n\n * 使用显示装配而不是自动装配\n\n * 通过将其bean的autowire-candidate属性设置为false，避免自动装配bean，如下一节所述。\n\n * 通过将其<bean />元素的primary属性设置为true，将定义的单个bean指定为主要候选对象。\n\n * 实现基于注解的配置提供的更细粒度的控制。\n\n# 从自动装配中排除Bean\n\n在每个bean的基础上，您可以从自动装配中排除一个bean。 使用Spring的XML格式，将<bean />元素的autowire-candidate属性设置为false。 容器使特定的bean对自动装配基础架构不可用（包括注解式的配置，例如@Autowired）。\n\n> autowire-candidate属性被设计为只影响基于类型的自动装配。它不影响通过名称进行的显式引用，即使指定的bean没有被标记为自动装配候选对象，也会解析该引用。因此，如果名称匹配，按名称自动装配仍然会注入一个bean。\n\n您还可以基于与Bean名称的模式匹配来限制自动装配候选项。 顶级<beans />元素在其default-autowire-candidates属性中接受一个或多个模式。 例如，要将自动装配候选状态限制为名称以Repository结尾的任何bean，请提供* Repository值。 要提供多种模式，请在以逗号分隔的列表中定义它们。 Bean定义的autowire-candidate属性的显式值true或false始终优先。 对于此类bean，模式匹配规则不适用。\n\n这些技术对于那些您不希望通过自动装配被注入到其他bean中的bean非常有用。这并不意味着不能使用自动装配来配置被排除的bean本身。相反，bean本身并不是自动装配其他bean的候选对象。\n\n\n# 1.4.6. 方法注入\n\n在大多数应用场景中，容器中的大多数bean是单例的。 当单例Bean需要与另一个单例Bean协作或非单例Bean需要与另一个非单例Bean协作时，通常可以通过将一个Bean定义为另一个Bean的属性来处理依赖。 当bean的生命周期不同时会出现问题。 假设单例bean A可能需要使用非单例（原型）bean B，也许是在A的每个方法调用时使用的。容器仅创建一次单例bean A，因此只有一次机会来设置属性。 每次需要一个bean B时，容器都无法为bean A提供一个新的bean B实例。\n\n一个解决方案是放弃一些控制反转。您可以通过实现ApplicationContextAware接口使bean A感知到容器，并在bean A每次需要bean B实例时向容器发出getBean(“B”)调用来获得(通常是新的)。下面的示例演示了这种方法：\n\n// a class that uses a stateful Command-style class to perform some processing\npackage fiona.apple;\n\n// Spring-API imports\nimport org.springframework.beans.BeansException;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.ApplicationContextAware;\n\npublic class CommandManager implements ApplicationContextAware {\n\n    private ApplicationContext applicationContext;\n\n    public Object process(Map commandState) {\n        // grab a new instance of the appropriate Command\n        Command command = createCommand();\n        // set the state on the (hopefully brand new) Command instance\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    protected Command createCommand() {\n        // notice the Spring API dependency!\n        return this.applicationContext.getBean("command", Command.class);\n    }\n\n    public void setApplicationContext(\n            ApplicationContext applicationContext) throws BeansException {\n        this.applicationContext = applicationContext;\n    }\n}\n\n\n前面的情况是不可取的，因为业务代码能够感知Spring框架并与之耦合。方法注入是Spring IoC容器的一个高级特性，它让您很好地处理这个用例。\n\n> 您可以在这篇博客文章中阅读更多关于方法注入的探讨。\n\n# LookUp方法注入\n\nLookup 方法注入是容器重写容器管理的Bean上的方法并返回容器中另一个Bean的功能。 查找通常涉及原型bean，如上一节中所述。 Spring框架通过使用CGLIB库中的字节码生成功能来动态生成覆盖该方法的子类，从而实现此方法注入。\n\n>  * 为了使此动态子类起作用，Spring Bean容器子类的类型也不能是final，而要覆盖的方法也不能是final。\n> \n>  * 对具有抽象方法的类进行单元测试需要您自己对该类进行子类化，并提供该抽象方法的stub实现。\n> \n>  * 组件扫描也需要具体的方法，这需要具体的类。\n> \n>  * 另一个关键限制是，查找方法不适用于工厂方法，尤其不适用于配置类中的@Bean方法，因为在这种情况下，容器不负责创建实例，因此无法创建运行时生成的 动态子类。\n\n对于前面的代码片段中的CommandManager类，Spring容器动态地重写createCommand（）方法。 如重做的示例所示，CommandManager类没有任何Spring依赖项：\n\npackage fiona.apple;\n\n// no more Spring imports!\n\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        // grab a new instance of the appropriate Command interface\n        Command command = createCommand();\n        // set the state on the (hopefully brand new) Command instance\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    // okay... but where is the implementation of this method?\n    protected abstract Command createCommand();\n}\n\n\n在包含要注入的方法的客户端类（在本例中为CommandManager）中，要注入的方法需要以下形式的签名：\n\n<public|protected> [abstract] <return-type> theMethodName(no-arguments);\n\n\n如果方法是抽象的，则动态生成的子类实现该方法。否则，动态生成的子类会覆盖在原始类中定义的具体方法。考虑以下示例:\n\n\x3c!-- a stateful bean deployed as a prototype (non-singleton) --\x3e\n<bean id="myCommand" class="fiona.apple.AsyncCommand" scope="prototype">\n    \x3c!-- inject dependencies here as required --\x3e\n</bean>\n\n\x3c!-- commandProcessor uses statefulCommandHelper --\x3e\n<bean id="commandManager" class="fiona.apple.CommandManager">\n    <lookup-method name="createCommand" bean="myCommand"/>\n</bean>\n\n\nid为commandManager的bean在需要myCommand bean的新实例时调用自己的createCommand()方法。如果确实需要部署myCommand bean，那么必须小心地将其作为原型部署。如果是单例，则每次返回myCommand bean的相同实例。\n\n另外，在基于注解的组件模式中，您可以通过@Lookup注解声明一个查找方法，如下面的示例所示：\n\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        Command command = createCommand();\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    @Lookup("myCommand")\n    protected abstract Command createCommand();\n}\n\n\n或者，更常用的是，您可以依赖于根据查找方法声明的返回类型解析目标bean\n\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        MyCommand command = createCommand();\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    @Lookup\n    protected abstract MyCommand createCommand();\n}\n\n\n请注意，通常应使用具体的stub实现声明此类带注解的查找方法，以使其与Spring的组件扫描规则（默认情况下抽象类会被忽略）兼容。 此限制不适用于显式注册或显式导入的Bean类。\n\n> 访问作用域不同的目标bean的另一种方法是ObjectFactory / Provider注入点。\n> \n> ServiceLocatorFactoryBean（在org.springframework.beans.factory.config包中）也很有用。\n\n# 任意方法替换\n\n与查找方法注入相比，方法注入的一种不太有用的形式是能够用另一种方法实现替换托管bean中的任意方法。 您可以放心地跳过本节的其余部分，直到您真正需要此功能为止。\n\n借助基于XML的配置元数据，您可以使用replaced-method元素将现有的方法实现替换为另一个。 考虑以下类，该类具有一个我们要覆盖的名为computeValue的方法：\n\npublic class MyValueCalculator {\n\n    public String computeValue(String input) {\n        // some real code...\n    }\n\n    // some other methods...\n}\n\n\n一个实现org.springframework.beans.factory.support.MethodReplacer接口的类提供了新的方法定义，如以下示例所示：\n\n/**\n * meant to be used to override the existing computeValue(String)\n * implementation in MyValueCalculator\n */\npublic class ReplacementComputeValue implements MethodReplacer {\n\n    public Object reimplement(Object o, Method m, Object[] args) throws Throwable {\n        // get the input value, work with it, and return a computed result\n        String input = (String) args[0];\n        ...\n        return ...;\n    }\n}\n\n\n用于部署原始类并指定方法重写的Bean定义类似于以下示例：\n\n<bean id="myValueCalculator" class="x.y.z.MyValueCalculator">\n    \x3c!-- arbitrary method replacement --\x3e\n    <replaced-method name="computeValue" replacer="replacementComputeValue">\n        <arg-type>String</arg-type>\n    </replaced-method>\n</bean>\n\n<bean id="replacementComputeValue" class="a.b.c.ReplacementComputeValue"/>\n\n\n您可以在<replaced-method />元素内使用一个或多个<arg-type />元素来指示被覆盖的方法的方法签名。 仅当方法重载且类中存在多个变体时，才需要对参数签名。 为了方便起见，参数的类型字符串可以是完全限定类型名称的子字符串。 例如，以下所有都匹配java.lang.String：\n\njava.lang.String\nString\nStr\n\n\n因为参数的数量通常足以区分每个可能的选择，所以通过让您仅键入与参数类型匹配的最短字符串，此快捷方式可以节省很多输入。\n\n\n# 1.5. Bean作用域\n\n创建一个bean定义时，将创建一个配置，该配置用于创建该bean定义所定义的类的实例。 bean定义是配置的思想很重要，因为它意味您可以从一个配置中创建一个类的许多对象实例。\n\n您不仅可以控制要插入到从特定bean定义创建的对象中的各种依赖项和配置值，还可以控制从特定bean定义创建的对象的作用域。 这种方法功能强大且灵活，因为您可以选择通过配置创建的对象的作用域，而不必在Java类级别上bake（这里不知道如何翻译）对象的作用域。 可以将Bean定义为部署在多个作用域之一中。 Spring框架支持六个作用域，其中四个只有在使用Web感知的ApplicationContext时才可用。 您还可以创建自定义作用域。\n\nSCOPE         DESCRIPTION\nsingleton     （默认值）将每个Spring IoC容器的单个bean定义作用域限定为单个对象实例。\nprototype     将单个bean定义的作用域限定为任意数量的对象实例。\nrequest       将单个bean定义的作用域限定为单个HTTP请求的生命周期内。\n              也就是说，每个HTTP请求都有一个自己的bean实例，它是在单个bean定义的基础上创建的。\n              仅在web感知的Spring ApplicationContext上下文中有效。\nsession       将单个bean定义的作用域限定为HTTP session的生命周期内。 仅在web感知的Spring\n              ApplicationContext上下文中有效。\napplication   将单个bean定义的作用域限定为ServletContext的生命周期内。 仅在web感知的Spring\n              ApplicationContext上下文中有效。\nwebsocket     将单个bean定义的作用域限定为WebSocket的生命周期内。 仅在web感知的Spring\n              ApplicationContext上下文中有效。\n\n> 从Spring 3.0开始，线程作用域可用，但默认情况下未注册。 有关更多信息，请参见SimpleThreadScope文档。 有关如何注册此或任何其他自定义作用域的说明，请参阅自定义作用域。\n\n\n# 1.5.1. 单例作用域\n\n一个单例bean只有一个共享实例被管理，所有对具有一个或多个与该bean定义匹配的ID的bean的请求都会导致Spring容器返回一个特定的bean实例。\n\n换句话说，当您定义一个bean定义并将其定义为单例时，Spring IoC容器将为该bean定义所定义的对象创建一个实例。 该单个实例存储在此类单例bean的缓存中，并且对该命名bean的所有后续请求和引用都返回缓存的对象。 下图显示了单例作用域的工作方式：\n\n\n\nSpring的单例bean概念与《Gang of Four (GoF)》一书中定义的单例模式不同。 GoF中的单例对对象的作用域进行硬编码，以使每个ClassLoader只能创建一个特定类的一个实例。 最好将Spring单例作用域描述为每个容器和每个bean。 这意味着，如果您在单个Spring容器中为特定类定义一个bean，则Spring容器将创建该bean定义所定义的类的一个且只有一个实例。 单例作用域是Spring中的默认作用域。 要在XML中定义单例bean，可以如以下示例所示定义bean：\n\n<bean id="accountService" class="com.something.DefaultAccountService"/>\n\n\x3c!-- the following is equivalent, though redundant (singleton scope is the default) --\x3e\n<bean id="accountService" class="com.something.DefaultAccountService" scope="singleton"/>\n\n\n\n# 1.5.2. 原型作用域\n\n每次请求特定bean时，非单例的原型作用域都会导致创建一个新的bean实例。 也就是说，该Bean被注入到另一个Bean中，或者您可以通过容器上的getBean（）方法调用来请求它。 通常，应将原型作用域用于所有有状态的Bean，将单例作用域用于无状态的Bean。\n\n下面的图表说明了Spring原型作用域\n\n\n\n(数据访问对象(DAO)通常不被配置为原型，因为典型的DAO不持有任何会话状态。重用单例图的核心对我们来说更容易。)\n\n下面的示例在XML中将bean定义原型：\n\n<bean id="accountService" class="com.something.DefaultAccountService" scope="prototype"/>\n\n\n与其他作用域相反，Spring不管理原型Bean的完整生命周期。 容器实例化，配置或组装原型对象，然后将其交给客户端，而无需保持对该原型实例的进一步记录。 因此，尽管无论在什么作用于下都会在所有对象上调用初始化生命周期回调方法，但对于原型，则不会调用已配置的销毁生命周期回调。 客户端代码必须清除原型作用域内的对象，并释放原型Bean拥有的昂贵资源。 为了使Spring容器释放原型作用下的bean所拥有的资源，请尝试使用自定义bean后置处理器，该处理器包含对需要清理的bean的引用。\n\n在某些方面，Spring容器在原型作用域Bean方面的角色是Java new运算符的替代。 超过该点（也就是new之后）的所有生命周期管理必须由客户端处理。 （有关Spring容器中bean的生命周期的详细信息，请参阅生命周期回调。）\n\n\n# 1.5.3. 包含原型bean引用的单例beans\n\n当您使用对原型bean有依赖性的单例作用域Bean时，请注意，依赖关系在实例化时解析。 因此，如果将依赖的原型bean依赖项注入到单例bean中，则将实例化新的原型bean，然后将依赖项注入到单例bean中。 原型实例是曾经提供给单例bean的唯一实例。\n\n但是，假设您希望单例作用域的bean在运行时重复获取原型作用域的bean的新实例。 您不能将原型作用域的bean依赖注入到您的单例bean中，因为当Spring容器实例化单例bean并解析并注入其依赖项时，该注入仅发生一次。 如果在运行时不止一次需要原型bean的新实例，请参见[方法注入](###1.4.6. 方法注入)。\n\n\n# 1.5.4. Request, Session, Application, and WebSocket 作用域\n\n只有当您使用web感知的Spring ApplicationContext实现(如XmlWebApplicationContext)时，request,session, application, 和websocket作用域才可用。如果在常规的Spring IoC容器(如ClassPathXmlApplicationContext)中使用这些作用域，则会抛出一个未知bean作用域的IllegalStateException。\n\n# 初始Web配置\n\n为了支持request,session,application,websocket这些基于web的bean作用域，需要在定义bean前做一些初始化配置（singleton,prototype标准作用域不是必须的）。\n\n如和完成这些初始化步骤取决于你的Servlet环境。\n\n如果您在 Spring Web MVC 中访问以上作用域 bean，实际上是在 Spring DispatcherServlet 处理的请求中，则不需要特殊设置。DispatcherServlet 已经暴露了所有相关的状态。\n\n如果你用的是Servlet2.5的web容器，在Spring的DispatcherServlet外部处理请求（例如JSF或者Struts），你需要注册org.springframework.web.context.request.RequestContextListener （ServletRequestListener.Servlet 3.0+）,也可以用WebApplicationInitializer接口以编程方式实现，或者对于更老的容器来说，添加以下声明在web.xml文件中\n\n<web-app>\n    ...\n    <listener>\n        <listener-class>\n            org.springframework.web.context.request.RequestContextListener\n        </listener-class>\n    </listener>\n    ...\n</web-app>\n\n\n或者可以用Spring的RequestContextFilter，这个过滤器映射取决于web应用的配置，所以必须合适得更改它，以下是一个web应用的部分过滤器配置：\n\n<web-app>\n    ...\n    <filter>\n        <filter-name>requestContextFilter</filter-name>\n        <filter-class>org.springframework.web.filter.RequestContextFilter</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>requestContextFilter</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n    ...\n</web-app>\n\n\nDispatcherServlet、RequestContextListener 和 RequestContextFilter 都做完全相同的事情，即将 HTTP 请求对象绑定到为该请求提供服务的线程。 这使得request和session作用域的 bean 在调用链的更下游可用。\n\n# Reqeust作用域\n\n以下面的xml形式的bean定义举例：\n\n<bean id="loginAction" class="com.something.LoginAction" scope="request"/>\n\n\nSpring 容器通过为每个 HTTP 请求使用 loginAction bean 定义来创建 LoginAction bean 的新实例。 也就是说， loginAction bean 的作用域是 HTTP 请求级别的。 您可以根据需要更改所创建实例的内部状态，因为从同一loginAction bean 定义创建的其他实例不会看到这些状态更改。 它们是针对单个请求的。 当请求完成处理时，该请求范围内的 bean 将被废弃。\n\n当使用注解驱动的组件或者Java配置时，@ReqeustScope注解可用于指定一个组件为request作用域，如下示例：\n\n@RequestScope\n@Component\npublic class LoginAction {\n    // ...\n}\n\n\n# Session作用域\n\n以下面的xml形式的bean定义举例：\n\n<bean id="userPreferences" class="com.something.UserPreferences" scope="session"/>\n\n\nSpring 容器通过在单个 HTTP 会话的生命周期中使用 userPreferences bean 定义创建 UserPreferences bean 的新实例。 换句话说，userPreferences bean 作用域是 HTTP 会话级别。 与Reqeust作用域的 bean 一样，您可以根据需要更改所创建实例的内部状态，其他HTTP Session也在使用从相同 userPreferences bean 定义创建的实例不会看到这些状态更改 ，因为它们特定于单个 HTTP 会话。 当 HTTP 会话最终被丢弃时，作用域为该特定 HTTP 会话的 bean 也将被丢弃。\n\n当使用注解驱动的组件或者Java配置时，@SessionScope注解可用于指定一个组件为session作用域，如下示例：\n\n@SessionScope\n@Component\npublic class UserPreferences {\n    // ...\n}\n\n\n# Application作用域\n\n以下面的xml形式的bean定义举例：\n\n<bean id="appPreferences" class="com.something.AppPreferences" scope="application"/>\n\n\nSpring 容器通过为整个 Web 应用程序使用以上定义一次来创建 AppPreferences bean 的新实例。 也就是说，appPreferences bean 的范围在 ServletContext 级别，并存储为常规 ServletContext 属性。 这有点类似于 Spring 单例 bean，但在两个重要方面有所不同：它是每个 ServletContext 的单例，而不是每个 Spring \'ApplicationContext\'（在任何给定的 Web 应用程序中可能有多个），并且它实际上是公开的，因此 作为 ServletContext 属性可见。\n\n当使用注解驱动的组件或者Java配置时，@ApplicationScope注解可用于指定一个组件为application作用域，如下示例：\n\n@ApplicationScope\n@Component\npublic class AppPreferences {\n    // ...\n}\n\n\n# 依赖中的作用域bean\n\nSpring IoC 容器不仅管理对象（bean）的实例化，还管理协作者（或依赖项）的连接。 如果您想将（例如）一个 HTTP 请求范围的 bean 注入到另一个生命周期更长的 bean 中，您可以选择注入一个 AOP 代理来代替该作用域的 bean。 也就是说，您需要注入一个代理对象，该对象公开与作用域对象相同的公共接口，但也可以从相关作用域（例如 HTTP 请求）中检索真实目标对象，并将方法调用委托给真实对象。\n\n> 您还可以在作用域为单例的 bean 之间使用<aop:scoped-proxy/>，然后引用通过可序列化的中间代理，因此能够在反序列化时重新获取目标单例 bean。\n> \n> 当针对原型的 bean 声明<aop:scoped-proxy/> 时，共享代理上的每个方法调用都会导致创建一个新的目标实例，然后将调用转发到该实例。\n> \n> 此外，原型代理并不是以生命周期安全的方式从较短作用域访问 bean 的唯一方法。 您还可以将您的注入点（即构造函数或 setter 参数或自动装配字段）声明为 ObjectFactory<MyTargetBean>，从而允许每次需要时调用 getObject() 来按需检索当前实例 — 无需保留实例或单独存储。\n> \n> 作为扩展变体，您可以声明 ObjectProvider<MyTargetBean>，它提供了几个额外的访问变体，包括 getIfAvailable 和 getIfUnique。\n> \n> 此 JSR-330 变体称为 Provider，并与 Provider<MyTargetBean> 声明和每次检索尝试的相应 get() 调用一起使用。 有关 JSR-330 整体的更多详细信息，请参见此处。\n\n下例中的配置只有一行，但了解其背后的“why”以及“how”很重要：\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!-- an HTTP Session-scoped bean exposed as a proxy --\x3e\n    <bean id="userPreferences" class="com.something.UserPreferences" scope="session">\n        \x3c!-- instructs the container to proxy the surrounding bean --\x3e\n        <aop:scoped-proxy/> \n    </bean>\n\n    \x3c!-- a singleton-scoped bean injected with a proxy to the above bean --\x3e\n    <bean id="userService" class="com.something.SimpleUserService">\n        \x3c!-- a reference to the proxied userPreferences bean --\x3e\n        <property name="userPreferences" ref="userPreferences"/>\n    </bean>\n</beans>\n\n\n要创建这样的代理，要将 <aop:scoped-proxy/> 元素插入到作用域 bean 定义中（请参阅选择要创建的代理类型和基于XML配置模式）。 为什么在请求、会话和自定义范围级别范围内的 bean 定义需要<aop:scoped-proxy/> 元素？ 考虑以下单例 bean 定义，并将其与您需要为上述范围定义的内容进行对比（请注意，以下 userPreferences bean 定义不完整）：\n\n<bean id="userPreferences" class="com.something.UserPreferences" scope="session"/>\n\n<bean id="userManager" class="com.something.UserManager">\n    <property name="userPreferences" ref="userPreferences"/>\n</bean>\n\n\n在前面的示例中，单例 bean (userManager) 被注入了对 HTTP 会话范围 bean (userPreferences) 的引用。 这里的重点是 userManager bean 是一个单例：它在每个容器中被实例化一次，并且它的依赖项（在这种情况下只有一个，userPreferences bean）也只注入一次。 这意味着 userManager bean 只对完全相同的 userPreferences 对象（即最初注入它的那个对象）进行操作。\n\n这不是您将生命周期较短的作用域 bean 注入到生命周期较长的作用域 bean（例如，将 HTTP 会话作用域的 bean 作为依赖项注入到单例 bean 中）时想要的行为。 相反，您需要一个 userManager 对象，并且，对于 HTTP 会话的生命周期，您需要一个特定于 HTTP 会话的 userPreferences 对象。 因此，容器创建一个对象，该对象公开与 UserPreferences 类完全相同的公共接口（理想情况下是一个 UserPreferences 实例的对象），它可以从作用域机制（HTTP 请求、会话等）中获取真正的 UserPreferences 对象 。容器将这个代理对象注入到 userManager bean 中，它不知道这个 UserPreferences 引用是一个代理。 在这个例子中，当一个 UserManager 实例在依赖注入的 UserPreferences 对象上调用一个方法时，它实际上是在调用代理上的一个方法。 然后代理从（在这种情况下）HTTP 会话中获取真实的 UserPreferences 对象，并将方法调用委托给检索到的真实 UserPreferences 对象。\n\n因此，在将request和session作用域的 bean 注入对象时，您需要以下（正确且完整的）配置，如以下示例所示：\n\n<bean id="userPreferences" class="com.something.UserPreferences" scope="session">\n    <aop:scoped-proxy/>\n</bean>\n\n<bean id="userManager" class="com.something.UserManager">\n    <property name="userPreferences" ref="userPreferences"/>\n</bean>\n\n\n# 选择要创建的代理对象类型\n\n默认情况下，当 Spring 容器为使用 <aop:scoped-proxy/> 元素标记的 bean 创建代理时，将创建基于 CGLIB 的类代理。\n\n> CGLIB 代理只拦截公共方法调用！ 不要在这样的代理上调用非公共方法。 它们不会委托给实际作用域的目标对象。\n\n或者，您可以配置 Spring 容器，通过为 <aop:scoped-proxy/> 元素的 proxy-target-class 属性的值指定 false 来为此类作用域 bean 创建标准的基于 JDK 接口的代理。 使用基于 JDK 接口的代理意味着您不需要应用程序类路径中的其他库来实现此类代理。 但是，这也意味着作用域 bean 的类必须至少实现一个接口，并且注入作用域 bean 的所有依赖都必须通过其接口之一引用 bean。 以下示例显示了基于接口的代理：\n\n\x3c!-- DefaultUserPreferences implements the UserPreferences interface --\x3e\n<bean id="userPreferences" class="com.stuff.DefaultUserPreferences" scope="session">\n    <aop:scoped-proxy proxy-target-class="false"/>\n</bean>\n\n<bean id="userManager" class="com.stuff.UserManager">\n    <property name="userPreferences" ref="userPreferences"/>\n</bean>\n\n\n有关选择基于类或基于接口的代理的更多详细信息，请参阅代理机制。\n\n\n# 1.5.5. 自定义作用域\n\nbean 作用域机制是可扩展的。 您可以定义自己的作用域，甚至重新定义现有作用域，尽管后者被认为是不好的做法，并且您不能覆盖内置的单例和原型作用域。\n\n# 创建自定义作用域\n\n要将自定义作用域集成到 Spring 容器中，您需要实现 org.springframework.beans.factory.config.Scope接口，这在本节中进行了描述。 有关如何实现您自己的作用域，请参阅 Spring Framework 本身提供的 Scope 实现和 Scope javadoc，它更详细地解释了您需要实现的方法。\n\nScope 接口有四种方法可以从作用域中获取对象，从作用域中移除它们，以及让它们被销毁。\n\n例如，会话作用域实现返回会话作用域 bean（如果它不存在，则该方法在将它绑定到会话以供将来引用后返回该 bean 的一个新实例）。 以下方法从作用域返回对象：\n\nObject get(String name, ObjectFactory<?> objectFactory)\n\n\n例如，会话作用域实现从会话中删除会话作用域的 bean。 应该返回一个对象，但如果没有找到具有指定名称的对象，您可以返回 null。 以下方法从作用域中删除对象：\n\nObject remove(String name)\n\n\n以下方法注册了一个回调，当它被销毁或作用域中的指定对象被销毁时，该作用域应该调用该回调：\n\nvoid registerDestructionCallback(String name, Runnable destructionCallback)\n\n\n有关销毁回调的更多信息，请参阅 javadoc 或 Spring scope实现。\n\n以下方法获取作用域的会话标识符：\n\nString getConversationId()\n\n\n这个标识符对于每个作用域都是不同的。 对于会话作用域的实现，此标识符可以是session标识符。\n\n# 使用自定义作用域\n\n在您编写并测试一个或多个自定义 Scope 实现之后，您需要让 Spring 容器感知你的新作用域。 以下方法是向 Spring 容器注册新 Scope 的中心方法：\n\nvoid registerScope(String scopeName, Scope scope);\n\n\n此方法在 ````ConfigurableBeanFactory接口上声明，该接口可通过 Spring 附带的大多数具体ApplicationContext``` 实现的 BeanFactory 属性获得。\n\nregisterScope(..) 方法的第一个参数是与作用域关联的唯一名称。 Spring 容器本身中此类名称的示例是singleton和prototype。 registerScope(..) 方法的第二个参数是您希望注册和使用的自定义 Scope 实现的实际实例。\n\n‎假设已编写了自定义实现，然后按照下一个示例进行注册。‎\n\n> 下一个示例使用 SimpleThreadScope，它包含在 Spring 中，但默认情况下未注册。对于您自己的自定义 Scope 实现，使用方法是相同的。\n\nScope threadScope = new SimpleThreadScope();\nbeanFactory.registerScope("thread", threadScope);\n\n\n然后，您可以创建符合自定义 Scope 规则的 bean 定义，如下所示：\n\n<bean id="..." class="..." scope="thread">\n\n\n使用自定义 Scope 实现，您不仅限于以编程方式注册。您还可以使用 CustomScopeConfigurer 类以声明方式进行 Scope 注册，如以下示例所示：\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    <bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">\n        <property name="scopes">\n            <map>\n                <entry key="thread">\n                    <bean class="org.springframework.context.support.SimpleThreadScope"/>\n                </entry>\n            </map>\n        </property>\n    </bean>\n\n    <bean id="thing2" class="x.y.Thing2" scope="thread">\n        <property name="name" value="Rick"/>\n        <aop:scoped-proxy/>\n    </bean>\n\n    <bean id="thing1" class="x.y.Thing1">\n        <property name="thing2" ref="thing2"/>\n    </bean>\n\n</beans>\n\n\n> 当您将 <aop:scoped-proxy/> 放在 FactoryBean 实现中时，作用域的是工厂 bean 本身，而不是从 getObject() 返回的对象。\n\n\n# 1.6. 自定义bean性质\n\nSpring Framework提供了许多接口，可以用于自定义Bean的性质。本节将其分组如下：\n\n * Lifecycle Callbacks\n * ApplicationContextAware & BeanNameAware\n * 其他Aware接口\n\n\n# 1.6.1. Lifecycle 回调\n\n要与容器管理的bean生命周期交互，你可以实现InitializingBean和DisposableBean接口，容器会在前者下调用afterPropertiesSet()，在后者调用destroy()方法，让bean在初始化和销毁的时候执行某些操作。\n\n> 💡 JSR-250 @PostConstruct和@predestroy注解通常被认为是在现代Spring应用中接收生命周期回调的最佳实践。使用这些注解意味着您的bean不耦合到Spring特定的接口。\n> \n> 如果您不想使用JSR-250注解，又需要解耦，请考虑使用init-method和destroy-method的 bean定义元数据。\n\n在内部，Spring框架使用BeanPostProcessor实现来处理它可以找到的任何回调接口并调用适当的方法。如果您需要自定义功能或其他生命周期行为,Spring则不会默认提供，您可以自己实现BeanPostProcessor。有关更多信息，请参阅容器扩展点。\n\n除了初始化和销毁回调之外，Spring托管对象还可以实现Lifecycle接口，以便这些对象可以参与到容器启动和关闭过程，作为容器自己的生命周期的驱动。\n\n# Initialization初始化回调\n\norg.springframework.Beans.Factory.InitializationBean接口允许bean在容器中设置完bean上的所有必需属性后执行初始化工作。InitializingBean接口定义了一个方法：\n\nvoid afterPropertiesSet() throws Exception;\n\n\n**我们建议您不要使用InitializingBean接口，因为它不必要地将代码耦合到Spring。或者，我们建议使用@PostConstruct注解或指定POJO初始化方法。在基于XML的配置元数据的情况下，您可以使用init-method属性指定具有void No-Argument签名的方法的名称。使用Java配置，您可以使用@Bean的initmethod属性。**请参阅接收生命周期回调。考虑以下示例：\n\n<bean id="exampleInitBean" class="examples.ExampleBean" init-method="init"/>\n\n\npublic class ExampleBean {\n\n    public void init() {\n        // do some initialization work\n    }\n}\n\n\n此示例与以下示例几乎完全相同:\n\n<bean id="exampleInitBean" class="examples.AnotherExampleBean"/>\n\n\npublic class AnotherExampleBean implements InitializingBean {\n\n    @Override\n    public void afterPropertiesSet() {\n        // do some initialization work\n    }\n}\n\n\n但是，第一个示例代码没有与Spring耦合。\n\n# Destruction销毁回调\n\n实现org.springframework.beans.factory.disposablebean接口允许bean当包含它的容器被销毁时会收到回调。DisposableBean接口定义了一个方法：\n\nvoid destroy() throws Exception;\n\n\n**我们建议您不要使用DisposableBean接口，因为它不必要地将代码耦合到Spring。或者，我们建议使用@PreDestroy注解或指定bean定义支持的泛型方法。在基于XML的配置元数据的情况下，您可以在中使用destroy-method属性。使用Java配置，您可以使用@Bean的destroyMethoad属性。**请参阅接收生命周期回调。考虑以下示例：\n\n<bean id="exampleInitBean" class="examples.ExampleBean" destroy-method="cleanup"/>\n\n\npublic class ExampleBean {\n\n    public void cleanup() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n\n\n此示例与以下示例几乎完全相同:\n\n<bean id="exampleInitBean" class="examples.AnotherExampleBean"/>\n\n\npublic class AnotherExampleBean implements DisposableBean {\n\n    @Override\n    public void destroy() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n\n\n但是，第一个示例代码没有与Spring耦合。\n\n> 💡 您可以分配<bean>元素的destroy-method属性一个特殊（推断）值，该值指示Spring在特定bean类上自动检测pulic close或者shutdown。（任何实现java.lang.autoclosable或java.io.closable的类都会匹配。）您还可以在<bean>元素的default-destroy-method属性上设置此特殊（推断的）值以应用此行为到一组bean上（请参阅默认初始化和销毁方法）。请注意，这是Java配置的默认行为。\n\n# 默认初始化和销毁方法\n\n当不通过实现Spring特定的InitializingBean和DisposableBean定义的接口来完成初始化和销毁方法回调时，通常会使用像init()，initialize()，dispose()等名称编写方法。理想情况下，这些生命周期回调方法的名称在项目中应该标准化，以便所有开发人员使用相同的方法名称并确保一致性。\n\n您可以配置Spring容器在每个bean上查找指定命名的初始化和销毁回调方法。这意味着您作为应用程序开发人员，不用为每个bean配置init-methoad="init"的属性，就可以编写名为init()的初始化回调方法。Spring IoC容器在创建bean时调用该方法（并根据先前描述的标准生命周期回调约定）。此功能还确保了初始化和销毁方法回调的命名一致约定。\n\n假设您的初始化回调方法名为init()，您的销毁回调方法名为destroy()。然后，您的类类似以下示例：\n\npublic class DefaultBlogService implements BlogService {\n\n    private BlogDao blogDao;\n\n    public void setBlogDao(BlogDao blogDao) {\n        this.blogDao = blogDao;\n    }\n\n    // this is (unsurprisingly) the initialization callback method\n    public void init() {\n        if (this.blogDao == null) {\n            throw new IllegalStateException("The [blogDao] property must be set.");\n        }\n    }\n}\n\n\n然后，您可以在类似于以下内容的bean定义中使用该类：\n\n<beans default-init-method="init">\n\n    <bean id="blogService" class="com.something.DefaultBlogService">\n        <property name="blogDao" ref="blogDao" />\n    </bean>\n\n</beans>\n\n\n顶级元素属性上的default-init-method属性的存在会导致Spring IoC容器识别Bean类中称为init的方法作为初始化方法回调。创建并组装Bean时，如果Bean类具有这样的方法，则会在适当的时间调用它。\n\n您可以类似地通过在顶级元素上使用efault-destroy-method属性来配置默认销毁回调。\n\n当现有bean类已经有与约定回调方法有差异的方法时，可以通过使用的init-method和destroy-method属性指定方法名称来覆盖默认值。\n\nSpring 容器保证在向bean注入所有依赖项之后立即调用配置的初始化回调方法。因此，在原始bean上才会调用初始化回调，这意味着AOP拦截器等尚未应用于bean。首先完全创建目标bean，然后应用具有其拦截链的AOP代理。如果目标bean和代理单独定义，则您的代码甚至可以绕过代理直接与原始目标bean交互。因此，将拦截器应用于init方法是矛盾的，因为这样做会将目标bean的生命周期耦合到其代理或拦截器，并在代码与原始目标bean直接交互时留下奇怪的语义。\n\n# 组合生命周期机制\n\n截至Spring 2.5，您有三种方式控制bean的声明周期，你可以组合这些机制来控制bean的声明周期：\n\n * InitializingBean和DisposableBean回调接口\n * 自定义init()和destroy方法\n * @PostContruct和@PreDestroy注解\n\n> 如果为bean配置了多个生命周期机制，并且每个机制配置了不同名称的方法，则每个配置的方法按照列出的顺序运行。但是，如果配置了相同名称的方法 - 例如，初始化方法init() - 对于这些生命周期机制中的多个，该方法只会运行一次。\n\n为同一bean配置的多个生命周期机制，r若具有不同的初始化方法，按照如下所示顺序执行：\n\n 1. @PostConstruct注释的方法\n 2. InitializingBean回调接口中的afterPropertiesSet() 方法\n 3. 自定义的 init() 方法\n\n销毁方法以相同的顺序调用：\n\n 1. @PreDestroy注释的方法\n 2. DisposableBean回调接口中的destroy() 方法\n 3. 自定义的 destroy() 方法\n\n# 启动和停止回调\n\nLifecycle接口为对象定义了任何具有其自身生命周期要求的基本方法（例如启动和停止某些后台进程）：\n\npublic interface Lifecycle {\n\n    void start();\n\n    void stop();\n\n    boolean isRunning();\n}\n\n\n任何Spring管理的对象都可以实现生命周期接口。然后，当ApplicationContext本身接收开始和停止信号（例如，在运行时进行停止/重启）时，它将这些调用级联到该上下文中定义的所有生命周期实现。它通过将其委派给LifecycleProcessor来实现这一点，如下所示所示：\n\npublic interface LifecycleProcessor extends Lifecycle {\n\n    void onRefresh();\n\n    void onClose();\n}\n\n\n请注意，LifecyCleProcessor本身是Lifecycle接口的扩展。它还添加了另外两个方法，将在应用上下文刷新和关闭时调用。\n\n> 💡请注意，常规org.springframework.context.Lifecycle接口是一个简单的约定，用于显式启动和停止通知，并不意味着上下文刷新时自动启动。对特定bean的自动启动（包括启动阶段）进行细粒度控制，请考虑实现org.springframework.context.SmartLifecycle。\n> \n> 此外，请注意，销毁前不保证发起停止通知。一般在停止时，所有Lifecycle实现类首先在常规销毁回调传播之前接收停止通知。但是，在上下文热刷新或停止刷新尝试期间，只调用销毁方法。\n\n启动和关闭调用的顺序很重要。如果在任何两个对象之间存在依赖关系，则需要依赖的将于其依赖项启动后启动，并且在其依赖项停止前停止。但是有时，直接依赖是未知的。您可能只知道某种类型的对象应该在另一个类型的对象之前启动。在这些情况下，SmartLifecycle接口定义了另一个选项，即在其父接口Phased定义的getPhase()方法。以下是该接口的定义：\n\npublic interface Phased {\n\n    int getPhase();\n}\n\n\n以下是SmartLifecycle接口的定义：\n\npublic interface SmartLifecycle extends Lifecycle, Phased {\n\n    boolean isAutoStartup();\n\n    void stop(Runnable callback);\n}\n\n\n启动时，顺位最低的对象首先启动。停止时，顺序相反。因此，一个实现SmartLifecycle且其getphase()方法返回Integer.MIN_VALUE的对象将是第一个启动和最后停止。也就是说，返回Integer.MAX_VALUE的值的将最后启动并首先停止（可能是因为它取决于要运行的其他进程）。很重要的是要知道不实现SmartLifecycle的任何普通Lifecycle实例的默认顺位值是0。因此，任何负的顺位值表示对象应该在这些标准组件之前启动（并在其之后停止）。反之亦然。\n\nSmartLifecycle定义的stop方法接受一个线程回调。在该实现的关闭进程完成后，任何实现必须调用回调线程的run()方法。这使得在必要时启用异步关闭，因为LifecycleProcessor接口的默认实现DefaultLifeCycleProcessor，在每个阶段内的对象组等待定义的超时时间后调用该回调。默认的超时时间为30秒。您可以通过在上下文中定义名为lifecycleProcessor的bean来覆盖默认生命周期处理器实例。如果您只想修改超时时间，以下定义就足够了：\n\n<bean id="lifecycleProcessor" class="org.springframework.context.support.DefaultLifecycleProcessor">\n    \x3c!-- timeout value in milliseconds --\x3e\n    <property name="timeoutPerShutdownPhase" value="10000"/>\n</bean>\n\n\n如前所述，LifecyCleProcessor接口也定义了刷新和关闭上下文的回调方法。后者驱动了停止过程，仿佛stop()被显示调用一样，但它发生在上下文关闭的过程中。另一方面，“refresh”回调可以启用SmartLifecycle bean的另一个功能。刷新上下文（在实例化并初始化所有对象后）时，调用该回调。此时，默认生命周期处理器检查每个SmartLifecycle对象的isAutostArtup()方法返回的布尔值。如果为true，则在刷新时启动该对象，而不是等待上下文或其自己的start()方法被显式调用（与上下文刷新不同，标准上下文实现不会自动启动）。phase值和依赖关系确定如前所述的启动顺序。\n\n# 在非web应用中优雅地关闭Spring Ioc容器\n\n> 本节仅适用于非Web应用程序。Spring的基于Web的ApplicationContext实现已有相关代码，能在Web应用程序关闭时优雅地关闭Spring IoC容器。\n\n如果在非Web应用程序环境中使用Spring的IoC容器（例如，在富客户端桌面环境中），请使用JVM注册关闭hook。这样做确保了一个优雅的停止，并在单例bean上调用相关的销毁方法，以便释放所有资源。您必须正确配置和实现这些销毁回调。\n\n要注册关闭hook，请调用在ConfigurableApplicationContext接口上声明的registerShutdownHook()方法，如以下示例显示：\n\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic final class Boot {\n\n    public static void main(final String[] args) throws Exception {\n        ConfigurableApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");\n\n        // add a shutdown hook for the above context...\n        ctx.registerShutdownHook();\n\n        // app runs here...\n\n        // main method exits, hook is called prior to the app shutting down...\n    }\n}\n\n\n\n# 1.6.2. ApplicationContextAware和BeanNameAware\n\n当ApplicationContext创建实现org.springframework.context.applicationContextaware接口的对象实例时，将提供该ApplicationContext的引用。以下列表显示了ApplicationContextaware接口的定义：\n\npublic interface ApplicationContextAware {\n\n    void setApplicationContext(ApplicationContext applicationContext) throws BeansException;\n}\n\n\n因此，bean可以通过编程方式操作创建它们的ApplicationContext，通过ApplicationContext接口或通过将引用转换为该接口的已知子类（例如公开其他功能的ConfigurableApplicationContext）。一个作用就是检索其他bean。有时这种能力很有用。但是，一般而言，您应该避免使用它，因为它将代码与Spring耦合，并且不遵循控制反转的风格(依赖作为bean的属性提供)。ApplicationContext的其他方法提供对文件资源的访问，发布应用程序事件和访问MessagesSource。这些附加功能在ApplicationContext的附加功能中描述。\n\n自动注入是获得对ApplicationContext的引用的另一种选择。传统的构造函数注入和按类型注入模式（如1.4.5所述）可以分别为构造函数参数或Setter方法参数分别提供ApplicationContext的依赖。更灵活的方式，包括自动注入字段和多个参数方法的能力，请使用基于注解的自动注入功能。如果您在需要的地方使用了@Autowired注解，期望类型的ApplicationContext将自动注入到字段，构造函数或方法参数中。有关更多信息，请参阅使用@Autowired。\n\n当ApplicationContext创建一个实现org.springFramework.Beans.Factory.BeannameAware接口的类时，该类会获得跟它自身定义相关的名称。以下列表显示了Beannameaware接口的定义：\n\npublic interface BeanNameAware {\n\n    void setBeanName(String name) throws BeansException;\n}\n\n\n该方法回调将会在普通bean属性设值后，初始化回调之前(如InitializingBean、afterPropertiesSet、自定义初始化方法)调用。\n\n\n# 1.6.3. 其他Aware接口\n\n除了ApplicationContextaware和Beannameaware之外，Spring还提供了更多的Aware回调接口，让bean向容器指明它们需要依赖某个明确的基础架构。作为一般规则，名称表示依赖类型。如下表格4(未翻译)总结了最重要的Aware接口：\n\nNAME                             INJECTED DEPENDENCY                                            EXPLAINED IN…\nApplicationContextAware          Declaring ApplicationContext.                                  ApplicationContextAware and BeanNameAware\nApplicationEventPublisherAware   Event publisher of the enclosing ApplicationContext.           Additional Capabilities of the ApplicationContext\nBeanClassLoaderAware             Class loader used to load the bean classes.                    Instantiating Beans\nBeanFactoryAware                 Declaring BeanFactory.                                         ApplicationContextAware and BeanNameAware\nBeanNameAware                    Name of the declaring bean.                                    ApplicationContextAware and BeanNameAware\nLoadTimeWeaverAware              Defined weaver for processing class definition at load time.   Load-time Weaving with AspectJ in the Spring Framework\nMessageSourceAware               Configured strategy for resolving messages (with support for   Additional Capabilities of the ApplicationContext\n                                 parametrization and internationalization).\nNotificationPublisherAware       Spring JMX notification publisher.                             Notifications\nResourceLoaderAware              Configured loader for low-level access to resources.           Resources\nServletConfigAware               Current ServletConfig the container runs in. Valid only in a   Spring MVC\n                                 web-aware Spring ApplicationContext.\nServletContextAware              Current ServletContext the container runs in. Valid only in    Spring MVC\n                                 a web-aware Spring ApplicationContext.\n\n请注意，使用这些接口你的代码将与Spring API耦合，并且不遵循控制反转的风格。因此，我们推荐它们在需要对容器进行编程访问的基础架构bean中使用。\n\n\n# 1.7. Bean定义继承\n\nBean定义可以包含大量的配置信息，包括构造函数参数，属性值和特定于容器的信息，例如初始化方法，静态工厂方法名称等。子bean定义从父定义继承配置数据。子定义可以根据需要覆盖某些值或添加其他值。使用父、子bean定义可以减少配置。实际上，这是模板模式的一种形式。\n\n如果您以编程方式使用ApplicationContext接口，则子Bean定义由ChildBeanDefinition类表示。大多数用户不会在这种级别使用它们。相反，他们在诸如ClassPathxMlApplicationContext等类中声明地配置bean定义。使用基于XML的配置元数据时，可以使用parent属性指定子bean定义，指定父bean作为此属性的值。以下示例显示了如何做：\n\n<bean id="inheritedTestBean" abstract="true"\n        class="org.springframework.beans.TestBean">\n    <property name="name" value="parent"/>\n    <property name="age" value="1"/>\n</bean>\n\n<bean id="inheritsWithDifferentClass"\n        class="org.springframework.beans.DerivedTestBean"\n        parent="inheritedTestBean" init-method="initialize">  1️⃣\n    <property name="name" value="override"/>\n    \x3c!-- the age property value of 1 will be inherited from parent --\x3e\n</bean>\n\n\n如果没有指定，则子bean使用父bean的定义，但也可以覆盖它。在后一种情况下，子bean必须与父bean兼容（即它必须接受父属性值）。\n\n子bean定义继承作用域，构造函数参数值，属性值和从父类覆盖的方法，并可选择添加新值。您指定的任何作用域，初始化方法，销毁方法或静态工厂方法设置将会覆盖父类中对应设置。\n\n剩余的设置始终从子定义中引用：依赖，自动装配模式，依赖关系检查，单例和懒加载。\n\n前面的示例通过使用abstract属性将父bean定义显式标记为抽象类。如果父定义未指定类，则父bean定义abstract属性是必须的，如以下示例显示：\n\n<bean id="inheritedTestBeanWithoutClass" abstract="true">\n    <property name="name" value="parent"/>\n    <property name="age" value="1"/>\n</bean>\n\n<bean id="inheritsWithClass" class="org.springframework.beans.DerivedTestBean"\n        parent="inheritedTestBeanWithoutClass" init-method="initialize">\n    <property name="name" value="override"/>\n    \x3c!-- age will inherit the value of 1 from the parent bean definition--\x3e\n</bean>\n\n\n父bean无法自动化，因为它是不完整的，并且也明确标记为抽象。当定义是抽象的时候，它仅用为纯模板bean定义，它用作子定义的父定义。尝试自己使用这样一个抽象父bean，通过将其作为另一个bean的ref属性，否则使用父bean id显示执行getBean()调用将返回错误。同样，容器的内部预留preInstantiateSingletons()方法忽略了被定义为抽象的bean定义。\n\n> ℹ️ApplicationContext默认预先实例化所有单例bean。因此，如果您有打算仅用作为模板的（父）bean定义，并且此定义定义了类，则必须确保将abstract属性设置为true，否则应用上下文将（尝试）预实例化抽象类。\n\n\n# 1.8. 容器扩展点\n\n通常，应用程序开发者不需要子类化ApplicationContext实现类。相反，Spring IoC容器可以通过特殊的集成接口实现扩展。接下来的几节将介绍这些集成接口。\n\n\n# 1.8.1. 用BeanPostProcessor自定义Beans\n\nBeanPostProcessor接口定义了可以实现的回调方法，以提供自己的（或覆盖容器的默认）实例化逻辑，依赖解析逻辑等。如果要在Spring容器完成实例化，配置和初始化Bean后实现某些自定义逻辑，可以插入一个或多个自定义BeanPostProcessor实现。\n\n您可以配置多个BeanPostProcessor实例，您可以通过设置order属性来控制这些BeanPostProcessor实例运行的顺序。只有当BeanPostProcessor实现Ordered接口时，才能设置此属性。如果您编写自己的BeanPostProcessor，则应考虑实现Ordered接口。有关详细信息，请参阅BeanPostProcessor和Ordered的Javadoc。另请参阅关于BeanPostProcessor实例的程序化注册的说明。\n\n> ℹ️BeanPostProcessor实例在Bean（或Object）实例上运行。也就是说，Spring IoC容器实例化了一个bean实例，然后Beanbostprocessor实例执行它们的回调方法。\n> \n> BeanPostProcessor实例作用域是容器。仅当您使用容器层次结构时才起作用。如果在一个容器中定义BeanPostProcessor，则它仅在该容器中处理bean。换句话说，即使两个容器都是相同层次结构的一部分，在一个容器中定义的bean也不会被另一个容器中定义的BeanPostProcessor处理。\n\n该org.springframework.beans.factory.config.BeanPostProcessor接口包括正好两个回调方法。当此类被容器注册为后置处理器时，对于每个容器创建的bean实例，后处理器在容器初始化方法（例如InitializationBean.afterPropertiesset()或任何声明的init方法）被调用前，并在任何bean初始化回调之后调用。后处理器可以对bean实例执行任何操作，包括完全忽略回调。bean后置处理器通常检查回调接口，或者它可能会将bean包装为代理。一些Spring AOP基础架构类就是bean后处理器的实现，以提供代理包装逻辑。\n\nApplicationContext将自动检测在配置元数据中定义的实现BeanPostProcessor接口的任何Bean。ApplicationContext将这些bean注册为后处理器，以便稍后可以在bean创建前被调用。Bean后处理器能以与任何其他bean相同的方式部署在容器中。\n\n注意，在配置类上使用@Bean工厂方法声明BeanPostProcessor时，工厂方法的返回类型应该是实现类本身或至少是org.springframework.beans.factory.config.beanpostProcessor接口，以清楚地表示该bean的后处理器性质。否则，ApplicationContext无法在完全创建它之前通过类型自动探测到它。由于需要提前实例化BeanPostProcessor以便在上下文中初始化其他Bean时应用处理器，因此该早期类型检测至关重要。\n\n> ℹ️以编程方式注册BeanPostProcessor实例\n> \n> 虽然BeanPostProcessor注册的推荐方法是通过ApplicationContext自动检测（如前所述），但您可以使用ConfigurableBeanFactory的addBeanPostProcessor方法进行编程方式注册。当您需要评估条件逻辑或甚至用于在层次结构中的上下文中复制bean后处理器时，这可能很有用。但请注意，Ordered接口对编程添加的BeanPostProcessor实例无效。在这里，执行顺序就是注册顺序。还要注意，无论任何指定的顺序如何，编程方式注册的BeanPostProcessor实例都会在通过自动检测注册的那些处理器之前之前执行。\n\n> ℹ️BeanPostProcessor实例和AOP自动代理\n> \n> 实现BeanPostProcessor接口的类是特殊的，容器会特殊处理。所有BeanPostProcessor实例和它们直接引用的Bean，在启动时都会作为ApplicationContext的特殊启动阶段的一部分。接下来，所有BeanPostProcessor实例都以指定的顺序注册，并应用于容器中的所有其他bean。由于AOP自动代理实现为BeanPostProcessor本身，因此BeanPostProcessor实例和它们直接引用的Bean都没有资格自动代理，因此，它们没有切面。\n> \n> 如果您使用autowiring或@Resource（可能autowiring失败）将beans装配到BeanPostProcessor中，则在搜索类型匹配的依赖候选时，Spring可能会得到错误的Bean，因此使其无法被自动代理或被其他后处理器处理。例如，如果您有被@Resource注解标注的依赖项，如字段或setter方法名与已声明名称的bean不直接对应且没有使用name属性的话，Spring搜索其他bean以按类型匹配它们。\n\n以下示例显示如何在ApplicationContext中编写，注册和使用BeanPostProcessor实例\n\n# 例：Hell World, BeanPostProcessor -style\n\n第一个例子说明了基本用法。该示例显示了自定义BeanPostProcessor实现，该实现调用每个bean的toString()方法，它由容器创建并将生成的字符串打印到系统控制台。\n\npackage scripting;\n\nimport org.springframework.beans.factory.config.BeanPostProcessor;\n\npublic class InstantiationTracingBeanPostProcessor implements BeanPostProcessor {\n\n    // simply return the instantiated bean as-is\n    public Object postProcessBeforeInitialization(Object bean, String beanName) {\n        return bean; // we could potentially return any object reference here...\n    }\n\n    public Object postProcessAfterInitialization(Object bean, String beanName) {\n        System.out.println("Bean \'" + beanName + "\' created : " + bean.toString());\n        return bean;\n    }\n}\n\n\n以下beans元素使用InstantialTracingBeanPostProcessor：\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:lang="http://www.springframework.org/schema/lang"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/lang\n        https://www.springframework.org/schema/lang/spring-lang.xsd">\n\n    <lang:groovy id="messenger"\n            script-source="classpath:org/springframework/scripting/groovy/Messenger.groovy">\n        <lang:property name="message" value="Fiona Apple Is Just So Dreamy."/>\n    </lang:groovy>\n\n    \x3c!--\n    when the above bean (messenger) is instantiated, this custom\n    BeanPostProcessor implementation will output the fact to the system console\n    --\x3e\n    <bean class="scripting.InstantiationTracingBeanPostProcessor"/>\n\n</beans>\n\n\n请注意InstantialTracingBeanPostProcessor是如何被定义的。它甚至没有名字，而且因为它是一个bean，它可以像任何其他bean一样依赖注入。（前面的配置还定义了由Groovy脚本备份的bean。Spring动态语言支持在此章节中详述。）\n\n以下Java应用程序运行前面的代码和配置：\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.scripting.Messenger;\n\npublic final class Boot {\n\n    public static void main(final String[] args) throws Exception {\n        ApplicationContext ctx = new ClassPathXmlApplicationContext("scripting/beans.xml");\n        Messenger messenger = ctx.getBean("messenger", Messenger.class);\n        System.out.println(messenger);\n    }\n\n}\n\n\n前面应用程序的输出类似于以下内容：\n\nBean \'messenger\' created : org.springframework.scripting.groovy.GroovyMessenger@272961\norg.springframework.scripting.groovy.GroovyMessenger@272961\n\n\n# 例：RequiredAnnotationBeanPostProcessor\n\n使用回调接口或注解连接自定义BeanPostProcessor实现是扩展Spring IoC容器的常见方法。一个例子是Spring的ResertandannotationBeanPostProcessor - 一个Spring实现的BeanPostProcessor，它确保用（任意）注解标记的bean上的依赖注入属性实际上（被配置为)有值。\n\n\n# 1.8.2. 使用BeanFactoryPostProcessor自定义配置元数据\n\n我们查看的下一个扩展点是org.springframework.beans.factory.config.BeanfactoryPostProcessor。此接口的语义类似于BeanPostProcessor的语义，其中一个主要区别：BeanFactoryPostProcessor在操作的是Bean配置元数据。也就是说，Spring IoC容器允许BeanFactoryPostPostProcessor读取配置元数据，并且在容器实例化BeanFactoryPostProcessor实例之外的任何Bean之前可能会更改它。\n\n您可以配置多个BeanFactoryPostProcessor实例，您可以通过设置order属性来控制这些BeanFactoryPostProcessor实例运行的顺序。只有当BeanFactoryPostProcessor实现Ordered接口时，才能设置此属性。如果您编写自己的BeanFactoryPostProcessor，则应考虑实现Ordered接口。有关详细信息，请参阅BeanFactoryPostProcessor和Ordered的Javadoc。\n\n> ℹ️如果要更改实际Bean实例（即，从配置元数据创建的对象），则需要使用BeanPostProcessor）。虽然技术上可以在BeanFactoryPostProcessor中使用bean实例（例如，通过使用BeanFactory.getBean()），但这样做会导致更早的bean实例化，违反标准容器生命周期。这可能导致负副作用，例如绕过Bean后处理。\n> \n> BeanFactoryPostProcessor实例作用域是容器。仅当您使用容器层次结构时才起作用。如果在一个容器中定义BeanFactoryPostProcessor，则它仅在该容器中处理bean元数据。换句话说，即使两个容器都是相同层次结构的一部分，在一个容器中bean的元数据也不会被另一个容器中定义的BeanFactoryPostProcessor处理。\n\n将自动运行在ApplicationContext中声明的Bean工厂后处理器，以便将更改应用于定义容器的配置元数据。Spring包括许多预定义的Bean工厂后处理器，例如PropertyOverrideConfigurer和PropertySourcesPlaceholderConfigurer。您还可以使用自定义BeanFactoryPostProcessor - 例如，注册自定义属性编辑器。\n\nApplicationContext会自动检测部署在它中的任何实现了BeanFactoryPostPostPostPostor接口的Bean。它在适当的时间使用这些作为bean工厂后处理器的bean。您可以按照任何其他bean的方式部署这些后处理器bean。\n\n> ℹ️与BeanPostProcessor一样，您通常不希望配置BeanFactoryPostProcessors为延迟初始化。如果没有其他bean引用Bean(Factory)PostProcessor，则根本不会立即实例化。因此，将其标记为延时初始化将被忽略，并且即使在元素声明上将default-lazy-init属性设置为true，Bean(Factory)PostProcessor也会立即实例化。\n\n# 例：类名称替换PropertySourcesPlaceholderConfigurer\n\n您可以通过PropertySourcesPlaceholderConfigurer使用标准Java Properties格式在单独文件中从Bean定义中外部化属性值。这样做使得部署应用程序的人能够自定义特定于环境的属性，例如数据库URL和密码，而无需担心修改容器的主要XML定义文件带来的复杂性或风险。\n\n考虑以下基于XML的配置元数据片段，其中定义了具有占位符值的数据源：\n\n<bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">\n    <property name="locations" value="classpath:com/something/jdbc.properties"/>\n</bean>\n\n<bean id="dataSource" destroy-method="close"\n        class="org.apache.commons.dbcp.BasicDataSource">\n    <property name="driverClassName" value="${jdbc.driverClassName}"/>\n    <property name="url" value="${jdbc.url}"/>\n    <property name="username" value="${jdbc.username}"/>\n    <property name="password" value="${jdbc.password}"/>\n</bean>\n\n\n该示例显示了从外部属性文件配置的属性。在运行时，PropertySourcePlaceHolterConfigurer应用于替换数据源的某些属性的元数据。要替换的值被指定为$ {property-name}的占位符形式，它遵循Ant和log4j和JSP EL 风格。\n\n实际值来自标准Java Properties格式的另一个文件：\n\njdbc.driverClassName=org.hsqldb.jdbcDriver\njdbc.url=jdbc:hsqldb:hsql://production:9002\njdbc.username=sa\njdbc.password=root\n\n\n因此，$ {jdbc.username}字符串在运行时替换为\'sa\'，属性文件中其他占位符值也一样按键值匹配替换。PropertySourcesPlaceholderConfigurer检查在Bean定义的大多数属性中的占位符。此外，您可以自定义占位符前缀和后缀。\n\n使用Spring 2.5中引入的上下文命名空间，您可以使用专用配置元素配置属性占位符。您可以在location属性中提供一个或多个位置作为逗号分隔的列表，如以下示例显示：\n\n<context:property-placeholder location="classpath:com/something/jdbc.properties"/>\n\n\n该PropertySourcesPlaceholderConfigurer不仅会在你指定的Properties文件中查找。默认情况下，如果不能在指定的属性文件中找到属性，它会针对Spring Environment属性配置和普通的Java System属性配置进行查找。\n\n> 💡您可以使用PropertySourcePlaceHolderConfigurer来替换类名，当您必须在运行时选择特定实现类时有用。以下示例显示了如何执行此操作：\n> \n> <bean class="org.springframework.beans.factory.config.PropertySourcesPlaceholderConfigurer">\n>     <property name="locations">\n>         <value>classpath:com/something/strategy.properties</value>\n>     </property>\n>     <property name="properties">\n>         <value>custom.strategy.class=com.something.DefaultStrategy</value>\n>     </property>\n> </bean>\n> \n> <bean id="serviceStrategy" class="${custom.strategy.class}"/>\n> \n> \n> 如果在运行时无法在运行时解析到有效类别，则在将要创建时（对于非懒加载bean，ApplicationContext的preInstantiateSingletons()阶段），Bean解析失败。\n\n# 例：PropertyOverrideConfigurer\n\nPropertyOverrideConfigurer，另一个bean factory后处理器，类似于PropertySourcePlaceHolderConfigurer，但与后者不同，原始定义可以具有默认值或根本没有值作为bean的属性。如果覆盖的Properties文件没有某些bean属性的条目，则使用默认上下文定义。\n\n请注意，bean定义无法感知被覆盖，因此覆盖的配置应用于XML定义文件不会显而易见。如果有多个PropertyOverrideConfigurer实例定义相同的bean属性的不同值，由于覆盖机制只会使用最后一个。\n\n属性文件配置行采用以下格式：\n\nbeanName.property=value\n\n\n以下列表显示了格式的示例：\n\ndataSource.driverClassName=com.mysql.jdbc.Driver\ndataSource.url=jdbc:mysql:mydb\n\n\n此示例文件可以与包含一个名为dataSource的bean的容器定义一起使用，其中包含driver和url属性。\n\n还支持复合属性名称，只要除了被覆盖的最终属性之外的路径上的的每个组件都是非空的（可能由构造函数初始化）。在以下示例中，tom bean的fred属性的bob属性的sammy属性设置为常量123：\n\ntom.fred.bob.sammy=123\n\n\n> ℹ️指定的覆盖值始终是字面量。它们不会翻译成bean引用。此约定还适用于XML Bean定义中的原始值指定为bean引用时。\n\n在Spring 2.5中引入的上下文命名空间，可以使用专用配置元素配置属性覆盖，如以下示例显示：\n\n<context:property-override location="classpath:override.properties"/>\n\n\n\n# 1.8.3. 使用FactoryBean自定义实例化逻辑\n\n本身是工厂的对象可以实现org.springframework.beans.factory.FactoryBean接口。\n\nFactoryBean接口是Spring IoC容器的实例化逻辑的可插拔点。如果您有复杂的初始化代码，则在Java中可以比冗长的（可能）XML更好地表达，您可以创建自己的FactoryBean，在该类中写入复杂的初始化逻辑，然后将您的自定义FactoryBean插入容器中。\n\nFactoryBean接口提供三个方法：\n\n * Object getObject()：返回此工厂创建的对象的实例。实例可能会被共享，具体取决于此出厂是否返回单例或原型。\n\n * boolean isSingleton()：如果FactoryBean返回单例bean此方法返回true否则返回false。\n\n * Class getObjectType()：返回getObject()方法返回的对象类型，如果类型不能提前推断则返回null。\n\nFactoryBean思想和接口用于Spring框架内的许多地方。spring内部就有FactoryBean接口的50多个实现。\n\n当您需要询问实际FactoryBean实例而不是它生成的bean时，请在调用ApplicationContext的getBean()方法时使用and符号（＆）前缀。对于给定的FactoryBean，调用容器上的getBean("myBean")返回FactoryBean产生的bean，而调用getBean("&myBean")返回FactoryBean实例本身。\n\n\n# 1.9. 基于注解的容器配置\n\n> 基于注解的配置是否比基于XML的配置更好？\n> \n> 基于注解的配置引出了此问题。长话短说是“得看情况”。也就是说，每种方法都有其利弊。而且通常由开发人员决定哪种策略更适合他们。由于它们的定义方式，注解在他们的声明中提供了上下文，所以配置更短更简练。但是，XML配置的优势是不侵入源代码或不需要重新编译它们。一些开发人员喜欢注解的方式，而其他开发人员则认为被注解的类不再是POJO，而且这会使得配置变得分散，更难控制。\n> \n> 无论哪种选择，Spring都可以兼容这两种风格，甚至将它们混合在一起。值得注意的是，通过其JavaConfig选项，Spring让注解以非侵入性方式使用，而无需接触目标组件源代码，并且在工具方面，所有配置样式都支持Eclipse的Spring Tools支持。\n\n基于注解的配置提供了XML配置的替代方法，它依赖于要装配的组件而不是用尖括号声明的字节码元数据。开发者通过在相关类，方法或字段声明上使用注解，将配置移动到组件类自身中而不是使用XML。如示例RequiredAnnotationBeanPostProcessor，使用BeanPostProcessor与注解结合是扩展Spring IoC容器的常见方法。例如，Spring 2.0引入了@Required注解，使得强制依赖属性成为可能。Spring 2.5使得可以遵循相同的一般方法来驱动Spring的依赖注入。本质上，@Autowired注释提供了相同的能力，如Autowiring所述，但具有更细粒度的控制和更广泛的适用性。Spring 2.5还增加了对JSR-250注解的支持，例如@PostConstruct和@PreDestroy。Spring 3.0添加了包含在javax.inject中的支持JSR-330（Java依赖注入）的注解，例如@Inject和@Named。有关这些注解的详细信息可以在相关章节中找到。\n\n> ℹ️基于注解的注入在XML注入之前进行。因此，基于XML的配置覆盖了通过两种方法属性的装配。\n\n当然，您可以将它们注册为单独的bean定义，但也可以通过在基于XML的Spring配置中包含以下标签来隐式注册（注意包含context命名空间）：\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:annotation-config/>\n\n</beans>\n\n\n(隐式注册的后处理器包括AutowiredAnnotationBeanPostProcessor, CommonAnnotationBeanPostProcessor, PersistenceAnnotationBeanPostProcessor,RequiredAnnotationBeanPostProcessor, CommonAnnotationBeanPostProcessor, PersistenceAnnotationBeanPostProcessor, RequiredAnnotationBeanPostProcessor.)\n\n> ℹ️<context:annotation-config />仅查找在定义它的同一应用程序上下文中的注解。这意味着，如果将<context:annotation-config />放在DispatcherServlet的WebApplicationContext中，则只会扫描Controller中的@Autowired 注解的bean。有关更多信息，请参阅DispatcherServlet。\n\n\n# 1.9.1. @Required\n\n@Required注解适用于bean属性setter方法，如下例所示：\n\npublic class SimpleMovieLister {\n\n    private MovieFinder movieFinder;\n\n    @Required\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // ...\n}\n\n\n此注解表示必须通过Bean定义中的显式属性值或通过自动装配在配置bean时填充bean的属性。如果尚未填充受注解影响的bean属性，则该容器会抛出异常。这允许更早的失败，避免了后续的NullPointerException等。我们仍然建议您将断言放入Bean类本身（例如，init方法）。这样做即使在容器外部使用类时，也可以拿到所需的引用和值。\n\n> ℹ️@Required在Spring Framework 5.1中正式过时，支持使用构造函数注入所需的设置（或InitializingBean.afterPropertiesSet()的自定义实现以及Bean属性的setter实现）。\n\n\n# 1.9.2. 使用@Autowired\n\n> ℹ️JSR 330的@Inject注解可以用于代替本节中包含的示例中的Spring @Autowired注释。有关详细信息，请参阅此处。\n\n你可以应用@Autowired注解于构造器，就像下面这样：\n\npublic class MovieRecommender {\n\n    private final CustomerPreferenceDao customerPreferenceDao;\n\n    @Autowired\n    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {\n        this.customerPreferenceDao = customerPreferenceDao;\n    }\n\n    // ...\n}\n\n\n> ℹ️截至Spring Framework 4.3，如果目标bean仅定义一个构造函数，则不再需要在此构造函数上用@Autowired注解。但是，如果有多个构造函数并且没有主/默认构造函数，则至少有一个构造函数必须用@Autowired注解，以指示容器使用哪一个构造器。\n\n你也可以像下面这样应用@Autowired注解于传统setter方法：\n\npublic class SimpleMovieLister {\n\n    private MovieFinder movieFinder;\n\n    @Autowired\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // ...\n}\n\n\n你还可以像下面这样应用@Autowired注解于任意名称和多参数的方法：\n\npublic class MovieRecommender {\n\n    private MovieCatalog movieCatalog;\n\n    private CustomerPreferenceDao customerPreferenceDao;\n\n    @Autowired\n    public void prepare(MovieCatalog movieCatalog,\n            CustomerPreferenceDao customerPreferenceDao) {\n        this.movieCatalog = movieCatalog;\n        this.customerPreferenceDao = customerPreferenceDao;\n    }\n\n    // ...\n}\n\n\n你也可以将@Autowired应用于字段，甚至将其与构造函数混合，如以下示例所示：\n\npublic class MovieRecommender {\n\n    private final CustomerPreferenceDao customerPreferenceDao;\n\n    @Autowired\n    private MovieCatalog movieCatalog;\n\n    @Autowired\n    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {\n        this.customerPreferenceDao = customerPreferenceDao;\n    }\n\n    // ...\n}\n\n\n> 💡确保您的目标组件（例如，MovieCatalog或CustomerPreferenceDao）和用@ Autowired注解的注入点的类型声明一致。否则，运行时可能因类型不匹配而注入失败。\n> \n> 对于通过类路径扫描找到的XML定义的bean或组件类，容器通常预先知道确切的类型。但是，对于@Bean工厂方法，您需要确保声明的返回类型是足够明确的。对于实现多个接口或可能由其实现类型引用的组件，考虑在工厂方法上声明最具体的返回类型（至少跟注入点需要的类型一样）。\n\n您还可以将@Autowired注解添加到期望得到该类型数组的字段或方法上，让Spring从ApplicationContext返回所有这种类型的bean，如下所示：\n\npublic class MovieRecommender {\n\n    @Autowired\n    private MovieCatalog[] movieCatalogs;\n\n    // ...\n}\n\n\n类型集合也是一样：\n\npublic class MovieRecommender {\n\n    private Set<MovieCatalog> movieCatalogs;\n\n    @Autowired\n    public void setMovieCatalogs(Set<MovieCatalog> movieCatalogs) {\n        this.movieCatalogs = movieCatalogs;\n    }\n\n    // ...\n}\n\n\n> 💡如果您希望以特定顺序排序数组或列表中的元素，您的目标bean可以实现org.springframework.core.Ordered接口或使用@Order或标准@Priority注解。否则，它们的顺序跟容器中定义的目标bean的注册顺序一样。\n> \n> 您可以针对单个bean定义（如果有多个使用相同的bean类的定义）在目标类级别和@Bean方法中声明@Order注解。@Order值可能会影响注入点的优先级，但请注意它们不会影响单例的启动顺序，这是由依赖关系和@DependsOn声明决定的问题。\n> \n> 请注意，标准javax.annotation.Priority注解在@Bean级别不可用，因为它无法在方法中声明。它的语义跟通过@Order值与每种类型的单个bean上的@Primary组合类似。\n\n只要预期的key类型为String，即使是Map实例也可以自动注入。映射值包含预期类型的所有bean，键包含相应的bean名称，如以下示例所示：\n\npublic class MovieRecommender {\n\n    private Map<String, MovieCatalog> movieCatalogs;\n\n    @Autowired\n    public void setMovieCatalogs(Map<String, MovieCatalog> movieCatalogs) {\n        this.movieCatalogs = movieCatalogs;\n    }\n\n    // ...\n}\n\n\n默认情况下，当没有匹配的候选bean可用于给定注入点时，自动注入失败。在声明的数组，集合或映射的情况下，预期至少有一个匹配的元素。\n\n默认行为是将带注解的方法和字段视为必须的依赖项。您可以通过以下示例中演示更改此行为，使框架能够让其变为非必须的来跳过一个不满足依赖的注入点（即，通过将@Autowired中的required属性设置为false)：\n\npublic class SimpleMovieLister {\n\n    private MovieFinder movieFinder;\n\n    @Autowired(required = false)\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // ...\n}\n\n\n如果它的依赖项（或在多个参数的情况下）不可用，则不会调用此非必需的方法。在这种情况下，非必须的字段不会填充，会用其默认值代替。\n\n被注入的构造器和工厂方法参数是一个特殊情况，因为@Autowired中required属性由于Spring的构造函数解析算法可能潜在地处理多个构造函数，因此具有稍微不同的含义。默认情况下构造器和工厂方法参数是必须的，但在单个构造函数场景中有一些特殊规则，例如多元素注入点（数组，集合，映射），如果没有可匹配的bean，则解析为空实例。这允许常见的实现模式，其中所有依赖关系都可以在唯一的多参数构造函数中声明 - 例如，在没有@Autowired注解的情况下被声明为单个公共构造函数。\n\n> ℹ️给定bean只有一个构造函数可以被required=true的@Autowired声明，表明这个构造器是其作为Spring bean要注入的构造器。因此，如果其required属性为默认值true，则只有单个构造函数可以用@Autowired注解声明。如果多个构造函数声明了这个注解，则它们都必须将required设置为false，以便被视为用于自动装配的候选者（类似于XML中的autowire=constructor）。Spring容器将选择能最大满足依赖的构造器。如果候选者没有一个满足的，则将使用主/默认构造函数（如果存在）。同样，如果类声明多个构造函数，但都没有声明@Autowired注解，则将使用主/默认构造函数（如果存在）。如果类仅声明单个构造函数，即使没有注解，也将始终使用它。请注意，注解声明的构造函数修饰符不必为public。\n> \n> 在setter方法上建议使用@Autowired的required属性而不是已弃用的@Required注解。将required属性设置为false表示自动注入目标不是必须的，如果它无法自动注入则将忽略该属性。另一方面，@Required强制属性设置，无论用容器支持的什么手段，如果没有定义任何值，则会抛出相应的异常。\n\n或者，您可以通过Java 8的java.util.options表示特定依赖的非必要性质，如以下示例所示：\n\npublic class SimpleMovieLister {\n\n    @Autowired\n    public void setMovieFinder(Optional<MovieFinder> movieFinder) {\n        ...\n    }\n}\n\n\n截至Spring Framework 5.0，您也可以使用@Nullable注释（任何包中的任何类型 - 例如，JSR-305中的javax.annotation.Nullable）或只是利用Kotlin内置的空安全支持：\n\npublic class SimpleMovieLister {\n\n    @Autowired\n    public void setMovieFinder(@Nullable MovieFinder movieFinder) {\n        ...\n    }\n}\n\n\n您还可以使用@Autowired用于众所周知的可解析依赖性的接口：BeanFactory，ApplicationContext，Environment，ResourceLoader，ApplicationEventPublisher和MessageSource。这些接口及其扩展接口（例如ConfigurableApplicationContext或ResourcePatternResolver）会自动解析，无需特殊设置。以下示例注入ApplicationContext对象：\n\npublic class MovieRecommender {\n\n    @Autowired\n    private ApplicationContext context;\n\n    public MovieRecommender() {\n    }\n\n    // ...\n}\n\n\n> ℹ️@Autowired，@Inject，@Value和@Resource注解由Spring BeanPostProcessor实现处理。这意味着您无法在您自己的BeanPostProcessor或BeanFactoryPostProcessor类型中应用这些注解（如果有）。这些类型必须通过使用XML或Spring @Bean方法显式注入。\n\n\n# 1.9.3. 使用@Primary调整基于注解的自动注入\n\n因为按类型的自动注入可能有多个候选者，所以通常需要更精细地控制选择过程。实现这一目标的一种方法是Spring的@Primary注解。@Primary表示当单值依赖有多个候选者时，应给出注入bean的首选项。如果候选者中存在一个主bean，则它将成为自动注入的值。\n\n就像以下配置，将FirstMovieCatalog定义为MovieCatalog类型的主bean：\n\n@Configuration\npublic class MovieConfiguration {\n\n    @Bean\n    @Primary\n    public MovieCatalog firstMovieCatalog() { ... }\n\n    @Bean\n    public MovieCatalog secondMovieCatalog() { ... }\n\n    // ...\n}\n\n\n使用前面的配置，下面的MovieRecommender将注入firstMovieCatalog：\n\npublic class MovieRecommender {\n\n    @Autowired\n    private MovieCatalog movieCatalog;\n\n    // ...\n}\n\n\n相应的bean定义如下：\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:annotation-config/>\n\n    <bean class="example.SimpleMovieCatalog" primary="true">\n        \x3c!-- inject any dependencies required by this bean --\x3e\n    </bean>\n\n    <bean class="example.SimpleMovieCatalog">\n        \x3c!-- inject any dependencies required by this bean --\x3e\n    </bean>\n\n    <bean id="movieRecommender" class="example.MovieRecommender"/>\n\n</beans>\n\n\n\n# 1.9.4. 使用@Qualifiers调整基于注解的自动注入\n\n\n# 附录\n\n\n# 服务定位器模式\n\n> 服务定位器模式 服务定位器模式（Service Locator Pattern）用在我们想使用 JNDI 查询定位各种服务的时候。考虑到为某个服务查找 JNDI 的代价很高，服务定位器模式充分利用了缓存技术。在首次请求某个服务时，服务定位器在 JNDI 中查找服务，并缓存该服务对象。当再次请求相同的服务时，服务定位器会在它的缓存中查找，这样可以在很大程度上提高应用程序的性能\n\n服务定位器模式（Service Locator Pattern）用在我们想使用 JNDI 查询定位各种服务的时候。考虑到为某个服务查找 JNDI 的代价很高，服务定位器模式充分利用了缓存技术。在首次请求某个服务时，服务定位器在 JNDI 中查找服务，并缓存该服务对象。当再次请求相同的服务时，服务定位器会在它的缓存中查找，这样可以在很大程度上提高应用程序的性能。以下是这种设计模式的实体。\n\n * 服务（Service） - 实际处理请求的服务。对这种服务的引用可以在 JNDI 服务器中查找到。\n\n * Context / 初始的 Context - JNDI Context 带有对要查找的服务的引用。\n\n * 服务定位器（Service Locator） - 服务定位器是通过 JNDI 查找和缓存服务来获取服务的单点接触。\n\n * 缓存（Cache） - 缓存存储服务的引用，以便复用它们。\n\n * 客户端（Client） - Client 是通过 ServiceLocator 调用服务的对象。\n\n',normalizedContent:'# 核心技术\n\n> 5.3.2\n\n\n# 1.ioc容器\n\n\n# 1.1. spring ioc容器和beans介绍\n\n本章介绍了控制反转（ioc）原理的spring框架实现。 ioc也称为依赖注入（di）。 在此过程中，对象仅通过构造函数参数，工厂方法的参数或在构造后或从工厂方法返回后在对象实例上设置的属性来定义其依赖项（即与它们一起使用的其他对象） 。 然后，容器在创建bean时注入那些依赖项。 此过程从根本上讲是bean本身通过使用类的直接构造或诸如服务定位器模式之类的机制来控制其依赖项的实例或位置的逆过程（因此称为控制的反转）。\n\norg.springframework.beans和org.springframework.context包是spring framework的ioc容器的基础。beanfactory接口提供了一种能够管理任何类型对象的高级配置机制。applicationcontext是beanfactory的子接口。 它增加了：\n\n * 与spring aop功能轻松集成\n * 消息资源处理（用于国际化）\n * 事件发布\n * 应用层特定的上下文，例如web应用程序中使用的webapplicationcontext\n\n简而言之，beanfactory提供了配置框架和基本的功能，而applicationcontext添加了更多企业特定的功能。 applicationcontext是beanfactory的完整超集，在本章中仅在spring的ioc容器描述中使用。\n\n在spring中，构成应用程序主干并由spring ioc容器管理的对象称为bean。bean是由spring ioc容器实例化、组装和管理的对象。否则，bean只是应用程序中众多对象中的一个。bean及其之间的依赖关系反映在容器使用的配置元数据中。\n\n\n# 1.2. container介绍\n\norg.springframework.context.applicationcontext接口代表spring ioc容器，并负责实例化，配置和组装bean。 容器通过读取配置元数据获取有关要实例化，配置和组装哪些对象的说明。 配置元数据以xml，java注解或java代码表示。 它使您能够表达组成应用程序的对象以及这些对象之间的丰富相互依赖关系。\n\nspring提供了applicationcontext接口的几种实现。 在独立应用程序中，通常创建classpathxmlapplicationcontext或filesystemxmlapplicationcontext的实例。 尽管xml是定义配置元数据的传统格式，但是可以通过提供少量xml配置来声明性地启用对其他元数据格式的支持，从而指示容器将java注解或代码用作元数据格式。\n\n在大多数应用场景中，不需要显式用户代码即可实例化一个spring ioc容器的一个或多个实例。 例如，在web应用程序场景中，应用程序的web.xml文件中的简单八行（约）样板web描述符xml通常就足够了。 如果您使用spring tools for eclipse（由eclipse驱动的开发环境），则只需单击几下鼠标或击键即可轻松创建此样板配置。\n\n下图显示了spring的工作原理的高级视图。 您的应用程序类与配置元数据结合在一起，以便在创建和初始化applicationcontext之后，您将拥有一个完全配置且可执行的系统或应用程序。\n\n\n\n\n# 1.2.1. 元数据配置\n\n如上图所示，spring ioc容器使用一种形式的配置元数据。 此配置元数据表示您作为应用程序开发人员如何告诉spring容器实例化，配置和组装应用程序中的对象。传统上，配置元数据以简单直观的xml格式提供，这是本章大部分用来传达spring ioc容器的关键概念和功能的格式。\n\n> 基于xml的元数据不是配置元数据的唯一允许形式。 spring ioc容器本身与实际写入此配置元数据的格式完全脱钩。 如今，许多开发人员为他们的spring应用程序选择基于java代码的配置。\n\n * 基于注解的配置：spring 2.5引入了对基于注解的配置元数据的支持。\n * 基于java的配置：从spring 3.0开始，spring javaconfig项目提供的许多功能成为核心spring framework的一部分。 因此，您可以使用java而不是xml文件来定义应用程序类外部的bean。 要使用这些新功能，请参见@ configuration，@bean，@import和@dependson注解。\n\nspring配置由容器必须管理的至少一个（通常是一个以上）bean定义组成。 基于xml的配置元数据将这些bean配置为顶级<beans />元素内的<bean />元素。 java配置通常在@configuration类中使用@bean注释的方法。\n\n这些bean定义对应于组成应用程序的实际对象。 通常，您定义服务层对象，数据访问对象（dao），表示对象（例如struts action实例），基础结构对象（例如hibernate sessionfactories，jms队列）等等。 通常，不会在容器中配置细粒度的域对象，因为dao和业务逻辑通常负责创建和加载域对象。 但是，您可以使用spring与aspectj的集成来配置在ioc容器控制之外创建的对象。 请参阅使用aspectj通过spring依赖注入域对象。\n\n以下示例显示了基于xml的配置元数据的基本结构：\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="..." class="...">  \n        \x3c!-- collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="..." class="...">\n        \x3c!-- collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions go here --\x3e\n\n</beans>\n\n\n * id属性是一个标识单个bean定义的字符串。它的值指代该对象的引用。\n\n * class属性定义bean的类型并使用完全限定名。\n\n\n# 1.2.2. 容器初始化\n\n提供给applicationcontext构造函数的一个或多个位置路径是资源字符串，这些资源字符串使容器可以从各种外部资源（例如本地文件系统，java classpath等）加载配置元数据。\n\napplicationcontext context = new classpathxmlapplicationcontext("services.xml", "daos.xml");\n\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    \x3c!-- services --\x3e\n\n    <bean id="petstore" class="org.springframework.samples.jpetstore.services.petstoreserviceimpl">\n        <property name="accountdao" ref="accountdao"/>\n        <property name="itemdao" ref="itemdao"/>\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for services go here --\x3e\n\n</beans>\n\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="accountdao"\n        class="org.springframework.samples.jpetstore.dao.jpa.jpaaccountdao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="itemdao" class="org.springframework.samples.jpetstore.dao.jpa.jpaitemdao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for data access objects go here --\x3e\n\n</beans>\n\n\n在前面的示例中，服务层由petstoreserviceimpl类和两个jpaaccountdao和jpaitemdao类型的数据访问对象组成（基于jpa对象关系映射标准）。 属性名称元素引用javabean属性的名称，而ref元素引用另一个bean定义的名称。 id和ref元素之间的这种联系表达了协作对象之间的依赖性。\n\n# 构造基于xml的元数据\n\n使bean定义跨越多个xml文件可能很有用。 通常，每个单独的xml配置文件都代表体系结构中的逻辑层或模块。您可以使用应用程序上下文构造函数从所有这些xml片段中加载bean定义。 如上一节中所示，此构造函数具有多个resource位置。 或者，使用<import />元素的一个或多个实例从另一个文件加载bean定义。 以下示例显示了如何执行此操作：\n\ncode\n\n<beans>\n    <import resource="services.xml"/>\n    <import resource="resources/messagesource.xml"/>\n    <import resource="/resources/themesource.xml"/>\n\n    <bean id="bean1" class="..."/>\n    <bean id="bean2" class="..."/>\n</beans>\n\n\n在前面的示例中，外部bean定义是从三个文件加载的：services.xml，messagesource.xml和themesource.xml。 所有位置路径都相对于执行导入的定义文件，因此，services.xml必须与执行导入的文件位于同一目录或类路径位置，而messagesource.xml和themesource.xml必须位于该位置下方的资源位置 。 如您所见，斜杠被忽略。 但是，鉴于这些路径是相对的，最好不要使用任何斜线。 根据spring schema，导入的文件的内容（包括顶级<beans />元素）必须是有效的xml bean定义。\n\n> 可以但不建议使用相对路径“ ../”引用父目录中的文件。 这样做会创建对当前应用程序外部文件的依赖。 特别是，不建议对classpath：url（例如，classpath：../ services.xml）使用此引用，在url中，运行时解析过程会选择“最近”的classpath根目录，然后查看其父目录。 类路径配置的更改可能导致选择其他错误的目录。您始终可以使用绝对资源路径而不是相对路径：例如，file：c：/config/services.xml或classpath：/config/services.xml。 但是请注意，您正在将应用程序的配置耦合到特定的绝对路径。 通常，最好为这样的绝对路径保留一个间接寻址，例如，通过在运行时针对jvm系统属性解析的“ $ {…}”占位符。\n\n命名空间本身提供了import指令特性。除了普通bean定义之外，spring提供的xml名称空间的选择中还有其他配置特性，例如context和util命名空间。\n\n# the groovy bean definition dsl(领域特定语言)\n\n作为外部化配置元数据的另一个示例，bean定义也可以在spring的groovy bean定义dsl中表达，如grails框架所示。 通常，这种配置位于“ .groovy”文件中，其结构如以下示例所示：\n\nbeans {\n    datasource(basicdatasource) {\n        driverclassname = "org.hsqldb.jdbcdriver"\n        url = "jdbc:hsqldb:mem:grailsdb"\n        username = "sa"\n        password = ""\n        settings = [mynew:"setting"]\n    }\n    sessionfactory(sessionfactory) {\n        datasource = datasource\n    }\n    myservice(myservice) {\n        nestedbean = { anotherbean bean ->\n            datasource = datasource\n        }\n    }\n}\n\n\n这种配置样式在很大程度上等同于xml bean定义，甚至支持spring的xml配置名称空间。 它还允许通过importbeans指令导入xml bean定义文件。\n\n\n# 1.2.3. 使用容器\n\napplicationcontext是高级的工厂接口，该工厂能够维护不同bean及其依赖关系的注册表。 通过使用方法t getbean(string name，class <t> requiredtype)，可以检索bean的实例。\n\n// create and configure beans\napplicationcontext context = new classpathxmlapplicationcontext("services.xml", "daos.xml");\n\n// retrieve configured instance\npetstoreservice service = context.getbean("petstore", petstoreservice.class);\n\n// use configured instance\nlist<string> userlist = service.getusernamelist();\n\n\n在groovy配置中，使用看起来非常相似。它有一个不同的上下文实现类，该类支持groovy(但也理解xml bean定义)。下面的示例显示了groovy配置\n\napplicationcontext context = new genericgroovyapplicationcontext("services.groovy", "daos.groovy");\n\n\n最灵活的变体是结合reader委托使用的genericapplicationcontext，例如，使用xml文件的xmlbeandefinitionreader，如下面的示例所示\n\ngenericapplicationcontext context = new genericapplicationcontext();\nnew xmlbeandefinitionreader(context).loadbeandefinitions("services.xml", "daos.xml");\ncontext.refresh();\n\n\n还可以为groovy文件使用groovybeandefinitionreader，如下面的示例所示\n\ngenericapplicationcontext context = new genericapplicationcontext();\nnew groovybeandefinitionreader(context).loadbeandefinitions("services.groovy", "daos.groovy");\ncontext.refresh();\n\n\n您可以在相同的applicationcontext上混合和匹配这样的读取器委派，从不同的配置源读取bean定义.\n\n然后可以使用getbean检索bean的实例。 applicationcontext接口还有其他几种检索bean的方法，但是理想情况下，您的应用程序代码永远不要使用它们。 实际上，您的应用程序代码应该根本不调用getbean（）方法，因此完全不依赖于spring api。 例如，spring与web框架的集成为各种web框架组件（例如控制器和jsf管理的bean）提供了依赖项注入，使您可以通过元数据（例如自动装配注释）声明对特定bean的依赖项。\n\n\n# 1.3. bean介绍\n\n在容器本身内，bean定义表示为beandefinition对象，其中包含（除其他信息外）以下元数据：\n\n * 包限定的类名：通常，定义了bean的实际实现类。\n\n * bean行为配置元素，用于声明bean在容器中的行为（作用域，生命周期回调等）。\n\n * 引用该bean完成其工作所需的其他bean。 这些引用也称为协作者或依赖项。\n\n * 要在新创建的对象中设置的其他配置设置，例如，池的大小限制或在管理连接池的bean中要使用的连接数。\n\n该元数据转换为一组组成每个bean定义的属性。下表描述了这些属性\n\nproperty                   explained in…\nclass                      instantiating beans\nname                       naming beans\nscope                      bean scopes\nconstructor arguments      dependency injection\nproperties                 dependency injection\nautowiring mode            autowiring collaborators\nlazy initialization mode   lazy-initialized beans\ninitialization method      initialization callbacks\ndestruction method         destruction callbacks\n\n除了包含有关如何创建特定bean的信息的bean定义之外，applicationcontext实现还允许注册在容器外部（由用户）创建的现有对象。 这是通过通过getbeanfactory（）方法访问applicationcontext的beanfactory来完成的，该方法返回beanfactory defaultlistablebeanfactory实现。 defaultlistablebeanfactory通过registersingleton（..）和registerbeandefinition（..）方法支持此注册。 但是，典型的应用程序只能与通过常规bean定义元数据定义的bean一起使用。\n\n> bean元数据和手动提供的单例实例需要尽早注册，以便容器在自动装配和其他自省步骤期间正确地判断它们。虽然在某种程度上支持覆盖现有元数据和现有的单例实例，但在运行时注册新bean(与对工厂的实时访问并发)不受官方支持，可能会导致并发访问异常、bean容器中的不一致状态，或者两者都有。\n\n\n# 1.3.1. beans命名\n\n每个bean具有一个或多个标识符。 这些标识符在承载bean的容器内必须唯一。 一个bean通常只有一个标识符。 但是，如果需要多个，则可以将多余的别名视为别名。\n\n在基于xml的配置元数据中，可以使用id属性和/或name属性来指定bean标识符。 id属性可让您精确指定一个id。 按照惯例，这些名称是字母数字（“ mybean”，“ someservice”等），但它们也可以包含特殊字符。 如果要为bean引入其他别名，还可以在name属性中指定它们，并用逗号（，），分号（;）或空格分隔。 作为历史记录，在spring 3.1之前的版本中，id属性定义为xsd：id类型，该类型限制了可能的字符。 从3.1开始，它被定义为xsd：string类型。 请注意，bean id唯一性仍由容器强制执行，尽管不再由xml解析器执行。\n\n您不需要提供bean的名称或id。 如果未明确提供名称或id，则容器将为该bean生成一个唯一的名称。 但是，如果要按名称引用该bean，则通过使用ref元素或服务定位器样式查找，必须提供一个名称。 不提供名称的动机与使用内部bean和自动装配协作类有关。\n\n> 约定是在命名bean时使用标准java约定来命名实例字段名。也就是说，bean名称以小写字母开头，并从那里采用驼峰格式。这些名称的例子包括accountmanager、accountservice、userdao、logincontroller等等。一致地命名bean可以使配置更易于阅读和理解。另外，如果您使用spring aop，在将通知(advice)应用到一组与名称相关的bean时，它会很有用。\n> \n> 通过在类路径中进行组件扫描，spring会按照前面描述的规则为未命名的组件生成bean名称：本质上，采用简单的类名称并将其初始字符转换为小写。 但是，在特殊情况下，如果有多个字符并且第一个和第二个字符均为大写字母，则会保留原始大小写。 这些规则与java.beans.introspector.decapitalize（spring使用的）定义的规则相同。\n\n# bean别名\n\n在bean定义本身中，可以使用由id属性指定的最多一个名称和name属性中任意数量的其他名称的组合，为bean提供多个名称。 这些名称可以是同一个bean的等效别名，并且在某些情况下很有用，例如，通过使用特定于该组件本身的bean名称，让应用程序中的每个组件都引用一个公共依赖项。\n\n但是，在实际定义bean的地方指定所有别名并不够。 有时需要为在别处定义的bean引入别名。 这在大型系统中通常是这种情况，在大型系统中，配置在每个子系统之间分配，每个子系统都有自己的对象定义集。 在基于xml的配置元数据中，可以使用<alias />元素来完成此操作。 以下示例显示了如何执行此操作：\n\n<alias name="fromname" alias="toname"/>\n\n\n例如，子系统a的配置元数据可以通过subsystema-datasource的名称引用数据源。 子系统b的配置元数据可以通过subsystemb-datasource的名称引用数据源。 组成使用这两个子系统的主应用程序时，主应用程序通过myapp-datasource的名称引用数据源。 要使所有三个名称都引用相同的对象，可以将以下别名定义添加到配置元数据中：\n\n<alias name="myapp-datasource" alias="subsystema-datasource"/>\n<alias name="myapp-datasource" alias="subsystemb-datasource"/>\n\n\n现在，每个组件和主应用程序都可以通过唯一的名称引用数据源，并且保证不会与任何其他定义(有效地创建一个名称空间)冲突，但它们引用的是同一个bean。\n\n> 如果使用javaconfiguration，则@bean注解可用于提供别名。\n\n\n# 1.3.2. 实例化beans\n\nbean定义本质上是创建一个或多个对象的方法。当被请求时，容器查看指定bean的方法，并使用该bean定义封装的配置元数据创建(或获取)实际对象。\n\n如果使用基于xml的配置元数据，则在<bean />元素的class属性中指定要实例化的对象的类型（或类）。 这个类属性（在内部是beandefinition实例的class属性）通常是必需的。 （可以通过以下两种方式之一使用class属性：\n\n * 通常，在容器本身通过反射性地调用其构造函数直接创建bean的情况下，指定要构造的bean类，这在某种程度上等同于使用new运算符的java代码。\n\n * 要指定包含用于创建对象的静态工厂方法的实际类，在不太常见的情况下，容器将在类上调用静态工厂方法以创建bean。 从静态工厂方法的调用返回的对象类型可以是同一类，也可以是完全不同的另一类。\n\n> 如果要为静态内部类配置bean定义，则必须使用内部类的二进制名称。例如，如果您在com.example包中有一个名为something的类，并且此something类具有一个名为otherthing的静态内部类，则bean定义上的class属性的值为com.example.something $ otherthing。请注意，名称中使用$字符将内部类的类名与外部类名分开。\n\n# 构造器实例化\n\n当通过构造方法创建一个bean时，所有普通类都可以被spring使用并兼容。 也就是说，正在开发的类不需要实现任何特定的接口或以特定的方式进行编码。 只需指定bean类就足够了。 但是，根据您用于该特定bean的ioc的类型，您可能需要一个默认（空）构造函数。\n\nspring ioc容器几乎可以管理您要管理的任何类。 它不仅限于管理真正的javabean。 大多数spring用户更喜欢实际的javabean，它仅具有默认（无参数）构造函数，并具有根据容器中的属性构造的适当setter和getter。 您还可以在容器中具有更多非bean规范的类。 例如，如果您需要使用绝对不符合javabean规范的旧式连接池，则spring也可以对其进行管理。\n\n# 静态工厂实例化\n\n定义使用静态工厂方法创建的bean时，请使用class属性指定包含静态工厂方法的类，并使用名为factory-method的属性指定工厂方法本身的名称。 您应该能够调用此方法（使用可选参数，如稍后所述）并返回一个活动对象，该对象随后将被视为已通过构造函数创建。 这种bean定义的一种用法是在旧版代码中调用静态工厂。\n\n以下bean定义指定通过调用工厂方法来创建bean。 该定义不指定返回对象的类型（类），而仅指定包含工厂方法的类。 在此示例中，createinstance（）方法必须是静态方法。 以下示例显示如何指定工厂方法：\n\n<bean id="clientservice"\n    class="examples.clientservice"\n    factory-method="createinstance"/>\n\n\n以下示例显示了可与前面的bean定义一起使用的类：\n\npublic class clientservice {\n    private static clientservice clientservice = new clientservice();\n    private clientservice() {}\n\n    public static clientservice createinstance() {\n        return clientservice;\n    }\n}\n\n\n# 实例工厂实例化\n\n类似于通过静态工厂方法进行实例化，使用实例工厂方法进行实例化会从容器中调用现有bean的非静态方法来创建新bean。 要使用此机制，请将class属性保留为空，并在factory-bean属性中，在当前（或祖先）容器中指定包含要创建该对象的实例方法的bean的名称。 使用factory-method属性设置工厂方法本身的名称。 以下示例显示了如何配置此类bean：\n\n\x3c!-- the factory bean, which contains a method called createinstance() --\x3e\n<bean id="servicelocator" class="examples.defaultservicelocator">\n    \x3c!-- inject any dependencies required by this locator bean --\x3e\n</bean>\n\n\x3c!-- the bean to be created via the factory bean --\x3e\n<bean id="clientservice"\n    factory-bean="servicelocator"\n    factory-method="createclientserviceinstance"/>\n\n\npublic class defaultservicelocator {\n\n    private static clientservice clientservice = new clientserviceimpl();\n\n    public clientservice createclientserviceinstance() {\n        return clientservice;\n    }\n}\n\n\n一个工厂类也可以包含一个以上的工厂方法，如以下示例所示：\n\n<bean id="servicelocator" class="examples.defaultservicelocator">\n    \x3c!-- inject any dependencies required by this locator bean --\x3e\n</bean>\n\n<bean id="clientservice"\n    factory-bean="servicelocator"\n    factory-method="createclientserviceinstance"/>\n\n<bean id="accountservice"\n    factory-bean="servicelocator"\n    factory-method="createaccountserviceinstance"/>\n\n\npublic class defaultservicelocator {\n\n    private static clientservice clientservice = new clientserviceimpl();\n\n    private static accountservice accountservice = new accountserviceimpl();\n\n    public clientservice createclientserviceinstance() {\n        return clientservice;\n    }\n\n    public accountservice createaccountserviceinstance() {\n        return accountservice;\n    }\n}\n\n\n这种方法表明，工厂bean本身可以通过依赖项注入（di）进行管理和配置。\n\n> 在spring文档中，“ factory bean”是指在spring容器中配置并通过实例或静态工厂方法创建对象的bean。 相比之下，factorybean（注意大小写）是指特定于spring的factorybean实现类。\n\n# 确定bean的运行时类型\n\n确定特定bean的运行时类型并非易事。 bean元数据定义中的指定类只是初始类引用，可能与声明的工厂方法结合使用，或者是factorybean类，这可能导致bean的运行时类型不同，或者在实例级工厂方法（通过指定的factory-bean名称解析）的情况下完全不进行设置 。 此外，aop代理可以使用基于接口的代理包装bean实例，而目标bean的实际类型（仅是其实现的接口）的暴露程度有限。\n\n找出特定bean的实际运行时类型的推荐方法是对指定bean名称的beanfactory.gettype调用。 这考虑了上述所有情况，并返回了针对相同bean名称的beanfactory.getbean调用将返回的对象的类型。\n\n\n# 1.4. 依赖dependencies\n\n典型的企业应用程序不包含单个对象(或spring术语中的bean)。即使是最简单的应用程序也有几个对象一起工作，以表示最终用户认为一致的应用程序。下一节将解释如何从定义大量独立的bean定义过渡到一个完全实现的应用程序，在该应用程序中，对象相互协作以实现目标。\n\n\n# 1.4.1. 依赖注入\n\n依赖注入（di）是一个过程，在这个过程中，对象仅通过构造函数参数、工厂方法的参数，或者在对象实例被构造或从工厂方法返回后设置的属性来定义它们的依赖项(即与它们一起工作的其他对象)。 然后，容器在创建bean时注入那些依赖项。 从根本上讲，此过程是通过使用类的直接构造或服务定位器模式来控制bean自身依赖的实例或位置的bean创建的逆过程（因此称为control inversion-控制反转）\n\n使用di原则后，代码更加清晰，当提供对象的依赖关系时，解耦会更加有效。对象不查找它的依赖项，也不知道依赖项的位置或类。因此，您的类变得更容易测试，特别是当依赖关系在接口或抽象基类上时，这些依赖关系允许在单元测试中使用stub或mock 实现。\n\n依赖注入有两种主要的变体:基于构造函数的依赖注入和基于setter的依赖注入。\n\n# 构造器注入\n\n基于构造函数的di是通过容器调用具有多个参数的构造函数来完成的，每个参数表示一个依赖项。 调用带有特定参数的静态工厂方法来构造bean几乎是等效的，并且本次讨论将构造函数和静态工厂方法的参数视为类似。 以下示例显示了只能通过构造函数注入进行依赖项注入的类：\n\npublic class simplemovielister {\n\n    // the simplemovielister has a dependency on a moviefinder\n    private moviefinder moviefinder;\n\n    // a constructor so that the spring container can inject a moviefinder\n    public simplemovielister(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\t/*这里的moviefinder需由ioc容器管理；若有多个构造器的话，需要注意是否正确使用，可参考\n      https://blog.csdn.net/qq_41737716/article/details/85596817*/\n    // business logic that actually uses the injected moviefinder is omitted...\n}\n\n\n注意，该类没有什么特别的。 它是一个pojo，不依赖于特定于容器的接口，基类或注解。\n\n构造器参数解析\n\n构造函数参数解析匹配通过使用参数的类型进行。 如果bean定义的构造函数参数中没有潜在的歧义，则在实例化bean时，在bean定义中定义构造函数参数的顺序就是将这些参数提供给适当的构造函数的顺序。 考虑以下类：\n\npackage x.y;\n\npublic class thingone {\n\n    public thingone(thingtwo thingtwo, thingthree thingthree) {\n        // ...\n    }\n}\n\n\n假设thingtwo和thingthree类没有通过继承关联，则不存在潜在的歧义。 因此，以下配置可以正常运行，并且您无需在<constructor-arg />元素中显式指定构造函数参数索引或类型。\n\n<beans>\n    <bean id="beanone" class="x.y.thingone">\n        <constructor-arg ref="beantwo"/>\n        <constructor-arg ref="beanthree"/>\n    </bean>\n\n    <bean id="beantwo" class="x.y.thingtwo"/>\n\n    <bean id="beanthree" class="x.y.thingthree"/>\n</beans>\n\n\n当引用另一个bean时，类型是已知的，并且可以发生匹配（与前面的示例一样）。 当使用简单类型（例如<value> true </value>）时，spring无法确定值的类型，因此在没有指示的情况下无法按类型进行匹配。 考虑以下类别：\n\npackage examples;\n\npublic class examplebean {\n\n    // number of years to calculate the ultimate answer\n    private int years;\n\n    // the answer to life, the universe, and everything\n    private string ultimateanswer;\n\n    public examplebean(int years, string ultimateanswer) {\n        this.years = years;\n        this.ultimateanswer = ultimateanswer;\n    }\n}\n\n\n构造器参数类型匹配\n\n在上述情况下，如果通过使用type属性显式指定构造函数参数的类型，则容器可以使用简单类型的类型匹配。 如下例所示：\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg type="int" value="7500000"/>\n    <constructor-arg type="java.lang.string" value="42"/>\n</bean>\n\n\n构造器参数索引\n\n您可以使用index属性来显式指定构造函数参数的索引，如以下示例所示：\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg index="0" value="7500000"/>\n    <constructor-arg index="1" value="42"/>\n</bean>\n\n\n除了解决多个简单值的歧义之外，指定索引还可以解决构造函数有两个相同类型的参数的歧义。\n\n> 索引从0开始。\n\n构造器参数名\n\n还可以使用构造函数参数名来消除值的歧义，如下面的示例所示\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg name="years" value="7500000"/>\n    <constructor-arg name="ultimateanswer" value="42"/>\n</bean>\n\n\n请记住，要使其能够开箱即用，您的代码必须在编译时启用debug标志，以便spring可以从构造函数查找参数名。如果您不能或不希望用debug标志编译您的代码，您可以使用@constructorproperties jdk注解来显式地命名您的构造函数参数。示例类如下所示\n\npackage examples;\n\npublic class examplebean {\n\n    // fields omitted\n\n    @constructorproperties({"years", "ultimateanswer"})\n    public examplebean(int years, string ultimateanswer) {\n        this.years = years;\n        this.ultimateanswer = ultimateanswer;\n    }\n}\n\n\n# setter注入\n\n基于setter的di是由容器在调用无参数构造函数或无参数静态工厂方法来实例化bean之后再调用bean上的setter方法来实现的。\n\n下面的示例显示了一个只能通过使用纯setter注入来注入依赖项的类。这个类是传统的java。它是一个不依赖于容器特定接口、基类或注解的pojo。\n\npublic class simplemovielister {\n\n    // the simplemovielister has a dependency on the moviefinder\n    private moviefinder moviefinder;\n\n    // a setter method so that the spring container can inject a moviefinder\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // business logic that actually uses the injected moviefinder is omitted...\n}\n\n\napplicationcontext支持它管理的bean的基于构造函数和基于setter的di。 在已经通过构造函数方法注入了某些依赖项之后，它还支持基于setter的di。 您可以以beandefinition的形式配置依赖项，并与propertyeditor实例结合使用，以将属性从一种格式转换为另一种格式。 但是，大多数spring用户并不直接（即以编程方式）使用这些类，而是使用xml bean定义，带注解的组件（即以@ component，@ controller等进行注解的类）或@bean方法来处理这些类。 基于java的@configuration类。 然后将它们在内部转换为beandefinition实例，并用于加载整个spring ioc容器实例。\n\n> 由于可以混合使用基于构造函数的di和基于setter的di，因此将构造函数用于强制性依赖项并将setter方法或配置方法用于可选的依赖项是一个很好的经验。 注意，在setter方法上使用@required批注可以使该属性成为必需的依赖项。 但是，最好使用带有参数的程序验证的构造函数注入。\n> \n> spring团队通常提倡构造函数注入，因为它使您可以将应用程序组件实现为不可变对象，并确保所需的依赖项不为null。 此外，注入构造函数的组件始终以完全初始化的状态返回到客户端（调用）代码。 附带说明一下，构造器包含大量的参数是不好的代码，这表明该类可能承担了太多的职责，应进行重构以更好地解决关注点分离问题。\n> \n> setter注入主要应仅用于可以在类中分配合理的默认值的可选依赖项。 否则，必须在代码使用依赖项的任何地方执行非空检查。 setter注入的一个好处是，setter方法使该类的对象在以后可以重新配置或重新注入。 因此，通过jmx mbean进行管理是用于setter注入的典型用例。\n> \n> 使用对特定类最有意义的di。 有时，在处理您没有源代码的第三方类时，将为您做出选择。 例如，如果第三方类未公开任何setter方法，则构造函数注入可能是di的唯一可用形式。\n\n# 依赖解析过程\n\n容器按如下方式执行bean依赖项解析：\n\n * 使用描述所有bean的配置元数据创建和初始化applicationcontext。 可以通过xml，java代码或注解指定配置元数据。\n\n * 对于每个bean，它的依赖关系都以属性、构造函数参数或静态工厂方法的参数的形式表示(如果您使用该方法而不是普通的构造函数)。当实际创建bean时，将向bean提供这些依赖项。\n\n * 每个属性或构造函数参数都是要设置的实参，或者是对容器中另一个bean的引用。\n\n * 作为值的每个属性或构造函数参数都将从其指定的格式转换为该属性或构造函数参数的实际类型。默认情况下，spring可以将以字符串格式提供的值转换为所有内置类型，比如int、long、string、boolean等等。\n\n在创建容器时，spring容器会验证每个bean的配置。 但是，在实际创建bean之前，不会设置bean属性本身。 创建容器时，将创建具有单例作用域并设置为预先实例化（默认）的bean。 作用域在bean作用域中定义。 否则，仅在请求时才创建bean。 创建和分配bean的依赖关系及其依赖关系（依此类推）时，创建bean可能会导致创建一个bean图。 请注意，这些依赖项之间的解析不匹配可能会在后期出现，即在第一次创建受影响的bean时。\n\n> 如果主要使用构造函数注入，则可能会创建无法解析的循环依赖方案。\n> \n> 例如：a类通过构造函数注入需要b类的实例，而b类通过构造函数注入需要a类的实例。 如果您为将类a和b相互注入而配置了bean，则spring ioc容器会在运行时检测到此循环引用，并抛出beancurrentlyincreationexception。\n> \n> 一种可能的解决方案是编辑某些类的源代码，这些类的源代码由setter而不是构造函数来配置。 或者，避免构造函数注入，而仅使用setter注入。 换句话说，尽管不建议这样做，但是您可以使用setter注入配置循环依赖项。\n> \n> 与典型情况（没有循环依赖关系）不同，bean a和bean b之间的循环依赖关系迫使其中一个bean在完全初始化之前被注入另一个bean（经典的“鸡与蛋”场景）。\n\n通常，您可以信任spring做正确的事。 它在容器加载时检测配置问题，例如对不存在的bean的引用和循环依赖项。 spring设置属性并尽可能晚地解决依赖关系--在实际创建bean时。 这意味着，如果创建对象或其依赖项之一有问题，则正确加载了spring的容器以后可以在您请求对象时抛出异常-例如，bean会因不存在或无效属性而抛出异常。这样可能会延迟某些配置问题的可见性，所以这就是为什么默认情况下applicationcontext实现会预先实例化单例bean的原因。 在实际需要这些bean之前需要花一些前期时间和内存来创建它们，您会在创建applicationcontext时发现配置问题，而不是稍后。 您仍然可以覆盖此默认行为，以便单例bean延迟初始化，而不是预先实例化。\n\n如果不存在循环依赖关系，则在将一个或多个协作bean注入到从属bean中时，每个协作bean在注入到从属bean中之前都已完全配置。 这意味着，如果bean a依赖于bean b，则spring ioc容器会在对bean a调用setter方法之前完全配置beanb。换句话说，被实例化的bean（如果它不是预先实例化的单例） ），它的依赖项被设置，并调用了相关的生命周期方法（例如已配置的init方法或initializingbean回调方法）。\n\n# 依赖注入实例\n\n下面的示例为基于setter的di使用基于xml的配置元数据。spring xml配置文件的一小部分指定了一些bean定义，如下所示\n\n<bean id="examplebean" class="examples.examplebean">\n    \x3c!-- setter injection using the nested ref element --\x3e\n    <property name="beanone">\n        <ref bean="anotherexamplebean"/>\n    </property>\n\n    \x3c!-- setter injection using the neater ref attribute --\x3e\n    <property name="beantwo" ref="yetanotherbean"/>\n    <property name="integerproperty" value="1"/>\n</bean>\n\n<bean id="anotherexamplebean" class="examples.anotherbean"/>\n<bean id="yetanotherbean" class="examples.yetanotherbean"/>\n\n\npublic class examplebean {\n\n    private anotherbean beanone;\n\n    private yetanotherbean beantwo;\n\n    private int i;\n\n    public void setbeanone(anotherbean beanone) {\n        this.beanone = beanone;\n    }\n\n    public void setbeantwo(yetanotherbean beantwo) {\n        this.beantwo = beantwo;\n    }\n\n    public void setintegerproperty(int i) {\n        this.i = i;\n    }\n}\n\n\n在前面的示例中，将setter声明为与xml文件中指定的属性匹配。下面的示例使用基于构造函数的di\n\n<bean id="examplebean" class="examples.examplebean">\n    \x3c!-- constructor injection using the nested ref element --\x3e\n    <constructor-arg>\n        <ref bean="anotherexamplebean"/>\n    </constructor-arg>\n\n    \x3c!-- constructor injection using the neater ref attribute --\x3e\n    <constructor-arg ref="yetanotherbean"/>\n\n    <constructor-arg type="int" value="1"/>\n</bean>\n\n<bean id="anotherexamplebean" class="examples.anotherbean"/>\n<bean id="yetanotherbean" class="examples.yetanotherbean"/>\n\n\npublic class examplebean {\n\n    private anotherbean beanone;\n\n    private yetanotherbean beantwo;\n\n    private int i;\n\n    public examplebean(\n        anotherbean anotherbean, yetanotherbean yetanotherbean, int i) {\n        this.beanone = anotherbean;\n        this.beantwo = yetanotherbean;\n        this.i = i;\n    }\n}\n\n\nbean定义中指定的构造函数参数用作examplebean构造函数的参数。\n\n现在考虑该示例的一个变体，在该变体中，不是使用构造函数，而是告诉spring调用静态工厂方法以返回对象的实例：\n\n<bean id="examplebean" class="examples.examplebean" factory-method="createinstance">\n    <constructor-arg ref="anotherexamplebean"/>\n    <constructor-arg ref="yetanotherbean"/>\n    <constructor-arg value="1"/>\n</bean>\n\n<bean id="anotherexamplebean" class="examples.anotherbean"/>\n<bean id="yetanotherbean" class="examples.yetanotherbean"/>\n\n\npublic class examplebean {\n\n    // a private constructor\n    private examplebean(...) {\n        ...\n    }\n\n    // a static factory method; the arguments to this method can be\n    // considered the dependencies of the bean that is returned,\n    // regardless of how those arguments are actually used.\n    public static examplebean createinstance (\n        anotherbean anotherbean, yetanotherbean yetanotherbean, int i) {\n\n        examplebean eb = new examplebean (...);\n        // some other operations...\n        return eb;\n    }\n}\n\n\n静态工厂方法的参数由<constructor-arg />元素提供，与实际使用构造函数的情况完全相同。 factory方法返回的类的类型不必与包含静态工厂方法的类的类型相同（尽管在此示例中是）。 实例（非静态）工厂方法可以以基本上相同的方式使用（除了使用factory-bean属性代替class属性之外），因此在此不讨论这些细节。\n\n\n# 1.4.2. 依赖配置详解\n\n如上一节所述，您可以将bean属性和构造器参数定义为对容器中其他bean（协作者）的引用或内联定义的值。 spring的基于xml的配置元数据为达到此目的在其<property />和<constructor-arg />元素中支持子元素类型。\n\n# 直接值（原语，strings等）\n\n<property />元素的value属性将属性或构造器参数指定为人类可读的字符串表示形式。 spring的转换服务用于将这些值从字符串转换为属性或参数的实际类型。 以下示例显示了设置的各种值：\n\n<bean id="mydatasource" class="org.apache.commons.dbcp.basicdatasource" destroy-method="close">\n    \x3c!-- results in a setdriverclassname(string) call --\x3e\n    <property name="driverclassname" value="com.mysql.jdbc.driver"/>\n    <property name="url" value="jdbc:mysql://localhost:3306/mydb"/>\n    <property name="username" value="root"/>\n    <property name="password" value="misterkaoli"/>\n</bean>\n\n\n下面的示例使用p-namespace进行更简洁的xml配置\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n    https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="mydatasource" class="org.apache.commons.dbcp.basicdatasource"\n        destroy-method="close"\n        p:driverclassname="com.mysql.jdbc.driver"\n        p:url="jdbc:mysql://localhost:3306/mydb"\n        p:username="root"\n        p:password="misterkaoli"/>\n\n</beans>\n\n\n前面的xml更简洁。 但是，除非在创建bean定义时使用支持自动属性补全的ide（例如intellij idea或eclipse的spring tools），否则错误是在运行时而不是编码时发现的。 强烈建议您使用此类ide帮助开发。\n\n您还可以配置java.util.properties实例，如下所示：\n\n<bean id="mappings"\n    class="org.springframework.context.support.propertysourcesplaceholderconfigurer">\n\n    \x3c!-- typed as a java.util.properties --\x3e\n    <property name="properties">\n        <value>\n            jdbc.driver.classname=com.mysql.jdbc.driver\n            jdbc.url=jdbc:mysql://localhost:3306/mydb\n        </value>\n    </property>\n</bean>\n\n\nspring容器通过使用javabeans propertyeditor机制将<value />元素内的文本转换为java.util.properties实例。 这很方便，并且是spring团队偏爱使用嵌套的<value />元素而不是value属性的几个地方之一。\n\nidref元素\n\nidref元素只是将容器中另一个bean的id（字符串值-不是引用）传递给<constructor-arg />或<property />元素的一种防错方法。 以下示例显示了如何使用它：\n\n<bean id="thetargetbean" class="..."/>\n\n<bean id="theclientbean" class="...">\n    <property name="targetname">\n        <idref bean="thetargetbean"/>\n    </property>\n</bean>\n\n\n前面的bean定义代码片段(在运行时)与下面的代码片段完全等价\n\n<bean id="thetargetbean" class="..." />\n\n<bean id="client" class="...">\n    <property name="targetname" value="thetargetbean"/>\n</bean>\n\n\n第一种形式优于第二种形式，因为使用idref标记可使容器在部署时验证所引用的名为bean的实际存在。 在第二个变体中，不对传递给客户端bean的targetname属性的值执行验证。 拼写错误仅在实际实例化客户端bean时才发现（最有可能导致致命的结果）。 如果客户端bean是原型bean，则可能在部署容器很久之后才发现此错误和所产生的异常。\n\n> 这里传的都是字面量，而不是bean引用，idref与value的区别只是前者会做校验。\n> \n> 在4.0 bean xsd中不再支持idref元素上的local属性，因为它不再提供常规bean引用上的值（这里不好理解，之前local属性的作用是：只能指定与当前配置的对象在同一个配置文件的对象定义的名称，所以这里认为5.3.2把这个属性废弃就行了）。 升级到4.0模式时，将现有的idref local属性更改为idref bean。\n\n<idref />元素带来价值的一个常见地方（至少在spring 2.0之前的版本中）是在proxyfactorybean bean定义中配置aop拦截器。 在指定拦截器名称时使用<idref />元素可防止您拼写错误的拦截器id。\n\n# 引用其他bean\n\nref元素是<constructor-arg />或<property />定义元素内的最后一个元素。 在这里，您将bean的指定属性的值设置为对容器管理的另一个bean（协作者）的引用。 引用的bean是要设置其属性的bean的依赖，并且在设置属性之前根据需要对其进行初始化。 （如果协作者是单例bean，则它可能已经由容器初始化了。）所有引用最终都是对另一个对象的引用。 作用于和验证取决于您是通过bean还是parent指定另一个对象的id或名称。\n\n通过<ref />标记的bean属性指定目标bean是最通用的形式，并且允许创建对同一容器或父容器中任何bean的引用，而不管它是否在同一xml文件中。 bean属性的值可以与目标bean的id属性相同，也可以与目标bean的name属性中的值之一相同。 下面的示例演示如何使用ref元素：\n\n<ref bean="somebean"/>\n\n\n通过parent属性指定目标bean将创建对当前容器的父容器中的bean的引用。 parent属性的值可以与目标bean的id属性或目标bean的名称属性中的值之一相同。 目标bean必须位于当前容器的父容器中。 在容器具有层次结构并且要包装一个与在父容器中已存在的bean具有相同名称的代理bean时，才应该使用parent属性。 以下清单显示了如何使用parent属性：\n\n\x3c!-- in the parent context --\x3e\n<bean id="accountservice" class="com.something.simpleaccountservice">\n    \x3c!-- insert dependencies as required as here --\x3e\n</bean>\n\n\n\x3c!-- in the child (descendant) context --\x3e\n<bean id="accountservice" \x3c!-- bean name is the same as the parent bean --\x3e\n    class="org.springframework.aop.framework.proxyfactorybean">\n    <property name="target">\n        <ref parent="accountservice"/> \x3c!-- notice how we refer to the parent bean --\x3e\n    </property>\n    \x3c!-- insert other configuration and dependencies as required here --\x3e\n</bean>\n\n\n> ref元素的local属性在4.0 bean xsd中不再受支持，因为它不再提供常规bean引用上的值。 升级到4.0模式时，将现有的ref local更改为ref bean。\n\n# 内部beans\n\n<property />或<constructor-arg />元素内的<bean />元素定义了一个内部bean，如以下示例所示：\n\n<bean id="outer" class="...">\n    \x3c!-- instead of using a reference to a target bean, simply define the target bean inline --\x3e\n    <property name="target">\n        <bean class="com.example.person"> \x3c!-- this is the inner bean --\x3e\n            <property name="name" value="fiona apple"/>\n            <property name="age" value="25"/>\n        </bean>\n    </property>\n</bean>\n\n\n内部bean定义不需要定义id或名称。 如果指定，则容器不使用该值作为标识符。 容器在创建时也会忽略scope标志，因为内部bean始终是匿名的，并且始终与外部bean一起创建。 不能独立访问内部bean，也不能将它们注入到协作bean中（除了封装的bean）。\n\n# 集合\n\n<list />，<set />，<map />和<props />元素分别设置java集合类型的list，set，map和properties的属性和参数。 以下示例显示了如何使用它们：\n\n<bean id="morecomplexobject" class="example.complexobject">\n    \x3c!-- results in a setadminemails(java.util.properties) call --\x3e\n    <property name="adminemails">\n        <props>\n            <prop key="administrator">administrator@example.org</prop>\n            <prop key="support">support@example.org</prop>\n            <prop key="development">development@example.org</prop>\n        </props>\n    </property>\n    \x3c!-- results in a setsomelist(java.util.list) call --\x3e\n    <property name="somelist">\n        <list>\n            <value>a list element followed by a reference</value>\n            <ref bean="mydatasource" />\n        </list>\n    </property>\n    \x3c!-- results in a setsomemap(java.util.map) call --\x3e\n    <property name="somemap">\n        <map>\n            <entry key="an entry" value="just some string"/>\n            <entry key ="a ref" value-ref="mydatasource"/>\n        </map>\n    </property>\n    \x3c!-- results in a setsomeset(java.util.set) call --\x3e\n    <property name="someset">\n        <set>\n            <value>just some string</value>\n            <ref bean="mydatasource" />\n        </set>\n    </property>\n</bean>\n\n\n其中，map的key或者value，或set的value，可以是以下任一元素：\n\nbean | ref | idref | list | set | map | props | value | null\n\n\n集合合并\n\nspring容器还支持合并集合。 应用程序开发人员可以定义父<list />，<map />，<set />或<props />元素，并具有从父集合继承并覆盖值的子元素，，或。 也就是说，子集合的值是合并父集合和子集合的元素的结果，子集合的元素会覆盖父集合中指定的值。\n\n下面的示例演示了集合合并：\n\n<beans>\n    <bean id="parent" abstract="true" class="example.complexobject">\n        <property name="adminemails">\n            <props>\n                <prop key="administrator">administrator@example.com</prop>\n                <prop key="support">support@example.com</prop>\n            </props>\n        </property>\n    </bean>\n    <bean id="child" parent="parent">\n        <property name="adminemails">\n            \x3c!-- the merge is specified on the child collection definition --\x3e\n            <props merge="true">\n                <prop key="sales">sales@example.com</prop>\n                <prop key="support">support@example.co.uk</prop>\n            </props>\n        </property>\n    </bean>\n<beans>\n\n\n注意子bean定义的adminemails属性的<props />元素上使用merge = true属性。 当子bean由容器解析并实例化后，生成的实例具有adminemails properties集合，其中包含将子bean的adminemails集合与父bean的adminemails集合合并的结果。 以下清单显示了结果：\n\nadministrator=administrator@example.com\nsales=sales@example.com\nsupport=support@example.co.uk\n\n\n子properties集合的值集继承了父<props />的所有属性，子属性的support值覆盖了父集合中的值。\n\n此合并行为类似地适用于<list />，<map />和<set />集合类型。 在<list />元素的特定情况下，将维护与list集合类型关联的语义（即，值的有序集合的概念）。 父级的值先于子级列表的所有值。 对于map，set和properties集合类型，不存在排序。 因此，对于容器内部使用的关联map，set和properties实现类型的集合，没有有效的排序语义。\n\n集合合并的限制\n\n您不能合并不同的集合类型(如map和list)。如果您尝试这样做，则会抛出适当的异常。必须在下层的继承的子集合定义上指定merge属性。在父集合定义上指定merge属性是多余的，并且不会导致所需的合并。\n\n强类型的集合\n\n随着java 5中泛型类型的引入，您可以使用强类型集合。 也就是说，可以声明一个collection类型，使其只能包含（例如）string元素。 如果使用spring将强类型的collection依赖注入到bean中，则可以利用spring的类型转换支持，以便在将强类型的collection实例的元素添加到bean中之前，先将其转换为适当的类型。 以下java类和bean定义显示了如何执行此操作：\n\npublic class someclass {\n\n    private map<string, float> accounts;\n\n    public void setaccounts(map<string, float> accounts) {\n        this.accounts = accounts;\n    }\n}\n\n\n<beans>\n    <bean id="something" class="x.y.someclass">\n        <property name="accounts">\n            <map>\n                <entry key="one" value="9.99"/>\n                <entry key="two" value="2.75"/>\n                <entry key="six" value="3.99"/>\n            </map>\n        </property>\n    </bean>\n</beans>\n\n\n当准备注入something bean的accounts属性时，可以通过反射获得有关强类型map <string，float>的元素类型的泛型信息。 因此，spring的类型转换基础架构将各种值元素识别为float类型，并将字符串值（9.99、2.75和3.99）转换为实际的float类型。\n\n# null和空string\n\nspring将属性之类的空参数视为空字符串。以下基于xml的配置元数据片段将email属性设置为空字符串值("")。\n\n<bean class="examplebean">\n    <property name="email" value=""/>\n</bean>\n\n\n等价于：\n\nexamplebean.setemail("");\n\n\n<null />元素处理空值。 以下清单显示了一个示例：\n\n<bean class="examplebean">\n    <property name="email">\n        <null/>\n    </property>\n</bean>\n\n\n等价于：\n\nexamplebean.setemail(null);\n\n\n# p-namespace\n\n通过p-namespace，您可以使用bean元素的属性（而不是嵌套的<property />元素）来描述协作bean的属性值，或同时使用这两者。\n\nspring支持带有命名空间的可扩展配置格式，这些名称空间基于xml schema定义。 本章讨论的bean配置格式在xml schema文档中定义。 但是，p-namespace未在xsd文件中定义，仅存在于spring core中。\n\n下面的示例显示了两个解析到相同结果的xml片段(第一个使用标准xml格式，第二个使用p-namespace)：\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean name="classic" class="com.example.examplebean">\n        <property name="email" value="someone@somewhere.com"/>\n    </bean>\n\n    <bean name="p-namespace" class="com.example.examplebean"\n        p:email="someone@somewhere.com"/>\n</beans>\n\n\n该示例显示了bean定义中的p-namespace中的一个名为email的属性。这告诉spring包含一个属性声明。如前所述，p-namespace没有schema 定义，因此可以将属性的名称设置为属性名。\n\n下一个示例包括另外两个bean定义，它们都引用了另一个bean：\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean name="john-classic" class="com.example.person">\n        <property name="name" value="john doe"/>\n        <property name="spouse" ref="jane"/>\n    </bean>\n\n    <bean name="john-modern"\n        class="com.example.person"\n        p:name="john doe"\n        p:spouse-ref="jane"/>\n\n    <bean name="jane" class="com.example.person">\n        <property name="name" value="jane doe"/>\n    </bean>\n</beans>\n\n\n此示例不仅包括使用p-namespace的属性值，而且还使用特殊格式来声明属性引用。 第一个bean定义使用<property name="spouse" ref="jane" />创建从bean john到bean jane的引用，而第二个bean定义使用p:spouse-ref="jane"属性做相同的事情。 在这种情况下，spouse是属性名称，而-ref部分表示这不是一个直接值，而是对另一个bean的引用。\n\n> p-namespace不像标准xml格式那么灵活。例如，声明属性引用的格式与以ref结尾的属性发生冲突(我验证仍能正确解析)，而标准xml格式没有。我们建议您谨慎地选择自己的方法，并将其告知团队成员，以避免生成同时使用这三种方法的xml文档。\n\n# c-namespace\n\n与p-namespace的xml快捷方式类似，spring 3.1中引入的c-namespace允许内联属性来配置构造函数参数，而不是嵌套的constructor-arg元素。\n\n下面的示例使用c:namespace来做和基于构造器的依赖注入相同的事情\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:c="http://www.springframework.org/schema/c"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="beantwo" class="x.y.thingtwo"/>\n    <bean id="beanthree" class="x.y.thingthree"/>\n\n    \x3c!-- traditional declaration with optional argument names --\x3e\n    <bean id="beanone" class="x.y.thingone">\n        <constructor-arg name="thingtwo" ref="beantwo"/>\n        <constructor-arg name="thingthree" ref="beanthree"/>\n        <constructor-arg name="email" value="something@somewhere.com"/>\n    </bean>\n\n    \x3c!-- c-namespace declaration with argument names --\x3e\n    <bean id="beanone" class="x.y.thingone" c:thingtwo-ref="beantwo"\n        c:thingthree-ref="beanthree" c:email="something@somewhere.com"/>\n\n</beans>\n\n\nc:命名空间使用与p: 相同的约定(bean引用的末尾是-ref)，通过它们的名称设置构造器参数。类似地，它需要在xml文件中声明，即使它不是在xsd模式中定义的(它存在于spring core中)。\n\n对于极少数情况下无法使用构造函数参数名称的情况（通常，如果字节码是在没有调试信息的情况下编译的），则可以使用参数索引，如下所示：\n\n\x3c!-- c-namespace index declaration --\x3e\n<bean id="beanone" class="x.y.thingone" c:_0-ref="beantwo" c:_1-ref="beanthree"\n    c:_2="something@somewhere.com"/>\n\n\n> 由于xml语法的原因，索引表示法需要有前导符号 "_"，因为xml属性名不能以数字开头(尽管有些ide允许)。<constructor-arg>元素也可以使用相应的索引表示法，但不常用，因为在那里声明的普通顺序通常就足够了。\n\n# 复合属性名\n\n在设置bean属性时，可以使用复合或嵌套属性名，只要路径的所有组件(最终属性名除外)都不是null的。考虑下面的bean定义\n\n<bean id="something" class="things.thingone">\n    <property name="fred.bob.sammy" value="123" />\n</bean>\n\n\nsomething bean有一个fred属性，它有一个bob属性，bob还有一个sammy属性，最后的sammy属性被设置为值123。为了正常解析，在构造bean之后，something的fred属性和fred的bob属性不能为空。否则，抛出nullpointerexception。\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance" xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n<bean id="student" class="pre.chl.spring.core.student" p:ref-ref="courseref">\n    \x3c!--如果把下面这行注释了就会抛异常nullvalueinnestedpathexception\n\t如果不注释，score最后的值也是99，可见p命名空间和原始标签混用可能会出现冲\t突，应该只会选原始标签元素去解析--\x3e\n    \x3c!--<property name="ref" ref="courseref"/>--\x3e\n    <property name="ref.score" value="99"/>\n</bean>\n    <bean id="courseref" class="pre.chl.spring.core.course" p:score="100"/>\n</beans>\n\n\n\n# 1.4.3. depends-on\n\n如果一个bean是另一个bean的依赖项，则通常意味着将一个bean设置为另一个bean的属性。 通常，您可以使用基于xml的配置元数据中的<ref />元素来完成此操作。 但是，有时bean之间的依赖不太直接。 一个例子是当要触发类中的静态初始化器的时候，例如数据库驱动程序注册。 depends-on可以显式地强制初始化一个或多个使用该元素引用的bean。 下面的示例使用depends-on属性来表示对单例bean的依赖关系：\n\n<bean id="beanone" class="examplebean" depends-on="manager"/>\n<bean id="manager" class="managerbean" />\n\n\n要表达对多个bean的依赖关系，请提供一个bean名称的列表作为depends-on属性的值（逗号，空格和分号都是合法 的分隔符）：\n\n<bean id="beanone" class="examplebean" depends-on="manager,accountdao">\n    <property name="manager" ref="manager" />\n</bean>\n\n<bean id="manager" class="managerbean" />\n<bean id="accountdao" class="x.y.jdbc.jdbcaccountdao" />\n\n\n> depends-on既可以指定初始化时依赖项，在单例bean的情况下，也可以指定相应的销毁时依赖项。在销毁给定bean本身之前，首先销毁 depends-on的bean。因此， depends-on还可以控制关闭顺序。\n\n\n# 1.4.4. 懒加载beans\n\n默认情况下，作为初始化过程的一部分，applicationcontext实现会尽早创建和配置所有单例bean。 通常，这种预初始化是可取的，因为与数小时甚至数天后相比，会立即发现配置或环境参数中的错误。 如果您不希望这样做，则可以通过将bean定义标记为延迟初始化来阻止单例bean的预实例化。 延迟初始化的bean告诉ioc容器在首次请求时（而不是在启动时）才创建一个bean实例。\n\n在xml中，此行为由<bean />元素上的lazy-init属性控制，如以下示例所示：\n\n<bean id="lazy" class="com.something.expensivetocreatebean" lazy-init="true"/>\n<bean name="not.lazy" class="com.something.anotherbean"/>\n\n\napplicationcontext使用上述配置时，当applicationcontext启动，lazy bean不会立即预实例化，not.lazy bean被尽早地预实例化。\n\n但是，当延迟初始化的bean是未延迟初始化的单例bean的依赖项时，applicationcontext会在启动时创建延迟初始化的bean，因为它必须满足单例的依赖关系。 延迟初始化的bean被注入到其他未延迟初始化的单例bean中。\n\n您还可以使用<beans />元素上的default-lazy-init属性在容器级别控制延迟初始化，如以下示例所示：\n\n<beans default-lazy-init="true">\n    \x3c!-- no beans will be pre-instantiated... --\x3e\n</beans>\n\n\n\n# 1.4.5. 自动装配协作者\n\nspring容器可以自动装配协作bean之间的关系。您可以通过检查applicationcontext的内容，让spring为您的bean自动解析协作者(其他bean)。自动装配具有以下优点：\n\n * 自动装配可以显著减少指定属性或构造器参数的需要。(本章其他地方讨论的其他机制，比如bean模板，在这方面也很有价值。)\n\n * 随着对象的更新，自动装配可以更新配置。 例如，如果需要将依赖项添加到类中，则无需修改配置即可自动满足该依赖项。 因此，自动装配在开发过程中特别有用，而不必否定在代码库变得更稳定时切换到显式装配的选择。\n\n使用基于xml的配置元数据时（请参阅“依赖注入”），可以使用<bean />元素的autowire属性为bean定义指定自动装配模式。 自动装配功能具有四种模式。 您可以为每个bean指定自动装配，并选择要自动装配的模式。 下表描述了四种自动装配模式：\n\nmode          explanation\nno            (默认)不自动装配。bean引用必须由ref元素定义。对于较大的部署，不建议更改默认设置，因为显式地指定协作者可以提供更好的控制和透明度。在某种程度上，它记录了系统的结构。\nbyname        按属性名称自动装配。 spring查找与需要自动装配的属性同名的bean。\n              例如，如果一个bean定义被设置为按名称自动装配，并且包含一个master属性（即，它具有setmaster（..）方法），那么spring将查找一个名为master的bean定义并使用它来设置该属性。\nbytype        如果容器中恰好存在该属性类型的一个bean，则自动装配该属性。如果存在多个，将抛出一个致命异常，这表明您不能对该bean使用bytype自动装配。如果没有匹配的bean，则什么也不会发生(属性没有设置)。\nconstructor   与bytype类似，但适用于构造函数参数。 如果容器中不存在构造函数参数类型的一个bean，则将引发致命错误。\n\n使用bytype或构造器自动装配模式，您可以装配数组和集合类。 在这种情况下，将提供容器中与预期类型匹配的所有自动装配候选，以满足依赖。 如果期望的key类型为string，则可以自动装配强类型map实例。 自动装配的map实例的值包括与期望类型匹配的所有bean实例，并且map实例的key包含相应的bean名称。\n\n# 自动装配的局限和缺点\n\n当在项目中一致使用自动装配时，自动装配效果最佳。 如果不全部使用自动装配，则可能会使开发人员使用自动装配仅来装配一个或两个bean定义而感到困惑。\n\n考虑自动装配的局限性和缺点：\n\n * property和constructor-arg设置中的显式依赖总是覆盖自动装配。您不能自动装配简单的属性，如原语、strings和classes(以及这些简单属性的数组)。这种限制是由设计造成的。\n\n * 自动装配不如显示装配严格。尽管如此，正如前面的表中所指出的那样，在出现可能产生意外结果的歧义时，spring会谨慎地避免猜测。spring管理的对象之间的关系不再显式地记录。\n\n * 从spring容器生成文档的工具可能无法使用装配信息。\n\n * 容器内的多个bean定义可能与要自动装配的setter方法或构造器参数指定的类型匹配。 对于数组，集合或map实例，这不一定是问题。 但是，对于需要单个值的依赖项，不会随便解决此歧义。 如果没有唯一的bean定义可用，则会引发异常。\n\n在后一种情况下，您有几种选择：\n\n * 使用显示装配而不是自动装配\n\n * 通过将其bean的autowire-candidate属性设置为false，避免自动装配bean，如下一节所述。\n\n * 通过将其<bean />元素的primary属性设置为true，将定义的单个bean指定为主要候选对象。\n\n * 实现基于注解的配置提供的更细粒度的控制。\n\n# 从自动装配中排除bean\n\n在每个bean的基础上，您可以从自动装配中排除一个bean。 使用spring的xml格式，将<bean />元素的autowire-candidate属性设置为false。 容器使特定的bean对自动装配基础架构不可用（包括注解式的配置，例如@autowired）。\n\n> autowire-candidate属性被设计为只影响基于类型的自动装配。它不影响通过名称进行的显式引用，即使指定的bean没有被标记为自动装配候选对象，也会解析该引用。因此，如果名称匹配，按名称自动装配仍然会注入一个bean。\n\n您还可以基于与bean名称的模式匹配来限制自动装配候选项。 顶级<beans />元素在其default-autowire-candidates属性中接受一个或多个模式。 例如，要将自动装配候选状态限制为名称以repository结尾的任何bean，请提供* repository值。 要提供多种模式，请在以逗号分隔的列表中定义它们。 bean定义的autowire-candidate属性的显式值true或false始终优先。 对于此类bean，模式匹配规则不适用。\n\n这些技术对于那些您不希望通过自动装配被注入到其他bean中的bean非常有用。这并不意味着不能使用自动装配来配置被排除的bean本身。相反，bean本身并不是自动装配其他bean的候选对象。\n\n\n# 1.4.6. 方法注入\n\n在大多数应用场景中，容器中的大多数bean是单例的。 当单例bean需要与另一个单例bean协作或非单例bean需要与另一个非单例bean协作时，通常可以通过将一个bean定义为另一个bean的属性来处理依赖。 当bean的生命周期不同时会出现问题。 假设单例bean a可能需要使用非单例（原型）bean b，也许是在a的每个方法调用时使用的。容器仅创建一次单例bean a，因此只有一次机会来设置属性。 每次需要一个bean b时，容器都无法为bean a提供一个新的bean b实例。\n\n一个解决方案是放弃一些控制反转。您可以通过实现applicationcontextaware接口使bean a感知到容器，并在bean a每次需要bean b实例时向容器发出getbean(“b”)调用来获得(通常是新的)。下面的示例演示了这种方法：\n\n// a class that uses a stateful command-style class to perform some processing\npackage fiona.apple;\n\n// spring-api imports\nimport org.springframework.beans.beansexception;\nimport org.springframework.context.applicationcontext;\nimport org.springframework.context.applicationcontextaware;\n\npublic class commandmanager implements applicationcontextaware {\n\n    private applicationcontext applicationcontext;\n\n    public object process(map commandstate) {\n        // grab a new instance of the appropriate command\n        command command = createcommand();\n        // set the state on the (hopefully brand new) command instance\n        command.setstate(commandstate);\n        return command.execute();\n    }\n\n    protected command createcommand() {\n        // notice the spring api dependency!\n        return this.applicationcontext.getbean("command", command.class);\n    }\n\n    public void setapplicationcontext(\n            applicationcontext applicationcontext) throws beansexception {\n        this.applicationcontext = applicationcontext;\n    }\n}\n\n\n前面的情况是不可取的，因为业务代码能够感知spring框架并与之耦合。方法注入是spring ioc容器的一个高级特性，它让您很好地处理这个用例。\n\n> 您可以在这篇博客文章中阅读更多关于方法注入的探讨。\n\n# lookup方法注入\n\nlookup 方法注入是容器重写容器管理的bean上的方法并返回容器中另一个bean的功能。 查找通常涉及原型bean，如上一节中所述。 spring框架通过使用cglib库中的字节码生成功能来动态生成覆盖该方法的子类，从而实现此方法注入。\n\n>  * 为了使此动态子类起作用，spring bean容器子类的类型也不能是final，而要覆盖的方法也不能是final。\n> \n>  * 对具有抽象方法的类进行单元测试需要您自己对该类进行子类化，并提供该抽象方法的stub实现。\n> \n>  * 组件扫描也需要具体的方法，这需要具体的类。\n> \n>  * 另一个关键限制是，查找方法不适用于工厂方法，尤其不适用于配置类中的@bean方法，因为在这种情况下，容器不负责创建实例，因此无法创建运行时生成的 动态子类。\n\n对于前面的代码片段中的commandmanager类，spring容器动态地重写createcommand（）方法。 如重做的示例所示，commandmanager类没有任何spring依赖项：\n\npackage fiona.apple;\n\n// no more spring imports!\n\npublic abstract class commandmanager {\n\n    public object process(object commandstate) {\n        // grab a new instance of the appropriate command interface\n        command command = createcommand();\n        // set the state on the (hopefully brand new) command instance\n        command.setstate(commandstate);\n        return command.execute();\n    }\n\n    // okay... but where is the implementation of this method?\n    protected abstract command createcommand();\n}\n\n\n在包含要注入的方法的客户端类（在本例中为commandmanager）中，要注入的方法需要以下形式的签名：\n\n<public|protected> [abstract] <return-type> themethodname(no-arguments);\n\n\n如果方法是抽象的，则动态生成的子类实现该方法。否则，动态生成的子类会覆盖在原始类中定义的具体方法。考虑以下示例:\n\n\x3c!-- a stateful bean deployed as a prototype (non-singleton) --\x3e\n<bean id="mycommand" class="fiona.apple.asynccommand" scope="prototype">\n    \x3c!-- inject dependencies here as required --\x3e\n</bean>\n\n\x3c!-- commandprocessor uses statefulcommandhelper --\x3e\n<bean id="commandmanager" class="fiona.apple.commandmanager">\n    <lookup-method name="createcommand" bean="mycommand"/>\n</bean>\n\n\nid为commandmanager的bean在需要mycommand bean的新实例时调用自己的createcommand()方法。如果确实需要部署mycommand bean，那么必须小心地将其作为原型部署。如果是单例，则每次返回mycommand bean的相同实例。\n\n另外，在基于注解的组件模式中，您可以通过@lookup注解声明一个查找方法，如下面的示例所示：\n\npublic abstract class commandmanager {\n\n    public object process(object commandstate) {\n        command command = createcommand();\n        command.setstate(commandstate);\n        return command.execute();\n    }\n\n    @lookup("mycommand")\n    protected abstract command createcommand();\n}\n\n\n或者，更常用的是，您可以依赖于根据查找方法声明的返回类型解析目标bean\n\npublic abstract class commandmanager {\n\n    public object process(object commandstate) {\n        mycommand command = createcommand();\n        command.setstate(commandstate);\n        return command.execute();\n    }\n\n    @lookup\n    protected abstract mycommand createcommand();\n}\n\n\n请注意，通常应使用具体的stub实现声明此类带注解的查找方法，以使其与spring的组件扫描规则（默认情况下抽象类会被忽略）兼容。 此限制不适用于显式注册或显式导入的bean类。\n\n> 访问作用域不同的目标bean的另一种方法是objectfactory / provider注入点。\n> \n> servicelocatorfactorybean（在org.springframework.beans.factory.config包中）也很有用。\n\n# 任意方法替换\n\n与查找方法注入相比，方法注入的一种不太有用的形式是能够用另一种方法实现替换托管bean中的任意方法。 您可以放心地跳过本节的其余部分，直到您真正需要此功能为止。\n\n借助基于xml的配置元数据，您可以使用replaced-method元素将现有的方法实现替换为另一个。 考虑以下类，该类具有一个我们要覆盖的名为computevalue的方法：\n\npublic class myvaluecalculator {\n\n    public string computevalue(string input) {\n        // some real code...\n    }\n\n    // some other methods...\n}\n\n\n一个实现org.springframework.beans.factory.support.methodreplacer接口的类提供了新的方法定义，如以下示例所示：\n\n/**\n * meant to be used to override the existing computevalue(string)\n * implementation in myvaluecalculator\n */\npublic class replacementcomputevalue implements methodreplacer {\n\n    public object reimplement(object o, method m, object[] args) throws throwable {\n        // get the input value, work with it, and return a computed result\n        string input = (string) args[0];\n        ...\n        return ...;\n    }\n}\n\n\n用于部署原始类并指定方法重写的bean定义类似于以下示例：\n\n<bean id="myvaluecalculator" class="x.y.z.myvaluecalculator">\n    \x3c!-- arbitrary method replacement --\x3e\n    <replaced-method name="computevalue" replacer="replacementcomputevalue">\n        <arg-type>string</arg-type>\n    </replaced-method>\n</bean>\n\n<bean id="replacementcomputevalue" class="a.b.c.replacementcomputevalue"/>\n\n\n您可以在<replaced-method />元素内使用一个或多个<arg-type />元素来指示被覆盖的方法的方法签名。 仅当方法重载且类中存在多个变体时，才需要对参数签名。 为了方便起见，参数的类型字符串可以是完全限定类型名称的子字符串。 例如，以下所有都匹配java.lang.string：\n\njava.lang.string\nstring\nstr\n\n\n因为参数的数量通常足以区分每个可能的选择，所以通过让您仅键入与参数类型匹配的最短字符串，此快捷方式可以节省很多输入。\n\n\n# 1.5. bean作用域\n\n创建一个bean定义时，将创建一个配置，该配置用于创建该bean定义所定义的类的实例。 bean定义是配置的思想很重要，因为它意味您可以从一个配置中创建一个类的许多对象实例。\n\n您不仅可以控制要插入到从特定bean定义创建的对象中的各种依赖项和配置值，还可以控制从特定bean定义创建的对象的作用域。 这种方法功能强大且灵活，因为您可以选择通过配置创建的对象的作用域，而不必在java类级别上bake（这里不知道如何翻译）对象的作用域。 可以将bean定义为部署在多个作用域之一中。 spring框架支持六个作用域，其中四个只有在使用web感知的applicationcontext时才可用。 您还可以创建自定义作用域。\n\nscope         description\nsingleton     （默认值）将每个spring ioc容器的单个bean定义作用域限定为单个对象实例。\nprototype     将单个bean定义的作用域限定为任意数量的对象实例。\nrequest       将单个bean定义的作用域限定为单个http请求的生命周期内。\n              也就是说，每个http请求都有一个自己的bean实例，它是在单个bean定义的基础上创建的。\n              仅在web感知的spring applicationcontext上下文中有效。\nsession       将单个bean定义的作用域限定为http session的生命周期内。 仅在web感知的spring\n              applicationcontext上下文中有效。\napplication   将单个bean定义的作用域限定为servletcontext的生命周期内。 仅在web感知的spring\n              applicationcontext上下文中有效。\nwebsocket     将单个bean定义的作用域限定为websocket的生命周期内。 仅在web感知的spring\n              applicationcontext上下文中有效。\n\n> 从spring 3.0开始，线程作用域可用，但默认情况下未注册。 有关更多信息，请参见simplethreadscope文档。 有关如何注册此或任何其他自定义作用域的说明，请参阅自定义作用域。\n\n\n# 1.5.1. 单例作用域\n\n一个单例bean只有一个共享实例被管理，所有对具有一个或多个与该bean定义匹配的id的bean的请求都会导致spring容器返回一个特定的bean实例。\n\n换句话说，当您定义一个bean定义并将其定义为单例时，spring ioc容器将为该bean定义所定义的对象创建一个实例。 该单个实例存储在此类单例bean的缓存中，并且对该命名bean的所有后续请求和引用都返回缓存的对象。 下图显示了单例作用域的工作方式：\n\n\n\nspring的单例bean概念与《gang of four (gof)》一书中定义的单例模式不同。 gof中的单例对对象的作用域进行硬编码，以使每个classloader只能创建一个特定类的一个实例。 最好将spring单例作用域描述为每个容器和每个bean。 这意味着，如果您在单个spring容器中为特定类定义一个bean，则spring容器将创建该bean定义所定义的类的一个且只有一个实例。 单例作用域是spring中的默认作用域。 要在xml中定义单例bean，可以如以下示例所示定义bean：\n\n<bean id="accountservice" class="com.something.defaultaccountservice"/>\n\n\x3c!-- the following is equivalent, though redundant (singleton scope is the default) --\x3e\n<bean id="accountservice" class="com.something.defaultaccountservice" scope="singleton"/>\n\n\n\n# 1.5.2. 原型作用域\n\n每次请求特定bean时，非单例的原型作用域都会导致创建一个新的bean实例。 也就是说，该bean被注入到另一个bean中，或者您可以通过容器上的getbean（）方法调用来请求它。 通常，应将原型作用域用于所有有状态的bean，将单例作用域用于无状态的bean。\n\n下面的图表说明了spring原型作用域\n\n\n\n(数据访问对象(dao)通常不被配置为原型，因为典型的dao不持有任何会话状态。重用单例图的核心对我们来说更容易。)\n\n下面的示例在xml中将bean定义原型：\n\n<bean id="accountservice" class="com.something.defaultaccountservice" scope="prototype"/>\n\n\n与其他作用域相反，spring不管理原型bean的完整生命周期。 容器实例化，配置或组装原型对象，然后将其交给客户端，而无需保持对该原型实例的进一步记录。 因此，尽管无论在什么作用于下都会在所有对象上调用初始化生命周期回调方法，但对于原型，则不会调用已配置的销毁生命周期回调。 客户端代码必须清除原型作用域内的对象，并释放原型bean拥有的昂贵资源。 为了使spring容器释放原型作用下的bean所拥有的资源，请尝试使用自定义bean后置处理器，该处理器包含对需要清理的bean的引用。\n\n在某些方面，spring容器在原型作用域bean方面的角色是java new运算符的替代。 超过该点（也就是new之后）的所有生命周期管理必须由客户端处理。 （有关spring容器中bean的生命周期的详细信息，请参阅生命周期回调。）\n\n\n# 1.5.3. 包含原型bean引用的单例beans\n\n当您使用对原型bean有依赖性的单例作用域bean时，请注意，依赖关系在实例化时解析。 因此，如果将依赖的原型bean依赖项注入到单例bean中，则将实例化新的原型bean，然后将依赖项注入到单例bean中。 原型实例是曾经提供给单例bean的唯一实例。\n\n但是，假设您希望单例作用域的bean在运行时重复获取原型作用域的bean的新实例。 您不能将原型作用域的bean依赖注入到您的单例bean中，因为当spring容器实例化单例bean并解析并注入其依赖项时，该注入仅发生一次。 如果在运行时不止一次需要原型bean的新实例，请参见[方法注入](###1.4.6. 方法注入)。\n\n\n# 1.5.4. request, session, application, and websocket 作用域\n\n只有当您使用web感知的spring applicationcontext实现(如xmlwebapplicationcontext)时，request,session, application, 和websocket作用域才可用。如果在常规的spring ioc容器(如classpathxmlapplicationcontext)中使用这些作用域，则会抛出一个未知bean作用域的illegalstateexception。\n\n# 初始web配置\n\n为了支持request,session,application,websocket这些基于web的bean作用域，需要在定义bean前做一些初始化配置（singleton,prototype标准作用域不是必须的）。\n\n如和完成这些初始化步骤取决于你的servlet环境。\n\n如果您在 spring web mvc 中访问以上作用域 bean，实际上是在 spring dispatcherservlet 处理的请求中，则不需要特殊设置。dispatcherservlet 已经暴露了所有相关的状态。\n\n如果你用的是servlet2.5的web容器，在spring的dispatcherservlet外部处理请求（例如jsf或者struts），你需要注册org.springframework.web.context.request.requestcontextlistener （servletrequestlistener.servlet 3.0+）,也可以用webapplicationinitializer接口以编程方式实现，或者对于更老的容器来说，添加以下声明在web.xml文件中\n\n<web-app>\n    ...\n    <listener>\n        <listener-class>\n            org.springframework.web.context.request.requestcontextlistener\n        </listener-class>\n    </listener>\n    ...\n</web-app>\n\n\n或者可以用spring的requestcontextfilter，这个过滤器映射取决于web应用的配置，所以必须合适得更改它，以下是一个web应用的部分过滤器配置：\n\n<web-app>\n    ...\n    <filter>\n        <filter-name>requestcontextfilter</filter-name>\n        <filter-class>org.springframework.web.filter.requestcontextfilter</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>requestcontextfilter</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n    ...\n</web-app>\n\n\ndispatcherservlet、requestcontextlistener 和 requestcontextfilter 都做完全相同的事情，即将 http 请求对象绑定到为该请求提供服务的线程。 这使得request和session作用域的 bean 在调用链的更下游可用。\n\n# reqeust作用域\n\n以下面的xml形式的bean定义举例：\n\n<bean id="loginaction" class="com.something.loginaction" scope="request"/>\n\n\nspring 容器通过为每个 http 请求使用 loginaction bean 定义来创建 loginaction bean 的新实例。 也就是说， loginaction bean 的作用域是 http 请求级别的。 您可以根据需要更改所创建实例的内部状态，因为从同一loginaction bean 定义创建的其他实例不会看到这些状态更改。 它们是针对单个请求的。 当请求完成处理时，该请求范围内的 bean 将被废弃。\n\n当使用注解驱动的组件或者java配置时，@reqeustscope注解可用于指定一个组件为request作用域，如下示例：\n\n@requestscope\n@component\npublic class loginaction {\n    // ...\n}\n\n\n# session作用域\n\n以下面的xml形式的bean定义举例：\n\n<bean id="userpreferences" class="com.something.userpreferences" scope="session"/>\n\n\nspring 容器通过在单个 http 会话的生命周期中使用 userpreferences bean 定义创建 userpreferences bean 的新实例。 换句话说，userpreferences bean 作用域是 http 会话级别。 与reqeust作用域的 bean 一样，您可以根据需要更改所创建实例的内部状态，其他http session也在使用从相同 userpreferences bean 定义创建的实例不会看到这些状态更改 ，因为它们特定于单个 http 会话。 当 http 会话最终被丢弃时，作用域为该特定 http 会话的 bean 也将被丢弃。\n\n当使用注解驱动的组件或者java配置时，@sessionscope注解可用于指定一个组件为session作用域，如下示例：\n\n@sessionscope\n@component\npublic class userpreferences {\n    // ...\n}\n\n\n# application作用域\n\n以下面的xml形式的bean定义举例：\n\n<bean id="apppreferences" class="com.something.apppreferences" scope="application"/>\n\n\nspring 容器通过为整个 web 应用程序使用以上定义一次来创建 apppreferences bean 的新实例。 也就是说，apppreferences bean 的范围在 servletcontext 级别，并存储为常规 servletcontext 属性。 这有点类似于 spring 单例 bean，但在两个重要方面有所不同：它是每个 servletcontext 的单例，而不是每个 spring \'applicationcontext\'（在任何给定的 web 应用程序中可能有多个），并且它实际上是公开的，因此 作为 servletcontext 属性可见。\n\n当使用注解驱动的组件或者java配置时，@applicationscope注解可用于指定一个组件为application作用域，如下示例：\n\n@applicationscope\n@component\npublic class apppreferences {\n    // ...\n}\n\n\n# 依赖中的作用域bean\n\nspring ioc 容器不仅管理对象（bean）的实例化，还管理协作者（或依赖项）的连接。 如果您想将（例如）一个 http 请求范围的 bean 注入到另一个生命周期更长的 bean 中，您可以选择注入一个 aop 代理来代替该作用域的 bean。 也就是说，您需要注入一个代理对象，该对象公开与作用域对象相同的公共接口，但也可以从相关作用域（例如 http 请求）中检索真实目标对象，并将方法调用委托给真实对象。\n\n> 您还可以在作用域为单例的 bean 之间使用<aop:scoped-proxy/>，然后引用通过可序列化的中间代理，因此能够在反序列化时重新获取目标单例 bean。\n> \n> 当针对原型的 bean 声明<aop:scoped-proxy/> 时，共享代理上的每个方法调用都会导致创建一个新的目标实例，然后将调用转发到该实例。\n> \n> 此外，原型代理并不是以生命周期安全的方式从较短作用域访问 bean 的唯一方法。 您还可以将您的注入点（即构造函数或 setter 参数或自动装配字段）声明为 objectfactory<mytargetbean>，从而允许每次需要时调用 getobject() 来按需检索当前实例 — 无需保留实例或单独存储。\n> \n> 作为扩展变体，您可以声明 objectprovider<mytargetbean>，它提供了几个额外的访问变体，包括 getifavailable 和 getifunique。\n> \n> 此 jsr-330 变体称为 provider，并与 provider<mytargetbean> 声明和每次检索尝试的相应 get() 调用一起使用。 有关 jsr-330 整体的更多详细信息，请参见此处。\n\n下例中的配置只有一行，但了解其背后的“why”以及“how”很重要：\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!-- an http session-scoped bean exposed as a proxy --\x3e\n    <bean id="userpreferences" class="com.something.userpreferences" scope="session">\n        \x3c!-- instructs the container to proxy the surrounding bean --\x3e\n        <aop:scoped-proxy/> \n    </bean>\n\n    \x3c!-- a singleton-scoped bean injected with a proxy to the above bean --\x3e\n    <bean id="userservice" class="com.something.simpleuserservice">\n        \x3c!-- a reference to the proxied userpreferences bean --\x3e\n        <property name="userpreferences" ref="userpreferences"/>\n    </bean>\n</beans>\n\n\n要创建这样的代理，要将 <aop:scoped-proxy/> 元素插入到作用域 bean 定义中（请参阅选择要创建的代理类型和基于xml配置模式）。 为什么在请求、会话和自定义范围级别范围内的 bean 定义需要<aop:scoped-proxy/> 元素？ 考虑以下单例 bean 定义，并将其与您需要为上述范围定义的内容进行对比（请注意，以下 userpreferences bean 定义不完整）：\n\n<bean id="userpreferences" class="com.something.userpreferences" scope="session"/>\n\n<bean id="usermanager" class="com.something.usermanager">\n    <property name="userpreferences" ref="userpreferences"/>\n</bean>\n\n\n在前面的示例中，单例 bean (usermanager) 被注入了对 http 会话范围 bean (userpreferences) 的引用。 这里的重点是 usermanager bean 是一个单例：它在每个容器中被实例化一次，并且它的依赖项（在这种情况下只有一个，userpreferences bean）也只注入一次。 这意味着 usermanager bean 只对完全相同的 userpreferences 对象（即最初注入它的那个对象）进行操作。\n\n这不是您将生命周期较短的作用域 bean 注入到生命周期较长的作用域 bean（例如，将 http 会话作用域的 bean 作为依赖项注入到单例 bean 中）时想要的行为。 相反，您需要一个 usermanager 对象，并且，对于 http 会话的生命周期，您需要一个特定于 http 会话的 userpreferences 对象。 因此，容器创建一个对象，该对象公开与 userpreferences 类完全相同的公共接口（理想情况下是一个 userpreferences 实例的对象），它可以从作用域机制（http 请求、会话等）中获取真正的 userpreferences 对象 。容器将这个代理对象注入到 usermanager bean 中，它不知道这个 userpreferences 引用是一个代理。 在这个例子中，当一个 usermanager 实例在依赖注入的 userpreferences 对象上调用一个方法时，它实际上是在调用代理上的一个方法。 然后代理从（在这种情况下）http 会话中获取真实的 userpreferences 对象，并将方法调用委托给检索到的真实 userpreferences 对象。\n\n因此，在将request和session作用域的 bean 注入对象时，您需要以下（正确且完整的）配置，如以下示例所示：\n\n<bean id="userpreferences" class="com.something.userpreferences" scope="session">\n    <aop:scoped-proxy/>\n</bean>\n\n<bean id="usermanager" class="com.something.usermanager">\n    <property name="userpreferences" ref="userpreferences"/>\n</bean>\n\n\n# 选择要创建的代理对象类型\n\n默认情况下，当 spring 容器为使用 <aop:scoped-proxy/> 元素标记的 bean 创建代理时，将创建基于 cglib 的类代理。\n\n> cglib 代理只拦截公共方法调用！ 不要在这样的代理上调用非公共方法。 它们不会委托给实际作用域的目标对象。\n\n或者，您可以配置 spring 容器，通过为 <aop:scoped-proxy/> 元素的 proxy-target-class 属性的值指定 false 来为此类作用域 bean 创建标准的基于 jdk 接口的代理。 使用基于 jdk 接口的代理意味着您不需要应用程序类路径中的其他库来实现此类代理。 但是，这也意味着作用域 bean 的类必须至少实现一个接口，并且注入作用域 bean 的所有依赖都必须通过其接口之一引用 bean。 以下示例显示了基于接口的代理：\n\n\x3c!-- defaultuserpreferences implements the userpreferences interface --\x3e\n<bean id="userpreferences" class="com.stuff.defaultuserpreferences" scope="session">\n    <aop:scoped-proxy proxy-target-class="false"/>\n</bean>\n\n<bean id="usermanager" class="com.stuff.usermanager">\n    <property name="userpreferences" ref="userpreferences"/>\n</bean>\n\n\n有关选择基于类或基于接口的代理的更多详细信息，请参阅代理机制。\n\n\n# 1.5.5. 自定义作用域\n\nbean 作用域机制是可扩展的。 您可以定义自己的作用域，甚至重新定义现有作用域，尽管后者被认为是不好的做法，并且您不能覆盖内置的单例和原型作用域。\n\n# 创建自定义作用域\n\n要将自定义作用域集成到 spring 容器中，您需要实现 org.springframework.beans.factory.config.scope接口，这在本节中进行了描述。 有关如何实现您自己的作用域，请参阅 spring framework 本身提供的 scope 实现和 scope javadoc，它更详细地解释了您需要实现的方法。\n\nscope 接口有四种方法可以从作用域中获取对象，从作用域中移除它们，以及让它们被销毁。\n\n例如，会话作用域实现返回会话作用域 bean（如果它不存在，则该方法在将它绑定到会话以供将来引用后返回该 bean 的一个新实例）。 以下方法从作用域返回对象：\n\nobject get(string name, objectfactory<?> objectfactory)\n\n\n例如，会话作用域实现从会话中删除会话作用域的 bean。 应该返回一个对象，但如果没有找到具有指定名称的对象，您可以返回 null。 以下方法从作用域中删除对象：\n\nobject remove(string name)\n\n\n以下方法注册了一个回调，当它被销毁或作用域中的指定对象被销毁时，该作用域应该调用该回调：\n\nvoid registerdestructioncallback(string name, runnable destructioncallback)\n\n\n有关销毁回调的更多信息，请参阅 javadoc 或 spring scope实现。\n\n以下方法获取作用域的会话标识符：\n\nstring getconversationid()\n\n\n这个标识符对于每个作用域都是不同的。 对于会话作用域的实现，此标识符可以是session标识符。\n\n# 使用自定义作用域\n\n在您编写并测试一个或多个自定义 scope 实现之后，您需要让 spring 容器感知你的新作用域。 以下方法是向 spring 容器注册新 scope 的中心方法：\n\nvoid registerscope(string scopename, scope scope);\n\n\n此方法在 ````configurablebeanfactory接口上声明，该接口可通过 spring 附带的大多数具体applicationcontext``` 实现的 beanfactory 属性获得。\n\nregisterscope(..) 方法的第一个参数是与作用域关联的唯一名称。 spring 容器本身中此类名称的示例是singleton和prototype。 registerscope(..) 方法的第二个参数是您希望注册和使用的自定义 scope 实现的实际实例。\n\n‎假设已编写了自定义实现，然后按照下一个示例进行注册。‎\n\n> 下一个示例使用 simplethreadscope，它包含在 spring 中，但默认情况下未注册。对于您自己的自定义 scope 实现，使用方法是相同的。\n\nscope threadscope = new simplethreadscope();\nbeanfactory.registerscope("thread", threadscope);\n\n\n然后，您可以创建符合自定义 scope 规则的 bean 定义，如下所示：\n\n<bean id="..." class="..." scope="thread">\n\n\n使用自定义 scope 实现，您不仅限于以编程方式注册。您还可以使用 customscopeconfigurer 类以声明方式进行 scope 注册，如以下示例所示：\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    <bean class="org.springframework.beans.factory.config.customscopeconfigurer">\n        <property name="scopes">\n            <map>\n                <entry key="thread">\n                    <bean class="org.springframework.context.support.simplethreadscope"/>\n                </entry>\n            </map>\n        </property>\n    </bean>\n\n    <bean id="thing2" class="x.y.thing2" scope="thread">\n        <property name="name" value="rick"/>\n        <aop:scoped-proxy/>\n    </bean>\n\n    <bean id="thing1" class="x.y.thing1">\n        <property name="thing2" ref="thing2"/>\n    </bean>\n\n</beans>\n\n\n> 当您将 <aop:scoped-proxy/> 放在 factorybean 实现中时，作用域的是工厂 bean 本身，而不是从 getobject() 返回的对象。\n\n\n# 1.6. 自定义bean性质\n\nspring framework提供了许多接口，可以用于自定义bean的性质。本节将其分组如下：\n\n * lifecycle callbacks\n * applicationcontextaware & beannameaware\n * 其他aware接口\n\n\n# 1.6.1. lifecycle 回调\n\n要与容器管理的bean生命周期交互，你可以实现initializingbean和disposablebean接口，容器会在前者下调用afterpropertiesset()，在后者调用destroy()方法，让bean在初始化和销毁的时候执行某些操作。\n\n> 💡 jsr-250 @postconstruct和@predestroy注解通常被认为是在现代spring应用中接收生命周期回调的最佳实践。使用这些注解意味着您的bean不耦合到spring特定的接口。\n> \n> 如果您不想使用jsr-250注解，又需要解耦，请考虑使用init-method和destroy-method的 bean定义元数据。\n\n在内部，spring框架使用beanpostprocessor实现来处理它可以找到的任何回调接口并调用适当的方法。如果您需要自定义功能或其他生命周期行为,spring则不会默认提供，您可以自己实现beanpostprocessor。有关更多信息，请参阅容器扩展点。\n\n除了初始化和销毁回调之外，spring托管对象还可以实现lifecycle接口，以便这些对象可以参与到容器启动和关闭过程，作为容器自己的生命周期的驱动。\n\n# initialization初始化回调\n\norg.springframework.beans.factory.initializationbean接口允许bean在容器中设置完bean上的所有必需属性后执行初始化工作。initializingbean接口定义了一个方法：\n\nvoid afterpropertiesset() throws exception;\n\n\n**我们建议您不要使用initializingbean接口，因为它不必要地将代码耦合到spring。或者，我们建议使用@postconstruct注解或指定pojo初始化方法。在基于xml的配置元数据的情况下，您可以使用init-method属性指定具有void no-argument签名的方法的名称。使用java配置，您可以使用@bean的initmethod属性。**请参阅接收生命周期回调。考虑以下示例：\n\n<bean id="exampleinitbean" class="examples.examplebean" init-method="init"/>\n\n\npublic class examplebean {\n\n    public void init() {\n        // do some initialization work\n    }\n}\n\n\n此示例与以下示例几乎完全相同:\n\n<bean id="exampleinitbean" class="examples.anotherexamplebean"/>\n\n\npublic class anotherexamplebean implements initializingbean {\n\n    @override\n    public void afterpropertiesset() {\n        // do some initialization work\n    }\n}\n\n\n但是，第一个示例代码没有与spring耦合。\n\n# destruction销毁回调\n\n实现org.springframework.beans.factory.disposablebean接口允许bean当包含它的容器被销毁时会收到回调。disposablebean接口定义了一个方法：\n\nvoid destroy() throws exception;\n\n\n**我们建议您不要使用disposablebean接口，因为它不必要地将代码耦合到spring。或者，我们建议使用@predestroy注解或指定bean定义支持的泛型方法。在基于xml的配置元数据的情况下，您可以在中使用destroy-method属性。使用java配置，您可以使用@bean的destroymethoad属性。**请参阅接收生命周期回调。考虑以下示例：\n\n<bean id="exampleinitbean" class="examples.examplebean" destroy-method="cleanup"/>\n\n\npublic class examplebean {\n\n    public void cleanup() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n\n\n此示例与以下示例几乎完全相同:\n\n<bean id="exampleinitbean" class="examples.anotherexamplebean"/>\n\n\npublic class anotherexamplebean implements disposablebean {\n\n    @override\n    public void destroy() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n\n\n但是，第一个示例代码没有与spring耦合。\n\n> 💡 您可以分配<bean>元素的destroy-method属性一个特殊（推断）值，该值指示spring在特定bean类上自动检测pulic close或者shutdown。（任何实现java.lang.autoclosable或java.io.closable的类都会匹配。）您还可以在<bean>元素的default-destroy-method属性上设置此特殊（推断的）值以应用此行为到一组bean上（请参阅默认初始化和销毁方法）。请注意，这是java配置的默认行为。\n\n# 默认初始化和销毁方法\n\n当不通过实现spring特定的initializingbean和disposablebean定义的接口来完成初始化和销毁方法回调时，通常会使用像init()，initialize()，dispose()等名称编写方法。理想情况下，这些生命周期回调方法的名称在项目中应该标准化，以便所有开发人员使用相同的方法名称并确保一致性。\n\n您可以配置spring容器在每个bean上查找指定命名的初始化和销毁回调方法。这意味着您作为应用程序开发人员，不用为每个bean配置init-methoad="init"的属性，就可以编写名为init()的初始化回调方法。spring ioc容器在创建bean时调用该方法（并根据先前描述的标准生命周期回调约定）。此功能还确保了初始化和销毁方法回调的命名一致约定。\n\n假设您的初始化回调方法名为init()，您的销毁回调方法名为destroy()。然后，您的类类似以下示例：\n\npublic class defaultblogservice implements blogservice {\n\n    private blogdao blogdao;\n\n    public void setblogdao(blogdao blogdao) {\n        this.blogdao = blogdao;\n    }\n\n    // this is (unsurprisingly) the initialization callback method\n    public void init() {\n        if (this.blogdao == null) {\n            throw new illegalstateexception("the [blogdao] property must be set.");\n        }\n    }\n}\n\n\n然后，您可以在类似于以下内容的bean定义中使用该类：\n\n<beans default-init-method="init">\n\n    <bean id="blogservice" class="com.something.defaultblogservice">\n        <property name="blogdao" ref="blogdao" />\n    </bean>\n\n</beans>\n\n\n顶级元素属性上的default-init-method属性的存在会导致spring ioc容器识别bean类中称为init的方法作为初始化方法回调。创建并组装bean时，如果bean类具有这样的方法，则会在适当的时间调用它。\n\n您可以类似地通过在顶级元素上使用efault-destroy-method属性来配置默认销毁回调。\n\n当现有bean类已经有与约定回调方法有差异的方法时，可以通过使用的init-method和destroy-method属性指定方法名称来覆盖默认值。\n\nspring 容器保证在向bean注入所有依赖项之后立即调用配置的初始化回调方法。因此，在原始bean上才会调用初始化回调，这意味着aop拦截器等尚未应用于bean。首先完全创建目标bean，然后应用具有其拦截链的aop代理。如果目标bean和代理单独定义，则您的代码甚至可以绕过代理直接与原始目标bean交互。因此，将拦截器应用于init方法是矛盾的，因为这样做会将目标bean的生命周期耦合到其代理或拦截器，并在代码与原始目标bean直接交互时留下奇怪的语义。\n\n# 组合生命周期机制\n\n截至spring 2.5，您有三种方式控制bean的声明周期，你可以组合这些机制来控制bean的声明周期：\n\n * initializingbean和disposablebean回调接口\n * 自定义init()和destroy方法\n * @postcontruct和@predestroy注解\n\n> 如果为bean配置了多个生命周期机制，并且每个机制配置了不同名称的方法，则每个配置的方法按照列出的顺序运行。但是，如果配置了相同名称的方法 - 例如，初始化方法init() - 对于这些生命周期机制中的多个，该方法只会运行一次。\n\n为同一bean配置的多个生命周期机制，r若具有不同的初始化方法，按照如下所示顺序执行：\n\n 1. @postconstruct注释的方法\n 2. initializingbean回调接口中的afterpropertiesset() 方法\n 3. 自定义的 init() 方法\n\n销毁方法以相同的顺序调用：\n\n 1. @predestroy注释的方法\n 2. disposablebean回调接口中的destroy() 方法\n 3. 自定义的 destroy() 方法\n\n# 启动和停止回调\n\nlifecycle接口为对象定义了任何具有其自身生命周期要求的基本方法（例如启动和停止某些后台进程）：\n\npublic interface lifecycle {\n\n    void start();\n\n    void stop();\n\n    boolean isrunning();\n}\n\n\n任何spring管理的对象都可以实现生命周期接口。然后，当applicationcontext本身接收开始和停止信号（例如，在运行时进行停止/重启）时，它将这些调用级联到该上下文中定义的所有生命周期实现。它通过将其委派给lifecycleprocessor来实现这一点，如下所示所示：\n\npublic interface lifecycleprocessor extends lifecycle {\n\n    void onrefresh();\n\n    void onclose();\n}\n\n\n请注意，lifecycleprocessor本身是lifecycle接口的扩展。它还添加了另外两个方法，将在应用上下文刷新和关闭时调用。\n\n> 💡请注意，常规org.springframework.context.lifecycle接口是一个简单的约定，用于显式启动和停止通知，并不意味着上下文刷新时自动启动。对特定bean的自动启动（包括启动阶段）进行细粒度控制，请考虑实现org.springframework.context.smartlifecycle。\n> \n> 此外，请注意，销毁前不保证发起停止通知。一般在停止时，所有lifecycle实现类首先在常规销毁回调传播之前接收停止通知。但是，在上下文热刷新或停止刷新尝试期间，只调用销毁方法。\n\n启动和关闭调用的顺序很重要。如果在任何两个对象之间存在依赖关系，则需要依赖的将于其依赖项启动后启动，并且在其依赖项停止前停止。但是有时，直接依赖是未知的。您可能只知道某种类型的对象应该在另一个类型的对象之前启动。在这些情况下，smartlifecycle接口定义了另一个选项，即在其父接口phased定义的getphase()方法。以下是该接口的定义：\n\npublic interface phased {\n\n    int getphase();\n}\n\n\n以下是smartlifecycle接口的定义：\n\npublic interface smartlifecycle extends lifecycle, phased {\n\n    boolean isautostartup();\n\n    void stop(runnable callback);\n}\n\n\n启动时，顺位最低的对象首先启动。停止时，顺序相反。因此，一个实现smartlifecycle且其getphase()方法返回integer.min_value的对象将是第一个启动和最后停止。也就是说，返回integer.max_value的值的将最后启动并首先停止（可能是因为它取决于要运行的其他进程）。很重要的是要知道不实现smartlifecycle的任何普通lifecycle实例的默认顺位值是0。因此，任何负的顺位值表示对象应该在这些标准组件之前启动（并在其之后停止）。反之亦然。\n\nsmartlifecycle定义的stop方法接受一个线程回调。在该实现的关闭进程完成后，任何实现必须调用回调线程的run()方法。这使得在必要时启用异步关闭，因为lifecycleprocessor接口的默认实现defaultlifecycleprocessor，在每个阶段内的对象组等待定义的超时时间后调用该回调。默认的超时时间为30秒。您可以通过在上下文中定义名为lifecycleprocessor的bean来覆盖默认生命周期处理器实例。如果您只想修改超时时间，以下定义就足够了：\n\n<bean id="lifecycleprocessor" class="org.springframework.context.support.defaultlifecycleprocessor">\n    \x3c!-- timeout value in milliseconds --\x3e\n    <property name="timeoutpershutdownphase" value="10000"/>\n</bean>\n\n\n如前所述，lifecycleprocessor接口也定义了刷新和关闭上下文的回调方法。后者驱动了停止过程，仿佛stop()被显示调用一样，但它发生在上下文关闭的过程中。另一方面，“refresh”回调可以启用smartlifecycle bean的另一个功能。刷新上下文（在实例化并初始化所有对象后）时，调用该回调。此时，默认生命周期处理器检查每个smartlifecycle对象的isautostartup()方法返回的布尔值。如果为true，则在刷新时启动该对象，而不是等待上下文或其自己的start()方法被显式调用（与上下文刷新不同，标准上下文实现不会自动启动）。phase值和依赖关系确定如前所述的启动顺序。\n\n# 在非web应用中优雅地关闭spring ioc容器\n\n> 本节仅适用于非web应用程序。spring的基于web的applicationcontext实现已有相关代码，能在web应用程序关闭时优雅地关闭spring ioc容器。\n\n如果在非web应用程序环境中使用spring的ioc容器（例如，在富客户端桌面环境中），请使用jvm注册关闭hook。这样做确保了一个优雅的停止，并在单例bean上调用相关的销毁方法，以便释放所有资源。您必须正确配置和实现这些销毁回调。\n\n要注册关闭hook，请调用在configurableapplicationcontext接口上声明的registershutdownhook()方法，如以下示例显示：\n\nimport org.springframework.context.configurableapplicationcontext;\nimport org.springframework.context.support.classpathxmlapplicationcontext;\n\npublic final class boot {\n\n    public static void main(final string[] args) throws exception {\n        configurableapplicationcontext ctx = new classpathxmlapplicationcontext("beans.xml");\n\n        // add a shutdown hook for the above context...\n        ctx.registershutdownhook();\n\n        // app runs here...\n\n        // main method exits, hook is called prior to the app shutting down...\n    }\n}\n\n\n\n# 1.6.2. applicationcontextaware和beannameaware\n\n当applicationcontext创建实现org.springframework.context.applicationcontextaware接口的对象实例时，将提供该applicationcontext的引用。以下列表显示了applicationcontextaware接口的定义：\n\npublic interface applicationcontextaware {\n\n    void setapplicationcontext(applicationcontext applicationcontext) throws beansexception;\n}\n\n\n因此，bean可以通过编程方式操作创建它们的applicationcontext，通过applicationcontext接口或通过将引用转换为该接口的已知子类（例如公开其他功能的configurableapplicationcontext）。一个作用就是检索其他bean。有时这种能力很有用。但是，一般而言，您应该避免使用它，因为它将代码与spring耦合，并且不遵循控制反转的风格(依赖作为bean的属性提供)。applicationcontext的其他方法提供对文件资源的访问，发布应用程序事件和访问messagessource。这些附加功能在applicationcontext的附加功能中描述。\n\n自动注入是获得对applicationcontext的引用的另一种选择。传统的构造函数注入和按类型注入模式（如1.4.5所述）可以分别为构造函数参数或setter方法参数分别提供applicationcontext的依赖。更灵活的方式，包括自动注入字段和多个参数方法的能力，请使用基于注解的自动注入功能。如果您在需要的地方使用了@autowired注解，期望类型的applicationcontext将自动注入到字段，构造函数或方法参数中。有关更多信息，请参阅使用@autowired。\n\n当applicationcontext创建一个实现org.springframework.beans.factory.beannameaware接口的类时，该类会获得跟它自身定义相关的名称。以下列表显示了beannameaware接口的定义：\n\npublic interface beannameaware {\n\n    void setbeanname(string name) throws beansexception;\n}\n\n\n该方法回调将会在普通bean属性设值后，初始化回调之前(如initializingbean、afterpropertiesset、自定义初始化方法)调用。\n\n\n# 1.6.3. 其他aware接口\n\n除了applicationcontextaware和beannameaware之外，spring还提供了更多的aware回调接口，让bean向容器指明它们需要依赖某个明确的基础架构。作为一般规则，名称表示依赖类型。如下表格4(未翻译)总结了最重要的aware接口：\n\nname                             injected dependency                                            explained in…\napplicationcontextaware          declaring applicationcontext.                                  applicationcontextaware and beannameaware\napplicationeventpublisheraware   event publisher of the enclosing applicationcontext.           additional capabilities of the applicationcontext\nbeanclassloaderaware             class loader used to load the bean classes.                    instantiating beans\nbeanfactoryaware                 declaring beanfactory.                                         applicationcontextaware and beannameaware\nbeannameaware                    name of the declaring bean.                                    applicationcontextaware and beannameaware\nloadtimeweaveraware              defined weaver for processing class definition at load time.   load-time weaving with aspectj in the spring framework\nmessagesourceaware               configured strategy for resolving messages (with support for   additional capabilities of the applicationcontext\n                                 parametrization and internationalization).\nnotificationpublisheraware       spring jmx notification publisher.                             notifications\nresourceloaderaware              configured loader for low-level access to resources.           resources\nservletconfigaware               current servletconfig the container runs in. valid only in a   spring mvc\n                                 web-aware spring applicationcontext.\nservletcontextaware              current servletcontext the container runs in. valid only in    spring mvc\n                                 a web-aware spring applicationcontext.\n\n请注意，使用这些接口你的代码将与spring api耦合，并且不遵循控制反转的风格。因此，我们推荐它们在需要对容器进行编程访问的基础架构bean中使用。\n\n\n# 1.7. bean定义继承\n\nbean定义可以包含大量的配置信息，包括构造函数参数，属性值和特定于容器的信息，例如初始化方法，静态工厂方法名称等。子bean定义从父定义继承配置数据。子定义可以根据需要覆盖某些值或添加其他值。使用父、子bean定义可以减少配置。实际上，这是模板模式的一种形式。\n\n如果您以编程方式使用applicationcontext接口，则子bean定义由childbeandefinition类表示。大多数用户不会在这种级别使用它们。相反，他们在诸如classpathxmlapplicationcontext等类中声明地配置bean定义。使用基于xml的配置元数据时，可以使用parent属性指定子bean定义，指定父bean作为此属性的值。以下示例显示了如何做：\n\n<bean id="inheritedtestbean" abstract="true"\n        class="org.springframework.beans.testbean">\n    <property name="name" value="parent"/>\n    <property name="age" value="1"/>\n</bean>\n\n<bean id="inheritswithdifferentclass"\n        class="org.springframework.beans.derivedtestbean"\n        parent="inheritedtestbean" init-method="initialize">  1️⃣\n    <property name="name" value="override"/>\n    \x3c!-- the age property value of 1 will be inherited from parent --\x3e\n</bean>\n\n\n如果没有指定，则子bean使用父bean的定义，但也可以覆盖它。在后一种情况下，子bean必须与父bean兼容（即它必须接受父属性值）。\n\n子bean定义继承作用域，构造函数参数值，属性值和从父类覆盖的方法，并可选择添加新值。您指定的任何作用域，初始化方法，销毁方法或静态工厂方法设置将会覆盖父类中对应设置。\n\n剩余的设置始终从子定义中引用：依赖，自动装配模式，依赖关系检查，单例和懒加载。\n\n前面的示例通过使用abstract属性将父bean定义显式标记为抽象类。如果父定义未指定类，则父bean定义abstract属性是必须的，如以下示例显示：\n\n<bean id="inheritedtestbeanwithoutclass" abstract="true">\n    <property name="name" value="parent"/>\n    <property name="age" value="1"/>\n</bean>\n\n<bean id="inheritswithclass" class="org.springframework.beans.derivedtestbean"\n        parent="inheritedtestbeanwithoutclass" init-method="initialize">\n    <property name="name" value="override"/>\n    \x3c!-- age will inherit the value of 1 from the parent bean definition--\x3e\n</bean>\n\n\n父bean无法自动化，因为它是不完整的，并且也明确标记为抽象。当定义是抽象的时候，它仅用为纯模板bean定义，它用作子定义的父定义。尝试自己使用这样一个抽象父bean，通过将其作为另一个bean的ref属性，否则使用父bean id显示执行getbean()调用将返回错误。同样，容器的内部预留preinstantiatesingletons()方法忽略了被定义为抽象的bean定义。\n\n> ℹ️applicationcontext默认预先实例化所有单例bean。因此，如果您有打算仅用作为模板的（父）bean定义，并且此定义定义了类，则必须确保将abstract属性设置为true，否则应用上下文将（尝试）预实例化抽象类。\n\n\n# 1.8. 容器扩展点\n\n通常，应用程序开发者不需要子类化applicationcontext实现类。相反，spring ioc容器可以通过特殊的集成接口实现扩展。接下来的几节将介绍这些集成接口。\n\n\n# 1.8.1. 用beanpostprocessor自定义beans\n\nbeanpostprocessor接口定义了可以实现的回调方法，以提供自己的（或覆盖容器的默认）实例化逻辑，依赖解析逻辑等。如果要在spring容器完成实例化，配置和初始化bean后实现某些自定义逻辑，可以插入一个或多个自定义beanpostprocessor实现。\n\n您可以配置多个beanpostprocessor实例，您可以通过设置order属性来控制这些beanpostprocessor实例运行的顺序。只有当beanpostprocessor实现ordered接口时，才能设置此属性。如果您编写自己的beanpostprocessor，则应考虑实现ordered接口。有关详细信息，请参阅beanpostprocessor和ordered的javadoc。另请参阅关于beanpostprocessor实例的程序化注册的说明。\n\n> ℹ️beanpostprocessor实例在bean（或object）实例上运行。也就是说，spring ioc容器实例化了一个bean实例，然后beanbostprocessor实例执行它们的回调方法。\n> \n> beanpostprocessor实例作用域是容器。仅当您使用容器层次结构时才起作用。如果在一个容器中定义beanpostprocessor，则它仅在该容器中处理bean。换句话说，即使两个容器都是相同层次结构的一部分，在一个容器中定义的bean也不会被另一个容器中定义的beanpostprocessor处理。\n\n该org.springframework.beans.factory.config.beanpostprocessor接口包括正好两个回调方法。当此类被容器注册为后置处理器时，对于每个容器创建的bean实例，后处理器在容器初始化方法（例如initializationbean.afterpropertiesset()或任何声明的init方法）被调用前，并在任何bean初始化回调之后调用。后处理器可以对bean实例执行任何操作，包括完全忽略回调。bean后置处理器通常检查回调接口，或者它可能会将bean包装为代理。一些spring aop基础架构类就是bean后处理器的实现，以提供代理包装逻辑。\n\napplicationcontext将自动检测在配置元数据中定义的实现beanpostprocessor接口的任何bean。applicationcontext将这些bean注册为后处理器，以便稍后可以在bean创建前被调用。bean后处理器能以与任何其他bean相同的方式部署在容器中。\n\n注意，在配置类上使用@bean工厂方法声明beanpostprocessor时，工厂方法的返回类型应该是实现类本身或至少是org.springframework.beans.factory.config.beanpostprocessor接口，以清楚地表示该bean的后处理器性质。否则，applicationcontext无法在完全创建它之前通过类型自动探测到它。由于需要提前实例化beanpostprocessor以便在上下文中初始化其他bean时应用处理器，因此该早期类型检测至关重要。\n\n> ℹ️以编程方式注册beanpostprocessor实例\n> \n> 虽然beanpostprocessor注册的推荐方法是通过applicationcontext自动检测（如前所述），但您可以使用configurablebeanfactory的addbeanpostprocessor方法进行编程方式注册。当您需要评估条件逻辑或甚至用于在层次结构中的上下文中复制bean后处理器时，这可能很有用。但请注意，ordered接口对编程添加的beanpostprocessor实例无效。在这里，执行顺序就是注册顺序。还要注意，无论任何指定的顺序如何，编程方式注册的beanpostprocessor实例都会在通过自动检测注册的那些处理器之前之前执行。\n\n> ℹ️beanpostprocessor实例和aop自动代理\n> \n> 实现beanpostprocessor接口的类是特殊的，容器会特殊处理。所有beanpostprocessor实例和它们直接引用的bean，在启动时都会作为applicationcontext的特殊启动阶段的一部分。接下来，所有beanpostprocessor实例都以指定的顺序注册，并应用于容器中的所有其他bean。由于aop自动代理实现为beanpostprocessor本身，因此beanpostprocessor实例和它们直接引用的bean都没有资格自动代理，因此，它们没有切面。\n> \n> 如果您使用autowiring或@resource（可能autowiring失败）将beans装配到beanpostprocessor中，则在搜索类型匹配的依赖候选时，spring可能会得到错误的bean，因此使其无法被自动代理或被其他后处理器处理。例如，如果您有被@resource注解标注的依赖项，如字段或setter方法名与已声明名称的bean不直接对应且没有使用name属性的话，spring搜索其他bean以按类型匹配它们。\n\n以下示例显示如何在applicationcontext中编写，注册和使用beanpostprocessor实例\n\n# 例：hell world, beanpostprocessor -style\n\n第一个例子说明了基本用法。该示例显示了自定义beanpostprocessor实现，该实现调用每个bean的tostring()方法，它由容器创建并将生成的字符串打印到系统控制台。\n\npackage scripting;\n\nimport org.springframework.beans.factory.config.beanpostprocessor;\n\npublic class instantiationtracingbeanpostprocessor implements beanpostprocessor {\n\n    // simply return the instantiated bean as-is\n    public object postprocessbeforeinitialization(object bean, string beanname) {\n        return bean; // we could potentially return any object reference here...\n    }\n\n    public object postprocessafterinitialization(object bean, string beanname) {\n        system.out.println("bean \'" + beanname + "\' created : " + bean.tostring());\n        return bean;\n    }\n}\n\n\n以下beans元素使用instantialtracingbeanpostprocessor：\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:lang="http://www.springframework.org/schema/lang"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/lang\n        https://www.springframework.org/schema/lang/spring-lang.xsd">\n\n    <lang:groovy id="messenger"\n            script-source="classpath:org/springframework/scripting/groovy/messenger.groovy">\n        <lang:property name="message" value="fiona apple is just so dreamy."/>\n    </lang:groovy>\n\n    \x3c!--\n    when the above bean (messenger) is instantiated, this custom\n    beanpostprocessor implementation will output the fact to the system console\n    --\x3e\n    <bean class="scripting.instantiationtracingbeanpostprocessor"/>\n\n</beans>\n\n\n请注意instantialtracingbeanpostprocessor是如何被定义的。它甚至没有名字，而且因为它是一个bean，它可以像任何其他bean一样依赖注入。（前面的配置还定义了由groovy脚本备份的bean。spring动态语言支持在此章节中详述。）\n\n以下java应用程序运行前面的代码和配置：\n\nimport org.springframework.context.applicationcontext;\nimport org.springframework.context.support.classpathxmlapplicationcontext;\nimport org.springframework.scripting.messenger;\n\npublic final class boot {\n\n    public static void main(final string[] args) throws exception {\n        applicationcontext ctx = new classpathxmlapplicationcontext("scripting/beans.xml");\n        messenger messenger = ctx.getbean("messenger", messenger.class);\n        system.out.println(messenger);\n    }\n\n}\n\n\n前面应用程序的输出类似于以下内容：\n\nbean \'messenger\' created : org.springframework.scripting.groovy.groovymessenger@272961\norg.springframework.scripting.groovy.groovymessenger@272961\n\n\n# 例：requiredannotationbeanpostprocessor\n\n使用回调接口或注解连接自定义beanpostprocessor实现是扩展spring ioc容器的常见方法。一个例子是spring的resertandannotationbeanpostprocessor - 一个spring实现的beanpostprocessor，它确保用（任意）注解标记的bean上的依赖注入属性实际上（被配置为)有值。\n\n\n# 1.8.2. 使用beanfactorypostprocessor自定义配置元数据\n\n我们查看的下一个扩展点是org.springframework.beans.factory.config.beanfactorypostprocessor。此接口的语义类似于beanpostprocessor的语义，其中一个主要区别：beanfactorypostprocessor在操作的是bean配置元数据。也就是说，spring ioc容器允许beanfactorypostpostprocessor读取配置元数据，并且在容器实例化beanfactorypostprocessor实例之外的任何bean之前可能会更改它。\n\n您可以配置多个beanfactorypostprocessor实例，您可以通过设置order属性来控制这些beanfactorypostprocessor实例运行的顺序。只有当beanfactorypostprocessor实现ordered接口时，才能设置此属性。如果您编写自己的beanfactorypostprocessor，则应考虑实现ordered接口。有关详细信息，请参阅beanfactorypostprocessor和ordered的javadoc。\n\n> ℹ️如果要更改实际bean实例（即，从配置元数据创建的对象），则需要使用beanpostprocessor）。虽然技术上可以在beanfactorypostprocessor中使用bean实例（例如，通过使用beanfactory.getbean()），但这样做会导致更早的bean实例化，违反标准容器生命周期。这可能导致负副作用，例如绕过bean后处理。\n> \n> beanfactorypostprocessor实例作用域是容器。仅当您使用容器层次结构时才起作用。如果在一个容器中定义beanfactorypostprocessor，则它仅在该容器中处理bean元数据。换句话说，即使两个容器都是相同层次结构的一部分，在一个容器中bean的元数据也不会被另一个容器中定义的beanfactorypostprocessor处理。\n\n将自动运行在applicationcontext中声明的bean工厂后处理器，以便将更改应用于定义容器的配置元数据。spring包括许多预定义的bean工厂后处理器，例如propertyoverrideconfigurer和propertysourcesplaceholderconfigurer。您还可以使用自定义beanfactorypostprocessor - 例如，注册自定义属性编辑器。\n\napplicationcontext会自动检测部署在它中的任何实现了beanfactorypostpostpostpostor接口的bean。它在适当的时间使用这些作为bean工厂后处理器的bean。您可以按照任何其他bean的方式部署这些后处理器bean。\n\n> ℹ️与beanpostprocessor一样，您通常不希望配置beanfactorypostprocessors为延迟初始化。如果没有其他bean引用bean(factory)postprocessor，则根本不会立即实例化。因此，将其标记为延时初始化将被忽略，并且即使在元素声明上将default-lazy-init属性设置为true，bean(factory)postprocessor也会立即实例化。\n\n# 例：类名称替换propertysourcesplaceholderconfigurer\n\n您可以通过propertysourcesplaceholderconfigurer使用标准java properties格式在单独文件中从bean定义中外部化属性值。这样做使得部署应用程序的人能够自定义特定于环境的属性，例如数据库url和密码，而无需担心修改容器的主要xml定义文件带来的复杂性或风险。\n\n考虑以下基于xml的配置元数据片段，其中定义了具有占位符值的数据源：\n\n<bean class="org.springframework.context.support.propertysourcesplaceholderconfigurer">\n    <property name="locations" value="classpath:com/something/jdbc.properties"/>\n</bean>\n\n<bean id="datasource" destroy-method="close"\n        class="org.apache.commons.dbcp.basicdatasource">\n    <property name="driverclassname" value="${jdbc.driverclassname}"/>\n    <property name="url" value="${jdbc.url}"/>\n    <property name="username" value="${jdbc.username}"/>\n    <property name="password" value="${jdbc.password}"/>\n</bean>\n\n\n该示例显示了从外部属性文件配置的属性。在运行时，propertysourceplaceholterconfigurer应用于替换数据源的某些属性的元数据。要替换的值被指定为$ {property-name}的占位符形式，它遵循ant和log4j和jsp el 风格。\n\n实际值来自标准java properties格式的另一个文件：\n\njdbc.driverclassname=org.hsqldb.jdbcdriver\njdbc.url=jdbc:hsqldb:hsql://production:9002\njdbc.username=sa\njdbc.password=root\n\n\n因此，$ {jdbc.username}字符串在运行时替换为\'sa\'，属性文件中其他占位符值也一样按键值匹配替换。propertysourcesplaceholderconfigurer检查在bean定义的大多数属性中的占位符。此外，您可以自定义占位符前缀和后缀。\n\n使用spring 2.5中引入的上下文命名空间，您可以使用专用配置元素配置属性占位符。您可以在location属性中提供一个或多个位置作为逗号分隔的列表，如以下示例显示：\n\n<context:property-placeholder location="classpath:com/something/jdbc.properties"/>\n\n\n该propertysourcesplaceholderconfigurer不仅会在你指定的properties文件中查找。默认情况下，如果不能在指定的属性文件中找到属性，它会针对spring environment属性配置和普通的java system属性配置进行查找。\n\n> 💡您可以使用propertysourceplaceholderconfigurer来替换类名，当您必须在运行时选择特定实现类时有用。以下示例显示了如何执行此操作：\n> \n> <bean class="org.springframework.beans.factory.config.propertysourcesplaceholderconfigurer">\n>     <property name="locations">\n>         <value>classpath:com/something/strategy.properties</value>\n>     </property>\n>     <property name="properties">\n>         <value>custom.strategy.class=com.something.defaultstrategy</value>\n>     </property>\n> </bean>\n> \n> <bean id="servicestrategy" class="${custom.strategy.class}"/>\n> \n> \n> 如果在运行时无法在运行时解析到有效类别，则在将要创建时（对于非懒加载bean，applicationcontext的preinstantiatesingletons()阶段），bean解析失败。\n\n# 例：propertyoverrideconfigurer\n\npropertyoverrideconfigurer，另一个bean factory后处理器，类似于propertysourceplaceholderconfigurer，但与后者不同，原始定义可以具有默认值或根本没有值作为bean的属性。如果覆盖的properties文件没有某些bean属性的条目，则使用默认上下文定义。\n\n请注意，bean定义无法感知被覆盖，因此覆盖的配置应用于xml定义文件不会显而易见。如果有多个propertyoverrideconfigurer实例定义相同的bean属性的不同值，由于覆盖机制只会使用最后一个。\n\n属性文件配置行采用以下格式：\n\nbeanname.property=value\n\n\n以下列表显示了格式的示例：\n\ndatasource.driverclassname=com.mysql.jdbc.driver\ndatasource.url=jdbc:mysql:mydb\n\n\n此示例文件可以与包含一个名为datasource的bean的容器定义一起使用，其中包含driver和url属性。\n\n还支持复合属性名称，只要除了被覆盖的最终属性之外的路径上的的每个组件都是非空的（可能由构造函数初始化）。在以下示例中，tom bean的fred属性的bob属性的sammy属性设置为常量123：\n\ntom.fred.bob.sammy=123\n\n\n> ℹ️指定的覆盖值始终是字面量。它们不会翻译成bean引用。此约定还适用于xml bean定义中的原始值指定为bean引用时。\n\n在spring 2.5中引入的上下文命名空间，可以使用专用配置元素配置属性覆盖，如以下示例显示：\n\n<context:property-override location="classpath:override.properties"/>\n\n\n\n# 1.8.3. 使用factorybean自定义实例化逻辑\n\n本身是工厂的对象可以实现org.springframework.beans.factory.factorybean接口。\n\nfactorybean接口是spring ioc容器的实例化逻辑的可插拔点。如果您有复杂的初始化代码，则在java中可以比冗长的（可能）xml更好地表达，您可以创建自己的factorybean，在该类中写入复杂的初始化逻辑，然后将您的自定义factorybean插入容器中。\n\nfactorybean接口提供三个方法：\n\n * object getobject()：返回此工厂创建的对象的实例。实例可能会被共享，具体取决于此出厂是否返回单例或原型。\n\n * boolean issingleton()：如果factorybean返回单例bean此方法返回true否则返回false。\n\n * class getobjecttype()：返回getobject()方法返回的对象类型，如果类型不能提前推断则返回null。\n\nfactorybean思想和接口用于spring框架内的许多地方。spring内部就有factorybean接口的50多个实现。\n\n当您需要询问实际factorybean实例而不是它生成的bean时，请在调用applicationcontext的getbean()方法时使用and符号（＆）前缀。对于给定的factorybean，调用容器上的getbean("mybean")返回factorybean产生的bean，而调用getbean("&mybean")返回factorybean实例本身。\n\n\n# 1.9. 基于注解的容器配置\n\n> 基于注解的配置是否比基于xml的配置更好？\n> \n> 基于注解的配置引出了此问题。长话短说是“得看情况”。也就是说，每种方法都有其利弊。而且通常由开发人员决定哪种策略更适合他们。由于它们的定义方式，注解在他们的声明中提供了上下文，所以配置更短更简练。但是，xml配置的优势是不侵入源代码或不需要重新编译它们。一些开发人员喜欢注解的方式，而其他开发人员则认为被注解的类不再是pojo，而且这会使得配置变得分散，更难控制。\n> \n> 无论哪种选择，spring都可以兼容这两种风格，甚至将它们混合在一起。值得注意的是，通过其javaconfig选项，spring让注解以非侵入性方式使用，而无需接触目标组件源代码，并且在工具方面，所有配置样式都支持eclipse的spring tools支持。\n\n基于注解的配置提供了xml配置的替代方法，它依赖于要装配的组件而不是用尖括号声明的字节码元数据。开发者通过在相关类，方法或字段声明上使用注解，将配置移动到组件类自身中而不是使用xml。如示例requiredannotationbeanpostprocessor，使用beanpostprocessor与注解结合是扩展spring ioc容器的常见方法。例如，spring 2.0引入了@required注解，使得强制依赖属性成为可能。spring 2.5使得可以遵循相同的一般方法来驱动spring的依赖注入。本质上，@autowired注释提供了相同的能力，如autowiring所述，但具有更细粒度的控制和更广泛的适用性。spring 2.5还增加了对jsr-250注解的支持，例如@postconstruct和@predestroy。spring 3.0添加了包含在javax.inject中的支持jsr-330（java依赖注入）的注解，例如@inject和@named。有关这些注解的详细信息可以在相关章节中找到。\n\n> ℹ️基于注解的注入在xml注入之前进行。因此，基于xml的配置覆盖了通过两种方法属性的装配。\n\n当然，您可以将它们注册为单独的bean定义，但也可以通过在基于xml的spring配置中包含以下标签来隐式注册（注意包含context命名空间）：\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:annotation-config/>\n\n</beans>\n\n\n(隐式注册的后处理器包括autowiredannotationbeanpostprocessor, commonannotationbeanpostprocessor, persistenceannotationbeanpostprocessor,requiredannotationbeanpostprocessor, commonannotationbeanpostprocessor, persistenceannotationbeanpostprocessor, requiredannotationbeanpostprocessor.)\n\n> ℹ️<context:annotation-config />仅查找在定义它的同一应用程序上下文中的注解。这意味着，如果将<context:annotation-config />放在dispatcherservlet的webapplicationcontext中，则只会扫描controller中的@autowired 注解的bean。有关更多信息，请参阅dispatcherservlet。\n\n\n# 1.9.1. @required\n\n@required注解适用于bean属性setter方法，如下例所示：\n\npublic class simplemovielister {\n\n    private moviefinder moviefinder;\n\n    @required\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // ...\n}\n\n\n此注解表示必须通过bean定义中的显式属性值或通过自动装配在配置bean时填充bean的属性。如果尚未填充受注解影响的bean属性，则该容器会抛出异常。这允许更早的失败，避免了后续的nullpointerexception等。我们仍然建议您将断言放入bean类本身（例如，init方法）。这样做即使在容器外部使用类时，也可以拿到所需的引用和值。\n\n> ℹ️@required在spring framework 5.1中正式过时，支持使用构造函数注入所需的设置（或initializingbean.afterpropertiesset()的自定义实现以及bean属性的setter实现）。\n\n\n# 1.9.2. 使用@autowired\n\n> ℹ️jsr 330的@inject注解可以用于代替本节中包含的示例中的spring @autowired注释。有关详细信息，请参阅此处。\n\n你可以应用@autowired注解于构造器，就像下面这样：\n\npublic class movierecommender {\n\n    private final customerpreferencedao customerpreferencedao;\n\n    @autowired\n    public movierecommender(customerpreferencedao customerpreferencedao) {\n        this.customerpreferencedao = customerpreferencedao;\n    }\n\n    // ...\n}\n\n\n> ℹ️截至spring framework 4.3，如果目标bean仅定义一个构造函数，则不再需要在此构造函数上用@autowired注解。但是，如果有多个构造函数并且没有主/默认构造函数，则至少有一个构造函数必须用@autowired注解，以指示容器使用哪一个构造器。\n\n你也可以像下面这样应用@autowired注解于传统setter方法：\n\npublic class simplemovielister {\n\n    private moviefinder moviefinder;\n\n    @autowired\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // ...\n}\n\n\n你还可以像下面这样应用@autowired注解于任意名称和多参数的方法：\n\npublic class movierecommender {\n\n    private moviecatalog moviecatalog;\n\n    private customerpreferencedao customerpreferencedao;\n\n    @autowired\n    public void prepare(moviecatalog moviecatalog,\n            customerpreferencedao customerpreferencedao) {\n        this.moviecatalog = moviecatalog;\n        this.customerpreferencedao = customerpreferencedao;\n    }\n\n    // ...\n}\n\n\n你也可以将@autowired应用于字段，甚至将其与构造函数混合，如以下示例所示：\n\npublic class movierecommender {\n\n    private final customerpreferencedao customerpreferencedao;\n\n    @autowired\n    private moviecatalog moviecatalog;\n\n    @autowired\n    public movierecommender(customerpreferencedao customerpreferencedao) {\n        this.customerpreferencedao = customerpreferencedao;\n    }\n\n    // ...\n}\n\n\n> 💡确保您的目标组件（例如，moviecatalog或customerpreferencedao）和用@ autowired注解的注入点的类型声明一致。否则，运行时可能因类型不匹配而注入失败。\n> \n> 对于通过类路径扫描找到的xml定义的bean或组件类，容器通常预先知道确切的类型。但是，对于@bean工厂方法，您需要确保声明的返回类型是足够明确的。对于实现多个接口或可能由其实现类型引用的组件，考虑在工厂方法上声明最具体的返回类型（至少跟注入点需要的类型一样）。\n\n您还可以将@autowired注解添加到期望得到该类型数组的字段或方法上，让spring从applicationcontext返回所有这种类型的bean，如下所示：\n\npublic class movierecommender {\n\n    @autowired\n    private moviecatalog[] moviecatalogs;\n\n    // ...\n}\n\n\n类型集合也是一样：\n\npublic class movierecommender {\n\n    private set<moviecatalog> moviecatalogs;\n\n    @autowired\n    public void setmoviecatalogs(set<moviecatalog> moviecatalogs) {\n        this.moviecatalogs = moviecatalogs;\n    }\n\n    // ...\n}\n\n\n> 💡如果您希望以特定顺序排序数组或列表中的元素，您的目标bean可以实现org.springframework.core.ordered接口或使用@order或标准@priority注解。否则，它们的顺序跟容器中定义的目标bean的注册顺序一样。\n> \n> 您可以针对单个bean定义（如果有多个使用相同的bean类的定义）在目标类级别和@bean方法中声明@order注解。@order值可能会影响注入点的优先级，但请注意它们不会影响单例的启动顺序，这是由依赖关系和@dependson声明决定的问题。\n> \n> 请注意，标准javax.annotation.priority注解在@bean级别不可用，因为它无法在方法中声明。它的语义跟通过@order值与每种类型的单个bean上的@primary组合类似。\n\n只要预期的key类型为string，即使是map实例也可以自动注入。映射值包含预期类型的所有bean，键包含相应的bean名称，如以下示例所示：\n\npublic class movierecommender {\n\n    private map<string, moviecatalog> moviecatalogs;\n\n    @autowired\n    public void setmoviecatalogs(map<string, moviecatalog> moviecatalogs) {\n        this.moviecatalogs = moviecatalogs;\n    }\n\n    // ...\n}\n\n\n默认情况下，当没有匹配的候选bean可用于给定注入点时，自动注入失败。在声明的数组，集合或映射的情况下，预期至少有一个匹配的元素。\n\n默认行为是将带注解的方法和字段视为必须的依赖项。您可以通过以下示例中演示更改此行为，使框架能够让其变为非必须的来跳过一个不满足依赖的注入点（即，通过将@autowired中的required属性设置为false)：\n\npublic class simplemovielister {\n\n    private moviefinder moviefinder;\n\n    @autowired(required = false)\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // ...\n}\n\n\n如果它的依赖项（或在多个参数的情况下）不可用，则不会调用此非必需的方法。在这种情况下，非必须的字段不会填充，会用其默认值代替。\n\n被注入的构造器和工厂方法参数是一个特殊情况，因为@autowired中required属性由于spring的构造函数解析算法可能潜在地处理多个构造函数，因此具有稍微不同的含义。默认情况下构造器和工厂方法参数是必须的，但在单个构造函数场景中有一些特殊规则，例如多元素注入点（数组，集合，映射），如果没有可匹配的bean，则解析为空实例。这允许常见的实现模式，其中所有依赖关系都可以在唯一的多参数构造函数中声明 - 例如，在没有@autowired注解的情况下被声明为单个公共构造函数。\n\n> ℹ️给定bean只有一个构造函数可以被required=true的@autowired声明，表明这个构造器是其作为spring bean要注入的构造器。因此，如果其required属性为默认值true，则只有单个构造函数可以用@autowired注解声明。如果多个构造函数声明了这个注解，则它们都必须将required设置为false，以便被视为用于自动装配的候选者（类似于xml中的autowire=constructor）。spring容器将选择能最大满足依赖的构造器。如果候选者没有一个满足的，则将使用主/默认构造函数（如果存在）。同样，如果类声明多个构造函数，但都没有声明@autowired注解，则将使用主/默认构造函数（如果存在）。如果类仅声明单个构造函数，即使没有注解，也将始终使用它。请注意，注解声明的构造函数修饰符不必为public。\n> \n> 在setter方法上建议使用@autowired的required属性而不是已弃用的@required注解。将required属性设置为false表示自动注入目标不是必须的，如果它无法自动注入则将忽略该属性。另一方面，@required强制属性设置，无论用容器支持的什么手段，如果没有定义任何值，则会抛出相应的异常。\n\n或者，您可以通过java 8的java.util.options表示特定依赖的非必要性质，如以下示例所示：\n\npublic class simplemovielister {\n\n    @autowired\n    public void setmoviefinder(optional<moviefinder> moviefinder) {\n        ...\n    }\n}\n\n\n截至spring framework 5.0，您也可以使用@nullable注释（任何包中的任何类型 - 例如，jsr-305中的javax.annotation.nullable）或只是利用kotlin内置的空安全支持：\n\npublic class simplemovielister {\n\n    @autowired\n    public void setmoviefinder(@nullable moviefinder moviefinder) {\n        ...\n    }\n}\n\n\n您还可以使用@autowired用于众所周知的可解析依赖性的接口：beanfactory，applicationcontext，environment，resourceloader，applicationeventpublisher和messagesource。这些接口及其扩展接口（例如configurableapplicationcontext或resourcepatternresolver）会自动解析，无需特殊设置。以下示例注入applicationcontext对象：\n\npublic class movierecommender {\n\n    @autowired\n    private applicationcontext context;\n\n    public movierecommender() {\n    }\n\n    // ...\n}\n\n\n> ℹ️@autowired，@inject，@value和@resource注解由spring beanpostprocessor实现处理。这意味着您无法在您自己的beanpostprocessor或beanfactorypostprocessor类型中应用这些注解（如果有）。这些类型必须通过使用xml或spring @bean方法显式注入。\n\n\n# 1.9.3. 使用@primary调整基于注解的自动注入\n\n因为按类型的自动注入可能有多个候选者，所以通常需要更精细地控制选择过程。实现这一目标的一种方法是spring的@primary注解。@primary表示当单值依赖有多个候选者时，应给出注入bean的首选项。如果候选者中存在一个主bean，则它将成为自动注入的值。\n\n就像以下配置，将firstmoviecatalog定义为moviecatalog类型的主bean：\n\n@configuration\npublic class movieconfiguration {\n\n    @bean\n    @primary\n    public moviecatalog firstmoviecatalog() { ... }\n\n    @bean\n    public moviecatalog secondmoviecatalog() { ... }\n\n    // ...\n}\n\n\n使用前面的配置，下面的movierecommender将注入firstmoviecatalog：\n\npublic class movierecommender {\n\n    @autowired\n    private moviecatalog moviecatalog;\n\n    // ...\n}\n\n\n相应的bean定义如下：\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:annotation-config/>\n\n    <bean class="example.simplemoviecatalog" primary="true">\n        \x3c!-- inject any dependencies required by this bean --\x3e\n    </bean>\n\n    <bean class="example.simplemoviecatalog">\n        \x3c!-- inject any dependencies required by this bean --\x3e\n    </bean>\n\n    <bean id="movierecommender" class="example.movierecommender"/>\n\n</beans>\n\n\n\n# 1.9.4. 使用@qualifiers调整基于注解的自动注入\n\n\n# 附录\n\n\n# 服务定位器模式\n\n> 服务定位器模式 服务定位器模式（service locator pattern）用在我们想使用 jndi 查询定位各种服务的时候。考虑到为某个服务查找 jndi 的代价很高，服务定位器模式充分利用了缓存技术。在首次请求某个服务时，服务定位器在 jndi 中查找服务，并缓存该服务对象。当再次请求相同的服务时，服务定位器会在它的缓存中查找，这样可以在很大程度上提高应用程序的性能\n\n服务定位器模式（service locator pattern）用在我们想使用 jndi 查询定位各种服务的时候。考虑到为某个服务查找 jndi 的代价很高，服务定位器模式充分利用了缓存技术。在首次请求某个服务时，服务定位器在 jndi 中查找服务，并缓存该服务对象。当再次请求相同的服务时，服务定位器会在它的缓存中查找，这样可以在很大程度上提高应用程序的性能。以下是这种设计模式的实体。\n\n * 服务（service） - 实际处理请求的服务。对这种服务的引用可以在 jndi 服务器中查找到。\n\n * context / 初始的 context - jndi context 带有对要查找的服务的引用。\n\n * 服务定位器（service locator） - 服务定位器是通过 jndi 查找和缓存服务来获取服务的单点接触。\n\n * 缓存（cache） - 缓存存储服务的引用，以便复用它们。\n\n * 客户端（client） - client 是通过 servicelocator 调用服务的对象。\n\n',charsets:{cjk:!0}}],themeConfig:{nav:[{text:"首页",link:"/"},{text:"文档翻译",items:[{text:"Spring Framwork",items:[{text:"Spring Core",link:"/pages/spring/core/"}]},{text:"RabbitMQ",items:[{text:"AMQP0-9-1模型",link:"/pages/rabbitMQ/AMQP0-9-1/"}]}]},{text:"开发指南",items:[{text:"VsCode使用技巧",link:"/pages/dev/vscode/"},{text:"IDEA使用技巧",link:"/pages/dev/idea/"}]},{text:"读书笔记",items:[{text:"Java8实战",link:"/pages/note/java8InAction/"}]}],sidebarDepth:2,logo:"/assets/favicon.ico",repo:"cheysen/ccc-docs",searchMaxSuggestions:10,lastUpdated:"上次更新",sidebar:{"/01.文档翻译/":[{title:"Spring Framework",collapsable:!1,children:[["01.Spring Framework/01.core.md","Spring Core","/pages/spring/core/"]]},{title:"RabbitMQ",collapsable:!1,children:[["02.RabbitMQ/01.AMQP0-9-1模型.md","AMQP0-9-1模型","/pages/rabbitMQ/AMQP0-9-1/"]]}],catalogue:{},"/02.开发指南/":[["01.idea使用技巧.md","idea使用技巧","/pages/dev/idea/"],["02.vscode使用技巧.md","vscode使用技巧","/pages/dev/vscode/"]],"/03.读书笔记/":[["01.Java8实战.md","Java8实战","/pages/note/java8InAction/"]]},updateBar:{showToArticle:!1},category:!1,tag:!1,author:{name:"cheysen"},social:{icons:[{iconClass:"icon-youjian",title:"发邮件",link:"mailto:1457516535@qq.com"},{iconClass:"icon-github",title:"GitHub",link:"https://github.com/cheysen"},{iconClass:"icon-erji",title:"听音乐"}]},footer:{createYear:2020,copyrightInfo:"cheysen | MIT License"},htmlModules:{}}},cc=(t(365),t(150),t(206),t(138),t(216)),lc=t(217),pc=(t(371),t(231),t(42));var uc={computed:{$filterPosts:function(){return this.$site.pages.filter((function(n){var e=n.frontmatter,t=e.pageComponent,r=e.article,a=e.home;return!(t||!1===r||!0===a)}))},$sortPosts:function(){return(n=this.$filterPosts).sort((function(n,e){var t=n.frontmatter.sticky,r=e.frontmatter.sticky;return t&&r?t==r?Object(pc.a)(n,e):t-r:t&&!r?-1:!t&&r?1:Object(pc.a)(n,e)})),n;var n},$sortPostsByDate:function(){return(n=this.$filterPosts).sort((function(n,e){return Object(pc.a)(n,e)})),n;var n},$groupPosts:function(){return function(n){for(var e={},t={},r=function(r,a){var o=n[r].frontmatter,i=o.categories,s=o.tags;"array"===Object(pc.n)(i)&&i.forEach((function(t){t&&(e[t]||(e[t]=[]),e[t].push(n[r]))})),"array"===Object(pc.n)(s)&&s.forEach((function(e){e&&(t[e]||(t[e]=[]),t[e].push(n[r]))}))},a=0,o=n.length;a<o;a++)r(a);return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags:function(){return function(n){var e=[],t=[];for(var r in n.categories)e.push({key:r,length:n.categories[r].length});for(var a in n.tags)t.push({key:a,length:n.tags[a].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Ia.component(cc.default),Ia.component(lc.default);function fc(n){return n.toString().padStart(2,"0")}t(375);Ia.component("Badge",(function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,480))})),Ia.component("CodeBlock",(function(){return Promise.resolve().then(t.bind(null,216))})),Ia.component("CodeGroup",(function(){return Promise.resolve().then(t.bind(null,217))}));t(376);var dc=[{},function(n){var e=n.Vue,t=(n.options,n.router,n.siteData);t.pages.map((function(n){var e=n.frontmatter,r=e.date,a=e.author;"string"==typeof r&&"Z"===r.charAt(r.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return"".concat(n.getUTCFullYear(),"-").concat(fc(n.getUTCMonth()+1),"-").concat(fc(n.getUTCDate())," ").concat(fc(n.getUTCHours()),":").concat(fc(n.getUTCMinutes()),":").concat(fc(n.getUTCSeconds()))}(r)),a?n.author=a:t.themeConfig.author&&(n.author=t.themeConfig.author)})),e.mixin(uc)},{},function(n){n.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},{},function(n){var e=n.router;"undefined"!=typeof window&&(window._hmt=window._hmt||[],function(){var n=document.createElement("script");n.src="https://hm.baidu.com/hm.js?01293bffa6c3962016c08ba685c79d78";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}(),e.afterEach((function(n){_hmt.push(["_trackPageview",n.fullPath])})))}],mc=[];t(209);function hc(n,e){return(hc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}t(210),t(211);function bc(n){return(bc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function gc(n,e){if(e&&("object"===Ai(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function vc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=bc(n);if(e){var a=bc(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return gc(this,t)}}var yc=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&hc(n,e)}(t,n);var e=vc(t);function t(){return ls(this,t),e.apply(this,arguments)}return us(t)}(function(){function n(){ls(this,n),this.store=new Ia({data:{state:{}}})}return us(n,[{key:"$get",value:function(n){return this.store.state[n]}},{key:"$set",value:function(n,e){Ia.set(this.store.state,n,e)}},{key:"$emit",value:function(){var n;(n=this.store).$emit.apply(n,arguments)}},{key:"$on",value:function(){var n;(n=this.store).$on.apply(n,arguments)}}]),n}());Object.assign(yc.prototype,{getPageAsyncComponent:Ni,getLayoutAsyncComponent:Ui,getAsyncComponent:Ji,getVueComponent:Xi});var xc={install:function(n){var e=new yc;n.$vuepress=e,n.prototype.$vuepress=e}};function wc(n){n.beforeEach((function(e,t,r){if(Sc(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){var a=e.path.replace(/\/$/,"")+".html";Sc(n,a)?r(a):r()}else r();else{var o=e.path+"/",i=e.path+".html";Sc(n,i)?r(i):Sc(n,o)?r(o):r()}}))}function Sc(n,e){var t=e.toLowerCase();return n.options.routes.some((function(n){return n.path.toLowerCase()===t}))}var _c={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(n){var e=this.pageKey||this.$parent.$page.key;return Hi("pageKey",e),Ia.component(e)||Ia.component(e,Ni(e)),Ia.component(e)?n(e):n("")}},kc={functional:!0,props:{slotKey:String,required:!0},render:function(n,e){var t=e.props,r=e.slots;return n("div",{class:["content__".concat(t.slotKey)]},r()[t.slotKey])}},Cc={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Ac=(t(377),t(378),Object(ac.a)(Cc,(function(){var n=this.$createElement,e=this._self._c||n;return e("span",[e("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[e("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),e("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),e("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function jc(){return(jc=Object(r.a)(regeneratorRuntime.mark((function n(e){var t,r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:sc.routerBase||sc.base,wc(r=new ki({base:t,mode:"history",fallback:!1,routes:ic,scrollBehavior:function(n,e,t){return t||(n.hash?!Ia.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})}})),a={},n.prev=4,n.next=7,Promise.all(dc.filter((function(n){return"function"==typeof n})).map((function(n){return n({Vue:Ia,options:a,router:r,siteData:sc,isServer:e})})));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.error(n.t0);case 12:return o=new Ia(Object.assign(a,{router:r,render:function(n){return n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},mc.map((function(e){return n(e)})))])}})),n.abrupt("return",{app:o,router:r});case 14:case"end":return n.stop()}}),n,null,[[4,9]])})))).apply(this,arguments)}Ia.config.productionTip=!1,Ia.use(ki),Ia.use(xc),Ia.mixin(function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ia;Ci(e),t.$vuepress.$set("siteData",e);var r=n(t.$vuepress.$get("siteData")),a=new r,o=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(a)),i={};return Object.keys(o).reduce((function(n,e){return e.startsWith("$")&&(n[e]=o[e].get),n}),i),{computed:i}}((function(n){return function(){function e(){ls(this,e)}return us(e,[{key:"setPage",value:function(n){this.__page=n}},{key:"$site",get:function(){return n}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var n,e,t=this.$site.locales,r=void 0===t?{}:t;for(var a in r)"/"===a?e=r[a]:0===this.$page.path.indexOf(a)&&(n=r[a]);return n||e||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var n=this.$page.frontmatter.canonicalUrl;return"string"==typeof n&&n}},{key:"$title",get:function(){var n=this.$page,e=this.$page.frontmatter.metaTitle;if("string"==typeof e)return e;var t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}},{key:"$description",get:function(){var n=function(n){if(n){var e=n.filter((function(n){return"description"===n.name}))[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),e}()}),sc)),Ia.component("Content",_c),Ia.component("ContentSlotsDistributor",kc),Ia.component("OutboundLink",Ac),Ia.component("ClientOnly",{functional:!0,render:function(n,e){var t=e.parent,r=e.children;if(t._isMounted)return r;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),Ia.component("Layout",Ui("Layout")),Ia.component("NotFound",Ui("NotFound")),Ia.prototype.$withBase=function(n){var e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.2",hash:"24c931b"},function(n){return jc.apply(this,arguments)}(!1).then((function(n){var e=n.app;n.router.onReady((function(){e.$mount("#app")}))}))}]);